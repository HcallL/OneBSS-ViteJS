<b-modal
    id="tracuu-kc-toanha"
    size="xl"
    no-close-on-backdrop
    hide-footer
    hide-header
    hide-header-close
    body-class="modal-body p-0"
    @hidden="close"
    @show="handleShowModal"
>
    <div class="modal-content popup-box">
        <div class="popup-header">
            <div class="title">Tra cứu thông tin kết cuối</div>
            <div
                class="close -ap icon-close"
                data-dismiss="modal"
                @click="close">
            </div>
        </div>
        <div class="list-actions-top">
            <ul class="list">
                <li>
                    <a href="javascript:void(0)" @click="onTimKiem" title="Tìm kiếm">
                        <span class="icon one-search"></span>Tìm kiếm
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)" @click="onXuatExcel" title="Xuất Excel">
                        <span class="icon one-xlsx"></span>Xuất Excel
                    </a>
                </li>
            </ul>
        </div>
        <div class="popup-body">
            <div class="box-form">
                <div class="legend-title">Thông tin tìm kiếm</div>
                <div class="row">
                    <div class="info-row">
                        <div class="key w130">Dự án</div>
                        <div class="value">
                            <div class="select-custom">
                                <ComboboxGrid
                                    :columns="[
                                        { fieldName: 'ma_duan', headerText: '' },
                                        { fieldName: 'ten_duan', headerText: '' }
                                    ]"
                                    :dataSource="cbo_DuAn.items"
                                    :allowPaging="false"
                                    :enablePagingServer="false"
                                    :gridPanelDataHeight="'200px'"
                                    textField="ten_duan"
                                    valueField="duan_id"
                                    ref="cboDuAn"
                                    :enabledSelectFirstRow="false"
                                    @selectedChanged="duAnSelected"
                                    v-model='cbo_DuAn.selected'
                                    :value='cbo_DuAn.selected'
                                >
                                </ComboboxGrid>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Toà nhà</div>
                        <div class="value">
                            <div class="select-custom">
                                <ComboboxGrid
                                    :columns="[
                                        { fieldName: 'ma_toanha', headerText: '' },
                                        { fieldName: 'ten_toanha', headerText: '' }
                                    ]"
                                    :dataSource="cbo_ToaNha.items"
                                    :allowPaging="false"
                                    :enablePagingServer="false"
                                    :gridPanelDataHeight="'200px'"
                                    textField="ten_toanha"
                                    valueField="toanha_id"
                                    ref="cboToaNha"
                                    :enabledSelectFirstRow="false"
                                    @selectedChanged="toaNhaSelected"
                                    v-model='cbo_ToaNha.selected'
                                    :value='cbo_ToaNha.selected'
                                >
                                </ComboboxGrid>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-form">
                <div class="legend-title">Danh sách</div>
                <DataGrid
                    v-bind:columns="[
                        {fieldName: 'ketcuoi_id', headerText: 'KETCUOI_ID', allowFiltering: true},
                        {fieldName: 'mã kc', headerText: 'Mã KC', allowFiltering: true},
                        {fieldName: 'tên kc', headerText: 'Tên KC', allowFiltering: true},
                        {fieldName: 'ký hiệu', headerText: 'Ký hiệu', allowFiltering: true},
                        {fieldName: 'địa chỉ', headerText: 'Địa chỉ', allowFiltering: true},
                        {fieldName: 'phanloaikc_id', headerText: 'PHANLOAIKC_ID', allowFiltering: true},
                        {fieldName: 'phân loại', headerText: 'Phân loại', allowFiltering: true},
                        {fieldName: 'loại kc', headerText: 'Loại KC', allowFiltering: true},
                        {fieldName: 'toanha_id', headerText: 'TOANHA_ID', allowFiltering: true},
                        {fieldName: 'mã tòa nhà', headerText: 'Mã tòa nhà', allowFiltering: true},
                        {fieldName: 'tên tòa nhà', headerText: 'Tên tòa nhà', allowFiltering: true},
                        {fieldName: 'duan_id', headerText: 'DUAN_ID', allowFiltering: true},
                        {fieldName: 'mã dự án', headerText: 'Mã dự án', allowFiltering: true},
                        {fieldName: 'tên dự án', headerText: 'Tên dự án', allowFiltering: true},
                    ]"
                    :dataSource="dsThongTinKC"
                    :enable-paging-server="false"
                    :allow-paging="true"
                    :showFilter="true"
                    :allowExcelExport="true"
                    ref="thongTinKCToaNhaGrid"
                >
                </DataGrid>
            </div>
        </div>
    </div>
</b-modal>
