<div class="main-wrapper">
    <breadcrumb :header="header" />

    <div class="list-actions-top">
        <ul class="list">
           
            <li>
                <a href="#" @click.prevent="btnLayTT">
                    <span class="icon one-file-attach"></span>Lấy TT
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnNhapMoi" :class="{disabled: !isNhapMoi}">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnCapNhat" :class="{disabled: !isCapNhat}">
                    <span class="icon one-save"></span>Cập nhật
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnHuyBo" :class="{disabled: !isHuyBo}">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Hủy bỏ
                </a>
            </li>
           
            <li>
                <a href="#" @click.prevent="btnXoaPhieu" :class="{disabled: !isHuyBo}">
                    <span class="icon one-trash"></span>Xóa phiếu
                </a>
            </li>
            
            <li>
                <a href="#">
                    <span class="icon one-book1"></span>Hướng dẫn
                </a>
            </li>
            

        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin thuê bao đăng ký gói đa dịch vụ</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã TB <span class="red">*</span></div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <input  type="text"  :class="{ 'is-invalid': $v.MaTB.$error }" class="form-control highlight" v-model="MaTB" v-on:keyup.enter="onEnter" ref="MaTB">
                                        <span class="icon nc-icon-outline ui-1_zoom"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Dịch vụ </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select name="" id="" class="form-control" v-model="listbox.dichvu.value.DICHVUVT_ID" disabled>
                                            <option  v-for="dichvu in listbox.dichvu.list" v-bind:value="dichvu.DICHVUVT_ID">{{ dichvu.TEN_DVVT }}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên thuê bao</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="TenTB" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Loại hình</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="LoaiTB" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Địa chỉ LĐ</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="DiaChi" disabled> 
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Ghi chú</div>
                        <div class="value">
                            <textarea name="" class="form-control" style="height: 100px;resize: none;" v-model="GhiChu" ref="Ghichu" ></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="col-sm-6 col-12">
                    <div class="info-row">
                        <div class="key w90">Công văn <span class="red"></span></div>
                        <div class="value">
                            <div class="select-custom">
                                <select name="" id="" class="form-control">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Gói đa DV  <span class="red">*</span></div>
                        <div class="value">
                            <div class="select-custom" :class="{ 'is-invalid': $v.listbox.goidadichvu.id.$error }"> <!--  -->
                                <SelectExt :options="listbox.goidadichvu.list"  v-model="listbox.goidadichvu.value.id" @change="goidadvchange"> 
                                    <option disabled value="0">Select one</option> 
                                </SelectExt> 
                            </div>
                        </div>
                    </div>
                  
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày tạo gói</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <flat-pickr class="form-control" :config="dateconfig" v-model="ngaytaogois" disabled/>
                                        <span class="icon one-calendar"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Tiền </div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator=","
                                        v-model="tien" :readonly="true" placeholder="0" output-type="Number">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Thông tin gói </div>
                        <div class="value">
                            <textarea name="" class="form-control" style="height: 60px;resize: none;" v-model="thongtingoi" :readonly="true"></textarea>
                        </div>
                    </div>
                  
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">ĐK từ ngày <span class="red">*</span></div>
                                 <div class="value">
                                    <div class="input-icon-right" :class="{ 'is-invalid': $v.DK_tungays.$error }" >
                                        <flat-pickr class="form-control" :config="dateconfig" v-model="DK_tungays"  :disabled="!isDKTuNgay" />  
                                        <span class="icon one-calendar"></span>
                                    </div>
                                </div> 
                            </div>
                        </div>
                        
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Đến <span class="red">*</span></div>
                                <div class="value">
                                    <div class="input-icon-right" :class="{ 'is-invalid': $v.DK_denngays.$error }">
                                        <flat-pickr class="form-control"  :config="dateconfig" v-model="DK_denngays" :disabled="!isDKDenNgay"/>
                                        <span class="icon one-calendar"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">
                <div class="pull-left">
                    Danh sách thuê bao đăng ký gói đa dịch vụ
                </div>
                <div class="pull-right">
                    <button class="btn btn-main pad4" @click ="btnExportExcel" title="Xuất excel">
                        <span class="one-excel-outline lh14"></span>
                    </button>
                    <button class="btn btn-main pad4" @click="btnRefreshClick" title="Làm mới">
                        <span class="nc-icon-glyph arrows-1_refresh-69 lh14"></span>
                    </button>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="row">
                <div class="col-sm-3 col-12">
                    <div class="info-row">
                        <div class="key w30 nowrap">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="timtheongay" @click="getThueBao">
                                <span class="name">Từ ngày</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="input-icon-right">
                                <flat-pickr class="form-control" :config="dateconfig" v-model="tungay" :disabled="!isCachTim"/>
                                <span class="icon one-calendar"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row">
                        <div class="key w30 nowrap">
                            Đến
                        </div>
                        <div class="value">
                            <div class="input-icon-right">
                                <flat-pickr class="form-control" :config="dateconfig" v-model="denngay" :disabled="!isCachTim"/>
                                <span class="icon one-calendar"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row">
                        <div class="key w30 nowrap">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="timall" @click="getThueBao">
                                <span class="name">Lấy toàn bộ</span>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="table-content">
                <table class="table-result table-gachle table-filter">
                   <tr>
                       <td>
                        <div>
                              <DataGrid
                                v-bind:columns="[                                    
                                {fieldName: 'ma_tb', headerText: 'Mã TB', allowFiltering: true},  
                                {fieldName: 'loai_tb', headerText: 'Loại hình', allowFiltering: true},
                                {fieldName: 'ten_goi', headerText: 'Tên gói', allowFiltering: true , allowHtml : true},  
                                {fieldName: 'tungay', headerText: 'Từ ngày', allowFiltering: true , allowHtml : true},                                        
                                {fieldName: 'denngay', headerText: 'Đến ngày', allowFiltering: true , allowHtml : true},                                        
                                {fieldName: 'nguoi_cn', headerText: 'Người CN', allowFiltering: true , allowHtml : true},                                        
                                {fieldName: 'ngay_cn', headerText: 'Ngày CN', allowFiltering: true , allowHtml : true},                                        
                                {fieldName: 'ghichu', headerText: 'Ghi chú', allowFiltering: true , allowHtml : true},                                        
                                ]"                    
                                v-bind:dataSource="listbox.ds_thuebao.list"
                                :enable-paging-server="false"                                        
                                :allowPaging="true"
                                :showFilter="true"
                                @selectedRowChanged="gridChanged"
                                >
                            </DataGrid>  
                        </div>
                       </td>
                   </tr>
                </table>
            </div>
          
        </div>
    </div>
   

</div>