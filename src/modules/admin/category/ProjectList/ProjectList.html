<div class="main-wrapper">
    <div class="breadcrumb-top">
        <div class="main-title">Danh mục dự án</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item"><a href="#">Lập hợp đồng</a></li>
            <li class="breadcrumb-item active">Lắp đặt mới</li>
        </ul>
    </div>
    <div class="list-actions-top">
        <ul class="list">
           
            <li>
                <a href="#" @click.prevent="btnLayTT">
                    <span class="icon one-file-attach"></span>Lấy TT
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnNhapMoi" :class="{disabled: !isNhapMoi}">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>
            
            <li>
                <a href="#" @click.prevent="btnGhiLai" :class="{disabled: !isGhiLai}">
                    <span class="icon one-save"></span>Ghi lại
                </a>
            </li>
            
            <li>
                <a href="#" @click.prevent="btnHuy" :class="{disabled: !isHuy}">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Hủy
                </a>
            </li>
            
            <li>
                <a href="#" @click.prevent="btnXoa" :class="{disabled: !isXoa}">
                    <span class="icon one-trash"></span>Xóa
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnTienTrinhDA">
                    <span class="icon one-clipart-edit"></span>Tiến trình dự án
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin dự án</div>
            <div class="grid-stack-box">
                <div class="box-col box-form" id="boxLeft" style="width: calc(70% - 8px);">
                    <div class="row">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-12">
                                    <div class="info-row">
                                        <div class="key w120">Chủ đầu tư <span class="red">(*)</span></div>
                                        <div class="value">
                                            <div class="select-custom" ref="chudautu">
                                                <SelectExt :options="listbox.ChuDauTu.list" v-model="listbox.ChuDauTu.value.chudtu_id" ref="chudautu" @change="ChuDauTuChanged"> 
                                                    <option disabled value="0">Select one</option> 
                                                </SelectExt> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>    

                    <div class="row">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Mã dự án</div>
                                        <div class="value">
                                            <input type="text" v-model="MaDA" ref="MaDA" class="form-control" disabled>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w130">Tên dự án <span class="red">(*)</span></div>
                                        <div class="value">
                                            <input type="text" v-model="TenDA" ref="TenDA" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="row">
                              <!--   <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Trạng thái</div>
                                        <SelectExt :options="listbox.dsTrangThai.list" v-model="listbox.dsTrangThai.value.ttda_id" @change=""> 
                                            <option disabled value="0">Select one</option> 
                                        </SelectExt> 
                                    </div>
                                </div> -->
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Trạng thái</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <SelectExt :options="listbox.dsTrangThai.list" v-model="listbox.dsTrangThai.value.ttda_id" > 
                                                    <option disabled value="0">Select one</option> 
                                                </SelectExt> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w130">Người cung cấp TT</div>
                                        <div class="value">
                                            <input type="text" v-model="NguoiCungCap" ref="NguoiCungCap" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Ngày triển khai</div>
                                        <div class="value">
                                            <div class="input-icon-right">
                                                <date-picker input-class="form-control" :format="dateFormat" ref="NgayTK" :value-type="'format'" v-model="NgayTrienKhai"></date-picker> 
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w130">Ngày hoàn thành</div>
                                        <div class="value">
                                            <div class="input-icon-right">
                                                <date-picker input-class="form-control" :format="dateFormat" ref="NgayHT" :value-type="'format'" v-model="NgayHoanThanh"  ></date-picker> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="gutter gutter-horizontal" style="width: 16px;"></div><div class="box-col box-form" id="boxRight" style="width: calc(30% - 8px);">
                    <div class="row">
                        <div class="col-12">
                            <div class="info-row">
                                <div class="key w120">Trung tâm VT<span class="red">(*)</span></div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt :options="listbox.TrungTamVT.list" v-model="listbox.TrungTamVT.value.donvi_id" ref="trungtamvt" @change="TrungTamVTChanged"> 
                                            <option disabled value="0">Select one</option> 
                                        </SelectExt> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="info-row">
                                <div class="key">Địa chỉ</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" v-b-modal.popupDiaChiTB>
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <ModalChonDiaChi modalId="popupDiaChiTB" :data="diachiTB" @xacnhan="getDiaChiTB"/>
                                        
                                        <bss-error-marker :has-error="$v.diachiTB.DIACHI.$error">
                                            <input type="text" v-model="$v.diachiTB.DIACHI.$model" class="form-control" required title="Bạn chưa nhập địa chỉ thuê bao">
                                        </bss-error-marker>   
                                    </div>
                                </div>
                            </div>  
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="info-row">
                                <div class="key w120">Hình thức hợp tác</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt :options="listbox.HinhThucHT.list" v-model="listbox.HinhThucHT.value.htht_id"> 
                                            <option disabled value="0">Select one</option> 
                                        </SelectExt> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="info-row">
                                <div class="key w120">Ghi chú</div>
                                <div class="value">
                                    <textarea name="" v-model="GhiChu" ref="GhiChu" class="form-control" style="height: 50px;resize: none;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách dự án</div>
            <div class="table-content">
              <DataGrid 
                v-bind:columns="listbox.ds_DuAn.header"                    
                v-bind:dataSource="listbox.ds_DuAn.list"
                :enable-paging-server="false"                                        
                :allowPaging="true"
                :showFilter="true"
                :showColumnCheckbox="false"
                ref="gridCtr"
                @rowClicked = "rowClicked" 
                @selectedRowChanged="gridChanged"
                >
            </DataGrid>   
           <!--  <gridview ref ="grid"
                v-bind:columns="listbox.ds_DuAn.header"                    
                v-bind:dataSource="listbox.ds_DuAn.list"
                :enable-paging-server="false"                                        
                :allowPaging="true"
                :showFilter="true"
                :showColumnCheckbox="false"
                @selectedRowChanged="gridChanged"
                @rowClicked="rowClicked" 
                >
            </gridview>  -->
        
            </div>
          <!--   @selectedRowChanged="gridChanged" -->
        </div>
    </div>

    <b-modal id="popupComponents" size="xl" 
    hide-footer 
    :title="popupTitle"
    body-class="modal-body p-0"> 
        <component :is="popupComponent" ref="popupComponent" :dulieu="popupComponentData" isPopup="true" @form-close="popupClosed" ></component>
    </b-modal>
   
   

    

</div>