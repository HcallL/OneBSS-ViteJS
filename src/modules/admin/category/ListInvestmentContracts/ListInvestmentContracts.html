<div>
    <div class="breadcrumb-top">
        <div class="main-title">Hợp đồng đầu tư</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="/"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item">Quản lý tòa nhà</li>
            <li class="breadcrumb-item active">Hợp đồng đầu tư</li>
        </ul>
    </div>
    <div class="list-actions-top">
        <ul class="list">
           
            <li>
                <a href="#" @click.prevent="btnLayTT">
                    <span class="icon one-file-attach"></span> Lấy TT
                </a>
            </li>
          
            <li>
                <a href="#" @click.prevent="btnNhapMoi" :class="{disabled: !isNhapMoi}">
                    <span class="icon one-file-plus"></span> Nhập mới
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnGhiLai" :class="{disabled: !isGhiLai}">
                    <span class="icon one-save"></span> Ghi lại
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnHuy" :class="{disabled: !isHuy}">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span> Hủy
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnXoa" :class="{disabled: !isXoa}">
                    <span class="icon one-trash"></span> Xóa
                </a>
            </li>
            <li>
                <!-- <a href="#" @click.prevent="btnChiTiet" :class="{disabled: !isChiTiet}">
                    <span class="icon one-file-detail1"></span> Chi tiết
                </a> -->
                <a href="#" @click.prevent="btnChiTiet" :class="{disabled: !isChiTiet}">
                    <span class="icon one-file-detail1"></span> Chi tiết
                </a>
                <b-modal id="popupComponentsChiTiet" size="xl" 
                hide-footer 
                :title="popupTitle"
                body-class="modal-body p-0"> 
                    <component :is="popupComponent" ref="popupComponent" :dulieu="popupComponentData"></component> <!--v-dynamic-events="popupComponentEvents"--> 
                </b-modal>
            </li>
            <li>
                <a href="#" @click.prevent="btnTienTrinh" :class="{disabled: !isTienTrinh}">
                    <span class="icon one-tc"></span> Tiến trình
                </a>
                <b-modal id="popupComponentsTienTrinh" size="xl" 
                hide-footer 
                :title="popupTitle"
                body-class="modal-body p-0"> 
                    <component :is="popupComponent" ref="popupComponent" :dulieu="popupComponentData"></component> <!--v-dynamic-events="popupComponentEvents"--> 
                </b-modal>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin hợp đồng</div>
            <div class="grid-stack-box">
                <div class="box-col" id="boxLeft">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Mã hợp đồng</div>
                                <div class="value">
                                    <input v-model="ma_hd" type="text" disabled class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Tên hợp đồng<span class="red">(*)</span></div>
                                <div class="value">
                                    <input ref="tenHDFocus" v-model="ten_hd" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Người ký</div>
                                <div class="value">
                                    <input ref="nguoikyFocus" v-model="nguoi_ky" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Chức vụ</div>
                                <div class="value">
                                    <input ref="chucvuFocus" v-model="chuc_vu" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Ngày ký</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <k-date-picker v-model="txtNgayKy"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Số HĐ giấy</div>
                                <div class="value">
                                    <input ref="soHDGFocus" v-model="so_hd_giay" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Thời hạn</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <k-date-picker v-model="txtThoiHan"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Tiến độ</div>
                                <div class="value">
                                    <input ref="tiendoFocus" v-model="tien_do" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Ngày thanh toán</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <k-date-picker v-model="txtNgayTT"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Ngân hàng</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt placeholder="Chọn ngân hàng" v-model="cp_params.nganhang_id" :options="ds_nganhang"
							                @select="selectNganHang" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Số tài khoản</div>
                                <div class="value">
                                    <input v-model="soTaiKhoan" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Mã số thuế</div>
                                <div class="value">
                                    <input v-model="maSoThue" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">NV đổi soát</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt placeholder="Chọn NV đối soát" v-model="cp_params.nhanvien_ds_id" :options="ds_nv_doisoat"
							                @select="selectNVDoiSoat" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">NV quản lý</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt placeholder="Chọn NV quản lý" v-model="cp_params.nhanvien_ql_id" :options="ds_nv_quanly"
							                @select="getDsNVQuanLy" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">
                                    <span class="one-upload f20 text-main inline vcenter"></span>
                                    Upload File
                                </div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <input disabled v-model="ten_upFile" type="text" class="form-control">
                                        <span @click="$refs.files.click()" class="icon -ap icon-more_horiz"></span>
                                        <input hidden type="file" ref="files" id="upload-file" @change="changeFileUpload">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Download File</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <a :href="url_downfile" class="btn">
                                            <span class="one-download f20"></span>
                                        </a>
                                        <input disabled v-model="ten_dowFile" type="text" class="form-control ">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key">
                            Ghi chú
                        </div>
                        <div class="value">
                            <input ref="ghichuFocus" v-model="ghi_chu" type="text" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="box-col" id="boxRight">
                    <div class="info-row">
                        <div class="key w120">Tòa nhà <span class="red">(*)</span></div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt placeholder="Chọn tòa nhà" v-model="cp_params.toanha_id" :options="ds_toanha"
							                @select="selectToaNha" />
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Nhóm dự án <span class="red">(*)</span></div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt placeholder="Chọn nhóm DA" v-model="cp_params.nhom_da_id" :options="ds_nhom_duan"
							                @select="selectNhomDuAn" />
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Hình thức đầu tư</div>
                        <div class="value">
                            <div class="select-custom">
                                  <select v-model="selectHTDT" class="form-control">
                                    <option value="1">Trực tiếp</option>
                                    <option value="2">Gián tiếp</option>
                                  </select>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Hình thức PCDT</div>
                        <div class="value">
                            <div class="select-custom">
                                <select v-model="selectHTPCDT" class="form-control">
                                  <option value="1">Số tiền khoán</option>
                                  <option value="2">Tỷ lệ cố định</option>
                                  <option value="3">Tỷ lệ theo thị phần</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Hình thức hóa đơn</div>
                        <div class="value">
                            <div class="select-custom">
                                <select v-model="selectHTHD" class="form-control">
                                  <option value="1">Hóa đơn bán hàng</option>
                                  <option value="2">Hóa đơn GTGT</option>
                                  <option value="3">Giấy đề nghị thanh toán</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Tình trạng</div>
                        <div class="value">
                            <div class="select-custom">
                                <select v-model="selectTinhTrang" class="form-control">
                                  <option value="0">Tạm ngưng</option>
                                  <option selected value="1">Đang hoạt động</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">Tổng mức ĐT</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="tongmuc_dt"
                                    output-type="String" v-bind:max="999999999">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">TG tính HQĐT</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <k-date-picker v-model="txtTGT_HQDT"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">Thị phần tối thiểu</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="thiphan_tt"
                                    output-type="String" v-bind:max="999999999">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">APRU tối thiểu</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="apru"
                                    output-type="String" v-bind:max="999999999">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">Giá trị tài sản</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="giatri_ts"
                                    output-type="String" v-bind:max="999999999">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Tỷ lệ PCDT</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <vue-numeric class="form-control tright red" separator="," v-model="tile_pcdt"
                                            output-type="String" v-bind:max="999999999" v-bind:precision="2">
                                        </vue-numeric>
                                        <span class="icon one-calculator" @click="isCalculatorShow = !isCalculatorShow"></span>
                                        <Calculator @display="tile_pcdt = $event" :value="tile_pcdt" :is-show="isCalculatorShow" @close="isCalculatorShow = !isCalculatorShow"></Calculator>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách hợp đồng</div>
            <div class="table-content">
                <DataGrid 
                    v-bind:columns="ds_hopdong.header"                    
                    v-bind:dataSource="ds_hopdong.list"
                    :enable-paging-server="false"                                        
                    :allowPaging="true"
                    :showFilter="true"
                    :showColumnCheckbox="false"
                    ref="grid"
                    @rowClicked = "rowClicked" 
                    @selectedRowChanged="gridChanged"
                    >
                </DataGrid>
            </div>
        </div>
    </div>
</div>