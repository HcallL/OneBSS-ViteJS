<div>
    <breadcrumb :header="header"/>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="#" @click.prevent="nhapMoi" :class="{disabled: isNhapMoi}">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="ghiLai">
                    <span class="icon one-save"></span>Ghi lại
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="xoaHd">
                    <span class="icon one-trash"></span>Xoá HĐ
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="giaoPhieu">
                    <span class="icon one-file-arrow-right1"></span>Giao phiếu
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="upHoSo">
                    <span class="icon fa fa-upload"></span>Up hồ sơ
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="capNhatDv">
                    <span class="icon one-reload1"></span>Cập nhật ĐV
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="row">
            <div class="col-sm-6 col-12">
                <div class="box-form">
                    <div class="legend-title">Hợp đồng</div>
                    <div class="info-row">
                        <div class="key w110">Loại hợp đồng</div>
                        <div class="value">
                            <div class="select-custom">
                                <!-- <select name="frm.loaiHdId" id="" class="form-control">
                                    <option v-for="loaiHd in dsLoaiHd" value="loaiHd.LOAIHD_ID">{{loaiHd.TEN_LOAIHD}}</option>
                                </select> -->
                                <select2 v-model="frm.loaiHdId" class="select-custom" :options="dsLoaiHd.map(loaiHd=>({id:loaiHd.LOAIHD_ID,text:loaiHd.TEN_LOAIHD}))"></select2>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Quy trình cũ</div>
                        <div class="value">
                            <input v-model="frm.quyTrinhCu" type="text" class="form-control readonly-highlight" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Tên khách hàng</div>
                        <div class="value">
                            <input v-model="frm.tenKhachHang" type="text" class="form-control readonly-highlight" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Mã GD</div>
                        <div class="value">
                            <input v-model="frm.maGd" @keyup.enter="timKiemTheoMaGd" type="text" class="form-control highlight">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Mã TB (Cũ)</div>
                        <div class="value">
                            <div class="input-more-button -right">
                                <button class="btn" @click.prevent="frmTimKiemHDCA">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input v-model="frm.maTbCu" @keyup.enter="timKiemTheoMaTb" type="text" class="form-control highlight" value="">
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Mã TB (Mới)</div>
                        <div class="value">
                            <input v-model="frm.maTbMoi" type="text" class="form-control readonly-highlight" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Tên TB</div>
                        <div class="value">
                            <input v-model="frm.tenTb" type="text" class="form-control readonly-highlight" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Địa chỉ</div>
                        <div class="value">
                            <input v-model="frm.diaChi" type="text" class="form-control readonly-highlight" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w110">Người CN</div>
                        <div class="value">
                            <input v-model="frm.nguoiCn" type="text" class="form-control readonly-highlight" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-12">
                <div class="box-form">
                    <div class="legend-title">Thông số CA</div>
                    <div class="info-row">
                        <div class="key w130">Serial number</div>
                        <div class="value">
                            <input v-model="frm.serial" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Tên chủ thể</div>
                        <div class="value">
                            <input v-model="frm.tenChuThe" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">UserName</div>
                        <div class="value">
                            <input v-model="frm.userName" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Loại CTS</div>
                        <div class="value">
                            <input v-model="frm.loaiCts" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Hình thức sinh khoá</div>
                        <div class="value">
                            <input v-model="frm.hinhThucSinhKhoa" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Gói cước</div>
                        <div class="value">
                            <input v-model="frm.goiCuoc" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Ngày BĐ</div>
                        <div class="value">
                            <input v-model="frm.ngayBd" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Ngày KT</div>
                        <div class="value">
                            <input v-model="frm.ngayKt" type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w130">Số tháng SD</div>
                        <div class="value">
                            <input v-model="frm.soThangSd" type="text" class="form-control" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách biến động</div>
            <div class="table-content">
                <DataGrid2 v-bind:columns="dsBienDong.header" v-bind:dataSource="dsBienDong.list"
                    :enable-paging-server="false" :allowPaging="true" :showFilter="true"
                    ref="gridBienDong" :enabledSelectFirstRow="true"
                    dataKeyField="ma_tb" @selectedRowChanged="selectedRowChanged">
                </DataGrid2>
            </div>
        </div>
        <ModalTimKiemHDCA modalId="popupTimKiemHDCA" :loaiHdId="frm.loaiHdId"></ModalTimKiemHDCA>
        <ModalCapNhatDv modalId="popupCapNhatDv" :hdtbId="hdtbId"></ModalCapNhatDv>
        <!-- <ejs-dialog :enableResize='true' :visible="false" ref="HandoverTicket" :animationSettings="animationSettings"
              :header='"GIAO PHIẾU ĐIỀU HÀNH THI CÔNG"' showCloseIcon=true target=".main-wrapper" @close="onCloseGiaoPhieu">
            <HandoverTicketContent ref="HandoverTicketContent" :isPopup="true"></HandoverTicketContent>
        </ejs-dialog> -->
        <ejs-dialog :enableResize='true' :visible="false" ref="UploadEProfile" :animationSettings="animationSettings"
              :header='"UP HỒ SƠ ĐIỆN TỬ"' showCloseIcon=true target=".main-wrapper" @close="onCloseUpHs">
            <UploadEProfileContent :ma_thue_bao="frm.maTbMoi" ref="UploadEProfileContent" :isPopup="true"></UploadEProfileContent>
        </ejs-dialog>
    </div>
    <ejs-dialog
        :isModal="true"
        :enableResize="true"
        :resizeHandles="['All']"
        :visible="false"
        ref="GiaoPhieuView"
        :header='"Giao phiếu điều hành thi công"'
        showCloseIcon="true"
        target=".main-wrapper"
        width="90%"
        allowDragging="true"
        :animationSettings="giaoPhieuViewDialog.animationSettings"
        @close="GiaoPhieuView_OnClose"
        >
        <div>
            <GiaoPhieuView v-if="giaoPhieuViewDialog.isVisiable" type="modal" v-bind="giaoPhieuViewDialog.input" />
        </div>
    </ejs-dialog>
</div>