<div>
  <div class="list-actions-top">
    <ul class="list">
      <li>
      <li @click="this.btnNhapMoi" :class="{'disable-btn': isDisableBtnNhapMoi}">
        <a href="#/ecms/thong-so-port">
          <span class="icon one-file-plus"></span> Nhập mới
        </a>
      </li>
      <li>
      <li @click="this.btnCapNhat" :class="{'disable-btn': isDisableBtnCapNhat}">
        <a href="#/ecms/thong-so-port">
          <span class="icon one-reload1"></span>Cập nhật
        </a>
      </li>
      <li>
      <li @click="this.btnHuy" :class="{'disable-btn': isDisableBtnHuy}">
        <a href="#/ecms/thong-so-port">
          <span class="icon nc-icon-glyph ui-1_circle-remove"></span> Hủy
        </a>
      </li>
      <li>
      <li @click="this.btnXoa" :class="{'disable-btn': isDisableBtnXoa}">
        <a href="#/ecms/thong-so-port">
          <span class="icon one-trash"></span> Xóa
        </a>
      </li>
      <li>
        <a  href="#/ecms/thong-so-port" @click="this.btnTaoDaiPort">
          <span class="icon nc-icon-glyph ui-1_circle-add"></span> Tạo dải
        </a>
      </li>
      <li>
        <a href="javascript:void(0)" class="btn btn-action" @click ="this.btnShowVpiVci">
          <span class="icon one-vci"></span> VCI-VPI
        </a>
      </li>
      <li>
        <a  href="#/ecms/thong-so-port" @click="this.btnSinhPortOnu">
          <span class="icon one-circle-key"></span> Sinh pass
        </a>
      </li>
      <li>
        <a  href="#/ecms/thong-so-port" @click="this.btnPortLogic">
          <span class="icon one-port-logic"></span> Port logic
        </a>
      </li>
      <li>
        <a  href="#/ecms/thong-so-port" @click="this.btnPortMdf">
          <span class="icon one-usb-port"></span> Port MDF
        </a>
      </li>
      <li>
        <a  href="#/ecms/thong-so-port" @click="this.btnCapNhatTT">
          <span class="icon one-reload1"></span> Cập nhật TT
        </a>
      </li>
      <li>
        <a  href="#/ecms/thong-so-port" @click="this.btnCapNhatVcd">
          <span class="icon one-reload-next"></span> Cập nhật VDC
        </a>
      </li>
    </ul>
  </div>
  <div class="page-content">
    <div class="row">
      <div class="col-sm-7 col-12">
        <div class="row">
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="legend-title"  style="width: 49.4%;">Thông tin port</div>
              <div class="info-row">
                <div class="key w90">
                  Đơn vị QL
                </div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="dataSelected.donViQuanLy" :dataSource="dsDonViQuanLy" dataTextField="TEN_DV"
                               dataValueField="DONVI_ID" />
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w90">
                  Trạm TC
                </div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="dataSelected.tramThiCong" :dataSource="dsTramThiCong" dataTextField="TEN_DV"
                               dataValueField="DONVI_ID" />
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w90">
                  Trạm TB
                </div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="dataSelected.tramThietBi" :dataSource="dsTramTB" dataTextField="TEN_DV"
                               dataValueField="DONVI_ID" />
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w90">
                  Dslam tỉnh
                </div>
                <div class="value">
                  <div class="select-custom">
                                       <SelectExt v-model.trim="dataSelected.dslamTinh"  :dataSource="dsDsLamTinh" dataTextField="TENDSLAM"
                    dataValueField="DSLAM_ID" @change="dslamTinh_Changed" />
                    <!-- <select name="" id="" class="form-control" v-model="dataSelected.dslamTinh" @change="dslamTinhChange($event.target.selectedIndex,$event.target.value)">
                      <option v-for="(dslam, index) in dsDsLamTinh"  :value= "dslam.DSLAM_ID" >{{dslam.TENDSLAM}}</option>
                    </select> -->
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w90">
                  Bras
                </div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="dataSelected.bras" :dataSource="dsBras" dataTextField="TENBRAS"
                               dataValueField="BRAS_ID" />
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Dslam VDC
                    </div>
                    <div class="value">
                      <div class="select-custom">
                        <!--                    <bss-error-marker :has-error="$v.nhomDslamId.$error">-->

                        <!--                    </bss-error-marker>-->
                        <SelectExt v-model.trim="dataSelected.dslamVdc" :dataSource="dslamVdc" dataTextField="TENDSLAM"
                                   dataValueField="DSLAM_ID" />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Vlan Int
                    </div>
                    <div class="value">
                      <input type="number"  v-model="vlanInt"  class="form-control highlight">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      System
                    </div>
                    <div class="value">
                      <input type="text" :disabled="true"  v-model="system" class="form-control highlight">
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Port MDF
                    </div>
                    <div class="value">
                      <input type="text"  v-model="portMdf"  class="form-control highlight">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Slot
                    </div>
                    <div class="value">
                      <input type="text" v-model="slot" class="form-control red highlight"  :class="{ 'is-invalid': $v.slot.$error}">
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Port
                    </div>
                    <div class="value">
                      <input type="text" v-model="port" class="form-control highlight text-main"  :class="{ 'is-invalid': $v.port.$error}">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Rack
                    </div>
                    <div class="value">
                      <input type="text" :disabled="true" v-model="rack" class="form-control highlight">
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Shelf
                    </div>
                    <div class="value">
                      <input type="text" :disabled="true"  v-model="shelf" class="form-control highlight ">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Selfid01
                    </div>
                    <div class="value">
                      <input type="text" v-model="selfid01" :disabled="disableSelfid01" value="" class="form-control highlight">
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Selfid02
                    </div>
                    <div class="value">
                      <input type="text" v-model="selfid02" :disabled="disableSelfid02" value="" class="form-control highlight ">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Selfid03
                    </div>
                    <div class="value">
                      <input type="text" v-model="selfid03" :disabled="disableSelfid03" value="" class="form-control highlight">
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Selfid04
                    </div>
                    <div class="value">
                      <input type="text" v-model="selfid04" :disabled="disableSelfid04" value="" class="form-control highlight ">
                    </div>
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w90">
                  Ghi chú
                </div>
                <div class="value">
                  <input type="text" v-model="ghiChu" value="" class="form-control highlight ">
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="info-row">
                <div class="key w90">
                  <div class="check-action">
                    <input type="checkbox" class="check" v-model="disableCard">
                    <span class="name">Card</span>
                  </div>
                </div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="dataSelected.cardId" :disabled="!disableCard"  :dataSource="dsCard" dataTextField="TEN_CARD"
                               dataValueField="CARD_ID" />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Rack - Shelf
                    </div>
                    <div class="value">
                      <div class="select-custom">
                        <select name="" id="" class="form-control" v-model="dataSelected.rackShelfId" @change="rackShelfChange($event.target.selectedIndex)">
                          <option v-for="(rack, index) in dsRackShelf"  :value= "rack.RACK_ID" >{{rack.RACK_SHELF}}</option>
                        </select>

                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key w90">
                      Trạng thái
                    </div>
                    <div class="value">
                      <div class="select-custom">
                        <SelectExt v-model.trim="dataSelected.trangthai" :dataSource="dsTrangThaiPort"
                                   dataTextField="TRANGTHAI_PORT"
                                   dataValueField="TT_PORT_ID"/>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="legend-title mart10">Loại hình đã gắn</div>
              <div class="table-content" style="height:350px; ">
                <DataGrid v-bind:columns="[
                    {fieldName: 'LOAIHINH', headerText: 'Loại hình', allowFiltering: true},
                    {fieldName: 'DICHVU', headerText: 'dịch vụ', allowFiltering: true}
                    ]"
                          v-bind:dataSource="this.dsLoaiHinhDaGan"
                          :showFilter="true"
                          :enable-paging-server="false"
                          :allow-paging="true"
                          @selectedRowChanged="this.selectedRowChanged" ></DataGrid>
              </div>

            </div>
          </div>
        </div>
        <div class="box-move-select-table">
          <div class="box-col" style="width: 49.5%;">
            <div class="box-form">
              <div class="legend-title">VCI/VPI đã gán</div>
              <div class="table-content" style="height: 200px;">
                <DataGrid v-bind:columns="[
                    {fieldName: 'VCI',width : 70, headerText: 'VCI', allowFiltering: true},
                    {fieldName: 'VPI', headerText: 'VPI',width : 70, allowFiltering: true},
                    {fieldName: 'TRANGTHAI',width : 70, headerText: 'Trạng thái', allowFiltering: true},
                    {fieldName: 'PORT_MDF',width : 70, headerText: 'Port', allowFiltering: true}
                    ]"
                          v-bind:dataSource="this.dsVciDaGan" dataKeyField="RP_ID"
                          :showColumnCheckbox="true" :showFilter="true"
                          :enable-paging-server="false"
                          :allow-paging="true"
                          :enabledSelectFirstRow="false"
                          @selectedItemsChanged="selectVciDaGan"  @rowClicked="this.VciDaGanChange" ></DataGrid>
              </div>
            </div>
          </div>
          <div class="actions">
            <button class="btn" @click="addToDsDaGan">
              <span class="fa fa-angle-left"></span>
            </button>
            <button class="btn" @click="addAllToDsDaGan">
              <span class="fa fa-angle-double-left"></span>
            </button>
            <button class="btn" @click="addToDsChuaGan">
              <span class="fa fa-angle-right"></span>
            </button>
            <button class="btn"  @click="addAllToDsChuaGan">
              <span class="fa fa-angle-double-right"></span>
            </button>
          </div>
          <div class="box-col" style="width: calc(50% - 50px)">
            <div class="box-form">
              <div class="legend-title">VCI/VPI chưa gán</div>
              <div class="table-content" style="height: 200px;">
                <DataGrid v-bind:columns="[
                    {fieldName: 'VCI',width : 70, headerText: 'VCI', allowFiltering: true},
                    {fieldName: 'VPI',width : 70, headerText: 'VPI', allowFiltering: true},
                    {fieldName: 'TRANGTHAI',width : 70, headerText: 'Trạng thái', allowFiltering: true},
                    {fieldName: 'PORT_MDF',width : 70, headerText: 'Port', allowFiltering: true}
                    ]"
                          v-bind:dataSource="this.dsvciChuaGan" dataKeyField="VCI_VPI_ID"
                          :enable-paging-server="false"
                          :allow-paging="true"
                          :enabledSelectFirstRow="false"
                          :showColumnCheckbox="true" :showFilter="true" @selectedItemsChanged="selectVciChuaGan"  @selectedRowChanged="this.selectedRowChanged" ></DataGrid>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-5 col-12">
        <div class="box-form">
          <div class="legend-title">Danh sách Port</div>
          <div class="table-content" style="height: 730px;">
            <DataGrid v-bind:columns="[
                    {fieldName: 'SLOT',width: '70', headerText: 'Slot', allowFiltering: true, freeze: 'left', textAlign: 'right'},
                    {fieldName: 'PORT' ,width: '70', headerText: 'Port', allowFiltering: true, freeze: 'left', textAlign: 'right'},
                    {fieldName: 'SYSTEM',width: '120', headerText: 'System', allowFiltering: true, freeze: 'left'},
                    {fieldName: 'RACK',width: '70', headerText: 'Rack', allowFiltering: true},
                    {fieldName: 'SHELF',width: '70', headerText: 'Shelf', allowFiltering: true},
                    {fieldName: 'VITRI',width: '70', headerText: 'Vị trí', allowFiltering: true},
                    {fieldName: 'TEN_CARD',width: '70', headerText: 'Card', allowFiltering: true},
                    {fieldName: 'SELFID01',width: '90', headerText: 'Frame', allowFiltering: true},
                    {fieldName: 'SELFID04',width: '90', headerText: 'ONU ID', allowFiltering: true},
                    {fieldName: 'SELFID03',width: '90', headerText: 'OLT PORT', allowFiltering: true},
                    {fieldName: 'SELFID02',width: '90', headerText: 'OLT SLOT', allowFiltering: true},
                    {fieldName: 'TRANGTHAI_PORT',width: '110', headerText: 'Trạng thái', allowFiltering: true},
                    {fieldName: 'PORT_ID',width: '90', headerText: 'Port ID', allowFiltering: true},
                    {fieldName: 'PORTVL_ID',width: '70', headerText: 'PortVL ID', allowFiltering: true},
                    {fieldName: 'DSLAM_VDC',width: '70', headerText: 'Dslam Visa', allowFiltering: true},
                    {fieldName: 'DSLAM_VDC_ID',width: '70', headerText: 'Dslam Visa ID', allowFiltering: true},
                    {fieldName: 'VLAN_INT',width: '70', headerText: 'Vlant Int', allowFiltering: true}
                    ]"
                      v-bind:dataSource="this.dsPort"  dataKeyField="PORT_ID"  :showFilter="true"
                      :showColumnCheckbox="true"
                      :enable-paging-server="false"
                      :allow-paging="true"
                      :enabledSelectFirstRow="false"
                      @selectedItemsChanged="selectedPort"
                      @rowClicked= "danhSachPortChange"
                      ref = "grid_dsPort"></DataGrid>
          </div>

        </div>
      </div>
    </div>
  </div>
  <TaoDaiPort id="taodaiport" modal-class="bss-modal" size="xl" :system="system"  @hideModal="hienThiDanhSach()"  :inforPort="inforPort" />
  <modal modal-id="popupTCTTTB"  id="popupTCTTTB" :inforPort="inforPort"/>
  <PortLogic size="xl" :modalShowPortLogic="modalShowPortLogic" :dslam-id="dataSelected.dslamTinh" :tram-tbi-id="dataSelected.tramThietBi" :donvi-id="dataSelected"  @hideModal="modalShowPortLogic = !modalShowPortLogic" ref = "popupPortLogic" />
</div>
