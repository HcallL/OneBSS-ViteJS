<div >
  <div class="breadcrumb-top">
    <div class="main-title">{{labelFunctionTitle}}</div>
    <ul class="breadcrumb">
      <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
        </a></li>
      <li class="breadcrumb-item"><a href="#">Báo hỏng</a></li>
      <li class="breadcrumb-item active">{{labelFunctionTitleMenu}}</li>
    </ul>
  </div>
  <div class="list-actions-top">
    <ul class="list">
      <li>
        <a href="#" v-show="tsbtnTimKiem" v-on:click.prevent='tsbtnTimKiem_Click'>
          <span class="icon one-search"></span>Tìm kiếm
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnVatTu" v-on:click.prevent='tsbtnVatTu_Click'>
          <span class="icon one-vt"></span>{{tsbtnVatTu_Text}}
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnHenKH" v-on:click.prevent='tsbtnHenKH_Click'>
          <span class="dropdown-icon one-calendar-check"></span> Hẹn KH
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnThongTinLH" v-on:click.prevent='tsbtnThongTinLH_Click' :class="!disable_lienhe ? '' : 'disabled'">
          <span class="dropdown-icon nc-icon-glyph business_contacts"></span> Liên hệ
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbKHGoi" v-on:click.prevent='tsbKHGoi_Click'>
          <span class="icon one-phone"></span>Kh gọi
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnLSNhacViec" v-on:click.prevent='tsbtnLSNhacViec_Click'>
          <span class="icon one-clipart-1"></span>LS nhắc việc
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnNhacViec" v-on:click.prevent='tsbtnNhacViec_Click'>
          <span class="icon one-file-noti"></span>Nhắc việc
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnKhoaMoTP" v-on:click.prevent='tsbtnKhoaMoTP_Click'
          title="Khóa mở việc trả lại phiếu giao">
          <span class="icon one-file-noti"></span>Khóa/mở TP
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnTraCuuPHKH" v-on:click.prevent='tsbtnTraCuuPHKH_Click'>
          <span class="icon one-file-search"></span>Tra cứu PHKH
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnLichSuHen" v-on:click.prevent='tsbtnLichSuHen_Click'>
          <span class="icon one-file-history"></span>Lịch sử hẹn
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnTCTienTrinhBH" v-on:click.prevent='show_DSTienTrinh'>
          <span class="icon nc-icon-glyph business_chart-bar-32"></span>TC Tiến
          trình
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnCTJira" v-on:click.prevent='tsbtnCTJira_Click'>
          <span class="icon nc-icon-glyph ui-1_settings-gear-64"></span>CT phiếu
          IT360
        </a>
      </li>
      <li>
        <a href="#" v-show="tsbtnInPhieuTC" v-on:click.prevent='tsbtnInPhieuTC_Click'>
          <span class="icon one-print"></span>Xuất phiếu TC
        </a>
      </li>
      <li>
        <a href="#" v-on:click.prevent='tsbtnShowTienTrinh_Click'>
          <span class="icon one-print"></span>Tiến trình
        </a>
      </li>
    </ul>
    <!-- <div class="more dropdown">
      <a href="#" data-toggle="dropdown">
        <span class="icon -ap  icon-dots-three-vertical"></span>
      </a>
      <div class="dropdown-menu">
        <a href="#">
          <span class="dropdown-icon one-calendar-check"></span> Hẹn KH
        </a>
        <a href="#">
          <span class="dropdown-icon nc-icon-glyph business_contacts"></span>
          Liên hệ
        </a>
      </div>
    </div> -->
  </div>
  <div class="page-content">
    <div class="box-form">
      <div class="legend-title">Thông tin phiếu yêu cầu</div>
      <div class="row">
        <div class="col-sm-3 col-12">
          <div class="info-row">
            <div class="key w80">Số máy/Acc</div>
            <div class="value">
              <div class="input-more-button">
                <button class="btn" @click.prevent='ShowSearchAccount'>
                  <span class="-ap icon-more_horiz"></span>
                </button>
                <input type="text" v-model.trim="txtMaTB" ref="reftxtMaTB" class="form-control highlight fw6"
                  v-on:keyup.enter="txtMaTB_KeyPress">
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-3 col-12">
          <div class="info-row">
            <div class="key w70">Mã BH</div>
            <div class="value">
              <input type="text" v-model.trim="txtMaBH" class="form-control highlight fw6"
                v-on:keyup.enter="txtMaBH_KeyPress">
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-12">
          <div class="info-row">
            <div class="key w80">Người giao</div>
            <div class="value">
              <input type="text" v-model="txtNguoiGiao" class="form-control fw6 bold">
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-12">
          <div class="info-row">
            <div class="key w80">Ngày BH</div>
            <div class="value">
              <date-picker :format="dateFormat" :value-type="dateFormat" :time-title-format="dateFormat"
                v-model="dtpNgayBH" :type="typeFormat" :disabled-date="disabledRange">
                <template #icon-calendar>
                  <span class="icon one-calendar"></span>
                </template>
              </date-picker>

            </div>
          </div>
        </div>
        <div class="col-sm-6 col-12">
          <div class="info-row">
            <div class="key w80">Nơi nhận</div>
            <div class="value">
              <input type="text" v-model="txtNoiNhan" class="form-control  ">
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-3 col-12">
          <div class="info-row">
            <div class="key w80">Dịch vụ</div>
            <div class="value">
              <input type="text" v-model="txtDichVuVT" class="form-control ">
            </div>
          </div>
        </div>
        <div class="col-sm-3 col-12">
          <div class="info-row">
            <div class="key w70">Loại hình</div>
            <div class="value">
              <input type="text" v-model="txtLoaiTB" class="form-control ">
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-12">
          <div class="info-row">
            <div class="key w80">Ghi chú</div>
            <div class="value">
              <input type="text" v-model="txtGhiChu" class="form-control">
            </div>
          </div>
        </div>
      </div>
      <div class="legend-title mart20">Lịch sử báo hỏng</div>
      <div class="table-content lichSuBaoHong">
        <DataGridC v-bind:columns="gridDanhSach.headers" :enabledSelectFirstRow="false"
          v-bind:dataSource="gridDanhSach.data" :showColumnCheckbox="false" :enable-paging-server="false"
          :allowPaging="true" :showFilter="true" ref="gridDanhSach" @rowClicked="gridviewDanhSach_RowClicked"
          @dataBound="gridDanhSach_dataBound" @rowDataBound="gridDanhSach_RowDataBound" @detailDataBound="gridDanhSach_detailDataBound">
        </DataGridC>
      </div>
      <div class="box-form">
        <div class="legend-title">Chi tiết điều hành xử lý sự cố</div>
        <div class="table-content">
          <DataGrid v-bind:columns="gridChitiet.headers" :enabledSelectFirstRow="false"
            v-bind:dataSource="gridChitiet.data" @rowDoubleClicked="gridChitiet_DoubleClick"
            @selectedItemsChanged="gridChitiet_selectedItemsChanged" @rowClicked="gridChitiet_FocusedRowChanged"
            :showColumnCheckbox="false" :enable-paging-server="false" :allowPaging="true" :showFilter="true"
            ref="gridChitiet">
          </DataGrid>
        </div>
      </div>
    </div>
  </div>
  <!-- <b-modal id='popupComponents' size='xl' hide-footer hide-header hide-header-close body-class='modal-body p-0'></b-modal> -->
  <b-modal id='popupComponentBHs' size='xl' hide-footer hide-header body-class='modal-body p-0'>
    <component :is='popupComponent' ref='generalPopup' :dulieu='popupComponentData' v-bind='popupComponentAttr'
      isPopup='true' v-on='popupComponentEvts'></component>
    <!--v-dynamic-events="popupComponentEvents"-->
  </b-modal>
  <!-- <ejs-dialog :enableResize='true' :visible='false' ref='thongtinlienheDialog' :position='position'
  :header='"Thông tin liên hệ"' showCloseIcon='true' :target='targetTop' width='90%'>
  <thongTinLienHe ref='thongTinLienHePopUp' :hdkh_id='HdKhIdInt' :khachhang_id='KhachHangIdInt' />
</ejs-dialog> -->
  <frmLichSuHenBH ref="reffrmLichSuHenBH"></frmLichSuHenBH>
  <capNhatTienTrinh ref="refCapNhatTienTrinh"></capNhatTienTrinh>
  <frmThayDoiTTBH ref="reffrmThayDoiTTBH" :params="modelInput" @closefrmThayDoiTTBH="closefrmThayDoiTTBH">
  </frmThayDoiTTBH>
  <frmTraCuuVatTuHDTB ref="reffrmTraCuuVatTuHDTB"></frmTraCuuVatTuHDTB>
  <ejs-dialog :enableResize='true' :visible="false" ref="reffrmVatTuBaoHong"
    :header='"Cấp vật tư/thiết bị cho thuê bao"' showCloseIcon=false target="#app .main-wrapper" width='60%' height="800">
    <frmVatTuBaoHong ref="ppVatTuBaoHong" :phieu_id="phieu_id" :baohong_id="baohong_id" :thuebao_id="thuebao_id" />
  </ejs-dialog>
  <frmPhanAnhBH ref="dialogfrmPhanAnhBH" :params="frmPhanAnhBHInput" @closefrmThayDoiTTBH="closefrmThayDoiTTBH"></frmPhanAnhBH>
  <frmTraCuuNhacViec ref="dialogfrmTracuu_NhacViec"></frmTraCuuNhacViec>
  <frmNhacViecBH ref="dialogfrmNhacViecBH" :params="frmNhacViecBHInput"></frmNhacViecBH>
  <!-- <frmNhacViecBH2 ref="dialogfrmNhacViecBH2" :show="showdialogfrmNhacViecBH"></frmNhacViecBH2> -->
  <ejs-dialog :enableResize='true' :visible="false" ref="reffrmTraCuuPhieuKN" :position="position" :animationSettings="animationSettings"
    :header='"Tra cứu chi tiết xử lý khiếu nại"' showCloseIcon="true" target="#app .main-wrapper" width='99%' >
    <div class="popupKN">
      <frmTraCuuPhieuKN ref="dialogObjTraCuuPhieuKN"></frmTraCuuPhieuKN>
    </div>
  </ejs-dialog>
  <frmTraCuuPhieuJira ref="reffrmTraCuuPhieuJira" :params="frmTraCuuPhieuJiraInput"></frmTraCuuPhieuJira>
  <frmHenKH ref="reffrmHenKH" :params="frmHenKHInput" @closeHenKH="closeHenKH"></frmHenKH>
  <frmHenKHV2 ref="reffrmHenKHV2" :params="frmHenKHV2Input" @closeHenKH="closeHenKH"></frmHenKHV2>
  <frmKhoaMoTP ref="reffrmKhoaMoTP" :params="frmKhoaMoTPInput" @closeDialog="closeHenKH"></frmKhoaMoTP>
  <XemBaoCao ref="XemBaoCao" ma_bc="PHIEU_BH" :ds-gia-tri="dsGiaTri"></XemBaoCao>
  <frmTraCuuTBBaoHong ref="refTraCuuTBBaoHong" :params="frmTraCuuTBBaoHongInput" @closeDialog="closeTraCuu"></frmTraCuuTBBaoHong>
  <frmTraCuuTB ref="refTraCuuTB"  :dsThueBao="dsThueBao"  @closeDialog="closeTraCuuTB"></frmTraCuuTB>
  <frmNhanVienTH ref="frmNhanVienTH" />

  <ejs-dialog
    :isModal="true"
    :enableResize="true"
    :resizeHandles="['All']"
    :visible="false"
    ref="dlg_DanhSachTienTrinh"
    :header='"Danh sách tiến trình"'
    showCloseIcon="true"
    target=".main-wrapper"
    width="60%"
    allowDragging="true"
    :animationSettings="animationSettings"
    @close='close_DSTienTrinh'
  >
    <frmDanhSachTienTrinh v-if="show_ppdstientrinh" :params="dataFrmTienTRinh"/>
  </ejs-dialog>

  <ejs-dialog :enableResize='true' :visible="false" ref="generalDialog" :animationSettings="animationSettings"
              :header='modalTitle' showCloseIcon=true target="#app .main-wrapper" :position='position' width='100%'
  >
    <keep-alive>
      <div class="popupComponentPayment">
        <component :is="userComponentModule2"  ref='dialogComponent'   v-bind="popupComponentAttr2" v-on="popupComponentEvts2" />
      </div>
    </keep-alive>
  </ejs-dialog>

  <ejs-dialog
    :isModal="true"
    :enableResize="true"
    :resizeHandles="['All']"
    :visible="false"
    ref="dlg_DanhSachTienTrinhBH"
    :header='"Danh sách tiến trình"'
    showCloseIcon="true"
    target=".main-wrapper"
    width="60%"
    allowDragging="true"
    :animationSettings="animationSettings"
    @close='close_DSTienTrinh'
  >
    <div>
      <popdstientrinh v-if="show_popdstientrinhBH" :BaoHongId="baohong_id"/>
    </div>
  </ejs-dialog>

</div>
