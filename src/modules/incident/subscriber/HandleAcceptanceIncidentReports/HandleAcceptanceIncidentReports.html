<div class="main-wrapper">
    <breadcrumb :header="header" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a @click="tsbtnLayTTMoi_Click">
                    <span class="icon one-file-attach1" title="Lấy thông tin mới"></span>Lấy TT
                </a>
            </li>
            <li :style="!visible.tsbtnCapNhat ? 'display: none' : ''">
                <a @click="tsbtnCapNhatKQ_Click">
                    <span class="icon one-reload1" title="Cập nhật."></span>Cập nhật
                </a>
            </li>
            <li :style="!visible.tsbtnCapNhatNhieuPhieu ? 'display: none' : ''">
                <a @click="tsbtnCapNhatNhieuPhieu_Click">
                    <span class="icon one-reload1" title="Cập nhật."></span>Cập nhật
                </a>
            </li>
            <li :style="!visible.tsbtnGiaoViecNhieu ? 'display: none' : ''">
                <a @click="cmtGiaoViecNhieu_Click">
                    <span class="icon one-file-edit2" title="Giao việc."></span>Giao việc
                </a>
            </li>
            <li :style="!visible.tsbtnGiaoViec ? 'display: none' : ''">
                <a @click="tsbtnGiaoViec_Click">
                    <span class="icon one-file-edit2" title="Giao việc cho nhân viên thực hiện"></span>Giao việc
                </a>
            </li>
            <li :style="!visible.tsbtnHoanCong ? 'display: none' : ''">
                <a @click="tsbtnHoanCong_Click">
                    <span class="icon nc-icon-glyph one-hoancong"></span>Hoàn công
                </a>
            </li>
            <li :style="!visible.tsbtnHoanThanh ? 'display: none' : ''">
                <a @click="tsbtnHoanThanh_Click">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Hoàn thành
                </a>
            </li>
            <li>
                <a @click="tsbtnExcel_Click">
                    <span class="icon one-excel"></span>Xuất Excel
                </a>
            </li>
            <li :style="!visible.tsbtnInPhieuTC ? 'display: none' : ''">
                <a @click="tsbtnInPhieuTC_Click">
                    <span class="icon one-excel"></span>Xuất Phiếu TC
                </a>
            </li>
            <li :style="!visible.tsbtnChuyenTheoDoi ? 'display: none' : ''">
                <a @click="tsbtnChuyenTheoDoi_Click">
                    <span class="icon one-list-arrow-right" title="Chuyển phiếu theo dõi"></span>Chuyển theo dõi
                </a>
            </li>
            <li :class="!enable.tsbtnBaoTon_BH ? 'non-ative' : ''" :style="!visible.tsbtnBaoTon_BH ? 'display: none' : ''">
                <a @click="tsbtnBaoTon_Click">
                    <span class="icon nc-icon-outline ui-1_circle-remove"></span>Báo tồn
                </a>
            </li>
            <li :style="!visible.tsbtnNghiemThuNhieuPhieu ? 'display: none' : ''">
                <a @click="tsbtnNghiemThuNhieuPhieu_Click">
                    <span class="icon nc-icon-glyph ui-1_check-circle-08"></span>Nghiệm thu
                </a>
            </li>
            <li :class="!enable.tsbtnNghiemThu ? 'non-ative' : ''" :style="!visible.tsbtnNghiemThu ? 'display: none' : ''">
                <a @click="tsbtnNghiemThu_Click">
                    <span class="icon nc-icon-glyph ui-1_check-circle-08"></span>Nghiệm thu
                </a>
            </li>
            <li :class="!enable.btnGiaoPhieuTG ? 'non-ative' : ''" :style="!visible.btnGiaoPhieuTG ? 'display: none' : ''">
                <a @click="btnGiaoPhieuTG_Click">
                    <span class="icon one-clipart-arrow-right" title="Giao phiếu trạm trung gian"></span>Giao trạm TG
                </a>
            </li>
            <li :class="!enable.tsbtnChuyenTo ? 'non-ative' : ''" :style="!visible.tsbtnChuyenTo ? 'display: none' : ''">
                <a @click="tsbtnChuyenTo_Click">
                    <span class="icon one-change" title="Chuyển tổ/ trạm thi công"></span>Chuyển tổ
                </a>
            </li>
            <li :class="!enable.tsbtnTraPhieu ? 'non-ative' : ''" :style="!visible.tsbtnTraPhieu ? 'display: none' : ''">
                <a @click="btnTraPhieu_Click">
                    <span class="icon one-file-back" title="Trả phiếu thi công"></span>Trả phiếu
                </a>
            </li>
            <li>
                <a @click="tsbtnGianDo_Click">
                    <span class="icon one-search"></span>Tra cứu cáp
                </a>
            </li>
            <li :class="!enable.tsbtnChuyenTTVT ? 'non-ative' : ''" :style="!visible.tsbtnChuyenTTVT ? 'display: none' : ''" >
                <a @click="tsbtnChuyenTTVT_Click">
                    <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right" title="Chuyển phiếu Trung tâm viễn thông"></span> Chuyển TTVT
                </a>
            </li>
            <li id="atsbtnChuyenTTDH" :class="!enable.tsbtnChuyenTTDH ? 'non-ative' : ''" :style="!visible.tsbtnChuyenTTDH ? 'display: none' : ''">
                <a @click="tsbtnChuyenTTDH_Click">
                    <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right" title="Chuyển phiếu xử lý mạng lớp trên"></span> Chuyển phiếu
                </a>
            </li>
            <!-- <li>
                <a @click="tsddbIn_Click">
                    <span class="dropdown-icon one-sync"></span> In phiếu
                </a>
            </li> -->
        </ul>
        <div class="more dropdown">
            <a href="#" data-toggle="dropdown">
                <span class="icon -ap  icon-dots-three-vertical"></span>
            </a>
            <div class="dropdown-menu">   
                <a :class="!enable.tsbtnChuyenDoiTac ? 'non-ativea' : ''" :style="!visible.tsbtnChuyenDoiTac ? 'display: none' : ''"
                        @click="tsbtnChuyenDoiTac_Click">
                    <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right" title="Chuyển phiếu xử lý sang cho đối tác xã hội hóa"></span> Giao đối tác
                </a>
                <!-- <a :style="!visible.tsbtnShowBras ? 'display: none' : ''">
                    <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right" title="Tìm kiếm thông tin port"></span> Show Bras
                </a> -->
                <a @click="tsbtnDoKiem_Click">
                    <span class="dropdown-icon one-file-arrow-right" title="Tìm kiếm thông tin port"></span> Show Port
                </a>
                <a :style="!visible.tsbtnKhaoSat ? 'display: none' : ''" @click="tsbtnKhaoSat_Click">
                    <span class="dropdown-icon nc-icon-glyph business_chart-pie-36"></span> Khảo sát
                </a>
                <a :class="!enable.tsbtnVatTu ? 'non-ativea' : ''" :style="!visible.tsbtnVatTu ? 'display: none' : ''"
                    @click="tsbtnVatTu_Click">
                    <span class="dropdown-icon one-vt" title="Cấp vật tư/thiết bị cho thuê bao"></span> Vật tư
                </a>
                <a :class="!enable.tsbtnThayDoiTT_BH ? 'non-ativea' : ''" :style="!visible.tsbtnThayDoiTT_BH ? 'display: none' : ''"
                    @click="tsbtnThayDoiTT_Click">
                    <span class="dropdown-icon one-sync"></span> Thay đổi TT
                </a>
                <a :class="!enable.tsbtnVatTuMoi ? 'non-ativea' : ''" :style="!visible.tsbtnVatTuMoi ? 'display: none' : ''"
                    @click="tsbtnVatTuMoi_Click">
                    <span class="dropdown-icon one-vt" title="Cấp vật tư/thiết bị cho thuê bao"></span> Vật tư
                </a>
                <!-- <a href="#">
                    <span class="dropdown-icon one-circle-question" title="Xem hướng dẫn sử dụng chức năng"></span> Trợ giúp
                </a> -->
                <a @click="tsbtnKQ_DoKiem_Click" :style="!visible.tsbtnKQ_DoKiem ? 'display: none' : ''">
                    <span class="dropdown-icon nc-icon-glyph design_design"></span> Đo kiểm
                </a>
                <a @click="tsbtnNhacViec_Click">
                    <span class="dropdown-icon one-file-noti"></span> Nhắc việc
                </a>
                <a @click="tsddbIn_Click">
                    <span class="dropdown-icon one-print"></span> In phiếu
                </a>
                <a @click="tsbtnLichSuHen_Click">
                    <span class="dropdown-icon one-calendar-history" title="Lịch sử hẹn"></span> Lịch sử hẹn
                </a>
                <!-- <a href="#">
                    <span class="dropdown-icon one-calendar-history" title="Tra cứu tiến trình Báo hỏng"></span> Tiến trình BH
                </a>
                <a href="#">
                    <span class="dropdown-icon one-calendar-history" title="Download File nghiệm thu"></span> Download file NT
                </a>
                <a href="#">
                    <span class="dropdown-icon one-calendar-history" title="Upload File nghiệm thu"></span> Upload File NT
                </a> -->
                <a @click="tsbtnHenKH_Click">
                    <span class="dropdown-icon one-calendar-check" title="Cập nhật giờ hẹn khách hàng"></span> Hẹn KH
                </a>
                <a @click="toolStripButton1_Click">
                    <span class="dropdown-icon one-circle-question" title="Xem hướng dẫn sử dụng chức năng"></span> Trợ giúp
                </a>
            </div>
        </div>
    </div>
    <div class="page-content">
        <div class="row" v-show="visible.lblSuCoTTVT">
            <div class="col-md-12 text-center">
                <frmXemThongBaoSuCo ref="frmXemThongBaoSuCo"/>
                <label class="red font-weight-bold"
                     @click="lblSuCoTTVT_Click"
                     style="cursor: pointer">{{ lblSuCoTTVT }}</label>
            </div>
        </div>
        <div class="grid-stack-box">
            <div class="box-col box-form" id="boxLeft">
                <div class="legend-title">
                    <span class="icon fa fa-angle-up"></span> Thông tin thuê bao
                </div>
                <div class="row">
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Dịch vụ</div>
                            <div class="value">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="dichvuvt_id"
                                        locale="vi-VN" @change="cboDichVuVT_Changed"
                                        v-model="dichvuvt_id"
                                        :dataSource="ds_dichvuvt"
                                        :allowFiltering="true" :filtering="onFilterDichVuVT"
                                        :fields="{ value: 'DICHVUVT_ID', text: 'TEN_DVVT' }"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Loại hình</div>
                            <div class="value">
                                <input type="text" class="form-control bold" v-model="txtLoaiTB">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Quy trình</div>
                            <div class="value">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="quytrinh_id"
                                        locale="vi-VN" @change="cboQuyTrinh_Changed"
                                        v-model="quytrinh_id"
                                        :dataSource="ds_quytrinh"
                                        :allowFiltering="true" :filtering="onFilterQuyTrinh"
                                        :fields="{ value: 'quytrinh_id', text: 'quytrinh' }"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Số máy/Acc</div>
                            <div class="value">
                                <input type="text" class="form-control highlight bold" v-model="txtMaTB" @keydown="txtMaTB_KeyPress" id="txtMaTB">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Người BH (*)</div>
                            <div class="value">
                                <input type="text" class="form-control bold" v-model="txtNguoiBH">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Ngày BH</div>
                            <div class="value">
                                <vue-date format="DD/MM/YYYY HH:mm A" type="datetime" v-model="dtpNgayBH" id="dtpNgayBH" :disable="true"></vue-date>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Đặc trưng KH</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model="txtDactrung">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8 col-12">
                        <div class="info-row">
                            <div class="key w100">Điện thoại LH</div>
                            <div class="value">
                                <input type="text" class="form-control bold" v-model="txtDienThoaiLH">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w100">Tình trạng hỏng</div>
                            <div class="value">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="tinhtrang_id"
                                        locale="vi-VN" @change="cboTinhTrang_Changed"
                                        v-model="tinhtrang_id"
                                        :dataSource="ds_tinhtrang"
                                        :allowFiltering="true" :filtering="onFilterTinhTrang"
                                        :fields="{ value: 'tinhtrang_id', text: 'tinhtrang' }"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8 col-12">
                        <div class="info-row">
                            <div class="key w100">Tên thuê bao</div>
                            <div class="value">
                                <input type="text" class="form-control bold" v-model="txtTenTB">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w100">Địa chỉ LĐ</div>
                    <div class="value">
                        <div class="input-more-button">
                            <button class="btn" @click="btnChonToaDo_Click">
                                <span class="one-map-location f20"></span>
                            </button>
                            <input type="text" class="form-control bold" v-model="txtDiaChiLD">
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w100">Trạng thái TB</div>
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtTrangThaiTB">
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w100">Ghi chú</div>
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtGhiChuHong">
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-12" :style="!visible.txtHangSx ? 'display: none' : ''">
                        <div class="info-row">
                            <div class="key w100">Hãng SX</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model="txtHangSx">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-12" :style="!visible.txtSoNgay ? 'display: none' : ''">
                        <div class="info-row">
                            <div class="key w100">Số ngày</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model="txtSoNgay">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-col box-form" id="boxRight">
                <div class="legend-title">Thông số kỹ thuật</div>
                <div id="wbrTSKT" class="desc">Chưa có dữ liệu</div>
            </div>
        </div>
        <div class="grid-stack-box">
            <div class="box-col box-form" id="boxLeft1">
                <div class="legend-title">
                    <div class="pull-left">
                        <span class="icon fa fa-angle-up"></span>Thông tin xử lý
                    </div>
                    <div class="pull-right">
                        <div class="list-checks red">
                            <div class="item">
                                <div class="check-action">
                                    <input type="checkbox" class="check">
                                    <span class="name">Phiếu trả</span>
                                </div>
                            </div>
                            <div class="item" :style="visible.chkChoXL ? '' : 'display: none' ">
                                <div class="check-action">
                                    <input type="checkbox" class="check" id="chkChoXL">
                                    <span class="name">Chờ xử lý</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w100">Kết quả XL</div>
                            <div class="value">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="kqxl_id"
                                        locale="vi-VN" @change="cboKQXL_Changed"
                                        v-model="kqxl_id" enable="enable.cboKQXL"
                                        :dataSource="ds_kqxl"
                                        :allowFiltering="true" :filtering="onFilterKQXL"
                                        :fields="{ value: 'ID', text: 'NAME' }"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w100">Người GV</div>
                            <div class="value">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="nguoigv_id"
                                        locale="vi-VN" @change="cboNguoiGV_Changed"
                                        v-model="nguoigv_id"
                                        :dataSource="ds_nguoigv"
                                        :allowFiltering="true" :filtering="onFilterNguoiGV"
                                        :fields="{ value: 'nhanvien_id', text: 'ten_nv' }"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w100">Ngày giao việc</div>
                            <div class="value w20 padt7">
                                <div class="check-action">
                                    <input type="checkbox" class="check" id="chkNgayGV">
                                    <span class="name"></span>
                                </div>
                            </div>   
                            <div class="value">
                                <vue-date format="DD/MM/YYYY HH:mm A" type="datetime" v-model="dtpNgayGV" id="dtpNgayGV" :disable="true"></vue-date>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 col-12">
                        <div class="info-row">
                            <div class="key w100">Ngày XL</div>
                            <div class="value w20 padt7">
                                <div class="check-action">
                                    <input type="checkbox" class="check" id="chkNgayBG" @change="chkNgayBG_CheckedChanged" :disabled="true">
                                    <span class="name"></span>
                                </div>
                            </div>   
                            <div class="value">
                                <vue-date format="DD/MM/YYYY HH:mm A" type="datetime" v-model="dtpNgayTH" id="dtpNgayTH" :disable="!enable.dtpNgayTH"></vue-date>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 col-12">
                        <div class="info-row">
                            <div class="key w100">Ngày XN</div> 
                            <div class="value">
                                <vue-date format="DD/MM/YYYY HH:mm A" type="datetime" v-model="dtpNgayXN" id="dtpNgayXN" :disable="!enable.dtpNgayXN"></vue-date>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w100" :style="visible.pnlNguyenNhan1 ? '' : 'display: none' ">Nhóm N.N</div> 
                            <div class="value" :style="visible.pnlNguyenNhan1 ? '' : 'display: none' ">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="nhomnn_id"
                                        locale="vi-VN" @change="cboNhomNN_Changed"
                                        v-model="nhomnn_id"
                                        :dataSource="ds_nhomNN"
                                        :allowFiltering="true" :filtering="onFilterNhomNN"
                                        :fields="{ value: 'loaihong_id', text: 'loaihong' }"
                                    />
                                </div>
                            </div>
                            <div class="key w100" :style="visible.pnlTon2 ? '' : 'display: none' ">Nhóm tồn</div> 
                            <div class="value" :style="visible.pnlTon2 ? '' : 'display: none' ">
                                <div class="select-custom">
                                    <ejs-dropdownlist id="nhomton_id"
                                        locale="vi-VN" @change="cboNhomTon_Changed"
                                        v-model="nhomton_id"
                                        :dataSource="ds_nhomton"
                                        :allowFiltering="true" :filtering="onFilterNhomTon"
                                        :fields="{ value: 'NHOMTON_ID', text: 'NHOMTON' }"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w100" :style="visible.pnlNguyenNhan2 ? '' : 'display: none' ">N.nhân</div>                        
                            <div class="value" :style="visible.pnlNguyenNhan2 ? '' : 'display: none' ">
                                <div class="select-custom">
                                    <treeselect
                                        :multiple="true"
                                        v-model="ds_nguyennhan_id"
                                        :options="ds_nguyennhan"
                                        :append-to-body="true"
                                        placeholder="Chọn nguyên nhân"
                                        :max-height="200">
                                    </treeselect>
                                    <!-- <ejs-multiselect v-model="ds_nguyennhan_id" ref="ds_nguyennhan_id"
                                        @change = "cboNguyenNhan_Changed()" 
                                        :showDropDownIcon='true' 
                                        :dataSource='ds_nguyennhan'  
                                        :showSelectAll='true'   
                                        :selectAllText = "'Tất cả'"                                  
                                        :mode="'CheckBox'" 
                                        :allowFiltering="true" :filtering="onFilterNguyenNhan"
                                        :fields="{ value: 'cthong_id', text: 'ct_hong' }">
                                    </ejs-multiselect> -->
                                </div>
                            </div>
                            <div class="key w100" :style="visible.pnlTon1 ? '' : 'display: none' ">Lý do tồn</div>                        
                            <div class="value" :style="visible.pnlTon1 ? '' : 'display: none' ">
                                <div class="select-custom">
                                    <treeselect
                                        :multiple="true"
                                        v-model="ds_lydoton_id"
                                        :options="ds_lydoton"
                                        :append-to-body="true"
                                        placeholder="Chọn lý do tồn"
                                        :max-height="200">
                                    </treeselect>
                                    <!-- <ejs-multiselect v-model="ds_lydoton_id"  ref="ds_lydoton_id"
                                        @change = "cboLyDoTon_Changed()" 
                                        :showDropDownIcon='true' 
                                        :dataSource='ds_lydoton'  
                                        :showSelectAll='true'   
                                        :selectAllText = "'Tất cả'"                                  
                                        :mode="'CheckBox'" 
                                        :allowFiltering="true" :filtering="onFilterLyDoTon"
                                        :fields="{ value: 'lydotonbh_id', text: 'baohong_ton' }">
                                    </ejs-multiselect> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="info-row">
                    <div class="key w100">Ghi chú</div>   
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtGhiChuTH" id="txtGhiChuTH">
                    </div>
                </div>
            </div>
            <div class="box-col box-form" id="boxRight1">
                <div class="legend-title">Danh sách nhân viên xử lý</div>
                <div class="table-content">
                    <DataGridCustom
                        ref="ds_nvxl"
                        v-bind:columns="columnsNVXL"
                        v-bind:dataSource="ds_nvxl"
                        :showColumnCheckbox="false"
                        :showFilter="true"
                        :enabledSelectFirstRow="true"
                        :selectionSettings="{ checkboxMode: 'ResetOnRowClick' }"
                        panelDataHeight="270"
                        :allowPaging="true" :enablePagingServer="false"
                    ></DataGridCustom>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách phiếu báo hỏng</div>
            <div class="row">
                <div class="col-sm-3 col-12" :style="visible.tungaydenngay ? '' : 'display: none' ">
                    <div class="info-row">
                        <div class="key w90">
                            <div class="check-action">
                                <input type="checkbox" class="check" id="chkTuNgay" @change="chkTuNgay_CheckedChanged">
                                <span class="name">Từ ngày</span>
                            </div>
                        </div>
                        <div class="value">
                            <vue-date format="DD/MM/YYYY" type="datetime" v-model="dtpTuNgay" id="dtpTuNgay"
                                @input="dtpTuNgay_ValueChanged"></vue-date>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12" :style="visible.tungaydenngay ? '' : 'display: none' ">
                    <div class="info-row">
                        <div class="key w90">
                            Đến ngày
                        </div>
                        <div class="value">
                            <vue-date format="DD/MM/YYYY" type="datetime" v-model="dtpDenNgay" id="dtpDenNgay"
                                @input="dtpDenNgay_ValueChanged"></vue-date>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w70">
                            Trạm VT
                        </div>
                        <div class="value">
                            <div class="row">
                                <div class="col-sm-6 col-12" :style="visible.cboTramVT ? '' : 'display: none' ">
                                    <div class="select-custom">
                                        <ejs-dropdownlist id="tramvt_id"
                                            locale="vi-VN" @change="cboTramVT_Changed"
                                            v-model="tramvt_id"
                                            :dataSource="ds_tramvt"
                                            :allowFiltering="true" :filtering="onFilterTramVT"
                                            :fields="{ value: 'donvi_id', text: 'ten_dv' }"
                                        />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12" :style="visible.cboDaGiaoViec ? '' : 'display: none' ">
                                    <div class="select-custom">
                                        <ejs-dropdownlist id="cboDagiaoviec_id"
                                            locale="vi-VN" @change="cboDaGiaoViec_Changed"
                                            v-model="cboDagiaoviec_id"
                                            :dataSource="ds_cboDagiaoviec"
                                            :allowFiltering="true" :filtering="onFilterCboDaGiaoViec"
                                            :fields="{ value: 'ID', text: 'NAME' }"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12 tright">
                    <button class="btn btn-second" @click="showMap">
                        <span class="nc-icon-outline location_map-pin f20 lh20"></span>
                    </button>
                </div>
            </div>
            <div class="table-content" v-show="!viewMap">
                <DataGridCustom
                    ref="ds_phieubaohong"
                    v-bind:columns="columnsPBH"
                    v-bind:dataSource="ds_phieubaohong"
                    :showColumnCheckbox="true"
                    :showFilter="true"
                    :enabledSelectFirstRow="true"
                    :selectionSettings="{ checkboxMode: 'ResetOnRowClick' }"
                    panelDataHeight="270"
                    @rowSelected="gridviewDanhSach_FocusedRowChanged"
                    @selectedItemsChanged="gridviewDanhSach_SelectRow"
                    :allowPaging="true" :enablePagingServer="false"
                    @queryCellInfo="gridviewDanhSach_queryCellInfo"
                ></DataGridCustom>
            </div>
            <div class="map-canvas" style="height: 270px" v-show="viewMap">
                <Map ref="mapRef"
                    :lat="Number(map.lat)"
                    :lng="Number(map.lng)"
                    :description="map_info.dia_chi"
                    :mode="1"
                />
            </div>
        </div>
    </div>

    <ModalChonToaDo idModalChonToaDo="ModalChonToaDo" @XacNhanToaDo="XacNhanToaDo" :position="map" :diachi="map_info.dia_chi" :ten_kc="map_info.title"></ModalChonToaDo>

    <!-- <ejs-dialog :enableResize='true' :visible="false" ref="dlg_giaophieutramtg" :header='"Giao phiếu điểm chia Trung gian TSL"'
        :cssClass="'popup-show-port'" showCloseIcon=true target=".main-wrapper" width='60%' height="800">
        <DeliveryIntermediate :MA_TB="txtMaTB" :BAOHONG_ID="baohong_id" :PHIEU_ID="PHIEU_ID" />
    </ejs-dialog> -->

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_traphieubaohong" :header='"Trả phiếu báo hỏng"'
                showCloseIcon=true target=".main-wrapper" width='90%' height="900">
        <TraPhieuBaoHong ref="ppTraPhieuBaoHong" @closeTraPhieuBH="closeTraPhieuBH" />
    </ejs-dialog>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_giaophieunhanvien" :header='"Giao phiếu nhân viên"' :position="{X: 'center', Y: 'top'}"
                showCloseIcon=true target=".main-wrapper" width='80%' height="900">
        <GiaoPhieuNhanVien ref="ppGiaoPhieuNhanVien" @giaophieunv_success="giaophieunv_success" />
    </ejs-dialog>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_giaophieunhanvien_v2" :header='"Giao phiếu nhân viên"' :position="{X: 'center', Y: 'top'}"
                showCloseIcon=true target=".main-wrapper" width='80%' height="900">
        <GiaoPhieuNhanVien_v2 ref="ppGiaoPhieuNhanVien_v2" @giaophieunv_success="giaophieunv_success"/>
    </ejs-dialog>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_doitac" :header='"Chọn đối tác cần giao phiếu"'
                showCloseIcon=false target=".main-wrapper" width='50%' height="200">
        <DoiTac @xac_nhan="dlg_doitac_xacnhan" ref="ppDoiTac" />
    </ejs-dialog>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_chonsongay" :header='"Nhập thông tin"'
                showCloseIcon=false target=".main-wrapper" width='50%' height="200">
        <ChonSoNgay @xac_nhan="dlg_chonsongay_xacnhan" ref="ppChonSoNgay" />
    </ejs-dialog>

    <ChuyenTo ref="popupChuyenTo" :tag="2" :ttbhId="chuyento_ttbhId" :bhId="chuyento_bhId"
        @closeChuyenTo="closeChuyenTo"></ChuyenTo>

    <KetQuaDoKiem ref="doKiem" :hdtb_id="dokiem_hdtb_id" :baohong_id="dokiem_baohong_id"/>

    <daunoithuebao ref="daunoithuebao"/>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_ndgiao" :header='"Nội dung giao"'
                showCloseIcon=false target=".main-wrapper" width='50%' height="200">
        <NoiDungGiao @giao_phieu="dlg_ndgiao_giao_phieu" ref="ppNoiDungGiao" />
    </ejs-dialog>

    <CapVatTuTB ref="popupVatTuTB" :input-data="modelCapVatTu"/>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_vattubaohong" :header='"Cấp vật tư/thiết bị cho thuê bao"'
                showCloseIcon=false target=".main-wrapper" width='60%' height="800">
        <VatTuBaoHong ref="ppVatTuBaoHong" :phieu_id="PHIEU_ID" :baohong_id="baohong_id" :thuebao_id="thuebao_id" />
    </ejs-dialog>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_tracuumdf" :header='"Tra cứu thuê bao - phiến dọc"'
                showCloseIcon=false target=".main-wrapper" width='60%' height="800">
        <TraCuuMDF ref="ppTraCuuMDF" />
    </ejs-dialog>

    <ThayDoiTTBH ref="popupThayDoiTTBH" :matb_t="txtMaTB" :trangthaitb_t="txtTrangThaiTB" :tentb_t="txtTenTB" 
            :ngaybh_t="dtpNgayBH" :nguoibh_t="txtNguoiBH" :dienthoailh_t="txtDienThoaiLH" :baohong_id_t="baohong_id"
            @updateSuccess="HienThiDanhSach" />

    <LichSu_HenBH ref="popupLichSu_HenBH" :baohong_id="baohong_id" :kieu="2" />

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_khaosatkh" :header='"Khảo sát khách hàng báo hỏng"'
                showCloseIcon=false target=".main-wrapper" width='80%' height="800">
        <KhaoSatKH ref="ppKhaoSatKH" />
    </ejs-dialog>

    <InBienBan ref="popupInBB" :params="modelIn"/>

    <frmHenKH ref="reffrmHenKH" :params="frmHenKHInput"></frmHenKH>
    <frmHenKHV2 ref="reffrmHenKHV2" :params="frmHenKHV2Input"></frmHenKHV2>
    <frmNhacViecBH ref="dialogfrmNhacViecBH" :params="frmNhacViecBHInput"></frmNhacViecBH>

    <ejs-dialog :enableResize='true' :visible="false" ref="dlg_trogiup" :header='"Hướng dẫn sử dụng chức năng nghiệm thu báo hỏng"'
                showCloseIcon=false target=".main-wrapper" width='60%' height="700">
        <div class="modal-content popup-box">
            <div id="includedContent"></div>
        </div>
    </ejs-dialog>

    <XemBaoCao ref="refXemBaoCao" :ma_bc="ma_bc" :dsGiaTri="dsGiaTri"></XemBaoCao>

    <img id="frmNghiemThuBH892" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH892.png' style="display: none;" />
    <img id="frmNghiemThuBH1883" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH1883.png' style="display: none;" />
    <img id="frmNghiemThuBH2028" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH2028.png' style="display: none;" />
    <img id="frmNghiemThuBH3027" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH3027.png' style="display: none;" />
    <img id="frmNghiemThuBH3729" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH3729.png' style="display: none;" />
    <img id="frmNghiemThuBH4203" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH4203.png' style="display: none;" />
    <img id="frmNghiemThuBH4436" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH4436.png' style="display: none;" />
    <img id="frmNghiemThuBH4525" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH4525.png' style="display: none;" />
    <img id="frmNghiemThuBH5549" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH5549.png' style="display: none;" />
    <img id="frmNghiemThuBH7147" src='@/assets/img/frmNghiemThuBH.files/frmNghiemThuBH7147.png' style="display: none;" />

    <ejs-dialog
        :isModal="false"
        :enableResize="true"
        :visible="false"
        ref="checkPort"
        :header='"Kiểm tra Port thuê bao"'
        showCloseIcon="true"
        target=".main-wrapper"
        width="60%"
        height="500"
        allowDragging="true"
        @close="checkPortOnClose"
        :animationSettings="animationSettings"
    >
        <div>
        <CheckPort v-if="checkPortDialog.isVisiable" type="modal"
            v-bind="checkPortDialog.input"
        />
        </div>
    </ejs-dialog>

    <DNTB id='dandocap' :ma_thuebao="txtMaTB" />

</div>