<div class="frm-capnhat-xuly-suco">
    <div class="list-actions-top">
        <ul class="list">
            <li title="Tìm kiếm" @click="onClickBtnTimKiem">
                <a href="javascript:void(0)">
                    <span class="icon one-search"></span>Tìm kiếm
                </a>
            </li>
            <li title="Ghi chú xử lý" :class="{'disable-btn': !enableBtnGhiChuXL}" @click="onClickBtnGhiChu">
                <a href="javascript:void(0)">
                    <span class="icon one-ghichu"></span>Ghi chú
                </a>
            </li>
            <li title="Giao việc" :class="{'disable-btn': !enableBtnGiaoViec}" @click="onClickBtnGiaoViec">
                <a href="javascript:void(0)">
                    <span class="icon one-file-edit2"></span>Giao việc
                </a>
            </li>
            <li title="Xuất phiếu" :class="{'disable-btn': !enableBtnXuatPhieu}" @click="onClickBtnXuatPhieu">
                <a href="javascript:void(0)">
                    <span class="icon one-file-download1"></span>Xuất phiếu
                </a>
            </li>
            <li title="Đo kiểm" :class="{'disable-btn': !enableBtnDoKiem}" @click="onClickBtnDoKiem">
                <a href="javascript:void(0)">
                    <span class="icon nc-icon-glyph design_design"></span>Đo kiểm
                </a>
            </li>
            <li title="Hoàn công" :class="{'disable-btn': !enableBtnHoanCong}" @click="onClickBtnHoanCong">
                <a href="javascript:void(0)">
                    <span class="icon one-hoancong"></span>Hoàn công
                </a>
            </li>
            <li title="Báo tồn" :class="{'disable-btn': !enableBtnBaoTon}" @click="onClickBtnBaoTon">
                <a href="javascript:void(0)">
                    <span class="icon one-file-chart"></span>Báo tồn
                </a>
            </li>
            <li title="Trả phiếu" :class="{'disable-btn': !enableBtnTraPhieu}" @click="onClickBtnTraPhieu">
                <a href="javascript:void(0)">
                    <span class="icon one-file-back"></span>Trả phiếu
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="row">
            <div class="col-sm-6 col-12" v-show="showTttk && !expandDsPhieu && !expandDsPtm && !expandDsGiaoViec">
                <div class="box-form" style="height: 98%;">
                    <div class="legend-title">
                        <div class="pull-left">Thông tin tìm kiếm</div>
                        <div class="pull-right">
                            <button class="btn btn-sm btn-second nc-icon-outline arrows-1_refresh-69 lh16" title="Làm mới" @click="onClickBtnLamMoiTttk"></button>
                            <button class="btn btn-sm btn-second -ap icon-close lh16" title="Đóng khung" @click="onToggleTttk"></button>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div :style="{height: !showBottomPanels ? '510px' : 'auto'}">
                        <div class="row">
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w130">Nhóm sự cố</div>
                                    <div class="value">
                                        <SelectExt 
                                            v-model="nhomSuCoId" 
                                            :dataSource="dsNhomSuCo" 
                                            dataTextField="NHOM_SC"
                                            dataValueField="NHOMSC_ID"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w120">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" tabindex="-1" v-model="chkNgaySuCo">
                                            <span class="name">Ngày sự cố</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <div class="row">
                                            <div class="col-sm-6 col-12">
                                                <ejs-datepicker 	
                                                    class="form-control bg-none bor0 fw6 text h24" 
                                                    placeholder=""
                                                    format="dd/MM/yyyy"
                                                    v-model="ngaySuCoTu"
                                                    :enabled="chkNgaySuCo"></ejs-datepicker>
                                            </div>
                                            <div class="col-sm-6 col-12">
                                                <ejs-datepicker 	
                                                    class="form-control bg-none bor0 fw6 text h24" 
                                                    placeholder=""
                                                    format="dd/MM/yyyy"
                                                    v-model="ngaySuCoDen"
                                                    :enabled="chkNgaySuCo"></ejs-datepicker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w130">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkMaSuCo" tabindex="-1">
                                            <span class="name">Mã sự cố</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <input type="text" :disabled="!chkMaSuCo" class="form-control" v-model="maSuCo" v-on:keyup.enter="onClickBtnTimKiem">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w120">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkNgayBao" tabindex="-1">
                                            <span class="name">Ngày báo</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <div class="row">
                                            <div class="col-sm-6 col-12">
                                                <ejs-datepicker
                                                    style="padding-top: 6px"
                                                    class="form-control bg-none bor0 fw6 text h24" 
                                                    placeholder=""
                                                    format="dd/MM/yyyy"
                                                    v-model="ngayBaoTu"
                                                    :enabled="chkNgayBao"></ejs-datepicker>
                                            </div>
                                            <div class="col-sm-6 col-12">
                                                <ejs-datepicker
                                                    style="padding-top: 6px"
                                                    class="form-control bg-none bor0 fw6 text h24" 
                                                    placeholder=""
                                                    format="dd/MM/yyyy"
                                                    v-model="ngayBaoDen"
                                                    :enabled="chkNgayBao"></ejs-datepicker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w130">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkNguoiBao" tabindex="-1">
                                            <span class="name">Người báo</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <ComboboxGridNhanVien v-model="nguoiBaoId" :disabled="!chkNguoiBao"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w120">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkNgayGiao" tabindex="-1">
                                            <span class="name">Ngày giao</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <div class="row">
                                            <div class="col-sm-6 col-12">
                                                <ejs-datepicker 	
                                                    style="padding-top: 6px"
                                                    class="form-control bg-none bor0 fw6 text h24" 
                                                    placeholder=""
                                                    format="dd/MM/yyyy"
                                                    v-model="ngayGiaoTu"
                                                    :enabled="chkNgayGiao"></ejs-datepicker>
                                            </div>
                                            <div class="col-sm-6 col-12">
                                                <ejs-datepicker 	
                                                    style="padding-top: 6px"
                                                    class="form-control bg-none bor0 fw6 text h24" 
                                                    placeholder=""
                                                    format="dd/MM/yyyy"
                                                    v-model="ngayGiaoDen"
                                                    :enabled="chkNgayGiao"></ejs-datepicker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w130">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkMdKhanCap" tabindex="-1">
                                            <span class="name">MĐ khẩn cấp</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <SelectExt 	
                                            v-model="mucDoKhanCapId" 
                                            :dataSource="dsMucDoKhanCap" 
                                            dataTextField="MUCDO_KC"
                                            dataValueField="MUCDO_ID" 
                                            :disabled="!chkMdKhanCap"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w120">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkMucDoSuCo" tabindex="-1">
                                            <span class="name">Mức độ sự cố</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <SelectExt 	
                                            v-model="mucDoSuCoId" 
                                            :dataSource="dsMucDoSuCo" 
                                            dataTextField="MUCDO_SC"
                                            dataValueField="MUCDO_ID" 
                                            :disabled="!chkMucDoSuCo"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w130">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkNguonSuCo" tabindex="-1">
                                            <span class="name">Nguồn sự cố</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <SelectExt 	
                                            v-model="nguonSuCoId" 
                                            :dataSource="dsNguonSuCo" 
                                            dataTextField="MOTA"
                                            dataValueField="NGUONSC_ID" 
                                            :disabled="!chkNguonSuCo"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w120">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkKeoDaiTu" tabindex="-1">
                                            <span class="name">Kéo dài</span>
                                        </div>
                                    </div>
                                    <div class="value w28">
                                        <button 
                                            class="btn btn-second pad8" 
                                            :disabled="!chkKeoDaiTu" 
                                            @click="onClickBtnKeoDaiTu" 
                                            style="line-height: 14px;">
                                            {{toanTuKeoDaiTu}}
                                        </button>
                                    </div>
                                    <div class="value w50">
                                        <vue-numeric 
                                            class="form-control" 
                                            v-model="keoDaiTuH" 
                                            :disabled="!chkKeoDaiTu" 
                                            :min="0" 
                                            maxlength="5" 
                                            :minus="false" 
                                            separator=","></vue-numeric>
                                    </div>
                                    <div class="key padl6 w30 center">h</div>
                                    <div class="value w50">
                                        <vue-numeric 
                                            class="form-control" 
                                            v-model="keoDaiTuM" 
                                            :disabled="!chkKeoDaiTu" 
                                            :min="0" 
                                            maxlength="2" 
                                            :minus="false" 
                                            separator=","></vue-numeric>
                                    </div>
                                    <div class="key padl6 w30 center">m</div>
                                    <div class="value w50">
                                        <vue-numeric 
                                            class="form-control" 
                                            v-model="keoDaiTuS" 
                                            :disabled="!chkKeoDaiTu" 
                                            :min="0" 
                                            maxlength="2" 
                                            :minus="false" 
                                            separator=","></vue-numeric>
                                    </div>
                                    <div class="value padt7">s</div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w130">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chkTinhTrang" tabindex="-1">
                                            <span class="name">Tình trạng</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <SelectExt 	
                                            v-model="tinhTrangId" 
                                            :dataSource="dsTinhTrang" 
                                            dataTextField="TINHTRANG"
                                            dataValueField="TINHTRANG_ID" 
                                            :disabled="!chkTinhTrang"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w120">
                                        <div class="check-action" v-show="showKeoDaiDen">
                                            <input type="checkbox" class="check" v-model="chkKeoDaiDen" tabindex="-1">
                                            <span class="name">Kéo dài</span>
                                        </div>
                                    </div>
                                    <div class="value w28">
                                        <button 
                                            class="btn btn-second pad8" 
                                            :disabled="!chkKeoDaiDen" 
                                            style="line-height: 14px;" 
                                            :style="{visibility: showKeoDaiDen ? 'visible' : 'hidden'}"
                                            @click="onClickBtnKeoDaiDen">
                                            {{toanTuKeoDaiDen}}
                                        </button>
                                    </div>
                                    <div class="value w50">
                                        <vue-numeric
                                            v-show="showKeoDaiDen"
                                            class="form-control" 
                                            v-model="keoDaiDenH" 
                                            :disabled="!chkKeoDaiDen" 
                                            :min="0" 
                                            maxlength="5" 
                                            :minus="false" 
                                            separator=","></vue-numeric>
                                    </div>
                                    <div class="key padl6 w30 center">h</div>
                                    <div class="value w50">
                                        <vue-numeric
                                            v-show="showKeoDaiDen"
                                            class="form-control" 
                                            v-model="keoDaiDenM" 
                                            :disabled="!chkKeoDaiDen" 
                                            :min="0" 
                                            maxlength="2" 
                                            :minus="false" 
                                            separator=","></vue-numeric>
                                    </div>
                                    <div class="key padl6 w30 center">m</div>
                                    <div class="value w50">
                                        <vue-numeric
                                            v-show="showKeoDaiDen"
                                            class="form-control" 
                                            v-model="keoDaiDenS" 
                                            :disabled="!chkKeoDaiDen" 
                                            :min="0" 
                                            maxlength="2" 
                                            :minus="false" 
                                            separator=","></vue-numeric>
                                    </div>
                                    <div class="value padt7">s</div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w130">
                                <div class="check-action">
                                    <input type="checkbox" class="check" v-model="chkNoiDungSuCo" tabindex="-1">
                                    <span class="name">Nội dung sự cố</span>
                                </div>
                            </div>
                            <div class="value">
                                <input type="text" class="form-control" :disabled="!chkNoiDungSuCo" v-model="noiDungSuCo" v-on:keyup.enter="onClickBtnTimKiem">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w130">
                                <div class="check-action">
                                    <input type="checkbox" class="check" v-model="chkNoiDungGiao" tabindex="-1">
                                    <span class="name">Nội dung giao</span>
                                </div>
                            </div>
                            <div class="value">
                                <input type="text" class="form-control" :disabled="!chkNoiDungGiao" v-model="noiDungGiao" v-on:keyup.enter="onClickBtnTimKiem">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div 
                v-show="!expandDsPtm && !expandDsGiaoViec" 
                class="col-12" 
                :class="{'col-sm-6': showTttk && !expandDsPhieu}" 
                :style="{'padding-left': !showTttk && !expandDsPhieu ? '50px' : '7px'}">
                <div class="box-form" style="position: relative; height: 98%;">
                    <div v-show="!showTttk && !expandDsPhieu" @click="onToggleTttk" style="cursor: pointer; height: 100%; width: 40px; border: 1px solid #ccc; border-radius: 5px; background-color: #BAE7FF; position: absolute; left: -45px; top: 0px;">
                        <div style="transform: rotate(-90deg); white-space: nowrap; position: relative; text-align: center; top: 50%; ">
                            <span style="position: relative; left: -100%;">Thông tin tìm kiếm</span>
                        </div>
                    </div>
                    <div class="legend-title">
                        <div class="pull-left">Danh sách phiếu điều xử lý sự cố</div>
                        <div class="pull-right">
                            <button class="btn btn-sm btn-second one-excel-outline lh16" title="Xuất Excel" @click="onClickBtnExcelPhieuXuLy"></button>
                            <button class="btn btn-sm btn-second nc-icon-outline arrows-1_refresh-69 lh16" title="Làm mới" @click="onClickBtnTimKiem"></button>
                            <button class="btn btn-sm btn-second nc-icon-outline ui-2_filter lh16" title="Ẩn / Hiện lọc" @click="allowShowFilterPhieuXuLy = !allowShowFilterPhieuXuLy"></button>
                            <button class="btn btn-sm btn-second one-design-per lh16" title="Mở rộng" @click="toggleExpandDsPhieu"></button>
                        </div>
                        <div class="clearfix"></div>
                    </div>

                    <DataGrid
                        class="grid-phieu-dieu-xuly-suco table-result"
                        :panelDataHeight="expandDsPhieu || !showBottomPanels ? '400' : '180'"
                        v-bind:columns="[
                            {fieldName: '', headerText: 'Chọn', textAlign: 'Center', allowFiltering: false, width: '50', template: getColumnTemplateChonPhieuDieuXuLy(this)},
                            {fieldName: 'MA_SC', headerText: 'Mã sự cố', allowFiltering: true, width: '130' },
                            {fieldName: 'TEN_SC', headerText: 'Tên sự cố', allowFiltering: true, width: '150' },
                            {fieldName: 'MUCDO_SC', headerText: 'Mức độ', allowFiltering: true, width: '130' },
                            {fieldName: 'NHOM_SC', headerText: 'Nhóm', allowFiltering: true, width: '130' },
                            {fieldName: 'NGUON_SC', headerText: 'Nguồn', allowFiltering: true, width: '130' },
                            {fieldName: 'NOIDUNG_SC', headerText: 'Nội dung sự cố', allowFiltering: true, width: '200' },
                            {fieldName: 'NGAY_SC', headerText: 'Ngày sự cố', allowFiltering: true, width: '130' },
                            {fieldName: 'THOIGIAN', headerText: 'Kéo dài', textAlign: 'Right', allowFiltering: true, width: '130' },
                            {fieldName: 'TRANGTHAI_PH', headerText: 'Trạng thái', allowFiltering: true, width: '130' },
                            {fieldName: 'NOIDUNG_GIAO', headerText: 'Nội dung giao', allowFiltering: true, width: '130' },
                            {fieldName: 'DONVI_GIAO', headerText: 'Đơn vị giao', allowFiltering: true, width: '130' },
                            {fieldName: 'NGAYGIAO', headerText: 'Ngày giao', allowFiltering: true, width: '130' },
                            {fieldName: 'DONVI_NHAN', headerText: 'Đơn vị nhận', allowFiltering: true, width: '130' },
                            {fieldName: 'MUCDO_KC', headerText: 'Khẩn', allowFiltering: true, width: '130' },
                            {fieldName: 'CHITIEU_TG', headerText: 'Chỉ tiêu thời gian', allowFiltering: true, width: '130' },
                            {fieldName: 'CONLAI', headerText: 'Còn lại', allowFiltering: true, width: '130' },
                            {fieldName: 'GHICHU_XL', headerText: 'Ghi chú xử lý', allowFiltering: true, width: '130' },
                            {fieldName: '', headerText: 'Ảnh sự cố', textAlign: 'Center', allowFiltering: true, width: '130', freeze: 'Right', clipMode: 'Ellipsis', template: getColumnTemplateAnhSuCo(this) },
                        ]"        
                        v-bind:dataSource="dsPhieuXuLy"
                        :showFilter="allowShowFilterPhieuXuLy"
                        :allowPaging="true"
                        :enablePagingServer="false"></DataGrid>

                        <b-form-file v-show="false" ref="ref-choose-img" multiple accept="image/*" @change="onImgChange"></b-form-file>
                        <div v-show="showZoomImg" class="panel-zoom-img"><img :src="zoomImg" alt="" style="height: 100%; width: 100%;" /></div>
                </div>
            </div>
            <div class="col-12" v-show="!expandDsPhieu && !expandDsGiaoViec" :class="{'col-sm-6': !expandDsPtm}">
                <div class="box-form" style="height: 98%;">
                    <div class="legend-title">
                        <div class="pull-left"><span title="Thu nhỏ" class="icon fa" :class="{'fa-angle-up': showBottomPanels, 'fa-angle-down': !showBottomPanels}" @click="toggleShowBottomPanels"></span>Danh sách phần tử mạng cần xử lý</div>
                        <div class="pull-right">
                            <button class="btn btn-sm btn-second one-excel-outline lh16" title="Xuất Excel" @click="onClickBtnExcelPhanTuMang"></button>
                            <button class="btn btn-sm btn-second nc-icon-outline arrows-1_refresh-69 lh16" title="Làm mới" @click="thucHienLayDsPhanTuMang"></button>
                            <button class="btn btn-sm btn-second nc-icon-outline ui-2_filter lh16" title="Ẩn / Hiện lọc" @click="allowShowFilterPtm = !allowShowFilterPtm"></button>
                            <button class="btn btn-sm btn-second one-design-per lh16" title="Mở rộng" @click="toggleExpandDsPtm"></button>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="table-content" v-show="showBottomPanels">
                        <DataGrid
                            class="grid-phan-tu-mang table-result"
                            :panelDataHeight="expandDsPtm ? '400' : '145'"
                            v-bind:columns="[
                                {fieldName: '', headerText: 'Chức năng', textAlign: 'Center', freeze: 'Left', clipMode: 'Ellipsis', allowFiltering: false, width: '100', template: getColumnTemplateChucNangPtm(this)},
                                {fieldName: 'LOAI_PTM', headerText: 'Loại PTM', allowFiltering: true, width: '130' },
                                {fieldName: 'TEN_PTM', headerText: 'Tên phần tử mạng', allowFiltering: true, width: '150' },
                                {fieldName: 'TINHTRANG', headerText: 'Tình trạng', allowFiltering: true, width: '150' },
                                {fieldName: 'GHICHU_TT', headerText: 'Ghi chú tình trạng', allowFiltering: true, width: '200' },
                                {fieldName: 'GHICHU_HC', headerText: 'Ghi chú hoàn công', allowFiltering: true, width: '200' },
                                {fieldName: 'NGAY_CN', headerText: 'Ngày cập nhật', textAlign: 'Right', allowFiltering: true, width: '130' },
                                {fieldName: 'NGUOI_CN', headerText: 'Người cập nhật', allowFiltering: true, width: '150' },
                            ]"        
                            v-bind:dataSource="dsPhanTuMang"
                            :showFilter="allowShowFilterPtm"
                            :allowPaging="true"
                            :enablePagingServer="false"
                            @selectedRowChanged="onSelectRowPtm"></DataGrid>
                    </div>
                </div>
            </div>
            <div class="col-12" v-show="!expandDsPhieu && !expandDsPtm" :class="{'col-sm-6': !expandDsGiaoViec}">
                <div class="box-form" style="height: 98%;">
                    <div class="legend-title">
                        <div class="pull-left">Danh sách giao việc nhân viên</div>
                        <div class="pull-right">
                            <button class="btn btn-sm btn-second one-excel-outline lh16" title="Xuất Excel" @click="onClickBtnExcelGiaoViec"></button>
                            <button class="btn btn-sm btn-second nc-icon-outline arrows-1_refresh-69 lh16" title="Làm mới" @click="thucHienLayDsGiaoViec"></button>
                            <button class="btn btn-sm btn-second nc-icon-outline ui-2_filter lh16" title="Ẩn / Hiện lọc" @click="allowShowFilterGiaoViec = !allowShowFilterGiaoViec"></button>
                            <button class="btn btn-sm btn-second one-design-per lh16" title="Mở rộng" @click="toggleExpandDsGiaoViec"></button>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="table-content" v-show="showBottomPanels">
                        <DataGrid
                            class="grid-giao-viec-nhan-vien table-result"
                            :panelDataHeight="expandDsGiaoViec ? '400' : '145'"
                            v-bind:columns="[
                                {fieldName: '', headerText: 'Chức năng', textAlign: 'Center', freeze: 'Left', clipMode: 'Ellipsis', allowFiltering: false, width: '150', template: getColumnTemplateChucNangGiaoViec(this)},
                                {fieldName: 'TEN_NV', headerText: 'Tên nhân viên', allowFiltering: true, width: '130' },
                                {fieldName: 'SO_DT', headerText: 'Điện thoại liên hệ', textAlign: 'Right', allowFiltering: true, width: '130' },
                                {fieldName: 'NGAYGIAO', headerText: 'Ngày giao', textAlign: 'Right', allowFiltering: true, width: '130' },
                                {fieldName: 'NHIEMVU', headerText: 'Nhiệm vụ', allowFiltering: true, width: '130' },
                                {fieldName: 'GHICHU_XL', headerText: 'Ghi chú xử lý', allowFiltering: true, width: '200' },
                                {fieldName: 'TRANGTHAI', headerText: 'Trạng thái thực hiện', allowFiltering: true, width: '130' },
                                {fieldName: 'STATUS', headerText: 'Nhắn tin', allowFiltering: true, width: '130' },
                            ]"        
                            v-bind:dataSource="dsGiaoViec"
                            :showFilter="allowShowFilterGiaoViec"
                            :allowPaging="true"
                            :enablePagingServer="false"></DataGrid>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <b-modal ref="ref-modal-ghichu" scrollable centered title="Cập nhật ghi chú xử lý phiếu" ok-only @shown="$refs['ref-ghichu'].focus()">
        <div>Ghi chú:</div>
        <div>
            <input type="text" class="form-control" v-model="ghiChu" ref="ref-ghichu" v-on:keyup.enter="okCapNhatGhiChu">
        </div>
        <template #modal-footer="{ cancel }">
            <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
            <b-button variant="primary" style="color: white" @click="okCapNhatGhiChu">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal id="modal-ghichu-phantu-mang" scrollable centered title="Cập nhật ghi chú xử lý phần tử mạng" ok-only @ok="okCapNhatGhiChuPhanTuMang" @shown="$refs['ref-ghichu-phantu-mang'].focus()">
        <div>Ghi chú:</div>
        <div>
            <input type="text" class="form-control" v-model="ghiChuPhanTuMang" ref="ref-ghichu-phantu-mang" v-on:keyup.enter="okCapNhatGhiChuPhanTuMang">
        </div>
        <template #modal-footer="{ ok, cancel }">
            <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
            <b-button variant="primary" style="color: white" @click="ok()">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal id="modal-ghichu-xuly-nv" scrollable centered title="Cập nhật ghi chú xử lý (nhân viên)" ok-only @ok="okCapNhatGhiChuXuLyNv" @shown="$refs['ref-ghichu-xuly-nv'].focus()">
        <div>Ghi chú:</div>
        <div>
            <input type="text" class="form-control" v-model="ghiChuXuLyNv" ref="ref-ghichu-xuly-nv" v-on:keyup.enter="okCapNhatGhiChuXuLyNv">
        </div>
        <template #modal-footer="{ ok, cancel }">
            <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
            <b-button variant="primary" style="color: white" @click="ok()">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal id="modal-hoancong" scrollable centered title="Hoàn công xử lý" ok-only @ok="okHoanCong" @shown="$refs['ref-ghichu-hoancong'].focus()">
        <div>Ghi chú:</div>
        <div>
            <input type="text" class="form-control" v-model="ghiChuHoanCong" ref="ref-ghichu-hoancong" v-on:keyup.enter="okHoanCong">
        </div>
        <template #modal-footer="{ ok, cancel }">
            <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
            <b-button variant="primary" style="color: white" @click="ok()">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal id="modal-xuatphieu" scrollable centered title="Xuất phiếu điều xử lý sự cố" ok-only @ok="okXuatPhieu">
        <div><b>Kiểu xuất</b></div>
        <div style="padding-left: 20px; padding-top: 5px;">
            <div style="position: relative; padding-left: 15px;">
                <input type="radio" id="kieuxuat-0" value="0" v-model="kieuXuatPhieu" style="position: absolute; left: 0; top: 2px;">
                <label for="kieuxuat-1">Xuất phiếu điều toàn tổ</label>
            </div>
            <div style="position: relative; padding-left: 15px;">
                <input type="radio" id="kieuxuat-1" value="1" v-model="kieuXuatPhieu" style="position: absolute; left: 0; top: 2px;">
                <label for="kieuxuat-1">Xuất phiếu điều cho sự cố đang chọn</label>
            </div>
        </div>
        <template #modal-footer="{ ok, cancel }">
            <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
            <b-button variant="primary" style="color: white" @click="ok()">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal id="modal-xacnhan-huy-giaoviec-nv" centered title="Thông báo" size="sm" @ok="okHuyGiaoViecNv">        
        <span>Bạn có thực sự muốn hủy giao việc phiếu đang chọn không?</span>
        <template #modal-footer="{ ok, cancel }">
             <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
             <b-button variant="primary" style="color: white" @click="ok()">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal ref="ref-xacnhan-xoa-anh" centered title="Thông báo" size="sm">        
        <span>Bạn thật sự muốn xoá ảnh sự cố đã chọn không ?</span>
        <template #modal-footer="{ cancel }">
             <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
             <b-button variant="primary" style="color: white" @click="okXoaAnh">Đồng ý</b-button>
        </template>
   </b-modal>
    <ModalCongSoiBiSuCo ref="modal-congsoi-bi-suco"></ModalCongSoiBiSuCo>
    <ModalXemThongTin modal-id="modal-xem-thongtin" ref="ref-modal-xem-thongtin"></ModalXemThongTin>
    <ModalTraPhieu modal-id="modal-traphieu" :phieu-id="idPhieuDuocChon" @success="thucHienTraCuu"></ModalTraPhieu>
    <ModalBaoTon modal-id="modal-baoton" :parent="this" @success="thucHienTraCuu"></ModalBaoTon>
    <ModalInPhieu modal-id="modal-in-phieu" ref="ref-modal-in-phieu"></ModalInPhieu>
    <ModalGiaoPhieuNv ref="ref-modal-giaophieu-nv" @success="thucHienLayDsGiaoViec"></ModalGiaoPhieuNv>
</div>