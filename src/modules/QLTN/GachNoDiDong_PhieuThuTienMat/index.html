<div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="#" @click.prevent="onClickNhapMoi" title="Nhập mới">
                    <span class="icon nc-icon-glyph ui-1_circle-add"></span> Nhập mới
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickLayDL" title="Lấy dữ liệu trả từ Vinaphone">
                    <span class="icon one-chart-area"></span> Lấy DL
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickDongBo" title="Đồng bộ">
                    <span class="icon one-sync1"></span> Đồng bộ
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickPhieuTra" title="Lấy danh sách các phiếu đã gạch">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span> Phiếu trả
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form padt8 padb8">
            <div class="pull-right custom-kycuoc">
                <app-ky-cuoc @handleChangeKyCuoc="handleKyHoaDon"></app-ky-cuoc>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="box-form">
            <div class="legend-title">
                <div class="pull-left">Thông tin thanh toán</div>
                <div class="pull-right">
                    <div class="list-checks normal red">
                        <div class="item">
                            Kiểu đồng bộ
                        </div>
                        <div class="item">
                            <div class="check-action">
                                <input v-model="typeDongBo" type="radio" class="check" value="1">
                                <span class="name">Thêm phiếu</span>
                            </div>
                        </div>
                        <div class="item">
                            <div class="check-action">
                                <input v-model="typeDongBo" type="radio" class="check" value="0">
                                <span class="name">Xóa phiếu</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Thủ quỹ
                                </div>
                                <div class="value">
                                    <div>
                                        <!-- <select v-model="form.idThuQuy" name="" id="" class="form-control">
                                            <option value="">admin_Quản trị hệ thống_Quầy: Tập đoàn </option>
                                        </select> -->
                                        <SelectExt v-model.trim="form.idThuQuy" :dataSource="form.dsThuQuy"
                                            dataTextField="TEN_NV" dataValueField="NHANVIEN_ID" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Chứng từ
                                </div>
                                <div class="value">
                                    <input v-model="form.chungTu" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Mã TT
                                </div>
                                <div class="value">
                                    <input ref="maTT" v-model="form.maTT" type="text" class="highlight form-control"
                                        @keyup.enter="onClickLayDL">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Số máy
                                </div>
                                <div class="value">
                                    <input v-model="form.soMay" type="text" class="form-control highlight"
                                        @keyup.enter="onClickLayDL">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">
                            User NEO
                        </div>
                        <div class="value">
                            <div>
                                <!-- <select v-model="form.idUSerNeo" name="" id="" class="form-control">
                                    <option value=""></option>
                                </select> -->
                                <SelectExt v-model.trim="form.idUSerNeo" :dataSource="form.dsUserNeo"
                                    dataTextField="USER_VNP" dataValueField="USER_VNP" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input v-model="form.checkDonViQL" type="checkbox" class="check">
                                        <span class="name">Đơn vị QL</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div>
                                        <!-- <select v-model="form.idDonVi" name="" id="" class="form-control">
                                            <option value="">Tập đoàn </option>
                                        </select> -->
                                        <SelectExt v-model.trim="form.idDonVi" :dataSource="form.dsDonViQL"
                                            dataTextField="TEN_HIENTHI" dataValueField="DONVI_ID" :disabled="true"
                                            placeholder="Tập đoàn" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2 col-12">
                            <div class="info-row">
                                <div class="key w40">
                                    Nhóm
                                </div>
                                <div class="value">
                                    <div>
                                        <!-- <select v-model="form.idNhom" name="" id="" class="form-control">
                                            <option value="">Tập đoàn </option>
                                        </select> -->
                                        <SelectExt v-model.trim="form.idNhom" :dataSource="form.dsNhom"
                                            dataTextField="TEN" dataValueField="LOAINV_ID" :disabled="true"
                                            placeholder="Tất cả" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Nhân viên
                                </div>
                                <div class="value">
                                    <div>
                                        <!-- <select v-model="form.idNhanVien" name="" id="" class="form-control">
                                            <option value="">[Chưa chọn giá trị] </option>
                                        </select> -->
                                        <SelectExt v-model.trim="form.idNhanVien" :dataSource="form.dsNhanVien"
                                            dataTextField="TEN_HIENTHI" dataValueField="NHANVIEN_ID" :disabled="true"
                                            placeholder="Chưa chọn giá trị" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">
                            Ghi chú
                        </div>
                        <div class="value">
                            <!-- <div class="select-custom">
                                <select name="" id="" class="form-control">
                                    <option value=""></option>
                                </select>
                            </div> -->
                            <input v-model="form.ghiChu" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input v-model="form.checkTuNgay" type="checkbox" class="check">
                                        <span class="name">Từ ngày</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <ejs-datepicker class="form-control bg-none bor0 fw6 text" placeholder="Chọn ngày"
                                        :format="'dd/MM/yyyy'" :showClearButton="false" v-model="form.tuNgay"
                                        :allowEdit="false" :enabled="form.checkTuNgay">
                                    </ejs-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input v-model="form.checkDenNgay" type="checkbox" class="check">
                                        <span class="name">Đến ngày</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <!-- <div class="input-icon-right">
                                        <input type="text" class="form-control">
                                        <span class="icon one-calendar"></span>
                                    </div> -->
                                    <ejs-datepicker class="form-control bg-none bor0 fw6 text" placeholder="Chọn ngày"
                                        :format="'dd/MM/yyyy'" :showClearButton="false" v-model="form.denNgay"
                                        :allowEdit="false" :enabled="form.checkDenNgay">
                                    </ejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-12">
                <div class="box-form">
                    <div class="legend-title">
                        <div class="pull-left">Danh sách phiếu thanh toán trên Vinaphone</div>
                        <div class="pull-right red italic">Tổng số phiếu: {{tongSoPhieu}}</div>
                        <div class="clearfix"></div>
                    </div>
                    <DataGrid :columns="[
                                    {fieldName: 'PHIEU_ID', headerText: 'Phiếu ID', allowFiltering: true, width: 120},
                                    {fieldName: 'MA_KH', headerText: 'Mã thanh toán', allowFiltering: true},
                                    {fieldName: 'TONGTRA', headerText: 'Tổng trả', allowFiltering: true, type:'number', format:'N0'},
                                    {fieldName: 'NGUOI_GACH', headerText: 'User gạch', allowFiltering: true},
                                    {fieldName: 'NGAY_THUC', headerText: 'Ngày gạch', allowFiltering: true},
                                    {fieldName: 'HINHTHUC_TT', headerText: 'Hình thức TT', allowFiltering: true},
                                    ]" :dataSource="dsPhieuThanhToanVNP" :showFilter="true" :showColumnCheckbox="true"
                        dataKeyField="PHIEU_ID" @rowClicked="phieuTT_selectedRowChanged" ref="gridPhieuThanhToan"
                        :allowPaging="true" :enablePagingServer="false" :enabledSelectFirstRow="false"
                        :selectionSettings="{checkboxOnly: true, type: 'Multiple'}" />
                </div>
            </div>
            <div class="col-sm-6 col-12">
                <div class="box-form">
                    <div class="legend-title">
                        Chi tiết phiếu thanh toán
                    </div>
                    <DataGrid :columns="[
                                    {fieldName: 'PHIEU_ID', headerText: 'Phiếu ID', allowFiltering: true, width: 120},
                                    {fieldName: 'SOMAY', headerText: 'Số máy', allowFiltering: true},
                                    {fieldName: 'THANGTRA', headerText: 'Tháng trả', allowFiltering: true},
                                    {fieldName: 'TRAGOC', headerText: 'Trả gốc', allowFiltering: true, type:'number', format:'N0'},
                                    {fieldName: 'TRATHUE', headerText: 'Trả thuế', allowFiltering: true, type:'number', format:'N0'},
                                    {fieldName: 'CHIHOAHONG', headerText: 'Hoa hồng', allowFiltering: true, type:'number', format:'N0'},
                                    {fieldName: 'TONGTRA', headerText: 'Tổng trả', allowFiltering: true, type:'number', format:'N0'},
                                    ]" :dataSource="dsChiTietThanhToan" :showFilter="true"
                        @selectedRowChanged="thuebao_selectedRowChanged" ref="gridThueBao" :allowPaging="true"
                        :enablePagingServer="false" @rowDoubleClicked="thuebao_doubleclicked" />
                </div>
            </div>
        </div>
    </div>
    <FormDSPhieuGachNoVNP />
    <FormDSTraCuuTTTT :ma_tb="maThueBaoTT" :kyCuoc="kyCuoc" />
</div>
