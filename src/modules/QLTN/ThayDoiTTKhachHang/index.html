<div >

    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="#" @click.prevent="onClickNhapMoi" title="Nhập mới">
                    <span class="icon one-file-plus"></span> Nhập mới
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickCapNhat" title="Cập nhật">
                    <span class="icon one-reload1"></span> Cập nhật
                </a>
            </li>
            <li v-show="config.f_inhoadon_visible">
                <a href="#" @click.prevent="onClickDangKyInHD" title="Đăng ký in hóa đơn theo file">
                    <span class="icon one-reload1"></span> Đăng ký in HĐ
                </a>
            </li>
            <li v-show="config.f_lienhe_visible">
                <a href="#" @click.prevent="onClickLienHe" title="Thông tin liên hệ">
                    <span class="icon nc-icon-glyph business_contacts"></span> Liên hệ
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickEmail" title="Email">
                    <span class="icon nc-icon-glyph ui-1_email-83"></span> Email
                </a>
            </li>
            <li v-show="config.f_diachiphat_visible">
                <a href="#" @click.prevent="onClickDiaChiPhat" title="Thay đổi địa chỉ phát theo file">
                    <span class="icon nc-icon-glyph business_contacts"></span> Địa chỉ phát
                </a>
            </li>
            <li v-show="config.f_diachict_visible">
                <a href="#" @click.prevent="onClickDiaChiChungTu" title="Cập nhật địa chỉ chứng từ theo file">
                    <span class="icon nc-icon-glyph business_contacts"></span> Địa chỉ CT
                </a>
            </li>
            <li v-show="config.f_mst_visible">
                <a href="#" @click.prevent="onClickMaSoThue" title="Cập nhật Mã số thuế theo file">
                    <span class="icon nc-icon-glyph business_contacts"></span> Mã số thuế
                </a>
            </li>
            <li v-show="config.f_sdt_visible">
                <a href="#" @click.prevent="onClickCapNhatSDT" title="Cập nhật số điện thoại theo file">
                    <span class="icon nc-icon-glyph ui-1_email-83"></span> Điện thoại
                </a>
            </li>
            <li v-show="config.f_mig_visible">
                <a href="#" @click.prevent="onClickGoMIG" title="Gỡ MIG">
                    <span class="icon nc-icon-glyph ui-1_email-83"></span> Gỡ MIG
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickLienHeFile" title="Cập nhật thông tin liên hệ theo file">
                    <span class="icon nc-icon-glyph business_contacts"></span> Liên hệ File
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="onClickTenTT" title="Cập nhật tên TT theo file">
                    <span class="icon nc-icon-glyph business_badge"></span> Tên TT
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-col box-form">
            <div class="legend-title">Thông tin thanh toán</div>
            <div class="note red italic marb10 fw6">Chọn “Tức thì”: Nếu mã thanh toán đã được gạch nợ tuyến thu thì thông tin cập nhật sẽ có hiệu lực vào tháng sau</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="info-row">
                        <div class="key w120">
                            Danh bạ
                        </div>
                        <div class="value">
                            <div class="list-checks mart7">
                                <div class="item">
                                    <div class="check-action">
                                        <input type="radio" value="0" v-model="form.danhBa" class="check">
                                        <span class="name">Tháng</span>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="check-action">
                                        <input type="radio" value="1" v-model="form.danhBa" class="check">
                                        <span class="name">Hiện tại</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Hiệu lực
                        </div>
                        <div class="value">
                            <div class="list-checks mart7">
                                <div class="item">
                                    <div class="check-action">
                                        <input type="radio" value="1" v-model="form.hieuLuc" class="check">
                                        <span class="name">Tức thì</span>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="check-action">
                                        <input type="radio" value="0" v-model="form.hieuLuc" class="check">
                                        <span class="name">Tháng sau</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Mã TT <BssRequiredMarker class="ml-1"/>
                                </div>
                                <div class="value">
                                    <input type="text" ref="maTT" v-model="form.maTT" v-on:keyup.enter="onEnterMaTT"  class="highlight form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Mã đại diện
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="form.maTbDaiDien" class="form-control">
                                            <option v-for="dv in dsMaDaiDien" v-bind:value="dv.MA_TB">{{dv.MA_TB}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Tên thanh toán <BssRequiredMarker class="ml-1"/>
                        </div>
                        <div class="value">
                            <input type="text" v-model="form.tenTT" class="form-control">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Địa chỉ TT <BssRequiredMarker class="ml-1"/>
                        </div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="openDiaChiTT" title="Chọn địa chỉ thanh toán">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" v-model="form.diaChiTT" class="form-control">
                                <!-- <div class="select-custom">
                                    <select v-model="form.diaChiTT" class="form-control">
                                        <option v-bind:value="form.diaChiTT">{{form.diaChiTT}}</option>
                                    </select>
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Địa chỉ CT <BssRequiredMarker class="ml-1"/>
                        </div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="openDiaChiCT" title="Chọn địa chỉ chứng từ">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" v-model="form.diaChiCt" class="form-control">
                            </div>

                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Địa chỉ BC
                        </div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="openDiaChiBC" title="Chọn địa chỉ báo cước">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" v-model="form.diaChiBc" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Điện thoại
                                </div>
                                <div class="value">
                                    <input type="number" v-model="form.soDt" class=" form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Email
                                </div>
                                <div class="value">
                                    <input type="text"  v-model="form.email" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Ghi chú
                                </div>
                                <div class="value">
                                    <input type="text" v-model="form.ghiChu " class=" form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Điểm tín nhiệm
                                </div>
                                <div class="value">
                                    <input type="text" v-model="form.diemTN" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Mã in ghép
                                </div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click="openFormMaInGhep" title="Chọn mã in ghép">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" v-model="form.main_ghep" class="form-control ">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Đơn vị QL
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="form.idDVQL" class="form-control">
                                            <option v-for="item in dsDVQL" v-bind:value="item.DONVI_ID">{{item.TEN_DV}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Hình thức TT <BssRequiredMarker class="ml-1"/>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="form.idHTTT" id="" class="form-control">
                                            <option value="">Chọn hình thức thanh toán</option>
                                            <option v-for="item in dsHTTT" v-bind:value="item.HTTT_ID">{{item.HTTT}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Mã NVTC <BssRequiredMarker class="ml-1"/>
                                </div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button :class="[checkTTAM ? 'btn disabled' : 'btn']" @click="$refs.dlgTimKiemNVTC.openDialog()" :disabled="checkTTAM" title="Chọn nhân viên TC">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <div class="row">
                                            <div class="col-sm-6 col-12">
                                                <input type="text" v-model="form.maNvTC" class="form-control highlight" :disabled="checkTTAM">
                                            </div>
                                            <div class="col-sm-6 col-12">
                                                <input type="text" v-model="form.maTuyen" class="form-control highlight" :disabled="checkTTAM">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    Tài khoản
                                </div>
                                <div class="value">
                                    <input type="text" v-model="form.stk" class=" form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Mã số thuế
                                </div>
                                <div class="value">
                                    <input type="text" v-model="form.mst" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    <div class="check-action">
                                        <input type="checkbox" v-model="form.bankCkb" class="check">
                                        <span class="name">Ngân hàng</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <ejs-dropdownlist :enabled="form.bankCkb" :filtering='onFilteringNganHang' :allowFiltering="true" :dataSource='dsBank' :fields="config.fieldsNganHang" v-model = "form.bankId" :popupWidth="450" :placeholder="'Chọn ngân hàng'"></ejs-dropdownlist>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Mã NVQL
                                </div>
                                <div class="value">
                                    <input type="text" v-model="form.nvql" class="form-control highlight">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Dịch vụ khác
                        </div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn"  @click.prevent="onClickBtnDvKhac" title="Chọn dịch vụ khác">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <select  multiple class="form-control" style="height: 130px;resize: vertical;">
                                    <option v-for="item in dsDichVuKhac" v-bind:value="item.DVKHAC_ID">{{item.TEN_DVKHAC}}</option>
                                  </select>
                                <!-- <textarea v-html="form.dsDvKhac" class="form-control" style="height: 130px;resize: vertical;"></textarea> -->
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Điện thoại (KH)
                        </div>
                        <div class="value">
                            <input type="text" v-model="form.dienThoaiKH" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <b-modal id="modal-inPT" modal-class="modal-dvkhac" hide-footer hide-header no-close-on-backdrop>
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon one-notepad"></span> Đăng ký dịch vụ khác</div>
                <div class="close -ap icon-close" data-dismiss="modal" @click="onClickHideModal">
                </div>
            </div>
            <div class="list-actions-top">
                <ul class="list">
                    <li>
                        <a href="#" @click.prevent="onAccept">
                            <span class="icon nc-icon-glyph ui-1_check-circle-08"></span> Chấp nhận
                        </a>
                    </li>
                </ul>
            </div>
            <div class="popup-body">
                <div class="box-form">
                    <div class="table-content table-dichvu">
                        <DataGrid
                            v-bind:columns="[
                            {fieldName: 'MA_DVKHAC', headerText: 'Mã dịch vụ', allowFiltering: true, allowSorting: false},
                            {fieldName: 'TEN_DVKHAC', headerText: 'Tên dịch vụ', allowFiltering: true, allowSorting: false},
                            {fieldName: 'TRANGTHAI', headerText: 'Trạng thái', allowFiltering: true, allowSorting: false},
                            {fieldName: 'NOIDUNG', headerText: 'Nội dung', allowFiltering: true, allowSorting: false},
                            {fieldName: 'HTML_DANGKY', headerText: 'Đăng ký', allowFiltering: true, allowSorting: false, allowHtml:true},
                            {fieldName: 'HTML_HUY', headerText: 'Hủy DV', allowFiltering: true, allowSorting: false, allowHtml:true}]"
                        v-bind:dataSource="dsDvMaster" :showFilter="false"
                        dataKeyField="MA_DVKHAC" :allowPaging="true" :enablePagingServer="false"
                        >
                    </DataGrid>
                    </div>
                </div>
            </div>
        </div>
    </b-modal>
    <b-modal id="modal-ttlh" modal-class="modal-ttlh" hide-footer hide-header no-close-on-backdrop>
        <thong-tin-lien-he
        :khachHangId="form.khachHangId"
        :thanhToanId="form.thanhToanId"
        :thueBaoId="form.thueBaoId"
         v-on:close="onClickHideModalTTLH">
        </thong-tin-lien-he>
    </b-modal>
    <b-modal id="modal-email" modal-class="modal-ttlh" hide-footer hide-header no-close-on-backdrop>
        <email  :khachHangId="form.khachHangId"  v-on:close="onClickHideModalEmail"></email>
    </b-modal>
    <b-modal id="modal-tentt" modal-class="modal-ttlh" hide-footer hide-header no-close-on-backdrop>
        <tentt v-on:close="onClickHideModalTenTT"></tentt>
    </b-modal>
    <b-modal id="bv-modal-example" modal-class="modal-ttlh" hide-footer hide-header no-close-on-backdrop size="lg">
      <ds-thuebao :dsDBModal="dsDBModal" :title="modalTitle" v-on:onConfirm="onConfirmThueBao" v-on:close="onCloseThueBao"></ds-thuebao>
    </b-modal>
    <!--
    <ModalChonDiaChi modalId="idDiaChi_thanhToan" @xacnhan="getDiaChiTT" :data="objDiaChiTT"/>
    <ModalChonDiaChi modalId="idDiaChi_chungTu" @xacnhan="getDiaChiCT" :data="objDiaChiCT"/>
    <ModalChonDiaChi modalId="idDiaChi_baoCuoc" @xacnhan="getDiaChiBC" :data="objDiaChiBC"/>
    -->
    <!-- <PopupTimKiemNhanVienThuCuoc @acceptChange="getNVTCProcess($event)" ref="dlgTimKiemNVTC" @chonNVTC="chonNVTCHandler"></PopupTimKiemNhanVienThuCuoc> -->
    <PopupTimKiemNhanVienThuCuoc ref="dlgTimKiemNVTC" @chonNVTC="chonNVTCHandler" :vdonvi="form.idDVQL ? form.idDVQL : -1"
        :vnvtc="form.maNvTC"
        :vtinh_id="diachi !== null && diachi.tinh_id !== null  && diachi.tinh_id > 0? diachi.tinh_id : 0"
        :vquan_id="diachi !== null && diachi.quan_id !== null  && diachi.quan_id > 0? diachi.quan_id : 0"
        :vphuong_id="diachi !== null && diachi.phuong_id !== null && diachi.phuong_id > 0? diachi.phuong_id : 0"
        :vpho_id="diachi !== null && diachi.pho_id !== null && diachi.pho_id > 0 ? diachi.pho_id : 0"
        :vkhu_id="diachi !== null && diachi.khu_id !== null && diachi.khu_id > 0 ? diachi.khu_id : 0"
        :vap_id="diachi !== null && diachi.ap_id !== null && diachi.ap_id > 0? diachi.ap_id : 0"
        :vdacdiem_id="diachi !== null && diachi.dacdiem_id !== null && diachi.dacdiem_id > 0 ? diachi.dacdiem_id : 0">
    </PopupTimKiemNhanVienThuCuoc>
    <MaInGhep ref="dlgMaIG" @close="closeFormMaIG" :khachhang_id="form.khachHangId" :tucthi="form.hieuLuc" :kyhoadon="kyHoaDon" @selectedMaIG="getMaIG"></MaInGhep>
    <TTLHFile />
    <DiaChiPhatFile />
    <DiaChiCTFile kieuId="25"/>
    <ChonDiaChi ref="refChonDiaChi" :data="diachi" @xacnhan="xacNhanDCHandler"></ChonDiaChi>
    <CapNhatTheoFile ref="refCapNhatTheoFile" :kieuId="kieuId" @xacnhan="xacnhanCapNhatHandler"></CapNhatTheoFile>
    <CapNhatInHDTheoFile ref="refDangKyInHDTheoFile" :kieuId="kieuId" @xacnhan="xacnhanDangKyHandler"></CapNhatInHDTheoFile>
</div>
