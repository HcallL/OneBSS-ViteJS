<div>
  <div class="list-actions-top">
    <ul class="list">
      <li>
        <a href="javascript: void(0)" @click="doAddNew" :class="{ disabled: !configs.f_addnew_enabled }">
          <span class="icon one-file-remove"></span> Nhập mới
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doSave" :class="{ disabled: !configs.f_save_enabled }">
          <span class="icon one-excel"></span>Ghi lại
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doDelete" :class="{ disabled: !configs.f_delete_enabled }">
          <span class="icon one-file-remove"></span> Xóa
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doGanGDV" :class="{ disabled: !configs.f_gan_gdv_enabled }">
          <span class="icon one-file-remove"></span> Gán GDV
        </a>
        <app-gan-g-d-v ref="refGanGDV" :kehoach_id="params.p_KEHOACH_ID" :soluong_gdv="params.p_so_luong"></app-gan-g-d-v>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doGanDichVu">
          <span class="icon one-file-remove"></span> Gán dịch vụ
        </a>
        <app-gan-d-v ref="refGanDV" :kehoach_id="params.p_KEHOACH_ID"></app-gan-d-v>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doCancel" :class="{ disabled: !configs.f_cancel_enabled }">
          <span class="icon one-file-remove"></span> Hủy
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doThucHienGiao">
          <span class="icon one-file-remove"></span> Thực hiện giao
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="doChiTietGiao">
          <span class="icon one-file-remove"></span> DS giao
        </a>
        <app-chi-tiet-giao-c-p-s ref="refChiTietGiaoCPS" :kehoach_id="params.p_KEHOACH_ID"></app-chi-tiet-giao-c-p-s>
      </li>
    </ul>
  </div>
  <div class="page-content">
    <div class="box-form">
      <div class="pull-right w200">
        <div class="info-row">
          <div class="key w100">
              Tìm kiếm
          </div>
          <div class="value">
            <input type="text" class="form-control" v-model="params.p_tim_kiem">
          </div>
        </div>
      </div>
    <div class="clearfix"></div>
    </div>
    <div class="box-form">
      <div class="legend-title">Thông tin cập nhật</div>
      <div class="row">
        <div class="col-sm-6 col-12">
          <div class="info-row">
            <div class="key w100">
                Loại NV
            </div>
            <div class="value">
              <ejs-dropdownlist :filtering='onFilteringLoaiNV' :allowFiltering="true" :dataSource='params.p_loai_nv_options' :fields="configs.fieldsLoaiNV" v-model = "params.p_loai_nv" :placeholder="'Chọn loại nv'"></ejs-dropdownlist>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">
                    Thứ tự
                </div>
                <div class="value">
                  <ejs-numerictextbox min="0" max="1000000" style="padding-right: 15px" locale="vi-VN"  :showSpinButton="false" class="text-chartE form-control tright" v-model="params.p_thu_tu" format="N0"></ejs-numerictextbox>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">
                    Số lượng
                </div>
                <div class="value">
                  <ejs-numerictextbox min="0" style="padding-right: 15px" locale="vi-VN"  :showSpinButton="false" class="text-chartE form-control tright" v-model="params.p_so_luong" format="N0"></ejs-numerictextbox>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-12">
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">
                    SL giao
                </div>
                <div class="value">
                  <ejs-numerictextbox min="0" style="padding-right: 15px" locale="vi-VN"  :showSpinButton="false" class="text-chartE form-control tright" v-model="params.p_sl_giao" format="N0"></ejs-numerictextbox>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">
                    Ngày công
                </div>
                <div class="value">
                  <ejs-numerictextbox min="0" style="padding-right: 15px" locale="vi-VN"  :showSpinButton="false" class="text-chartE form-control tright" v-model="params.p_ngay_cong" format="N0"></ejs-numerictextbox>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">
                    Doanh thu từ
                </div>
                <div class="value">
                  <div class="input-icon-right calculator-box">
                    <ejs-numerictextbox style="padding-right: 15px" locale="vi-VN"  :showSpinButton="false" class="text-chartE form-control tright" v-model="params.p_doanhthu_tu" format="N0"></ejs-numerictextbox>
                    <span class="icon one-calculator" @click="configs.isDTTuCalShow = !configs.isDTTuCalShow"></span>
                    <app-calculator @display="params.p_doanhthu_tu = $event" :value="$data.params.p_doanhthu_tu" :is-show="configs.isDTTuCalShow" @close="configs.isDTTuCalShow = !configs.isDTTuCalShow"></app-calculator>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">
                  <div class="">
                      <b-form-checkbox
                        v-model = "params.p_chk_doanhthu_den"
                        class = "check"
                        value = '1'
                        unchecked-value = '0'
                      >
                        <span class="name">đến</span>
                      </b-form-checkbox>
                  </div>
                </div>
                <div class="value">
                  <div class="input-icon-right calculator-box">
                    <ejs-numerictextbox :enabled="chk_doanhthu_den" style="padding-right: 15px" locale="vi-VN"  :showSpinButton="false" class="text-chartE form-control tright" v-model="params.p_doanhthu_den" format="N0"></ejs-numerictextbox>
                    <span class="icon one-calculator" @click="configs.isDTDenCalShow = !configs.isDTDenCalShow"></span>
                    <app-calculator @display="params.p_doanhthu_den = $event" :value="$data.params.p_doanhthu_den" :is-show="configs.isDTDenCalShow" @close="configs.isDTDenCalShow = !configs.isDTDenCalShow"></app-calculator>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="box-form">
      <div class="legend-title">Kế hoạch thu</div>
      <div class="table-content" style="height: 400px">
        <DataGrid
          v-bind:columns="configs.dsKeHoach"
          v-bind:dataSource="dsKeHoach"
          :enablePagingServer="false"
          :showFilter="true"
          :allowPaging="true"
          :allowExcelExport="true"
          :totalRecords="kehoachPageInfo.totalElement"
          :pageSize="kehoachPageInfo.maxSize"
          :pageIndex="kehoachPageInfo.page"
          :key="keyDSKeHoach"
          height="100%"
          @selectedRowChanged="dsKeHoachRowChanged"
          ref="gridKetQuaTraCuuTB"
          >
        </DataGrid>
      </div>
    </div>
  </div>
</div>
