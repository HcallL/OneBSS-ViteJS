<div class="main-wrapper">
  <breadcrumb :header="header" />
  <div class="list-actions-top">
    <ul class="list">
      <li>
        <a href="javascript:;" v-on:click="btnLayTTMoi_Click">
          <span class="icon one-file-attach"></span> Lấy TT
        </a>
      </li>
      <li v-if="controls.tsbtnGiaoViec.visible">
        <a href="javascript:;" v-on:click="tsbtnGiaoViec_Click" :class="{'disabled':(!controls.tsbtnGiaoViec.enabled || state.phieu_id == 0)}">
          <span class="icon one-file-arrow-right1"></span> Giao việc
        </a>
      </li>
      <!-- <li v-if="controls.tsbtn_KichHoat_CA.visible">
          <a href="javascript:;">
              <span class="icon one-file-arrow-right1"></span> Kích hoạt
          </a>
      </li>
      <li v-if="controls.tbs_giahan_ca.visible">
        <a href="javascript:;">
            <span class="icon one-file-arrow-right1"></span> Gia hạn
        </a>
      </li>
      <li v-if="controls.tsbtn_Duyet_CA.visible">
        <a href="javascript:;">
            <span class="icon one-file-arrow-right1"></span> Duyệt
        </a>
      </li>
      <li v-if="controls.tsbtn_khong_duyet_CA.visible">
        <a href="javascript:;">
            <span class="icon one-file-arrow-right1"></span> Không Duyệt
        </a>
      </li>
      <li v-if="controls.tsbTaoToken.visible">
        <a href="javascript:;">
            <span class="icon one-file-arrow-right1"></span> Tạo token
        </a>
      </li>
      <li v-if="controls.tsbThuHoiCTS.visible">
        <a href="javascript:;">
            <span class="icon one-file-arrow-right1"></span> Thu hồi
        </a>
      </li> -->
      
      <li>
        <a href="javascript:;" v-on:click="tsbtnChapNhan_Click" :class="{'disabled':(!controls.tsbtnChapNhan.enabled || state.phieu_id == 0)}">
          <span class="icon one-reload1"></span> Cập nhật
        </a>
      </li>
      <li  v-if="controls.tsbtnGiaoPhieu.visible">
        <a href="javascript:;" v-on:click="tsbtnGiaoPhieu_Click" :class="{'disabled':(!controls.tsbtnGiaoPhieu.enabled || state.phieu_id == 0)}">
          <span class="icon one-file-arrow-right1"></span> Giao phiếu
        </a>
      </li>
      <li>
        <a href="javascript:;" v-on:click="tsbUpHoSo_Click" :class="{'disabled':(!controls.tsbUpHoSo.enabled || state.phieu_id == 0)}">
          <span class="icon one-upload"></span> Up hồ sơ
        </a>
      </li> 
      <li v-if="controls.tsbtnHoanCong.visible">
        <a href="javascript:;" v-on:click="tsbtnHoanCong_Click" :class="{'disabled':(!controls.tsbtnHoanCong.enabled || state.phieu_id == 0)}">
          <span class="icon one-hoancong"></span> Hoàn công
        </a>
      </li>
      <li v-if="controls.tsddbIn.visible">
        <a href="javascript:;" v-on:click="DangXayDung" :class="{'disabled':(!controls.tsddbIn.enabled || state.phieu_id == 0)}">
            <span class="icon one-xlsx-import"></span>Xuất phiếu
        </a>
      </li>  
      <li v-if="controls.tsbtnChuyenTo.visible">
        <a href="javascript:;" v-on:click="tsbtnChuyenTo_Click" :class="{'disabled':(!controls.tsbtnChuyenTo.enabled || state.phieu_id == 0)}">
            <span class="icon one-change"></span>Chuyển tổ
        </a>
      </li>
      <li v-if="controls.tsbtnTraPhieu.visible">
          <a href="javascript:;" v-on:click="tsbtnTraPhieu_Click"  :class="{'disabled':(!controls.tsbtnTraPhieu.enabled || state.phieu_id == 0)}">
              <span class="icon one-file-back"></span>Trả phiếu
          </a>
      </li> 
      <li v-if="controls.tsbtnXuatFile.visible">
        <a href="javascript:;"  v-on:click="tsbtnXuatFile_Click" :class="{'disabled':(!controls.tsbtnXuatFile.enabled || state.phieu_id == 0)}">
            <span class="icon one-download"></span> Xuất file
        </a>
      </li>
      <li v-if="controls.tsbtnGiaoPhieu_Ton.visible">
        <a href="javascript:;" v-on:click="tsbtnGiaoPhieu_Ton_Click" :class="{'disabled':(!controls.tsbtnGiaoPhieu_Ton.enabled || state.phieu_id == 0)}">
            <span class="icon one-calendar-number"></span> Tồn phiếu
        </a>
      </li>
      
      <!-- <li v-if="controls.tsbtnHen.visible">
        <a href="javascript:;" v-on:click="DangXayDung" :class="{'disabled':(!controls.tsbtnHen.enabled || state.phieu_id == 0)}">
          <span class="icon one-henld"></span> Hẹn LĐ
        </a>
      </li> -->

      <li v-if="controls.tsbtnNVKT.visible">
        <a href="javascript:;" v-on:click="tsbtnNVKT_Click" :class="{'disabled':(!controls.tsbtnNVKT.enabled || state.phieu_id == 0)}">
          <span class="icon -ap icon-pin"></span> Gán KV
        </a>
      </li>

      <li v-if="controls.tsbtnFile_Upload.visible">
        <a href="javascript:;" v-on:click="tsbtnFile_Upload_Click" :class="{'disabled':(!controls.tsbtnFile_Upload.enabled || state.phieu_id == 0)}">
            <span class="icon one-upload"></span> File Upload
        </a>
      </li>

      <!-- <li v-if="controls.tsbtnNhapMoiTT.visible">
        <a href="javascript:;" v-on:click="tsbtnNhapMoiTT_Click" :class="{'disabled':(!controls.tsbtnNhapMoiTT.enabled || state.phieu_id == 0)}">
            <span class="icon one-clipart-edit"></span> Nhập mới TT
        </a>
      </li>  -->

      <li v-if="controls.tsbtnGiaoPhoiHop.visible">
        <a  href="javascript:;" v-on:click="tsbtnGiaoPhoiHop_Click" :class="{'disabled':(!controls.tsbtnGiaoPhoiHop.enabled || state.phieu_id == 0)}">
          <span class="icon one-file-arrow-right1"></span> Phối hợp thi công
        </a> 
      </li>
      <li v-if="controls.tsbtnHoanThanh.visible">
        <a href="#"   v-on:click="tsbtnHoanThanh_Click" :class="{'disabled':(!controls.tsbtnHoanThanh.enabled || state.phieu_id == 0)}">
          <span class="icon one-file-check"></span> Hoàn thành
        </a>
      </li>
       
      <!-- <li v-if="controls.tsbtnKichHoat.visible">
        <a href="javascript:;" v-on:click="tsbtnKichHoatVisa_Click" :class="{'disabled':(!controls.tsbtnKichHoat.enabled || state.phieu_id == 0)}">
          <span class="icon one-file-arrow-up"></span> Kích hoạt
        </a>
      </li> -->
      
      <li v-if="controls.tsbtnGiaoPhieuPhoiHop.visible">
        <a href="javascript:;" v-on:click="tsbtnGiaoPhieuPhoiHop_Click" :class="{'disabled':(!controls.tsbtnGiaoPhieuPhoiHop.enabled || state.phieu_id == 0)}">
          <span class="dropdown-icon one-file-half"></span>Giao phiếu phối hợp
        </a>
      </li>
     <!-- 
      <li v-if="controls.tsbtnHuyKH.visible">
        <a href="javascript:;" :class="{'disabled':(!controls.tsbtnHuyKH.enabled || state.phieu_id == 0)}">
          <span class="icon nc-icon-glyph ui-1_circle-remove"></span> Hủy kích hoạt
        </a>
      </li>  -->

        <!-- <li>
            <a href="javascript:;">
                <span class="icon nc-icon-glyph arrows-1_refresh-68"></span> Khôi phục số
            </a>
        </li> 
        <li>
            <a href="#">
                <span class="icon one-connect"></span>Đầu nối
            </a>
        </li>
       -->
    </ul>
    
    <!-- <div class="more dropdown hide">
      <a href="#" data-toggle="dropdown">
        <span class="icon -ap  icon-dots-three-vertical"></span>
      </a>
      <div class="dropdown-menu ovauto" style="max-height: 300px;">  
        
        
        <a href="#">
            <span class="dropdown-icon one-sync"></span> Đổi cổng
        </a>
        <a href="#">
            <span class="dropdown-icon one-vt"></span> Vật tư
        </a> 
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph ui-1_settings"></span> thông số KT
        </a> 
        <a href="#">
            <span class="dropdown-icon one-file-edit2"></span> Giao việc
        </a>
        <a href="#">
            <span class="dropdown-icon one-location-ip"></span> IP LAN, WAN
        </a>
        <a href="#">
            <span class="dropdown-icon one-path"></span> Hướng KN
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-arrow-right1"></span> Giao phiếu
        </a>

        <a href="#">
            <span class="dropdown-icon one-clipart-arrow-right"></span> Show Port
        </a>
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph arrows-1_simple-up"></span> Test port
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-visa"></span> Tra cứu VISA
        </a>
        <a href="#">
            <span class="dropdown-icon ui-1_lock nc-icon-glyph"></span> Tra cứu OneMesh
        </a>
        <a href="#">
            <span class="dropdown-icon ui-1_lock nc-icon-glyph"></span> Xem MK
        </a>
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph design_design"></span> Đo kiểm
        </a>
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph ui-1_edit-74"></span> Sửa kênh thu
        </a>
        <a href="#">
            <span class="dropdown-icon one-building"></span> Toà nhà
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-arrow-right"></span> Chuyển VMP
        </a>
        
        <a href="#">
            <span class="dropdown-icon one-apartment"></span> Cơ sở hạ tầng
        </a>
        <a href="#">
            <span class="dropdown-icon one-clipart-edit"></span> Nạp tiến trình
        </a>
        <a href="#">
            <span class="dropdown-icon one-upload"></span> Upload hồ sơ
        </a>

        <a href="#">
            <span class="dropdown-icon one-mobile-plus"></span> Gửi YC
        </a>

        <a href="#" v-if="controls.tsbtnHoanThienHS.visible"  v-on:click="tsbtnHoanThienHS_Click" :class="{'disabled':(!controls.tsbtnHoanThienHS.enabled || state.phieu_id == 0)}">
            <span class="dropdown-icon one-file-check"></span> Hoàn thiện
        </a> 
        
        
      </div>

    </div> -->
  </div>
  <div class="page-content">
    <div class="box-form">
      <div class="row">
        <div class="col-sm-2 col-12"></div>
        <div class="col-sm-10 col-12">
          <div class="row">
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">NV tiếp thị</div>
                <div class="value">
                  <input type="text" name="" id="" class="form-control" v-model="state.nhanvien_tiepthi" readonly="true" />
                </div>
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">Kiểu HĐ</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_kieuhd.list" v-model="listbox.ds_kieuhd.value" :disabled='true'>

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">Kênh thu</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_kenhthu.list" v-model="listbox.ds_kenhthu.value" :disabled='true'>

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">Tổng tiền</div>
                <div class="value"> 
                  <vue-numeric class="form-control tright red fw6" separator="," v-model="state.tongtien" readonly="true" placeholder="0" output-type="Number"></vue-numeric>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6 col-12">
        <div class="box-form">
          <div class="legend-title">
            <div class="pull-left">Thông tin khách hàng</div>
            <div class="pull-right">
              <div class="check-action">
                <input type="checkbox" class="check" v-model="state.checkbox_hen" :disabled="true">
                <span class="name text-main">Lắp đặt theo yêu cầu</span>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Loại HĐ/PL</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_loaihd.list" v-model="listbox.ds_loaihd.value" @change="onChange_loaihd($event)">

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Mã GD</div>
                <div class="value">
                  <input type="text" class="form-control highlight fw6" v-model="state.selectedPhieu.ma_gd">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Quy trình</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_quytrinh.list" v-model="listbox.ds_quytrinh.value" @change="onChange_quytrinh($event)" :disabled="true"> 

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Loại KH lớn</div>
                <div class="value">
                  <input type="text" class="form-control italic" v-model="state.khachhanglon" v-bind:class="{ 'text-danger': state.loaikhlon_id != 7}">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Account</div>
                <div class="value">
                  <input type="text" class="form-control highlight fw6" v-model="state.selectedPhieu.ma_tb">
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Kiểu lắp đặt</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="state.selectedPhieu.ten_kieuld" readonly="true">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Loại hình</div>
                <div class="value">
                  <input type="text" class="form-control fw6 " v-model="state.selectedPhieu.loaihinh_tb">
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Lắp kèm</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="state.thuebao_lapkem" readonly="true">
                </div>
              </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Tên thuê bao</div>
            <div class="value">
              <input type="text" class="form-control fw6 " v-model="state.selectedPhieu.ten_tb" readonly="true">
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Địa chỉ LĐ</div>
            <div class="value">
              <div class="input-more-button">
                <button class="btn" v-b-modal.popupDiaChiLD>
                    <span class="-ap icon-more_horiz"></span>
                </button>
                <ModalChonDiaChi modalId="popupDiaChiLD" :data="diachiLD" @xacnhan="getDiaChiLD"/> 
                <input type="text" v-model="diachiLD.DIACHI" class="form-control highlight" required title="Bạn chưa nhập địa chỉ lắp đặt">
                <!-- <bss-error-marker :has-error="$v.diachiLD.DIACHI.$error">
                    <input type="text" v-model="$v.diachiLD.DIACHI.$model" class="form-control highlight" required title="Bạn chưa nhập địa chỉ lắp đặt">
                </bss-error-marker>    -->
            </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Khu vực</div>
            <div class="value">
              <input type="text" class="form-control " v-model="state.selectedPhieu.ten_kv" readonly="true">
            </div>
            <!-- <div class="value w30 nowrap">
                <button class="btn btn-second">Thông tin TB</button>
            </div> -->
          </div>
          <div class="info-row">
            <div class="key w90">Ghi chú</div>
            <div class="value">
              <textarea name="" class="form-control" style="height: 62px;resize: none;" id="" cols="30" rows="10" v-model="state.selectedPhieu.ghichu"></textarea>
            </div>
          </div>
          <div class="legend-title mart20">Thông tin phiếu điều</div>
          <div class="info-row">
            <div class="key w90">Nội dung giao</div>
            <div class="value">
              <input type="text" class="form-control " v-model="state.selectedPhieu.nd_giao" readonly="true">
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Nội dung TH</div>
            <div class="value">
              <div class="input-more-button">
                <button class="btn" v-on:click="btnNDTH_Click">
                    <span class="-ap icon-more_horiz"></span>
                </button>
              <div>
                <input type="text" class="form-control fw6" v-model="state.selectedPhieu.nd_thuchien">
              </div>
            </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Nhân viên YC</div>
            <div class="value">
              <input type="text" class="form-control " v-model="state.nhanvien" readonly="true">
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Thông tin trả</div>
            <div class="value">
              <input type="text" class="form-control " v-model="state.nd_tra">
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-12">
        <div class="nav tabs tab-over">
          <a href="#tab1" data-toggle="tab" class="minw0 active">Thông tin dịch vụ</a>
          <!-- <a href="#tab2" data-toggle="tab" class="minw0">Thông tin gửi Y/C IT 360</a> -->
          <a href="#tab3" data-toggle="tab" class="minw0">Thông tin gói cước</a>
          <a href="#tab4" data-toggle="tab" class="minw0">Thông tin dịch vụ gia tăng</a>
          <a href="#tab5" data-toggle="tab" class="minw0">Tiến trình thi công</a>
          <!-- <a href="#tab6" data-toggle="tab" class="minw0">C.tiết đ.hành thi công</a> -->
        </div>
        <div class="tab-content">
          <div class="tab-pane active" id="tab1">
            <div class="table-content" style="height: 200px;">
              <table class="table-result table-gachle">
                <tbody>
                  <tr v-for="item in tab_dvcntt.list" :key="item.field_name">
                    <td class="w20 center "></td>
                    <td class="fw6">{{item.ten_hienthi}}</td>
                    <td>
                      <input v-if="item.data_type == 0" type="text" :disabled="item.field_name == 'MA_TB'" maxlength="item.field_length" class="form-control h24 h24 bor0 bg-none text fw6" v-model="item.field_value"  />
                      <select2 v-if="item.data_type == 1 && item.att != 0" :options="item.result_sql" v-model="item.field_value" :disabled="false"></select2>
                      <input v-if="item.data_type == 1 && item.att == 0" type="number" class="h24 h24 bor0 bg-none text fw6" v-model="item.field_value" :disabled="false" /> 
                      <date-picker v-if="item.data_type == 2" :format="dateFormat" :value-type="'format'" v-model="item.field_value" :disabled="false"></date-picker>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="legend-title mart20">Thông tin giao việc nhân viên</div>
            <div class="row">
              <div class="col-sm-6 col-12">
                <div class="info-row">
                  <div class="key w70">Ngày GV</div>
                  <div class="value w20 padt7">
                    <div class="check-action">
                      <input type="checkbox" class="check" v-model="state.dtpNgayGV.enabled">
                      <span class="name"></span>
                    </div>
                  </div>
                  <div class="value">
                    <div class="input-icon-right"> 
                      <date-picker :disabled="!state.dtpNgayGV.enabled" input-class="form-control" :format="dateFormat" :value-type="'format'" v-model="state.dtpNgayGV.value"></date-picker>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-12">
                <div class="info-row">
                  <div class="key w70">Ngày HT</div>
                  <div class="value w20 padt7">
                    <div class="check-action">
                      <input type="checkbox" class="check" v-model="state.dtpNgayBG.enabled">
                      <span class="name"></span>
                    </div>
                  </div>
                  <div class="value">
                    <div class="input-icon-right"> 
                      <date-picker :disabled="!state.dtpNgayBG.enabled" input-class="form-control" :format="dateFormat" :value-type="'format'" v-model="state.dtpNgayBG.value"></date-picker>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="info-row">
              <div class="key w70">Người GV</div>
              <div class="value">
                <div class="select-custom">
                  <select2 :options="tab_dvcntt.tt_giaoviec.ds_nguoigv.list" v-model="tab_dvcntt.tt_giaoviec.ds_nguoigv.value">

                  </select2>
                </div>
              </div>
            </div>
            <div class="legend-title mart20">
              <div class="pull-left">Nhân viên</div>
              <div class="pull-right red">
                {{tab_dvcntt.tt_giaoviec.tt_hdlapdat}}
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="table-content" style="height: 135px;">
              <DataGrid class="table-result table-gachle"
                        v-bind:columns="[
                                    {fieldName: 'ten_nv', headerText: 'Tên nhân viên', allowFiltering: true},
                                    {fieldName: 'so_dt', headerText: 'Số điện thoại', allowFiltering: true},
                                    {fieldName: 'str_nhiemvu', headerText: 'Nhiệm vụ', allowFiltering: true , allowHtml : false},
                                    {fieldName: 'ghichu', headerText: 'Ghi chú', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_dvcntt.tt_giaoviec.grid_nhanvien.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="tab2">
            <div class="table-content" style="height: 187px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'issue_id', headerText: 'Số phiếu', allowFiltering: true},
                                    {fieldName: 'ngay_cn', headerText: 'Ngày CN', allowFiltering: true},
                                    {fieldName: 'nguoi_cn', headerText: 'Người tạo', allowFiltering: true , allowHtml : false},
                                    {fieldName: 'url', headerText: 'URL', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_it360.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>

            <div class="row">
              <div class="col-sm-6 col-12">
                <div class="info-row mart20">
                  <div class="key w90">Tiêu đề</div>
                  <div class="value">
                    <textarea name="" class="form-control" style="height:62px;resize:none" id="" cols="30" rows="10"></textarea>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Trạng thái</div>
                  <div class="value">
                    <div class="select-custom"> 
                      <select2 :options="listbox.ds_trangthai_jira.list" v-model="listbox.ds_trangthai_jira.value"> 
                      </select2>
                    </div>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Ngày hết hạn</div>
                  <div class="value">
                    <div class="input-icon-right">
                      <input type="text" class="form-control">
                      <span class="icon one-calendar"></span>
                    </div>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Ngày HT</div>
                  <div class="value">
                    <div class="input-icon-right">
                      <input type="text" class="form-control">
                      <span class="icon one-calendar"></span>
                    </div>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Loại yêu cầu</div>
                  <div class="value">
                    <input type="text" class="form-control">
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Reporter</div>
                  <div class="value">
                    <input type="text" class="form-control">
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Assignee</div>
                  <div class="value">
                    <div class="input-icon-right">
                      <input type="text" class="form-control">
                      <span class="icon -ap icon-more_horiz"></span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-12">
                <div class="info-row mart20">
                  <div class="key w60">Mô tả</div>
                  <div class="value">
                    <textarea name="" class="form-control" style="height:280px;resize:none" id="" cols="30" rows="10"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="tab3">
            <div class="table-content" style="height: 187px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'tenthuoctinh', headerText: 'Tên thuộc tính', allowFiltering: true},
                                    {fieldName: 'tien', headerText: 'Tiền', allowFiltering: true},
                                    {fieldName: 'vat', headerText: 'VAT', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_ttgoicuoc.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="tab4">
            <div class="table-content" style="height: 187px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'ma_dvgt', headerText: 'Mã DVGT', allowFiltering: true},
                                    {fieldName: 'ten_dvgt', headerText: 'Tên dịch vụ', allowFiltering: true},
                                    {fieldName: 'kieu_yc', headerText: 'Kiểu YC', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_dvgiatang.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="tab5">
            <div class="table-content" style="height: 187px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'nguoi_cn', headerText: 'Người CN', allowFiltering: true},
                                    {fieldName: 'ngay_cn', headerText: 'Ngày CN', allowFiltering: true},
                                    {fieldName: 'noidung', headerText: 'Nội dung', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_tthicong.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="tab6">
            <div class="table-content" style="height: 187px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'ma_dvgt', headerText: 'Mã DVGT', allowFiltering: true},
                                    {fieldName: 'ten_dvgt', headerText: 'Tên dịch vụ', allowFiltering: true},
                                    {fieldName: 'kieu_yc', headerText: 'Kiểu YC', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_ctthicong.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="box-form">
      <div class="legend-title">
        <div class="pull-left">
          Danh sách thuê bao
        </div>
        <div class="pull-right">
          <div class="list-checks">
            <div class="item red">
              <div class="check-action">
                <input type="radio" class="check" name="lay_phieu_moi" value="true" v-model="state.lay_phieu_moi" @change="onChange_phieumoi($event)">
                <span class="name">Phiếu mới</span>
              </div>
            </div>
            <div class="item red">
              <div class="check-action">
                <input type="radio" class="check" value="false" v-model="state.lay_phieu_moi" @change="onChange_phieumoi($event)">
                <span class="name">Phiếu trả lại</span>
              </div>
            </div>
            <div class="item">
              <div class="check-action">
                <input type="checkbox" class="check" v-model="state.loc_theo_nv" @change="onChange_loctheonv($event)">
                <span class="name">Lọc theo nhân viên</span>
              </div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="table-content">
        <DataGrid v-bind:columns="[
                        {fieldName: 'ma_tb', headerText: 'Account', allowFiltering: true},
                        {fieldName: 'loaihinh_tb', headerText: 'Loại hình', allowFiltering: true},
                        {fieldName: 'trangthai_jira', headerText: 'Trạng thái Jira', allowFiltering: true},
                        {fieldName: 'ten_tb', headerText: 'Tên thuê bao', allowFiltering: true},
                        {fieldName: 'diachi_ld', headerText: 'Địa chỉ lắp đặt', allowFiltering: true},
                        {fieldName: 'ngay_yc', headerText: 'Ngày YC', allowFiltering: true},
                        {fieldName: 'ngaygiao', headerText: 'Ngày giao', allowFiltering: true},
                        {fieldName: 'dv_hen', headerText: 'Đơn vị hẹn', allowFiltering: true},
                        {fieldName: 'giohen_tu', headerText: 'Hẹn từ', allowFiltering: true},
                        {fieldName: 'giohen_den', headerText: 'Hẹn đến', allowFiltering: true},
                        {fieldName: 'ma_gd', headerText: 'Mã GD', allowFiltering: true},
                        {fieldName: 'goi_kt', headerText: 'Gói KT', allowFiltering: true},
                        {fieldName: 'gio_ct', headerText: 'Giờ CT', allowFiltering: true},
                        {fieldName: 'gio_conlai', headerText: 'Giờ còn lại', allowFiltering: true},
                        {fieldName: 'ngay_ht', headerText: 'Ngày BG', allowFiltering: true},
                        {fieldName: 'ngay_kh', headerText: 'Ngày KH', allowFiltering: true},
                        {fieldName: 'ten_status', headerText: 'Trạng thái', allowFiltering: true},
                        {fieldName: 'dv_giao', headerText: 'Đơn vị giao', allowFiltering: true},
                        {fieldName: 'lydoton_tc', headerText: 'Lý do tồn', allowFiltering: true},
                        {fieldName: 'ghichu_ton', headerText: 'Ghi chú tồn', allowFiltering: true},
                        {fieldName: 'ghichu', headerText: 'Ghi chú', allowFiltering: true},
                    ]"
                  ref="gv_DanhSach"
                  :showColumnCheckbox='true'
                  v-bind:dataSource="datagrid.ds_hdtb.list"
                  @selectedRowChanged="gv_DanhSach_FocusedRowChanged"
                  :enable-paging-server="false"
                  :allowPaging="true"
                  :allowSelection='true'
                  :showFilter="false">
        </DataGrid>
      </div>

    </div>

  </div>
  <footer class="footer">
    VNPT-IT &copy; 2021
  </footer>

  <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
              ref="popupNhapNoiDungTienTrinhThiCong" :header='"Nhập nội dung tiến trình thi công"' showCloseIcon=true width='80%' target='.main-wrapper'>
    <div class="list-actions-top">
      <ul class="list">
        <li>
          <a href="javascript:;" v-on:click="btnGhiLai_Click">
            <span class="icon one-save"></span> Ghi lại
          </a>
        </li>

      </ul>
    </div>
    <div class="popup-body">
      <div class="box-form">
        <textarea name="" class="form-control" style="height: 400px;resize: none;"></textarea>
      </div>
    </div>

  </ejs-dialog>

  <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
              ref="popupUploadHoSo" :header='"Upload hồ sơ"' showCloseIcon=true width='95%' height='100%' target='.main-wrapper'>
    <uploadEProfile :isPopup="true" :tag="1" :ma_thue_bao="state.selectedPhieu.ma_tb" :ma_gd="state.selectedPhieu.ma_gd" :is_ca="true"/>
  </ejs-dialog>

  <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
              ref="popupGiaoPhieuNV" :header='"Giao phiếu Nhân viên"'  showCloseIcon=true width='95%' height='100%' target='.main-wrapper'>
      <giaophieunhanvien :phieu_id="state.selectedPhieu.phieu_id" :nguoigv_id="tab_dvcntt.tt_giaoviec.ds_nguoigv.value" :ngaygiao="state.dtpNgayGV.value"/>
  </ejs-dialog>

  <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
    ref="popupTraPhieu" :header='"Trả phiếu"'  showCloseIcon=true width='95%' height='100%' target='.main-wrapper'>
       
      <traphieu :ngaytra="state.ngaytra" :ngaygiao="state.selectedPhieu.ngaygiao" :ma_gd="state.selectedPhieu.ma_gd" :nhanvien_id="state.selectedPhieu.nhanvien_id" :ma_tb="state.selectedPhieu.ma_tb" :kieu="0" :loaihd_id="state.loaihd_id" :dichvuvt_id="state.dichvuvt_id" />
  </ejs-dialog>

 
  <ChuyenTo ref="popupChuyenTo" :hdtb_id="state.hdtb_id" :baohong_id="0" :phieu_id="this.state.phieu_id"  />
  <TonPhieu ref="dialogObjPhieuTon" :baohong_id="0" :phieu_id="0" :nhomton_id="0" />
  <GiaoPhieuPhoiHop ref="dialogGiaoPhieuPhoiHop" />
  <LayDuLieuBC ref="dialogLayDuLieuBC" /> 
   
  <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
    ref="popupFileUpload" :header='"Trả phiếu"'  showCloseIcon=true width='95%' height='100%' target='.main-wrapper'> 
      <SearchEProfile :ispopup="true" :kieu="0" :matb="state.selectedPhieu.ma_tb" />
  </ejs-dialog>  

  <b-modal id="popupComponents" size="xl"
      hide-footer
      hide-header
      hide-header-close
      body-class="modal-body p-0">
      <component :is="popupComponent" ref="popupComponent" :dulieu="popupComponentData" isPopup="true" @form-close="popupClosed" @acceptChangeCTV="popupClosed" @acceptChangeNGT="popupClosed"></component> <!--v-dynamic-events="popupComponentEvents"-->
  </b-modal>
</div>


