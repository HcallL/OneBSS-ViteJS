<div @click="hideDropdownMenu">
  <breadcrumb :header="header" />
  <div class="list-actions-top">
    <ul class="list">
<!--      <li>-->
<!--        <a  v-on:click="btnTestGuiMail">-->
<!--          <span class="icon one-file-attach"></span> Test Gửi Mail-->
<!--        </a>-->
<!--      </li>-->
<!--      <li>-->
<!--        <a  v-on:click="showFrmETicket">-->
<!--          <span class="icon one-file-attach"></span> TEST-->
<!--        </a>-->
<!--      </li>-->
      <li>
        <a  v-on:click="btnLayTTMoi_Click">
          <span class="icon one-file-attach"></span> Lấy TT
        </a>
      </li>
      <li v-if="controls.tsbtnGiaoViec.visible">
        <a  v-on:click="tsbtnGiaoViec_Click" :class="{'disabled':(!controls.tsbtnGiaoViec.enabled)}">
          <span class="icon one-file-arrow-right1"></span> Giao việc
        </a>
      </li>
      <li v-if="controls.tsbtnDongBoCMS.visible">
        <a  v-on:click="tsbtnDongBoCMS_Click" :class="{'disabled':(!controls.tsbtnDongBoCMS.enabled)}">
          <span class="icon one-sync"></span> Đồng bộ CMS
        </a>
      </li>
      <li v-if="controls.tsbThuHoiCTS.visible">
        <a  v-on:click="KichHoatCAHangLoat" :class="{'disabled':(!controls.tsbThuHoiCTS.enabled)}">
            <span class="icon one-file-arrow-right1"></span> KH Hàng loạt
        </a>
      </li>
      <li v-if="controls.tsbtn_KichHoat_CA.visible">
        <a  v-on:click="tsbtn_KichHoat_CA_Click" :class="{'disabled':(!controls.tsbtn_KichHoat_CA.enabled)}" :title="controls.tsbtn_KichHoat_CA.toolTipText">
            <span class="icon one-file-arrow-right1 kich-hoat-ca"></span> {{controls.tsbtn_KichHoat_CA.text}}
        </a>
      </li>
      <li v-if="controls.tsbtn_Duyet_CA.visible">
        <a  v-on:click="tsbtn_Duyet_CA_Click" :class="{'disabled':(!controls.tsbtn_Duyet_CA.enabled)}">
            <span class="icon one-file-arrow-right1"></span> Duyệt
        </a>
      </li>
      <li v-if="controls.tsbtn_khong_duyet_CA.visible">
        <a  v-on:click="tsbtn_khong_duyet_CA_Click" :class="{'disabled':(!controls.tsbtn_khong_duyet_CA.enabled)}">
            <span class="icon one-file-arrow-right1"></span>Hủy duyệt
        </a>
      </li>
      <li v-if="controls.tsbtnGuiHSCMS.visible">
        <a  v-on:click="tsbtnGuiHSCMS_Click" :class="{'disabled':(!controls.tsbtnGuiHSCMS.enabled)}">
            <span class="icon one-file-arrow-right1"></span> Gửi HS CMS
        </a>
      </li>
      <li v-if="controls.tsbtnDongBoHS.visible">
        <a  v-on:click="tsbtnDongBoHS_Click" :class="{'disabled':(!controls.tsbtnDongBoHS.enabled)}">
            <span class="icon one-sync"></span> Đồng bộ HS
        </a>
      </li>
      <li v-if="controls.tbs_giahan_ca.visible">
        <a  v-on:click="tbs_giahan_ca_Click" :class="{'disabled':(!controls.tbs_giahan_ca.enabled)}">
            <span class="icon one-file-arrow-right1"></span> {{controls.tbs_giahan_ca.text}}
        </a>
      </li>
      <li v-if="controls.tsbTaoToken.visible">
        <a  v-on:click="DuyetCAHangLoat" :class="{'disabled':(!controls.tsbTaoToken.enabled)}">
            <span class="icon one-file-arrow-right1"></span> Duyệt hàng loạt
        </a>
      </li>
      <li>
        <a  v-on:click="tsbtnChapNhan_Click" :class="{'disabled':(!controls.tsbtnChapNhan.enabled)}">
          <span class="icon one-reload1"></span> Cập nhật
        </a>
      </li>
      <li  v-if="controls.tsbtnGiaoPhieu.visible">
        <a  v-on:click="tsbtnGiaoPhieu_Click" :class="{'disabled':(!controls.tsbtnGiaoPhieu.enabled)}">
          <span class="icon one-file-arrow-right1"></span> Giao phiếu
        </a>
      </li>
      <li  v-if="controls.tsbtnGiaoPhoiHop.visible">
        <a  v-on:click="tsbtnGiaoPhoiHop_Click" :class="{'disabled':(!controls.tsbtnGiaoPhoiHop.enabled)}">
          <span class="icon one-file-arrow-right1"></span> Giao P/H
        </a>
      </li>
      <li>
        <a  v-on:click="tsbUpHoSo_Click" :class="{'disabled':(!controls.tsbUpHoSo.enabled)}">
          <span class="icon one-upload"></span> Up hồ sơ
        </a>
      </li>
      <li v-if="controls.tsbtnKichHoat.visible">
        <a  v-on:click="tsbtnKichHoatVisa_Click" :class="{'disabled':(!controls.tsbtnKichHoat.enabled)}">
            <span class="icon one-file-arrow-right1"></span> Kích hoạt
        </a>
      </li>
      <li v-if="controls.tsbtnHuyKH.visible">
        <a   v-on:click="tsbtnHuyKH_Click" :class="{'disabled':(!controls.tsbtnHuyKH.enabled)}">
          <span class="icon nc-icon-glyph ui-1_circle-remove"></span> Hủy kích hoạt
        </a>
      </li>

      <li v-if="controls.tsbtnHoanCong.visible">
        <a  v-on:click="tsbtnHoanCong_Click" :class="{'disabled':(!controls.tsbtnHoanCong.enabled)}">
          <span class="icon one-hoancong"></span> Hoàn công
        </a>
      </li>
      <li v-if="controls.tsddbIn.visible">
        <a  v-on:click="btnPhieuTC_Click" :class="{'disabled':(!controls.tsddbIn.enabled)}">
            <span class="icon one-xlsx-import"></span>Xuất phiếu
        </a>
      </li>
      <li v-if="controls.tsbtnChuyenTo.visible">
        <a  v-on:click="tsbtnChuyenTo_Click" :class="{'disabled':(!controls.tsbtnChuyenTo.enabled)}">
            <span class="icon one-change"></span>Chuyển tổ
        </a>
      </li>
      <li v-if="controls.tsbtnGiaoViec_KBB.visible">
        <a  v-on:click="DangXayDung" :class="{'disabled':(!controls.tsbtnGiaoViec_KBB.enabled)}">
            <span class="icon one-change"></span>Giao việc KBB
        </a>
      </li>
      <li v-if="controls.tsbtnTraPhieu.visible">
          <a  v-on:click="tsbtnTraPhieu_Click"  :class="{'disabled':(!controls.tsbtnTraPhieu.enabled)}">
              <span class="icon one-file-back"></span>Trả phiếu
          </a>
      </li>

      <li v-if="controls.tsbtnVatTu.visible">
        <a  v-on:click="tsbtnVatTu_Click" :class="{'disabled':(!controls.tsbtnVatTu.enabled)}">
          <span class="dropdown-icon one-vt"></span> Vật tư
        </a>
      </li>
      <li v-if="controls.tsbtnGiaoPhieu_Ton.visible">
        <a  v-on:click="tsbtnGiaoPhieu_Ton_Click" :class="{'disabled':(!controls.tsbtnGiaoPhieu_Ton.enabled)}">
            <span class="icon one-calendar-number"></span> Tồn phiếu
        </a>
      </li>
      <li v-if="controls.tsbtnHoanThienHS.visible">
        <a v-if="controls.tsbtnHoanThienHS.visible"  v-on:click="tsbtnHoanThienHS_Click" :class="{'disabled':(!controls.tsbtnHoanThienHS.enabled)}">
          <span class="icon one-file-check"></span> Hoàn thiện
        </a>
      </li>
      <li v-if="controls.tsbtnHoanThanh.visible">
        <a @click.prevent="tsbtnHoanThanh_Click" :class="{'disabled':(!controls.tsbtnHoanThanh.enabled)}">
          <span class="icon one-file-check"></span> Hoàn thành
        </a>
      </li>
    </ul>

     <div class="more dropdown hide">
      <a href="#" data-toggle="dropdown">
        <span class="icon -ap  icon-dots-three-vertical"></span>
      </a>
      <div class="dropdown-menu ovauto" style="max-height: 300px;">

        <a v-if="controls.tsbtnHen.visible"  v-on:click="tsbtnHen_Click" :class="{'disabled':(!controls.tsbtnHen.enabled)}">
          <span class="dropdown-icon one-henld"></span> Hẹn LĐ
        </a>
        <a v-if="controls.tsbtnNVKT.visible"  v-on:click="tsbtnNVKT_Click" :class="{'disabled':(!controls.tsbtnNVKT.enabled)}">
          <span class="dropdown-icon -ap icon-pin"></span> Gán KV
        </a>
        <a v-if="controls.tsbtnCreatIssue.visible"  v-on:click="tsbtnCreatIssue_Click" :class="{'disabled':(!controls.tsbtnCreatIssue.enabled)}">
          <span class="dropdown-icon one-mobile-plus"></span> Gửi Y/C
        </a>
        <a v-if="controls.tsbtnFile_Upload.visible"  v-on:click="tsbtnFile_Upload_Click" :class="{'disabled':(!controls.tsbtnFile_Upload.enabled)}">
          <span class="dropdown-icon one-upload"></span> File Upload
        </a>
        <a v-if="controls.tsbtnXuatFile.visible" v-on:click="tsbtnXuatFile_Click" :class="{'disabled':(!controls.tsbtnXuatFile.enabled)}">
          <span class="dropdown-icon one-download"></span> Xuất file
        </a>
        <a v-if="controls.tsbXemCMS.visible"  v-on:click="tsbXemCMS_Click" :class="{'disabled':(!controls.tsbXemCMS.enabled)}" :title="controls.tsbXemCMS.toolTipText">
          <span class="dropdown-icon one-apartment"></span> {{controls.tsbXemCMS.text}}
        </a>
        <a v-if="controls.tsbtnNhapMoiTT.visible"  v-on:click="tsbtnNhapMoiTT_Click" :class="{'disabled':(!controls.tsbtnNhapMoiTT.enabled)}">
          <span class="dropdown-icon one-clipart-edit"></span> Nhập mới TT
        </a>
        <a v-if="controls.tsbXemHS.visible"  v-on:click="tsbXemHS_Click" :class="{'disabled':(!controls.tsbXemHS.enabled)}">
          <span class="dropdown-icon one-clipart-edit"></span> Xem HS
        </a>
        <a v-if="controls.tsbtnGiaoPhieuPhoiHop.visible"  v-on:click="tsbtnGiaoPhieuPhoiHop_Click" :class="{'disabled':(!controls.tsbtnGiaoPhieuPhoiHop.enabled)}">
          <span class="dropdown-icon one-file-arrow-right1"></span> Phối hợp thi công
        </a>
        <a  v-if="controls.tsbtnGuiMailKH.visible"  v-on:click="tsbtnGuiMailKH_Click" :class="{'disabled':(!controls.tsbtnGuiMailKH.enabled)}">
          <span class="dropdown-icon one-email"></span> Gửi Mail KH
        </a>
        <a  v-if="controls.tsbtnXanNhanBT.visible"  v-on:click="tsbtnXanNhanBT_Click" :class="{'disabled':(!controls.tsbtnXanNhanBT.enabled)}">
          <span class="dropdown-icon one-file-arrow-right1"></span> Xác nhận BT
        </a>
        <a  v-if="controls.tsbtnLayThongTinSmartCMS.visible"  v-on:click="DangXayDung" :class="{'disabled':(!controls.tsbtnLayThongTinSmartCMS.enabled)}">
          <span class="dropdown-icon one-file-arrow-right1"></span> Lấy TT SmartCA
        </a>
        <a  v-if="controls.tsbtnSmartCAStatus.visible"  v-on:click="tsbtnSmartCAStatus_Click" :class="{'disabled':(!controls.tsbtnSmartCAStatus.enabled)}">
          <span class="dropdown-icon one-file-arrow-right1"></span> Trạng thái SmartCA
        </a>
        <a  v-if="controls.tsbtnKiemTraCA.visible"  v-on:click="tsbtnKiemTraCA_Click" :class="{'disabled':(!controls.tsbtnKiemTraCA.enabled)}">
          <span class="dropdown-icon one-file-arrow-right1"></span> Kiểm tra CA
        </a>

        <!-- <a href="#">
            <span class="dropdown-icon one-sync"></span> Đổi cổng
        </a>

        <a href="#">
            <span class="dropdown-icon nc-icon-glyph ui-1_settings"></span> thông số KT
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-edit2"></span> Giao việc
        </a>
        <a href="#">
            <span class="dropdown-icon one-location-ip"></span> IP LAN, WAN
        </a>
        <a href="#">
            <span class="dropdown-icon one-path"></span> Hướng KN
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-arrow-right1"></span> Giao phiếu
        </a>

        <a href="#">
            <span class="dropdown-icon one-clipart-arrow-right"></span> Show Port
        </a>
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph arrows-1_simple-up"></span> Test port
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-visa"></span> Tra cứu VISA
        </a>
        <a href="#">
            <span class="dropdown-icon ui-1_lock nc-icon-glyph"></span> Tra cứu OneMesh
        </a>
        <a href="#">
            <span class="dropdown-icon ui-1_lock nc-icon-glyph"></span> Xem MK
        </a>
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph design_design"></span> Đo kiểm
        </a>
        <a href="#">
            <span class="dropdown-icon nc-icon-glyph ui-1_edit-74"></span> Sửa kênh thu
        </a>
        <a href="#">
            <span class="dropdown-icon one-building"></span> Toà nhà
        </a>
        <a href="#">
            <span class="dropdown-icon one-file-arrow-right"></span> Chuyển VMP
        </a>

        <a href="#">
            <span class="dropdown-icon one-apartment"></span> Cơ sở hạ tầng
        </a>
        <a href="#">
            <span class="dropdown-icon one-clipart-edit"></span> Nạp tiến trình
        </a>
        <a href="#">
            <span class="dropdown-icon one-upload"></span> Upload hồ sơ
        </a>

        <a href="#">
            <span class="dropdown-icon one-mobile-plus"></span> Gửi YC
        </a> -->

      </div>

    </div>
  </div>
  <div class="page-content">
    <div class="box-form">
      <div class="row">
        <div class="col-sm-2 col-12"></div>
        <div class="col-sm-10 col-12">
          <div class="row">
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">NV tiếp thị</div>
                <div class="value">
                  <input type="text" name="" id="" class="form-control" v-model="state.nhanvien_tiepthi" readonly="true" />
                </div>
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">Kiểu HĐ</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_kieuhd.list" v-model="listbox.ds_kieuhd.value" :disabled='true'>

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">Kênh thu</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_kenhthu.list" v-model="listbox.ds_kenhthu.value" :disabled='true'>

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <div class="info-row">
                <div class="key w30 nowrap">Tổng tiền</div>
                <div class="value">
                  <vue-numeric class="form-control tright red fw6 bold" separator="," v-model="state.tongtien" readonly="true" placeholder="0" output-type="Number"></vue-numeric>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6 col-12">
        <div class="box-form">
          <div class="legend-title">
            <div class="pull-left">Thông tin khách hàng</div>
            <div class="pull-right">
              <div class="check-action">
                <input type="checkbox" class="check" v-model="state.checkbox_hen" :disabled="true">
                <span class="name text-main">Lắp đặt theo yêu cầu</span>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Loại HĐ/PL</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :options="listbox.ds_loaihd.list" v-model="listbox.ds_loaihd.value" @change="onChange_loaihd($event)">

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Mã GD</div>
                <div class="value">
                  <input type="text" class="form-control highlight fw6 bold" v-model="state.selectedPhieu.ma_gd">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Quy trình</div>
                <div class="value">
                  <div class="select-custom">
                    <select2 :disabled="!controls.cboQuyTrinh.enabled" :options="listbox.ds_quytrinh.list" v-model="listbox.ds_quytrinh.value" @change="onChange_quytrinh($event)" >

                    </select2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Loại KH lớn</div>
                <div class="value">
                  <input type="text" class="form-control italic" v-model="state.khachhanglon" v-bind:class="{ 'text-danger': state.loaikhlon_id != 7}">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Account</div>
                <div class="value">
                  <input type="text" class="form-control highlight fw6 bold" v-model="state.selectedPhieu.ma_tb">
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Kiểu lắp đặt</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="state.selectedPhieu.ten_kieuld" readonly="true">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w90">Loại hình</div>
                <div class="value">
                  <input type="text" class="form-control fw6 bold" v-model="state.selectedPhieu.loaihinh_tb">
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w80">Lắp kèm</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="state.thuebao_lapkem" readonly="true">
                </div>
              </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Tên thuê bao</div>
            <div class="value">
              <input type="text" class="form-control fw6 bold" v-model="state.selectedPhieu.ten_tb" readonly="true">
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Địa chỉ LĐ</div>
            <div class="value">
              <div class="input-more-button">
                <button class="btn" @click="btnBanDoLD_Click">
                  <span class="one-map-location f20"></span>
                </button>
                <!-- <ModalChonDiaChi modalId="popupDiaChiLD" :data="diachiLD" @xacnhan="getDiaChiLD"/>  -->
                <!-- <input type="text" v-model="diachiLD.DIACHI" class="form-control highlight bold" required title="Bạn chưa nhập địa chỉ lắp đặt">  -->
                <input readonly v-model="diachiLD.DIACHI" type="text" class="form-control bold">
                <frmBanDoTB @XacNhanToaDo="XacNhanToaDo" ref="frmBanDoTB" />
            </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Khu vực</div>
            <div class="value">
              <input type="text" class="form-control bold" v-model="state.selectedPhieu.ten_kv" readonly="true">
            </div>
            <div class="value w30 nowrap">
                <button class="btn btn-second" @click="btnThongTinTBSub_Click" style="border-color: #0176FF;">Thông tin TB</button>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Ghi chú</div>
            <div class="value">
              <textarea  class="form-control" maxlength="400" style="height: 128px; resize: none;" id="" cols="30" rows="10" v-model="state.selectedPhieu.ghichu"></textarea>
            </div>
          </div>
          <div class="legend-title mart20">Thông tin phiếu điều</div>
          <div class="info-row">
            <div class="key w90">Nội dung giao</div>
            <div class="value">
              <input type="text" class="form-control" v-model="state.selectedPhieu.nd_giao" readonly="true">
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Nội dung TH</div>
            <div class="value">
              <div class="input-more-button">
                <button class="btn" v-on:click="btnNDTH_Click" >
                    <span class="nc-icon-glyph ui-1_edit-76 f16"></span>
                </button>
              <div>
                <input id="txtNoiDungTH" ref="txtNoiDungTH" type="text" class="form-control fw6 red" v-model="state.selectedPhieu.nd_thuchien" @input="nd_th_changed">
              </div>
            </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Nhân viên YC</div>
            <div class="value">
              <input type="text" class="form-control bold" v-model="state.nhanvien" readonly="true">
            </div>
          </div>
          <div class="info-row">
            <div class="key w90">Thông tin trả</div>
            <div class="value">
              <input type="text" class="form-control red" v-model="state.nd_tra">
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-12">
        <div class="nav tabs tab-over">
          <a @click="xTabControl_SelectedPageChanged('tab1')" href="#tab1" data-toggle="tab" class="minw0 active">T.Tin dịch vụ</a>
          <a @click="xTabControl_SelectedPageChanged('TabIT360')" href="#TabIT360" data-toggle="tab" class="minw0">Y/C IT 360</a>
          <a @click="xTabControl_SelectedPageChanged('tabTSKT')" href="#tabTSKT" data-toggle="tab" class="minw0">Gói cước</a>
          <a @click="xTabControl_SelectedPageChanged('')" v-if="controls.xtraTabPage1.visible === true" href="#tab4" data-toggle="tab" class="minw0">Dịch vụ gia tăng</a>
          <a @click="xTabControl_SelectedPageChanged('xtraTabPage2')" v-if="controls.xtraTabPage2.visible === true" href="#xtraTabPage2" data-toggle="tab" class="minw0">Thi công</a>
          <a @click="xTabControl_SelectedPageChanged('xtraTabPage3')" v-if="controls.xtraTabPage3.visible === true" href="#xtraTabPage3" data-toggle="tab" class="minw0">ĐH thi công</a>
        </div>
        <div class="tab-content">
          <div class="tab-pane active" id="tab1">
            <div class="table-content dv-cntt" style="height: 200px;">
              <DataGrid v-if="!tab_dvcntt.list || tab_dvcntt.list.length == 0" class="table-result table-gachle"
                  v-bind:columns="[
                              {fieldName: 'data_type', headerText: '', allowFiltering: false},
                              {fieldName: 'data_type', headerText: '', allowFiltering: false},
                          ]"
                  v-bind:dataSource="tab_dvcntt.list"
                  :enable-paging-server="false"
                  :allowPaging="false"
                  :showFilter="false">
              </DataGrid>
              <table v-if="tab_dvcntt.list && tab_dvcntt.list.length > 0" class="table-result table-gachle">
                <tbody>
                  <tr v-for="item in tab_dvcntt.list" :key="item.field_name">
                    <td class="w20 center "></td>
                    <td class="fw6 bold">{{item.ten_hienthi}}</td>
                    <td>
                      <input v-if="item.att == 0" type="text" :disabled="item.field_name == 'MA_TB'" maxlength="item.field_length" :class="item.field_name == 'MA_TB'? 'form-control h24 h24 bor0 bg-none text fw6 bold' : 'form-control h24 h24 bor0 bg-none text fw6 bold text-main'" v-model="item.field_value"  />
                      <input v-if="item.att == 1" type="text"  maxlength="item.field_length" class="form-control h24 h24 bor0 bg-none text fw6 bold text-main" v-model="item.field_value"  />
                      <date-picker v-if="item.att == 2" class="bold text-main" :format="dateFormat" :value-type="'format'" v-model="item.field_value" :disabled="false"></date-picker>
                      <date-picker v-if="item.att == 9" class="bold text-main" :format="dateFormat" :value-type="'format'" v-model="item.field_value" :disabled="false"></date-picker>
                      <!-- <select2 v-if="item.att == 10" class="bold text-main" :options="item.result_sql" v-model="item.field_value" :disabled="false"></select2> -->
                      <treeselect v-if="item.att == 10" :multiple="true" :options="item.result_sql.map((x)=> ({label: x.text, id: x.id}))" placeholder="..." v-model="item.field_value" />
                      <select2 v-if="item.att == 4" class="bold text-main" :options="item.result_sql" v-model="item.field_value" :disabled="false"></select2>
                      <button v-if="item.att == 5" type="button" class="button" style="float:right; " v-model="item.field_name" @click="attr_click(item.field_name, $event)"  data-toggle="tooltip" :title="item.ten_hienthi" >...</button>
                      <input v-if="item.att == 5" type="text"  maxlength="item.field_length" class="form-control h24 h24 bor0 bg-none text fw6 bold text-main" v-model="item.field_value"  />
                      <!-- <input v-if="item.att == 7" type="checkbox" v-model="item.field_value"> -->
                      <div v-if="item.att == 7" style="display: table; text-align: center;">
                        <div class="check-action" >
                          <input type="checkbox" class="check" v-model="item.field_value">
                          <span class="name"></span>
                        </div>
                      </div>
                      <select2 v-if="item.att != 0 && item.att != 1 && item.att != 2 && item.att != 9 && item.att != 10 && item.att != 4 && item.att != 5 && item.att != 7" class="bold text-main" :options="item.result_sql" v-model="item.field_value" :disabled="false"></select2>
                      <!-- <input v-if="item.data_type == 1 && item.att == 0" type="number" class="h24 h24 bor0 bg-none text fw6 bold text-main" v-model="item.field_value" :disabled="false" />  -->
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="legend-title mart20">Thông tin giao việc nhân viên</div>
            <div class="row">
              <div class="col-sm-6 col-12">
                <div class="info-row">
                  <div class="key w70">Ngày GV</div>
                  <div class="value w20 padt7">
                    <div class="check-action">
                      <input type="checkbox" class="check" v-model="controls.dtpNgayGV.enabled" :disabled="!controls.chkNgayGV.enabled">
                      <span class="name"></span>
                    </div>
                  </div>
                  <div class="value">
                    <div class="input-icon-right">
                      <date-picker type="datetime" :disabled="!controls.dtpNgayGV.enabled" input-class="form-control" :format="datetimeFormat" :value-type="'format'" v-model="controls.dtpNgayGV.value"></date-picker>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-12">
                <div class="info-row">
                  <div class="key w70">Ngày HT</div>
                  <div class="value w20 padt7">
                    <div class="check-action">
                      <input type="checkbox" class="check" v-model="controls.dtpNgayBG.enabled"  :disabled="!controls.chkNgayBG.enabled">
                      <span class="name"></span>
                    </div>
                  </div>
                  <div class="value">
                    <div class="input-icon-right">
                      <date-picker  type="datetime"  :disabled="!controls.dtpNgayBG.enabled" input-class="form-control" :format="datetimeFormat" :value-type="'format'" v-model="controls.dtpNgayBG.value"></date-picker>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="info-row">
              <div class="key w70">Người GV</div>
              <div class="value">
                <div class="select-custom">
                  <select2 :options="tab_dvcntt.tt_giaoviec.ds_nguoigv.list" v-model="tab_dvcntt.tt_giaoviec.ds_nguoigv.value">

                  </select2>
                </div>
              </div>
            </div>
            <div class="legend-title mart20">
              <div class="pull-left">Nhân viên</div>
              <div class="pull-right red">
                {{tab_dvcntt.tt_giaoviec.tt_hdlapdat}}
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="table-content" style="height: 200px;">
              <DataGrid class="table-result table-gachle" height="100%"
                        v-bind:columns="[
                                    {fieldName: 'ten_nv', headerText: 'Tên nhân viên', allowFiltering: true},
                                    {fieldName: 'so_dt', headerText: 'Số điện thoại', allowFiltering: true},
                                    {fieldName: 'str_nhiemvu', headerText: 'Nhiệm vụ', allowFiltering: true , allowHtml : false},
                                    {fieldName: 'ghichu', headerText: 'Ghi chú', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_dvcntt.tt_giaoviec.grid_nhanvien.list"
                        :enable-paging-server="false"
                        :allowPaging="true"
                        :showFilter="true">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="TabIT360">
            <div class="table-content" style="min-height: 200px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'key', headerText: 'Số phiếu', allowFiltering: true, customAttributes: { class: 'bold' }, autoFit: true},
                                    {fieldName: 'ngay_cn', headerText: 'Ngày CN', allowFiltering: true, type: 'dateTime', format: 'dd/MM/yyyy hh:mm a', autoFit: true},
                                    {fieldName: 'nguoi_cn', headerText: 'Người tạo', allowFiltering: true , allowHtml : false, autoFit: true},
                                    {fieldName: 'url', headerText: 'URL', allowFiltering: true , allowHtml : true, autoFit: true},
                                ]"
                        v-bind:dataSource="tab_it360.list"
                        @selectedRowChanged="grvIssues_FocusedRowChanged"
                        :enable-paging-server="false"
                        :allowPaging="true"
                        :showFilter="true">
              </DataGrid>
            </div>

            <div class="row">
              <div class="col-sm-6 col-12">
                <div class="info-row mart20">
                  <div class="key w90">Tiêu đề</div>
                  <div class="value">
                    <textarea maxlength="400" v-model="state.txtSummary" class="form-control bold text-main" style="height:62px;resize:none" id="" cols="30" rows="10"></textarea>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Trạng thái</div>
                  <div class="value">
                    <div class="select-custom bold text-main">
                      <select2 :options="listbox.ds_trangthai_jira.list" v-model="listbox.ds_trangthai_jira.value">
                      </select2>
                    </div>
                  </div>
                  <div>
                    <button class="btn btn-primary" @click="btnDongBoClick">Đồng bộ</button>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Resolution</div>
                  <input type="text"  class="form-control" v-model="listbox.resolution_name"></input>
                  
                </div>
                <div class="info-row">
                  <div class="key w90">Ngày hết hạn</div>
                  <div class="value">
                    <div class="input-icon-right">
                      <date-picker type="datetime" input-class="form-control" :format="dateFormat" :value-type="'format'" v-model="controls.dtpDueDate.value"></date-picker>
                    </div>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Ngày HT</div>
                  <div class="value">
                      <div class="input-icon-right">
                        <date-picker type="datetime" input-class="form-control" :format="dateFormat" :value-type="'format'" v-model="controls.dtpResolved.value"></date-picker>
                      </div>
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Loại yêu cầu</div>
                  <div class="value">
                    <input type="text" class="form-control" v-model="state.txtIssuseType">
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Reporter</div>
                  <div class="value">
                    <input type="text" class="form-control" v-model="state.txtReporter">
                  </div>
                </div>
                <div class="info-row">
                  <div class="key w90">Assignee</div>
                  <div class="value">
                    <div class="input-more-button">
                      <button class="btn" v-on:click="btnAssignee_ButtonClick">
                        <span class="-ap icon-more_horiz"></span>
                      </button>
                      <div>
                        <input type="text" class="form-control fw6" v-model="state.btnAssignee">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-12">
                <div class="info-row mart20">
                  <div class="key w60">Mô tả</div>
                  <div class="value">
                    <textarea maxlength="2000" v-model="state.txtDescription" class="form-control bold text-main" style="height:280px;resize:none" id="" cols="30" rows="10"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="tabTSKT">
            <div class="table-content" style="min-height: 200px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'tenthuoctinh', headerText: 'Tên thuộc tính', allowFiltering: true},
                                    {fieldName: 'tien', headerText: 'Tiền', allowFiltering: true},
                                    {fieldName: 'vat', headerText: 'VAT', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_ttgoicuoc.list"
                        :enable-paging-server="false"
                        :allowPaging="true"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="tab4">
            <div class="table-content" style="min-height: 200px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'ma_dvgt', headerText: 'Mã DVGT', allowFiltering: true},
                                    {fieldName: 'ten_dvgt', headerText: 'Tên dịch vụ', allowFiltering: true},
                                    {fieldName: 'kieu_yc', headerText: 'Kiểu YC', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_dvgiatang.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="xtraTabPage2">
            <div class="table-content" style="min-height: 200px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'nguoi_cn', headerText: 'Người CN', allowFiltering: true},
                                    {fieldName: 'ngay_cn', headerText: 'Ngày CN', allowFiltering: true},
                                    {fieldName: 'noidung', headerText: 'Nội dung', allowFiltering: true , allowHtml : false},
                                ]"
                        v-bind:dataSource="tab_tthicong.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
          <div class="tab-pane" id="xtraTabPage3">
            <div class="table-content" style="min-height: 200px;">
              <DataGrid v-bind:columns="[
                                    {fieldName: 'huonggiao', headerText: 'Hướng giao', allowFiltering: true, allowSorting: false, isGroupedColumn: true },
                                    {fieldName: 'dvg', headerText: 'Đơn vị giao', allowFiltering: true},
                                    {fieldName: 'ngay_giao', headerText: 'Ngày giao', allowFiltering: false},
                                    {fieldName: 'nv_giao', headerText: 'Người giao', allowFiltering: true , allowHtml : false},
                                    {fieldName: 'nd_giao', headerText: 'Nội dung giao', allowFiltering: true},
                                    {fieldName: 'dvn', headerText: 'Đơn vị nhận', allowFiltering: true},
                                    {fieldName: 'ngay_tra', headerText: 'Ngày trả', allowFiltering: false},
                                    {fieldName: 'nd_tra', headerText: 'Nội dung trả', allowFiltering: true},
                                    {fieldName: 'lydotra', headerText: 'Lý do trả', allowFiltering: true},
                                    {fieldName: 'ngay_th', headerText: 'Ngày CN', allowFiltering: false},
                                    {fieldName: 'nv_th', headerText: 'Người CN', allowFiltering: true},
                                    {fieldName: 'so_dt', headerText: 'Điện thoại liên hệ', allowFiltering: true},
                                    {fieldName: 'trangthai_ph', headerText: 'Trạng thái phiếu', allowFiltering: true},
                                ]"
                        v-bind:dataSource="tab_ctthicong.list"
                        :enable-paging-server="false"
                        :allowPaging="false"
                        :showFilter="false">
              </DataGrid>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="box-form">
      <div class="legend-title">
        <div class="pull-left">
          Danh sách thuê bao
        </div>
        <div class="pull-right">
          <div class="list-checks">
            <div class="item red">
              <div class="check-action">
                <input type="radio" class="check" name="lay_phieu_moi" value="true" v-model="state.lay_phieu_moi" @change="onChange_phieumoi($event)">
                <span class="name">Phiếu mới</span>
              </div>
            </div>
            <div class="item red">
              <div class="check-action">
                <input type="radio" class="check" value="false" v-model="state.lay_phieu_moi" @change="onChange_phieumoi($event)">
                <span class="name">Phiếu trả lại</span>
              </div>
            </div>
            <div class="item">
              <div class="check-action">
                <input type="checkbox" class="check" v-model="state.loc_theo_nv" @change="ckbLocNhanvien_CheckedChanged($event)">
                <span class="name">Lọc theo nhân viên</span>
              </div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="table-content">
        <DataGrid v-bind:columns="[
                        {fieldName: 'ma_tb', headerText: 'Account', allowFiltering: true},
                        {fieldName: 'loaihinh_tb', headerText: 'Loại hình', allowFiltering: true, width: '140'},
                        {fieldName: 'trangthai_jira', headerText: 'Trạng thái Jira', allowFiltering: true, width: '140'},
                        {fieldName: 'ten_kh', headerText: 'Tên khách hàng', allowFiltering: true},
                        {fieldName: 'ten_tb', headerText: 'Tên thuê bao', allowFiltering: true},
                        {fieldName: 'diachi_ld', headerText: 'Địa chỉ lắp đặt', allowFiltering: true, width: '300'},
                        {fieldName: 'ngay_yc', headerText: 'Ngày YC', allowFiltering: true, textAlign: 'right', width: '148'},
                        {fieldName: 'ngaygiao', headerText: 'Ngày giao', allowFiltering: true, textAlign: 'right', width: '148'},
                        {fieldName: 'dv_hen', headerText: 'Đơn vị hẹn', allowFiltering: true},
                        {fieldName: 'giohen_tu', headerText: 'Hẹn từ', allowFiltering: true, textAlign: 'right', width: '148'},
                        {fieldName: 'giohen_den', headerText: 'Hẹn đến', allowFiltering: true, textAlign: 'right', width: '148'},
                        {fieldName: 'ma_gd', headerText: 'Mã GD', allowFiltering: true, width: '140'},
                        {fieldName: 'goi_kt', headerText: 'Gói KT', allowFiltering: true},
                        {fieldName: 'gio_ct', headerText: 'Giờ CT', allowFiltering: true},
                        {fieldName: 'gio_conlai', headerText: 'Giờ còn lại', allowFiltering: true},
                        {fieldName: 'ngay_ht', headerText: 'Ngày BG', allowFiltering: true, textAlign: 'right', width: '148'},
                        {fieldName: 'ngay_kh', headerText: 'Ngày KH', allowFiltering: true, textAlign: 'right', width: '148'},
                        {fieldName: 'ten_status', headerText: 'Trạng thái', allowFiltering: true, width: '120'},
                        {fieldName: 'dv_giao', headerText: 'Đơn vị giao', allowFiltering: true},
                        {fieldName: 'lydoton_tc', headerText: 'Lý do tồn', allowFiltering: true},
                        {fieldName: 'ghichu_ton', headerText: 'Ghi chú tồn', allowFiltering: true},
                        {fieldName: 'ghichu', headerText: 'Ghi chú', allowFiltering: true, width: '300'},
                    ]"
                  ref="gv_DanhSach"
                  :showColumnCheckbox='false'
                  v-bind:dataSource="datagrid.ds_hdtb.list"
                  @selectedRowChanged="gv_DanhSach_FocusedRowChanged"
                  :enable-paging-server="false"
                  :allowPaging="true"
                  :allowSelection='true'
                  :multiple="false"
                  :unique="'ma_tb'"
                  :showFilter="true"
                  :enabledSelectFirstRow="false">

                  <!-- :enabledSelectFirstRow="false" -->
        </DataGrid>
      </div>

    </div>
</div>

<ChuyenTo ref="popupChuyenTo" :tthdId="-1" :baohong_id="0" :phieu_id="state.phieu_id"  />
<TonPhieu ref="dialogObjPhieuTon" :baohong_id="0" :phieu_id="state.phieu_id" :nhomton_id="0" />
<GiaoPhieuPhoiHop ref="dialogGiaoPhieuPhoiHop" />
<ExportDataModal ref="exportDataModal" :data="state.dataExport"></ExportDataModal>
<VatTuThueBao ref="popupVatTuThueBao" :input-data="modelVatTu"/>
<NhapTienTrinhTC ref="dialogNhapTienTrinhTC"/>
<PopupThongTinHenKhachHang :hdkh_id="state.hdkh_id" ref="popupThongTinHenKH" />
<CreateIssue ref="dialogCreateIssue"/>
<HDTB_SUB_V2 ref="dialogHDTB_SUB_V2"/>
<HDTB_SUB_V3 ref="dialogHDTB_SUB_V3"/>
<InBienBan ref="popupInBB" :params="modelIn"/>
<DangNhapIVAN ref="popupDangNhapIVAN" :hdtb_id="state.hdtb_id" @logINSuccess="ivan_logINSuccess"/>
<DangKyHoaDonDienTu78 ref="popupDangKyHoaDonDienTu78"/>
<DangKyHKD ref="frmDangKyHKD" />
  <DuyetSmartCAOnline ref='frmDuyetSmartCAOnline'></DuyetSmartCAOnline>
  <DangKyIQMS ref="frmDangKyIQMS" />
  <HuyDuyetCAOnline ref='frmHuyDuyetCAOnline' />
  <PopupThuHoiCATaoLoi ref='frmPopupThuHoiCATaoLoi'/>
<CapNhatThongTinKHHDDT ref="popupCapNhatThongTinKHHDDT"/>
<frmBRNGuiMail ref='frmBRNGuiMail'/>
<popupKichhoatBrandname  ref='popupKichhoatBrandname' id="popupKichhoatBrandname" />

<frm_Create_Agent_SMPP  ref='frm_Create_Agent_SMPP' id="frm_Create_Agent_SMPP" :vhdtb_id="state.hdtb_id" />

<frm_Tao_DHTT_A2P  ref='frm_Tao_DHTT_A2P' id="frm_Tao_DHTT_A2P" :vhdtb_id="state.hdtb_id" />
<frm_Giahan_DHTT_A2P  ref='frm_Giahan_DHTT_A2P' id="frm_Giahan_DHTT_A2P" :vhdtb_id="state.hdtb_id" />
<frm_Create_Label_A2p  ref='frm_Create_Label_A2p' id="frm_Create_Label_A2p" />
<frm_TDTT_Label_A2P  ref='frm_TDTT_Label_A2P' id="frm_TDTT_Label_A2P" />
  <!--TUANLAHYN-->
  <RegiSMSBrandname ref='RegiSMSBrandname' id="RegiSMSBrandname" />
  <!-- cuongpq -->
  <popupCreateAgentSMSBrandname ref='popupCreateAgentSMSBrandname' id="popupCreateAgentSMSBrandname" :vhdtb_id="state.hdtb_id" />
  <b-modal ref="popupTaoKHTT" size="xl" body-class="p-0" centered scrollable hide-footer>
   <popupTaoKHTT :isPopup="true" :inputData="inputDataPopupTaoKHTT" />
  </b-modal>
  <!--ENDTUANLAHYN-->
<GiaoPhieuNet ref="popupGiaoPhieuNet"/>
<XacNhanBaoTri ref="popupXacNhanBaoTri"/>
<KiemTraSoGiayToCA ref="popupKiemTraSoGiayToCA"/>
<TraCuuHoSoHDTB ref="popupTraCuuHoSoHDTB" @onClose="Kiem_Dem_HoSo_Callback"/>
<DoiSoatCA ref="popupDoiSoatCA"/>
<ThayDoiKhuVucQuanLyThueBaoModal ref="thayDoiKhuVucQuanLyThueBaoModal" :data="dataPopupKhuVuc"/>
<ModalPromise ref="modalPromise" />



<PopupChuyenDoiHDDT ref="popupChuyenDoiHDDT" :hdtb_id="state.hdtb_id"/>
<PopupHocBaDienTu ref="PopupHocBaDienTu"/>
<PopupHuyHocSinhHBDT ref="PopupHuyHocSinhHBDT"></PopupHuyHocSinhHBDT>
<CatHuyUserPharmacy ref="CatHuyUserPharmacy"></CatHuyUserPharmacy>
<CatHuyCuaHangPharmacy ref="CatHuyCuaHangPharmacy"></CatHuyCuaHangPharmacy>
<!-- <ejs-dialog :enableResize='true' :visible="false" ref="popupFrmTraPhieuTC" @close="popupTraphieu_closed"
  :header='"Trả phiếu nhân viên"' showCloseIcon=true :target="target" width='85%' height="800">
    <frmTraPhieuTC ref="frmTraPhieuTC" @traphieu_success="traphieu_success"/>
</ejs-dialog> -->

<!-- <ejs-dialog :enableResize='true' :visible="false" ref="popupfrnGiaoPhieuNV" :header='"Giao phiếu nhân viên"'
    showCloseIcon=true target=".main-wrapper" width='85%' height="800">
    <frnGiaoPhieuNV ref="frnGiaoPhieuNV" @giaoviec_success="giaoviec_success" />
</ejs-dialog> -->
<frmNhapDSThanhVien ref="frmNhapDSThanhVien"  />
<b-modal ref="modalComponentsITVAS" id="modalComponentsITVAS"
    body-class="none-padding"
    size="hosodientu-size"
    :title="state.modalTitle"
    hide-footer>
  <component :is="popupComponent" ref="generalPopup" :dulieu="popupComponentData" v-bind="popupComponentAttr" :isPopup="true" v-on="popupComponentEvts"></component>
</b-modal>

<ejs-dialog :enableResize='true' :isModal="true" :allowDragging="true" :visible="false" ref="generalDialog" :header="state.modalTitle" :position="position"
    showCloseIcon=true target=".main-wrapper" :closeOnEscape="true" width="90%" height="800" v-on="dialogEvts" :overlayClick="overlayClick">
    <div>
      <component :is="dialogComponent" ref="generalComponent" :dulieu="popupComponentData" :data="popupComponentData" v-bind="popupComponentAttr" :isPopup="true" v-on="popupComponentEvts"></component>
    </div>
</ejs-dialog>
  <ejs-dialog
    :isModal="true"
    :enableResize="true"
    :resizeHandles="['All']"
    :visible="false"
    ref="GiaoPhieuView"
    :header='"Giao phiếu điều hành thi công"'
    showCloseIcon="true"
    target=".main-wrapper"
    width="90%"
    allowDragging="true"
    :animationSettings="giaoPhieuViewDialog.animationSettings"
    @close="GiaoPhieuView_OnClose"
    >
    <div>
        <GiaoPhieuView v-if="giaoPhieuViewDialog.isVisiable" type="modal" v-bind="giaoPhieuViewDialog.input" />
    </div>
  </ejs-dialog>

  <ejs-dialog :enableResize='true':header='"kích hoạt dịch vụ VNPT ETikcet"'
              :isModal="true" :allowDragging="true" :visible="false" ref="modalETicket" :position="position"
              showCloseIcon=true target=".main-wrapper" :closeOnEscape="true" width="60%" height="auto" @close='close_frmETicket'>
    <div>
      <frmETicket :dataHDTB='tab_dvgiatang.list' :state='state' :mst='ETicketData.mst' v-if="ETicketData.isShow" ref="generalComponent"></frmETicket>
    </div>
  </ejs-dialog>
</div>



