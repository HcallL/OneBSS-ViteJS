<div class="main-wrapper main-wrapper-hths">
    <breadcrumb/>
    <!-- <div class="breadcrumb-top">
        <div class="main-title">{{labelFunctionTitle}}</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item"><a href="#">Lập hợp đồng</a></li>
            <li class="breadcrumb-item active">{{labelFunctionTitleLower}}</li>
        </ul>
    </div> -->
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="#" @click.prevent="tsbtnNhapMoi_Click" :class='{disabled: !tsbtnNhapMoi_Enabled}'  v-show="tsbtnNhapMoi">
                    <span class="icon one-file-check"></span>Nhập mới
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnGhiLai" @click.prevent="tsbtnGhiLai_Click">
                    <span class="icon one-file-check"></span>Ghi Lại
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnThongTinLH" @click.prevent="tsbtnThongTinLH_Click">
                    <span class="icon one-file-check"></span>Liên hệ
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnHuyBo"  :class='{disabled: !tsbtnHuyBo_Enabled}' @click.prevent="tsbtnHuyBo_Click">
                    <span class="icon one-file-check"></span>Hủy
                </a>
            </li>
            <li>
                <a href="#" v-show="btnChuyenDB" v-bind:class="{'disabled':!tsbtnChuyenDB_Enabled}" @click.prevent="btnChuyenDB_Click">
                    <span class="icon one-file-check"></span>Hoàn thiện
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnGiaoPhieu" @click.prevent="tsbtnGiaoPhieu_Click">
                    <span class="icon one-file-check"></span>Giao phiếu
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnSuaDacTinh" @click.prevent="tsbtnSuaDacTinh_Click">
                    <span class="icon one-file-check"></span>Sửa đặc tính
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnThemTT" :class='{disabled: !tsbtnThemTT_Enabled}'  @click.prevent="tsbtnThemTT_Click">
                    <span class="icon one-file-check"></span>Thêm thanh toán
                </a>
            </li>
            <li>
                <a href="#" v-show="btnDongBoCCBS" @click.prevent="tsbtnDongBoCCBS_Click">
                    <span class="icon one-sync1"></span>Đồng bộ CCBS
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnXoaTT" :class='{disabled: !tsbtnXoaTT_Enabled}' @click.prevent="tsbtnXoaTT_Click">
                    <span class="icon one-file-check"></span>Xóa TT
                </a>
            </li>
            <li>
                <a href="#" v-show="tsbtnHen" @click.prevent="tsbtnHen_Click">
                    <span class="icon one-file-check"></span>Hẹn lắp đặt
                </a>
            </li>

        </ul>
    </div>
    <div class="page-content">
        <div class="box-form padt8 padb8">
            <div class="row">
                <div class="col-3"></div>
                <div class="col-3">
                    <div class="info-row">
                        <div class="key ">IT xác nhận</div>
                        <div class="value">
                            <input v-model="txtITXN" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="info-row">
                        <div class="key">Cộng tác viên
                        </div>
                        <div class="value w20 padt7">
                            <div class="check-action">
                                <input type="checkbox" v-model="txtCTVcheck" @change="ShowPopupCTV()" class="check">
                                <span class="name"></span>
                            </div>
                        </div>
                        <div class="value" :class="{disabled:!txtCTVcheck}">
                            <input v-model="txtCTV" class="form-control"
                                title="Tích chọn để tìm kiếm người giới thiệu hợp đồng">
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="info-row">
                        <div class="key ">Người giới thiệu
                        </div>
                        <div class="value w20 padt7">
                            <div class="check-action">
                                <input type="checkbox" v-model="txtNguoiGTcheck" @change="ShowPopupNguoiGT()"
                                    class="check">
                                <span class="name"></span>
                            </div>
                        </div>
                        <div class="value" :class="{disabled:!txtNguoiGTcheck}">
                            <input v-model="txtNguoiGT" class="form-control"
                                title="Tích chọn để tìm kiếm người giới thiệu hợp đồng">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nav tabs tab-over">
            <a href="#tab1" data-toggle="tab" class="active">Thông tin khách hàng</a>
            <a href="#tab2" data-toggle="tab">Thông tin thuê bao</a>
        </div>
        <div class="tab-content bor0  pad0" style="box-shadow: none;">
            <div id="tab1" class="tab-pane tab-content active">
                <div class="box-form">
                    <div class="legend-title">Thông tin khách hàng</div>
                    <div class="row">
                        <div class="col-sm-6 col-12">

                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Mã giao dịch</div>
                                        <div class="value">
                                            <div class="input-more-button">
                                                <button class="btn" @click.prevent="showPopupSearchContract">
                                                    <span class="-ap icon-more_horiz"></span>
                                                </button>
                                                <searchContractModal ref="popupSearchContract"
                                                    @accept="acceptSearchContract" :loai_hd_id="1"
                                                    :dichvu_id="dichvuvt_id" :trangthai_hd="tthd_id" />
                                                <input type="text" ref="txtMaGD" v-model.trim="Kh.txtMaGD"
                                                    class="form-control highlight" @keypress.enter="MaGDChanged">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Ngày yêu cầu</div>
                                        <div class="value">
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Kh.dtpNgayYeuCau"
                                                :type="typeFormat" :disabled-date="disabledRange">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Mã HĐ <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtMaHD" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Ngày lập HĐ</div>
                                        <div class="value">
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Kh.dtpNgayLapHD"
                                                :type="typeFormat" :disabled-date="disabledRange">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="info-row">
                                <div class="key w120">Mã KH</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click.prevent="ShowSearchAccount">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" v-model="Kh.txtMaKH" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Tên khách hàng <span class="batbuoc">(*)</span></div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtTenKH" class="form-control">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Địa chỉ KH <span class="batbuoc">(*)</span></div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtDiaChiKH" class="form-control ">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Loại GT <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <SelectExt v-model="Kh.cboGiayToKH" :dataSource="GiayToKH"
                                                dataTextField="LOAI_GT" dataValueField="LOAIGT_ID"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số giấy tờ <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtSoGT" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Ngày cấp <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Kh.txtNgayCap"
                                                :type="typeFormat" :disabled-date="disabledRange">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Nơi cấp</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtNoiCap" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Ngày hết hạn</div>
                                        <div class="value">
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Kh.txtNgayHetHan"
                                                :type="typeFormat">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Ngày sinh<span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Kh.txtNgaySN"
                                                :type="typeFormat" :disabled-date="disabledRange">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Giới tính</div>
                                        <div class="value">
                                            <div class="list-checks mart7">
                                                <div class="item">
                                                    <div class="check-action">
                                                        <input type="radio" class="check" value=""
                                                            v-model="Kh.gioiTinh">
                                                        <span class="name">Không</span>
                                                    </div>
                                                </div>
                                                <div class="item">
                                                    <div class="check-action">
                                                        <input type="radio" class="check" value="1"
                                                            v-model="Kh.gioiTinh">
                                                        <span class="name">Nam</span>
                                                    </div>
                                                </div>
                                                <div class="item">
                                                    <div class="check-action">
                                                        <input type="radio" class="check" value="0"
                                                            v-model="Kh.gioiTinh">
                                                        <span class="name">Nữ</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Quốc tịch</div>
                                        <div class="value">
                                            <SelectExt v-model="Kh.cboQuocTich" :dataSource="QuocTich"
                                                dataTextField="TENQUOCTICH" dataValueField="QUOCTICH_ID"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Ngành nghề</div>
                                        <div class="value">
                                            <div class="input-more-button">
                                                <button class="btn" @click.prevent="popupTieuNganh">
                                                    <span class="-ap icon-more_horiz"></span>
                                                </button>
                                                <ComboboxGrid class="select-custom" v-model="Kh.cboNganhNgheLoc"
                                                    :columns="[
                                                        {fieldName: 'TENNGANHNGHE', headerText: '', allowFiltering: true, width:'300'},
                                                        {fieldName: 'MANGANH', headerText: '', allowFiltering: true, width:'70'},
                                                        {fieldName: 'NGANHNGHE_ID', headerText: '', allowFiltering: true, width:'70'}
                                                        ]" :dataSource="NganhNgheLoc" textField="TENNGANHNGHE"
                                                    valueField="NGANHNGHE_ID">
                                                </ComboboxGrid>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Dân tộc</div>
                                        <div class="value">
                                            <!-- <div class="select-custom">
                                                <select name="" id="" class="form-control">
                                                    <option value=""></option>
                                                </select>
                                            </div> -->
                                            <SelectExt v-model="Kh.cboDanToc" :dataSource="DanToc"
                                                dataTextField="TENDANTOC" dataValueField="DANTOC_ID"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Loại KH</div>
                                        <div class="value">
                                            <treeselect v-model="Kh.cboLoaiKH" :multiple="false" :options="loai_kh_tree"
                                                :disable-branch-nodes="true" @select="loaikhChanged" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">PL KH</div>
                                        <div class="value">
                                            <input type="text" v-show="!KhachHangLon.visible" v-model="Kh.txtPhanLoaiKH"
                                                class="form-control">
                                            <div v-show="KhachHangLon.visible">
                                                <SelectExt v-show="KhachHangLon.visible" v-model="Kh.cboKhachHangLon"
                                                    :dataSource="KhachHangLon.list" :dataTextField="KhachHangLon.text"
                                                    :dataValueField="KhachHangLon.id"></SelectExt>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Người đại diện</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtNguoiDD" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Chức vụ</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtChucDanhDD" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Địa chỉ NĐD</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtDiaChiNDD" class="form-control">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Điện thoại</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtTelKH" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Fax</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtFaxKH" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Hộ khẩu</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtHoKhau" class="form-control">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Nơi cấp HK</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtNoiCapHK" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Ngày cấp</div>
                                        <div class="value">
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Kh.txtNgayCapHK"
                                                :type="typeFormat">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Ngân hàng</div>
                                <div class="value w20 padt7">
                                    <div class="check-action">
                                        <input type="checkbox" v-model="Kh.cboNganHangKH_check" class="check">
                                        <span class="name"></span>
                                    </div>
                                </div>
                                <div class="value">
                                    <!-- <div class="select-custom">
                                        <select name="" id="" class="form-control">
                                            <option value=""></option>
                                        </select>
                                    </div> -->
                                    <SelectExt :class="{disabled:!Kh.cboNganHangKH_check || !Kh.cboNganHangKH_enable}"
                                        v-model="Kh.cboNganHangKH_val" :dataSource="NganHangKHList"
                                        dataTextField="TEN_NH" dataValueField="NGANHANG_ID"></SelectExt>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Mã số thuế</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtMaSTKH" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tài khoản</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtSoTKKH" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Đặc trưng</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtDacTrung" class="form-control">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Ghi chú</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtGhiChuKH" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="box-form">
                    <div class="legend-title">Thông tin thanh toán</div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Mã thanh toán</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtMaTT" class="form-control ">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mã đại diện</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtMaTBDD" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Tên thanh toán</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtTenTT" class="form-control ">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Địa chỉ TT</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtDiaChiTT" class="form-control ">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Địa chỉ CT</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtDiaChiCT" class="form-control ">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Địa chỉ BC</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" v-b-modal.popupDiaChiBC>
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <modalChonDiaChi modalId="popupDiaChiBC" :data="Kh.txtDiaChiBC"
                                            @xacnhan="getDiaChiBC" />
                                        <bss-error-marker :has-error="$v.diachiBC.DIACHI.$error">
                                            <input type="text" :value="$v.diachiBC.DIACHI.$model"
                                                @change="v=>$v.diachiBC.DIACHI.$model=v.target.value"
                                                class="form-control">
                                        </bss-error-marker>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Đơn vị QL</div>
                                <div class="value">
                                    <SelectExt v-model="Kh.cboDonViQL" :dataSource="DONVIQL_TT.list"
                                        dataTextField="TEN_DV" dataValueField="DONVI_ID"  v-bind:class="{ disabled: true }"></SelectExt>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key">Hình thức TT <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <SelectExt v-model="Kh.cboHTTT" :dataSource="HINHTHUC_TT.list"
                                                dataTextField="HINHTHUC_TT" dataValueField="HTTT_ID"  v-bind:class="{ disabled: true }"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mã NV/TC<span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <popupTimKiemNhanVienThuCuoc :input="Tb.txtDiaChiLD" :dvql="Kh.cboDonViQL"
                                                @acceptChange="getNVTCProcess($event)" ref="dlgTimKiemNVTC">
                                            </popupTimKiemNhanVienThuCuoc>
                                            <div class="input-more-button">
                                                <button class="btn" @click.prevent="popupTimNVThuCuoc">
                                                    <span class="-ap icon-more_horiz"></span>
                                                </button>
                                                <div class="row">
                                                    <div class="col-sm-6 col-12 disabled">
                                                        <input type="text" class="form-control highlight"
                                                            :value="Kh.txtMaNVTC"
                                                            @change="v=>Kh.txtMaNVTC=v.target.value">
                                                    </div>
                                                    <div class="col-sm-6 col-12 disabled">
                                                        <input type="text" class="form-control highlight"
                                                            :value="Kh.txtMaTuyen"
                                                            @change="v=>Kh.txtMaTuyen=v.target.value">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key">Tài khoản</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtSTK" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Chủ tài khoản</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtChu_TK" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key">Ngân hàng</div>
                                        <div class="value w20 padt7">
                                            <div class="check-action">
                                                <input type="checkbox" v-model="Kh.cboNganHang_check" class="check">
                                                <span class="name"></span>
                                            </div>
                                        </div>
                                        <div class="value">
                                            <div class="input-more-button">
                                                <button class="btn"
                                                    :class="{disabled:!(Kh.cboNganHang_check && Kh.cboNganHang_isnganhangnn)}"
                                                    @click.prevent="$bvModal.show('modal-nganhangnn');">
                                                    <span class="-ap icon-more_horiz"></span>
                                                </button>
                                                <b-modal id="modal-nganhangnn" modal-class="modal-nganhangnn"
                                                    hide-footer hide-header no-close-on-backdrop>

                                                </b-modal>

                                                <SelectExt :class="{disabled:!Kh.cboNganHang_check}"
                                                    v-model="Kh.cboNganHang_val" class="select-custom"
                                                    :dataSource="NganHangList" dataTextField="TEN_NH"
                                                    dataValueField="NGANHANG_ID" @change="nganhangTTChanged">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mã số thuế</div>
                                        <div class="value">
                                            <input type="text" v-model="Kh.txtMST" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Ghi chú</div>
                                <div class="value">
                                    <input type="text" v-model="Kh.txtGhiChuTT" class="form-control">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-9 col-12">
                        <div class="box-form">
                            <div class="legend-title">
                                Danh sách thanh toán
                            </div>
                            <DataGrid v-bind:columns="DsThanhToan.headers" :enabledSelectFirstRow="false"
                                v-bind:dataSource="DsThanhToan.data" :showColumnCheckbox="false"
                                :enable-paging-server="false" :allowPaging="false" :showFilter="true"
                                ref="gridDsThanhToan" @rowClicked="lvwThanhToan_SelectedIndexChanged">
                            </DataGrid>


                        </div>
                    </div>
                    <div class="col-sm-3 col-12">
                        <div class="box-form">
                            <div class="legend-title">Dịch vụ khác</div>
                            <!-- <textarea name="" class="form-control" style="height: 300px;resize: none;"></textarea> -->
                            <ul name="" class="form-control listview" style="height: 110px;resize: none;">
                                <li :value="dv.DVKHAC_ID" v-for="dv in lvDvkhac_TT.list"
                                    @click="Kh.dichVuKhacTB=dv.DVKHAC_ID"
                                    :class="{active:Kh.dichVuKhacTT==dv.DVKHAC_ID}">{{dv.TEN_DVKHAC}}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="tab2">
                <div class="tab-content">
                    <div class="row">
                        <div class="col-sm-5 col-12">
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Dịch vụ</div>
                                        <div class="value">
                                            <SelectExt v-model="Tb_cboDichVuVT" :dataSource="COMBO_DVVT.list" v-bind:class="{ disabled: true }"
                                                dataTextField="TEN_DVVT" dataValueField="DICHVUVT_ID"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Loại hình</div>
                                        <div class="value">
                                            <SelectExt v-model="Tb_cboLoaihinhTB"
                                                :dataSource="LOAIHINH_TB.data"
                                                dataTextField="LOAIHINH_TB" dataValueField="LOAITB_ID" v-bind:class="{ disabled: true }" @change="cboLoaihinhTB_SelectedValueChanged"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Kiểu yêu cầu</div>
                                <div class="value">
                                    <SelectExt v-model="Tb_cboKieuLD" :dataSource="kieuyc_list"
                                        dataTextField="ten_kieuld" dataValueField="kieuld_id" v-bind:class="{ disabled: true }"></SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Mức cước TB</div>
                                <div class="value">
                                    <SelectExt v-model="Tb.cboMucCuocTB" :dataSource="MUCCUOCTB.list"
                                        dataTextField="TENMUCCUOC" dataValueField="MUCUOCTB_ID" v-bind:class="{ disabled: true }"></SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Thanh toán</div>
                                <div class="value">
                                    <!-- <div class="select-custom">
                                        <select name="" id="" class="form-control">
                                            <option value=""></option>
                                        </select>
                                    </div> -->
                                    <SelectExt v-model="Tb.cboTT" :dataSource="CboTT.list" :dataTextField="CboTT.text"
                                        :dataValueField="CboTT.id" v-bind:class="{ disabled: true }"></SelectExt>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tên TB <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <input type="text" v-model="Tb.txtTenTB" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Ngày sinh <span class="batbuoc">(*)</span></div>
                                        <div class="value">
                                            <!-- <input type="text" class="form-control" value="__/__/____"> -->
                                            <date-picker :format="dateFormat" :value-type="dateFormat"
                                                :time-title-format="dateFormat" v-model="Tb.txtNgaySNTB"
                                                :type="typeFormat">
                                                <template #icon-calendar>
                                                    <span class="icon one-calendar"></span>
                                                </template>
                                            </date-picker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Địa chỉ TB <span class="batbuoc">(*)</span></div>
                                <div class="value">
                                    <input type="text" v-model="Tb.txtDiaChiTB" class="form-control">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Địa chỉ LĐ <span class="batbuoc">(*)</span></div>
                                <div class="value">
                                    <input type="text" v-model="Tb.txtDiaChiLD" class="form-control">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Đối tượng TB</div>
                                        <div class="value">
                                            <SelectExt v-model="Tb.cboDoituongTB" :dataSource="DOITUONG.list"
                                                dataTextField="TEN_DT" dataValueField="DOITUONG_ID"  v-bind:class="{ disabled: true }"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Khu vực</div>
                                        <div class="value">
                                            <!-- <div class="input-more-button">
                                                <button class="btn">
                                                    <span class="-ap icon-more_horiz"></span>
                                                </button>
                                                <input type="text" v-model="Tb.txtKhuVuc" class="form-control ">
                                            </div> -->
                                            <div class="input-more-button" @click.prevent="popupChonKhuVuc">
                                                <button class="btn">
                                                    <span class="-ap icon-more_horiz"></span>
                                                </button>
                                                <input type="text" class="form-control " v-model="Tb.txtKhuVuc" required
                                                    title='Thông tin khu vực là bắt buộc!'>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Đơn vị TC</div>
                                <div class="value">
                                    <!-- <div class="select-custom">
                                        <select name="" id="" class="form-control">
                                            <option value=""></option>
                                        </select>
                                    </div> -->
                                    <SelectExt v-model="Tb_cboDaiVT" :dataSource="DONVIQL_LD.list"
                                        dataTextField="TEN_DV" dataValueField="DONVI_ID"  v-bind:class="{ disabled: true }"></SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Khuyến mại</div>
                                <div class="value padt7">
                                    <a href="#" class="link underline" @click.prevent="ShowChiTietKhuyenMai">Danh sách
                                        khuyến mại, đặt cọc</a>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Ghi chú</div>
                                <div class="value">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-7 col-12">
                          <div v-show="pnlTBRight" class="row">
                            <div class="row">
                              <div class="col-md-12">
                                <div class="info-row">
                                  <div class="key w90">Số máy/Acc</div>
                                  <div class="value">
                                      <input type="text" v-model="Tb.txtMaTB" class="form-control highlight">
                                  </div>
                              </div>
                              </div>
                              <div class="col-md-12">
                                <div class="info-row">
                                  <div class="key w90">Ngày sử dụng</div>
                                  <div class="value w20 padt7">
                                      <div class="check-action">
                                          <input type="checkbox" class="check" v-model="Tb.dtpNgayBGCheck">
                                          <span class="name"></span>
                                      </div>
                                  </div>
                                  <div class="value">
                                      <div class="row">
                                          <div class="col-md-4 col-sm-12 col-12">
                                              <date-picker :format="dateFormat" :value-type="dateFormat"
                                                  :time-title-format="dateFormat" v-model="Tb.dtpNgayBG" v-bind:class="{ disabled: !Tb.dtpNgayBGCheck }"
                                                  :type="typeFormat">
                                                  <template #icon-calendar>
                                                      <span class="icon one-calendar"></span>
                                                  </template>
                                              </date-picker>
                                          </div>
                                      </div>

                                  </div>
                              </div>
                              </div>
                            </div>
                          </div>
                            <div id="TSL" class="tab-pane" v-show="DVVT.TSL==dichvuvt_id">
                                <div class="row">
                                    <div class="col-md-7 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Tốc độ kênh</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTocDoKenhTSL" :dataSource="TocDoKenhTSL.list"
                                                    dataTextField="TOCDO" dataValueField="TOCDO_ID"></SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Line trắng</div>
                                            <div class="value">
                                                <input v-model="Tb.txtLineTrang_TSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-7 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Loại kênh</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboLoaiKenhTSL" :dataSource="LoaiKenhTSL.list"
                                                    dataTextField="LOAI_KENH" dataValueField="LOAIKENH_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Thời hạn</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboThoiHan" :dataSource="ThoiHanTSL.list"
                                                    dataTextField="TENTHOIHAN" dataValueField="THOIHAN_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-7 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Chủ quản</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboChuQuan" :dataSource="ChuQuanTSL.list"
                                                    dataTextField="TEN_TAT" dataValueField="CHUQUAN_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trang bị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTrangBi" :dataSource="TrangBiTSL.list"
                                                    dataTextField="TENTRANGBI" dataValueField="TRANGBI_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Loại thiết bị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboLoaiTBTSL" :dataSource="LoaiTBTSL.list"
                                                    dataTextField="TEN_TBI" dataValueField="THIETBIDC_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="CoDinh" class="tab-pane" v-show="DVVT.CO_DINH ==dichvuvt_id">
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Host</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboHost" :dataSource="HostCD.list"
                                                    dataTextField="TEN_DV" dataValueField="DONVI_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Mã TN</div>
                                            <div class="value">
                                                <input v-model="Tb.txtmaTN_CD" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trạm VT</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboVeTinhCD" :dataSource="VeTinhCD.list" :disabled="!cboVeTinhCD_Enabled"
                                                    :dataTextField="VeTinhCD.text" :dataValueField="VeTinhCD.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">NE</div>
                                            <div class="value">
                                                <input v-model="Tb.txtNe" v-bind:class="{'disabled':!txtNe_Enabled}" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trạm thiết bị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTramTB_CD" :dataSource="TramTB_CD.list"
                                                    dataTextField="TEN_DV" dataValueField="DONVI_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Hộp cáp</div>
                                            <div class="value">
                                                <input v-model="Tb.txtHopCap" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Đôi cáp</div>
                                            <div class="value">
                                                <input v-model="Tb.txtDoiCap" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Số mét dây</div>
                                            <div class="value">
                                                <input v-model="Tb.txtCuLy" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Mã phụ</div>
                                            <div class="value">
                                                <input v-model="Tb.txtLineTrang_CD" v-bind:class="{'disabled':!txtLineTrang_CD_Enabled}" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="legend-title mart20">Tiền cam kết số đẹp</div>
                                        <DataGrid v-bind:columns="CoDinhSoDep.headers" :enabledSelectFirstRow="false"
                                            v-bind:dataSource="CoDinhSoDep.data" :showColumnCheckbox="false"
                                            :enable-paging-server="false" :allowPaging="false" :showFilter="true"
                                            ref="gridDsCoDinhSoDep">
                                        </DataGrid>
                                    </div>
                                </div>
                            </div>
                            <div id="IMS" class="tab-pane" v-show="DVVT.IMS ==dichvuvt_id">
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trạm VT</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboVeTinhIMS" :dataSource="VeTinhIMS.list"
                                                    :dataTextField="VeTinhIMS.text" :dataValueField="VeTinhIMS.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trang bị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTrangBiIMS" :dataSource="TrangBiIMS.list"
                                                    :dataTextField="TrangBiIMS.text" :dataValueField="TrangBiIMS.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="legend-title mart20">Tiền cam kết số đẹp</div>
                                        <DataGrid v-bind:columns="IMSSoDep.headers" :enabledSelectFirstRow="false"
                                            v-bind:dataSource="IMSSoDep.data" :showColumnCheckbox="false"
                                            :enable-paging-server="false" :allowPaging="false" :showFilter="true"
                                            ref="gridDsIMSSoDep">
                                        </DataGrid>
                                    </div>
                                </div>
                            </div>
                            <div id="MegaWan" class="tab-pane"
                                v-show="DVVT.MEGAWAN ==dichvuvt_id || DVVT.METRONET ==dichvuvt_id">
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Mã truy nhập</div>
                                            <div class="value">
                                                <input v-model="Tb.txtmaTN_Wan" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Line trắng</div>
                                            <div class="value">
                                                <input v-model="Tb.txtLineTrang_Wan" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trạm VT</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboVeTinhMgwan" :dataSource="VeTinhMgwan.list"
                                                    :dataTextField="VeTinhMgwan.text" :dataValueField="VeTinhMgwan.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Thời hạn</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboThoiHanMEGAWAN"
                                                    :dataSource="ThoiHanMEGAWAN.list"
                                                    :dataTextField="ThoiHanMEGAWAN.text"
                                                    :dataValueField="ThoiHanMEGAWAN.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Loại kênh</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboLoaiKenh" :dataSource="LoaiKenhMgwan.list"
                                                    dataTextField="LOAI_KENH" dataValueField="LOAIKENH_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Tốc độ</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTocDo" :dataSource="TocDoMEGAWAN.list"
                                                    :dataTextField="TocDoMEGAWAN.text"
                                                    :dataValueField="TocDoMEGAWAN.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Modem</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboLoaiModem" :dataSource="LoaiModemMgwan.list"
                                                    dataTextField="LOAI_MD"
                                                    dataValueField="LOAIMD_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Hướng KN</div>
                                            <div class="value">
                                                <input v-model="Tb.txtHuongKetNoiMEGAWAN" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Loại thiết bị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboLoaiTBiWan"
                                                    :dataSource="LOAI_TB.list.filter(x=>x.DICHVUVT_ID==dichvuvt_id)"
                                                    dataTextField="TEN_TBI" dataValueField="THIETBIDC_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trang bị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTrangBiMEGAWAN"
                                                    :dataSource="TrangBiMEGAWAN.list"
                                                    :dataTextField="TrangBiMEGAWAN.text"
                                                    :dataValueField="TrangBiMEGAWAN.id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="CNTT" class="tab-pane"
                                v-show="DVVT.DICHVU_CNTT ==dichvuvt_id || DVVT.TRUNGTAM_DULIEU ==dichvuvt_id || DVVT.ANTOAN_BAOMAT_TT ==dichvuvt_id || DVVT.HOINGHI_TRUYENHINH ==dichvuvt_id">
                                <table class="table table-striped table-bordered">
                                    <tbody>
                                        <tr v-for="p in ThuocTinhCNTT" :key="p.field_name">
                                            <td class="CNTT_Field" style="max-width: 200px;">{{p.ten_hienthi}} </td>
                                            <td class="CNTT_SValue"><span v-html="p.text"></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="DiDong" class="tab-pane" v-show="DVVT.DI_DONG ==dichvuvt_id">
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Số sim</div>
                                            <div class="value">
                                                <input v-model="Tb.txtSimDD" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Gói cước</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboGoiCuocDD" :dataSource="GoiCuocDD.list"
                                                    dataTextField="TENGOICUOC" dataValueField="GOICUOC_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Tiền dư TK</div>
                                            <div class="value">
                                                <input v-model="Tb.txtTienDuTK" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Số máy nhận TK</div>
                                            <div class="value">
                                                <input v-model="Tb.txtSoMayNTK" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="GPhone" class="tab-pane" v-show="DVVT.GPHONE ==dichvuvt_id">
                                <div class="row">
                                    <div class="col-sm-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Simcard</div>
                                            <div class="value">
                                                <input v-model="Tb.txtSoSimGP" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Tọa độ</div>
                                            <div class="value">
                                                <input v-model="Tb.txtToaDo" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w90">Cell1</div>
                                                <div class="value">
                                                    <input v-model="Tb.txtCell1" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w90">Cell2</div>
                                                <div class="value">
                                                    <input v-model="Tb.txtCell2" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 col-12">
                                            <div class="legend-title mart20">Tiền cam kết số đẹp</div>
                                            <DataGrid v-bind:columns="GPhoneSoDep.headers"
                                                :enabledSelectFirstRow="false" v-bind:dataSource="GPhoneSoDep.data"
                                                :showColumnCheckbox="false" :enable-paging-server="false"
                                                :allowPaging="false" :showFilter="true" ref="gridDsGPhoneSoDep">
                                            </DataGrid>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="ADSL" class="tab-pane" v-show="DVVT.ADSL ==dichvuvt_id">
                                <div class="row">
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Mật khẩu</div>
                                            <div class="value">
                                                <input v-model="Tb.txtMatKhauADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w60">Email</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtEmailAdsl" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">Mã TN</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtmaTN_ADSL"
                                                    class="form-control highlight">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Tốc độ</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboGoiCuocAdsl" :dataSource="GoiCuocAdsl.list"
                                                    dataTextField="THUONGHIEU" dataValueField="TOCDO_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">Mức cước</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboMucCuoc" :dataSource="MUCCUOC.list"
                                                    dataTextField="TENMUC" dataValueField="MUCCUOC_ID"></SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Trạm VT</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboVeTinhAdsl" :dataSource="VeTinhAdsl.list" :disabled="!cboVeTinhAdsl_Enabled"
                                                    dataTextField="TEN_DV" dataValueField="DONVI_ID" @change="cboVeTinhAdsl_SelectedValueChanged">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">Trạm TBi</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboTramTB_ADSL" :dataSource="TramTB_ADSL.list"
                                                    dataTextField="TEN_DV" dataValueField="DONVI_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Loại Tbị</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboLoaiTB"
                                                    :dataSource="LOAI_TB.list.filter(x=>x.DICHVUVT_ID==dichvuvt_id)"
                                                    dataTextField="TEN_TBI" dataValueField="THIETBIDC_ID">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w60">Đôi cáp</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtDoiCapADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">Hộp cáp</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtHopCapADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">BRAS</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboBrasADSL" :dataSource="BrasADSL.list"
                                                    dataTextField="tenbras" dataValueField="bras_id">
                                                </SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">Mét dây</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtCuLyADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">DSLAM</div>
                                            <div class="value">
                                                <SelectExt v-model="Tb.cboDSLAM" :dataSource="DsLam.list"
                                                    dataTextField="tendslam" dataValueField="dslam_id"></SelectExt>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">IP tỉnh</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtIPADSL"
                                                    class="form-control highlight">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">System</div>
                                            <div class="value">
                                                <input type="text" :disable="!Tb.txtSystem.Enabled"
                                                    v-model="Tb.txtSystem.Text" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w60">Rack</div>
                                            <div class="value">
                                                <input type="text" :disable="!Tb.txtRack.Enabled"
                                                    v-model="Tb.txtRack.Text" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">Port MDF</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtPort_mdf" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Slot</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtSlotADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w60">Port</div>
                                            <div class="value w100">
                                                <div class="input-more-button">
                                                    <button class="btn" v-show="Tb.btnChonPort_Visible">
                                                        <span class="-ap icon-more_horiz"></span>
                                                    </button>
                                                    <input type="text" v-model="Tb.txtPort" class="form-control">
                                                </div>
                                            </div>
                                            <div class="key w60 padl10">Shelf</div>
                                            <div class="value w100">
                                                <input type="text" :disable="!Tb.txtShelf.Enabled"
                                                    v-model="Tb.txtShelf.Text" class="form-control ">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">VCI/CVLAN</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtVCIADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8 col-12">
                                        <div class="info-row">
                                            <div class="key w90">Thông tin TC</div>
                                            <div class="value">
                                                <div class="input-more-button">
                                                    <button class="btn" @click.prevent="btnThongTinTC_Click">
                                                        <span class="-ap icon-more_horiz"></span>
                                                    </button>
                                                    <input type="text" v-model="Tb.txtTTCuoc" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="key w80">VPI/SVLAN</div>
                                            <div class="value">
                                                <input type="text" v-model="Tb.txtVPIADSL" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-5 col-12">
                            <div class="legend-title mart20">Dịch vụ cộng thêm</div>
                            <div class="info-row">
                                <div class="key w90"></div>
                                <div class="value">
                                    <!-- <textarea name="" class="form-control" style="height: 100px;resize: none;"></textarea> -->
                                    <ul name="" class="form-control listview" style="height: 110px;resize: none;">
                                        <li :value="dv.DICHVUGT_ID" v-for="dv in lvDvGT.list">{{dv.TEN_DVGT}}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-7 col-12">
                            <div class="legend-title mart20">Dịch vụ khác</div>
                            <div class="info-row">
                                <div class="key w90"></div>
                                <div class="value">
                                    <!-- <textarea name="" v-model="Kh.DichVuKhac" class="form-control" style="height: 100px;resize: none;"></textarea> -->
                                    <ul name="" class="form-control listview" style="height: 110px;resize: none;">
                                        <li :value="dv.DVKHAC_ID" v-for="dv in lvDvkhac_TB.list"
                                            @click="Tb.dichVuKhacTT=dv.DVKHAC_ID"
                                            :class="{active:Kh.dichVuKhacTT==dv.DVKHAC_ID}">{{dv.TEN_DVKHAC}}</li>
                                    </ul>
                                </div>
                            </div>
                            <!-- <div class="legend-title mart20">Dịch vụ khác</div>
                            <div class="input-more-button">
                                <button class="btn" @click.prevent="popupDVKhacTT">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <ul name="" class="form-control listview" style="height: 110px;resize: none;">
                                    <li :value="dv.dvkhac_id" v-for="dv in lvDvkhac_TT.list" v-if="dv.loaiid==2" @click="lvDvkhac_TT.value=dv.dvkhac_id" :class="{active:lvDvkhac_TT.value==dv.dvkhac_id}">{{dv.ten_dvkhac}}</li>
                                </ul>
                            </div> -->
                        </div>
                    </div>
                </div>
                <div class="box-form">
                    <div class="legend-title">Danh sách thuê bao</div>
                    <DataGrid v-bind:columns="DsThueBao.headers" :enabledSelectFirstRow="false"
                        v-bind:dataSource="DsThueBao.data" :showColumnCheckbox="false" :enable-paging-server="false"
                        :allowPaging="false" :showFilter="true" ref="gridDsThueBao"
                        @rowClicked="lvwThueBao_SelectedIndexChanged">
                    </DataGrid>
                </div>
            </div>
        </div>
    </div>
    <b-modal id="popupComponents" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0">
        <component :is="popupComponent" ref="generalPopup" :dulieu="popupComponentData" v-bind="popupComponentAttr"
            isPopup="true" v-on="popupComponentEvts"></component>
        <!--v-dynamic-events="popupComponentEvents"-->
    </b-modal>
    <ChiTietKhuyenMai ref="popupChiTietKhuyenMai"></ChiTietKhuyenMai>
    <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false' :animationSettings='animationSettings'
        ref="dialogObjDongBoCCBS" :position="position" :header='"TRA CỨU THÔNG TIN THUÊ BAO TRẢ TRƯỚC"'
        showCloseIcon=true width='90%' target='#app .main-wrapper-hths' :close="closeDialogObjDongBoCCBS">
        <div class="popup-body popup-body-postpaid">
            <updatePostPaid ref="refupdatePostPaid"></updatePostPaid>
        </div>
    </ejs-dialog>
</div>
