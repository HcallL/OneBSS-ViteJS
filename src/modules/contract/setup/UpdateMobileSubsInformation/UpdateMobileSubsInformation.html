<div class="main-wrapper">
    <div class="breadcrumb-top">
        <div class="main-title">Cập nhật thông tin thuê bao di động chuyển từ mạng khác</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item"><a href="#">Lập hợp đồng</a></li>
            <li class="breadcrumb-item active">Cập nhật thông tin thuê bao di động chuyển mạng đến (PI)</li>
        </ul>
    </div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a @click="tsbtnNhapMoi_Click" :class="{disabled:!tsbtnNhapMoi.enabled}">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>
            <li>
                <a @click="tsbtnGhiLai_Click" :class="{disabled:!tsbtnGhiLai.enabled}">
                    <span class="icon one-save"></span>Ghi lại
                </a>
            </li>
            <li>
                <a @click="tsbtnHuyBo_Click" :class="{disabled:!tsbtnHuyBo.enabled}">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Huỷ
                </a>
            </li>
            <li>
                <a @click="tsbtnXoa_Click" :class="{disabled:!tsbtnXoa.enabled}">
                    <span class="icon one-trash"></span>Xoá
                </a>
            </li>
        </ul>

    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="row">
                <div class="col-sm-6 col-12">

                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w120">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="filterbox.ctv.ischecked"
                                    @change="ShowPopupCTV()">
                                <span class="name fw6">Cộng tác viên</span>
                            </div>
                        </div>
                        <div class="value" :class="{disabled:!filterbox.ctv.ischecked}">
                            <input type="text" class="form-control" v-model="filterbox.ctv.value" :readonly="true" style="font-weight: bold">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w130">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="filterbox.nguoigt.ischecked"
                                @change="ShowPopupNguoiGT()">
                                <span class="name fw6">Người giới thiệu</span>
                            </div>
                        </div>
                        <div class="value" :class="{disabled:!filterbox.nguoigt.ischecked}">
                            <input type="text" class="form-control" v-model="filterbox.nguoigt.value" :readonly="true" style="font-weight: bold">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid-stack-box">
            <div class="box-col box-form" id="boxLeft">
                <div class="legend-title">Thông tin thuê bao</div>
                <div class="info-row">
                    <div class="key w160">Số máy/Acc (*)</div>
                    <div class="value">
                        <input type="text" class="form-control highlight" v-model="txtMaTB" ref="inputMaTB" style="font-weight: bold">
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w160">Tên thuê bao (*)</div>
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtTenTB" ref="inputTenTB">
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w160">Địa chỉ thuê bao (*)</div>
                    <div class="value">
                        <div class="input-more-button">
                            <button class="btn" @click="showpopupDiaChiTB">
                                <span class="-ap icon-more_horiz"></span>
                            </button>
                            <ModalChonDiaChi modalId="popupDiaChiTB" :data="diachiTB" @xacnhan="getDiaChiTB" />
                                <input type="text" v-model="diachiTB.DIACHI" class="form-control"
                                   ref="inputDiaChiTB" readonly>
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w160">Nhóm nguyên nhân</div>
                    <div class="value">
                        <div class="select-custom">
                            <SelectExt class="select-custom" v-model="cboNhomNN.value"
                                @select="cboNhomNN_SelectedValueChanged" :options="cboNhomNN.data" />
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w160">Nguyên nhân</div>
                    <div class="value">
                        <div class="select-custom">
                            <SelectExt class="select-custom" v-model="cboNguyenNhan.value"
                                :options="cboNguyenNhan.data" />
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w160">Trạng thái chuyển mạng</div>
                    <div class="value">
                        <div class="select-custom">
                            <SelectExt class="select-custom" v-model="cboChuyenMang.value"
                                :options="cboChuyenMang.data" />
                        </div>
                    </div>
                </div>

            </div>
            <div class="box-col box-form" id="boxRight">
                <div class="legend-title">
                    Thông tin khách hàng
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w110">Loại giấy tờ</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt class="select-custom" v-model="cboGiayToKH.value"
                                        :options="cboGiayToKH.data" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w70">Số giấy tờ</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model="txtSoGT"  ref="inputSoGT"  @input="changeSoGiayTo">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w110">Ngày cấp</div>
                            <div class="value">
                                <div class="input-icon-right">
                                    <ejs-datepicker v-model="dtpNgayCap" :value="today" :format="'dd/MM/yyyy'"
                                            :showClearButton="false">
                                        </ejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w70">Nơi cấp</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model="txtNoiCap">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w110">Mã khách hàng</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model="txtMaKH">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w70">Ngày sinh</div>
                            <div class="value">
                                <div class="input-icon-right">
                                    <ejs-datepicker v-model="dtpNgaySinh" :value="today" :format="'dd/MM/yyyy'"
                                            :showClearButton="false">
                                        </ejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w110">Tên khách hàng</div>
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtTenKH" :readonly="true">
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w110">Địa chỉ KH</div>
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtDiaChiKH" :readonly="true">
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w110">Ghi chú</div>
                    <div class="value">
                        <input type="text" class="form-control" v-model="txtGhiChu">
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách thuê bao</div>
          
                    <DataGrid v-bind:columns="[
                    {fieldName: 'ma_tb', headerText: 'Số máy/Acc', allowFiltering: true, allowSorting: false, textAlign: 'left',freeze: 'left' },
                    {fieldName: 'ten_tb', headerText: 'Tên thuê bao', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                    {fieldName: 'diachi_tb', headerText: 'Địa chỉ thuê bao', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                    {fieldName: 'ngay_cn', headerText: 'Ngày CN', allowFiltering: true, allowSorting: false, textAlign: 'right', type: 'date',format:'dd/MM/yyyy HH:mm:ss'},
                    {fieldName: 'nguoi_cn', headerText: 'Người CN', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                    {fieldName: 'nguyennhan', headerText: 'Nguyên nhân', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                    {fieldName: 'nhom_nn', headerText: 'Nhóm NN', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                    {fieldName: 'trangthai_cm', headerText: 'Trạng thái chuyển mạng', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                 
                    ]" v-bind:dataSource="dtDs" :showFilter="true"
                        @selectedRowChanged="gridviewDanhSach_FocusedRowChanged" :showColumnCheckbox="false"
                        :defaultColumnCheckboxChecked="false" :allowPaging="true" :enablePagingServer="false"
                        ref="DSThuebao" :enabled-select-first-row="true">
                    </DataGrid>
             
        </div>
    </div>
    <ChonCongTacVienModal ref="chonCongTacVienModal" @accept="acceptCTV" />
    <ChonNguoiGTModal ref="chonNguoiGTModal" @accept="acceptNguoiGT" />
    <footer class="footer">
        VNPT-IT &copy; 2021
    </footer>
</div>
</body>

</html>
