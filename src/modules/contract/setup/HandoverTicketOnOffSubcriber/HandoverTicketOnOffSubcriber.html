
<div class="main-wrapper">
    <breadcrumb :header="header" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a v-show="tsbtnTimKiem.Visible" :class="{ disabled: !tsbtnTimKiem.Enabled }" @click="tsbtnTimKiem_Click">
                    <span class="icon one-search"></span>Tìm kiếm
                </a>
            </li>
            <li>
                <a  v-show="tsbtnGiaoPhieu.Visible" :class="{ disabled: !tsbtnGiaoPhieu.Enabled }" @click="tsbtnGiaoPhieu_Click">
                    <span class="icon one-file-arrow-right1"></span>Giao phiếu
                </a>
            </li>
            <li>
                <a  :class="{ disabled: !tsbtnHuyGiao.Enabled }" @click="tsbtnHuyGiao_Click">
                    <span class="icon one-cancel"></span>Hủy giao
                </a>
            </li>
            <li>
                <a  v-show="tsbtnInDS.Visible" :class="{ disabled: !tsbtnInDS.Enabled }">
                    <span class="icon one-print"></span>In danh sách
                </a>
            </li>
            <li>
                <a   :class="{ disabled: !btnCapNhatVT.Enabled }" @click="btnCapNhatVT_Click">
                    <span class="icon one-reload1"></span>Cập nhật ĐV
                </a>
            </li>
            <li >
                <a  v-show="tsbUpHoSo.Visible" :class="{ disabled: !tsbUpHoSo.Enabled }" @click="tsbUpHoSo_Click">
                    <span class="icon one-reload1"></span>Up hồ sơ
                </a>
            </li>
            <li>
                <a @click="tsbtnXuatExcel_Click">
                    <span class="icon one-download"></span>Xuất file
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin tìm kiếm</div>
            <div class="row">
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w105">Mã giao dịch</div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="showPopupSearchContract">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" ref="txtMaGD" v-model="txtMaGD"  v-on:keyup.enter="txtMaHD_KeyPress" class="form-control ">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w80">Ngày giao</div>
                        <div class="">
                            <div class="input-icon-right">
                                <vue-date :format="'DD/MM/YYYY'" v-model="dtpNgayGiaoTK" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">

                    <div class="info-row">
                        <div class="key">Trạng thái phiếu</div>
                        <div class="value">
                            <div class="select-custom">
                            <SelectExt v-model="cboTT.SelectedValue"
                                :allowFiltering="true"
                                :dataSource="cboTT.list"
                                dataValueField="id"
                                dataTextField="text"
                                @change="cboTT_SelectedValueChanged"
                                 >
                            </SelectExt>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w105">
                            <div class="check-action">
                                <input type="checkbox"  v-model="chkTKLoaiHD.Checked" @change="chkTKLoaiHD_CheckedChanged" class="check">
                                <span class="name">Loại HĐ</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model="cboTKLoaiHD.SelectedValue"
                                :allowFiltering="true"
                                :disabled="!chkTKLoaiHD.Checked"
                                :dataSource="cboTKLoaiHD.list"
                                dataValueField="LOAIHD_ID"
                                dataTextField="TEN_LOAIHD"
                                @change="cboTKLoaiHD_SelectedValueChanged"
                                 >
                                </SelectExt>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w80">
                            <div class="check-action">
                                <input type="checkbox" v-model="chkTKDichVuVT.Checked" @change="chkTKDichVuVT_CheckedChanged" class="check">
                                <span class="name">Dịch vụ</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model="cboTKDichVuVT.SelectedValue"
                                :allowFiltering="true"
                                :disabled="!chkTKDichVuVT.Checked"
                                :dataSource="cboTKDichVuVT.list"
                                dataValueField="DICHVUVT_ID"
                                dataTextField="TEN_DVVT"
                                @change="cboTKDichVuVT_SelectedValueChanged"
                                 >
                                </SelectExt>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">

                    <div class="info-row">
                        <div class="key">
                            <div class="check-action">
                                <input type="checkbox" v-model="chkTKQuyTrinh.Checked" @change="chkTKQuyTrinh_CheckedChanged" class="check">
                                <span class="name">Quy trình:</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model="cboTKQuyTrinh.SelectedValue"
                                :allowFiltering="true"
                                :disabled="!chkTKQuyTrinh.Checked"
                                :dataSource="cboTKQuyTrinh.list"
                                dataValueField="quytrinh_id"
                                dataTextField="quytrinh"
                                @change="cboTKQuyTrinh_SelectedValueChanged"
                                 >
                                </SelectExt>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="legend-title mart20">Thông tin giao phiếu</div>
            <div class="row">
                <div class="col-sm-6 col-12">

                    <div class="info-row">
                        <div class="key w105">Hướng giao <span style="color:red">(*)</span></div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model="cboTKHuongGiao.SelectedValue"
                                :allowFiltering="true"
                                :dataSource="cboTKHuongGiao.list"
                                dataValueField="huonggiao_id"
                                dataTextField="huonggiao"
                                @change="cboTKHuongGiao_SelectedValueChanged"
                                 >
                                </SelectExt>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key">Mã giao dịch</div>
                        <div class="value">
                            <input type="text" readonly v-model="txtMaGDChon" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w70">Ngày giao</div>
                        <div class="value">
                            <div class="input-icon-right">
                                <vue-date :format="'DD/MM/YYYY HH:mm a'" v-model="dtpNgayGiao" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w105">Số máy/Acc</div>
                        <div class="value">
                            <input type="text" readonly v-model="txtMaTBChon" v-on:keyup.enter="txtMaHD_KeyPress" class="form-control highlight">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">

                    <div class="info-row">
                        <div class="key w80">Số QĐ</div>
                        <div class="value">
                            <input type="text" v-model="txtSoPhieu" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">

                    <div class="info-row">
                        <div class="key">Đơn vị nhận <span style="color:red">(*)</span></div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model="cboDVNhan.SelectedValue"
                                :allowFiltering="true"
                                :dataSource="cboDVNhan.list"
                                dataValueField="donvi_id"
                                dataTextField="ten_dv"

                                 >
                                </SelectExt>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-sm-6 col-12">

                    <div class="info-row">
                        <div class="key w105">Nội dung giao <span style="color:red">(*)</span></div>
                        <div class="value">
                            <input type="text" ref="txtNoiDung" v-model="txtNoiDung" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">

                    <div class="info-row">
                        <div class="key">Địa chỉ TC</div>
                        <div class="value">
                            <input type="text"  v-model="txtDiaChiTC" readonly class="form-control">
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="legend-title mart20">
            <div class="pull-left">
                Danh sách phiếu yêu cầu
            </div>
            <div class="pull-right red">
                {{lblThoiGianTao}}
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="table-content">
            <DataGrid
            v-bind:columns="dataCols"
            v-bind:dataSource="grcList.list"
            :enable-paging-server="false"
            :allowPaging="true"
            :showFilter="true"
            :showColumnCheckbox="true"
            ref="grcList"
            @queryCellInfo='queryCellInfo'
            :enabledSelectFirstRow="false"
            @selectedRowChanged="gridChanged"
            @selectedItemsChanged="selectedItems_click"
            @rowClicked = "rowClicked"
            @actionComplete="selectRowsChon"
            >
        </DataGrid>
        </div>



    </div>
    <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
              ref="popuploadEProfile" :header='"Upload hồ sơ"' showCloseIcon=true width='95%' height='100%' target='#app .main-wrapper'>
    <uploadEProfile ref="uploadEProfile" :matb="txtMaTBChon" :isPopup="true"/>
    </ejs-dialog>
    <ExportDataModal ref="exportDataModal" :data="grcList.list"></ExportDataModal>
    <ejs-dialog :enableResize='true' :visible="false" ref="popupFrmTraCuuHopDong"
  :header='"Tra cứu hợp đồng, phụ lục"' showCloseIcon=true width="80%" target="#app .main-wrapper" :position="position" height="800">
  <SearchContractModal ref="searchContractModal" :loaihd_id="0" :kieu="1" :tthd_id="trangthai_searchContrat" :ngay_yc="ngay_ht"
  @accept="acceptSearchContract"/>
</ejs-dialog>
    <footer class="footer">
        VNPT-IT &copy; 2021
    </footer>
</div>

