<div class="main-wrapper">
    <breadcrumb :header="header" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a  @click.prevent="btnLaytt">
                    <span class="icon one-file-attach" title="Lấy thông tin mới"></span> Lấy TT
                </a>
            </li>
            <li>
                <a style="cursor:pointer" @click.prevent="btnCapNhat">
                    <span class="icon one-reload1" title="Cập nhật"></span> Cập nhật
                </a>
            </li>
            <li>
                <a style="cursor:pointer" @click.prevent="btnGiaoViec" ref="tsbtnGiaoViec">
                    <span class="icon one-file-arrow-right1" title="Giao việc cho nhân viên thực hiện"></span> Giao việc
                </a>
            </li>
          
            <li    :class="!GiaoPhieuStatus ? 'non-ative' : ''">
                 
                <a style="cursor:pointer" @click.prevent="btnGiaoPhieu" ref="tsbtnGiaoPhieu">
                    <span class="icon one-file-arrow-right1" title="Giao phiếu thi công"></span> Giao phiếu
                </a>
            </li>
            <li>
                <a style="cursor:pointer" @click.prevent="tsbtnGiaoPhieu_PH_V2_Click">
                    <span class="icon one-file-arrow-right1"></span> Giao phiếu P/H
                </a>
            </li>
            <li class="dropdown">
                <a data-toggle="dropdown" id="dropdownMenuButton"><span class="one-file-download1"></span> Xuất phiếu</a>
                <div class="dropdown-menu ovauto" aria-labelledby="dropdownMenuButton" style="max-height: 300px;">
                    <a @click="btnPhieuTC_Click" style="cursor:pointer; color: #0176FF; font-weight: 600" :class="!enable.btnPhieuTC ? 'non-ative' : ''">
                        <span class="one-file-edit2"></span> Phiếu thi công
                    </a>
                    <a @click.prevent="btnBienBanNT_Click" style="cursor:pointer; color: #0176FF; font-weight: 600">
                        <span class="dropdown-icon one-print"></span> In phiếu
                    </a>
                    <InBienBan ref="popupInBB" :params="modelIn"/>
                </div>
            </li>
            <li>
                <a @click.prevent="btnKetNoi" style="cursor:pointer" ref="tsbtnCTKetNoi">
                    <span class="icon one-taokn" title="Chi tiết kết nối điểm chính, điểm phụ"></span> Kết nối
                </a>
            </li>
            <li>
                <a @click.prevent="btnHoanThien" style="cursor:pointer" ref="tsbtnHoanThanh">
                    <span class="dropdown-icon one-file-check"></span> Hoàn thành
                </a>  
            </li>
            <li :class="!HoanCongStatus ? 'non-ative' : ''">
                <a @click="btnHoanCong" style="cursor:pointer" ref="tsbtnHoanCong">
                    <span class="dropdown-icon one-hoancong"></span> Hoàn công
                </a>
            </li>
            <li>
                <ChuyenTo ref="popupChuyenTo" @closeChuyenTo="closePopupChuyenTo" :tthdId="Number(Param_Tag.tthd_id)"></ChuyenTo>
                <a ref="tsbtnChuyenTo" @click.prevent="btnChuyenTo" style="cursor:pointer">
                    <span class="icon one-change" title="Chuyển tổ/ trạm thi công"></span>Chuyển tổ
                </a>
            </li>          
            <li>                
                <a ref="tsbtnTraPhieu" style="cursor:pointer" @click.prevent="btnTraPhieu">
                    <span class="icon one-file-back"></span> Trả phiếu
                </a>
            </li>
            <li>
                <VatTuThueBao ref="popupVatTuThueBao" :input-data="modelVatTuThueBao"/>              
                <a @click.prevent="btnVatTu" style="cursor:pointer" ref="tsbtnVatTu">
                    <span class="dropdown-icon one-vt" title="Cấp vật tư/thiết bị cho thuê bao"></span> Vật tư
                </a>
            </li>
            <li>
                <a style="cursor:pointer" ref="tsbtnGiaoViec_KBB">
                    <span class="icon one-file-edit2" title="Giao việc cho nhân viên thực hiện"></span> Giao việc
                </a>
            </li>
            <li>
                <IP_WAN_LAN id="thayDoiThongSoInternet_popupIP_WAN_LAN" :obj="objIP_WAN_LAN"></IP_WAN_LAN>
                <a ref="tsbtnChonIPLANWAN" @click.prevent="btnIPLanWan" style="cursor:pointer">
                    <span class="icon one-location-ip"></span> IP LAN, WAN
                </a>
            </li>
            <li>
                <CapVatTuTB ref="popupVatTuTB" :input-data="modelVatTu"/>
                <a ref="tsbtnVatTuMoi" @click.prevent="btnVatTuMoi" style="cursor:pointer">
                    <span class="dropdown-icon one-vt" title="Cấp vật tư/thiết bị cho thuê bao"></span> Vật tư
                </a>
            </li>
        </ul>
        <div class="more dropdown">
            <a data-toggle="dropdown">
                <span class="icon -ap  icon-dots-three-vertical"></span>
            </a>
            <div class="dropdown-menu ovauto" style="max-height: 300px;">
                <a @click.prevent="btnDauNoi" style="cursor:pointer" ref="tsbtnDauNoiCap">
                    <span class="icon one-connect" title="Đấu nối cáp"></span> Đấu nối
                </a>
                <ExportDataModal ref="exportDataModal" :data="DsThueBao.data"></ExportDataModal>
                <a ref="tsbtnXuatFile" @click.prevent="btnXuatFile" style="cursor:pointer">
                    <span class="icon one-download"></span> Xuất File
                </a>
                <ThongTinHenKhachHangModal ref="thongTinHenKhachHangModal" :hdkh_id="DsThueBao.hdkh_id"/>
                <a ref="tsbtnHen" @click.prevent="btnHenLD" style="cursor:pointer">
                    <span class="icon one-henld" title="Hẹn lắp đặt"></span> Hẹn LĐ
                </a>
                <TonPhieuGiaoModal ref="tonPhieuGiaoModal" :phieu_id="DsThueBao.phieu_id" :tthd_id="Number(Param_Tag.tthd_id)"/>
                <a  @click.prevent="btnTonPhieu">
                    <span class="dropdown-icon one-calendar-number" title="Tồn phiếu"></span> Tồn phiếu
                </a> 
                <a  @click.prevent="btnThongSoKT">
                    <TraCuuThongSoKTModal ref="traCuuThongSoKTModal" :dichvuvt_id="8" :kieu="1"
                        :ma_tb="ThongTinKH.txtMaTB"  :thuebao_id="ThongTinKH.thuebao_id"/>
                    <span class="dropdown-icon nc-icon-glyph ui-1_settings" title="Thông số kỹ thuật cũ"></span> Thông số KT
                </a>
                <ThayDoiKhuVucQuanLyThueBaoModal ref="thayDoiKhuVucQuanLyThueBaoModal" :data="dataPopupKhuVuc"/>
                <a  @click.prevent="btnGanKV">
                    <span class="dropdown-icon -ap icon-pin" title="Thay đổi khu vực quản lý thuê bao"></span> Gán KV
                </a>
                <a @click.prevent="btnDuAn" ref="tsbtnDuAn">
                    <span class="dropdown-icon one-clipart-edit"></span> Dự án
                </a>
                <a ref="tsbtnHoanThienHS" @click.prevent="btnHoanThien" :class="!HoanThienStatus ? 'non-ative' : ''">
                    <span class="dropdown-icon one-file-check"></span> Hoàn thiện
                </a> 
                <DoKiem ref="dokiemModal" :hdtb_id="DsThueBao.hdtb_id"/>
                <a @click.prevent="btnDoKiem" ref="tsbtnKQ_DoKiem">
                    <span class="dropdown-icon one-vt"></span> Đo kiểm
                </a>
                <a ref="tsbtnSua_KenhThu" @click.prevent="btnSuaKenhThu">
                    <span class="dropdown-icon nc-icon-glyph ui-1_edit-74"></span> Sửa kênh thu
                </a>
                <a  @click.prevent="btnThongTinVRF">
                    <span class="dropdown-icon one-file-visa"></span> Thông tin VRF
                </a>
                <a @click.prevent="btnUpLoadHS" ref="tsbUpHoSo">
                    <span class="dropdown-icon one-upload"></span> Upload hồ sơ
                </a>
                <a ref="tsbtnTinh_GiaoNET_NT" @click.prevent="btnGiaoPhieuPhoiHop">
                    <span class="dropdown-icon one-file-half"></span>Giao NET
                </a>                                           
            </div>

        </div>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="row">
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">NV tiếp thị</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="ThongTinKH.txtNVTiepThi">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">Kiểu HĐ</div>
                        <div class="value">
                            <div class="select-custom">
                                <select2 :options="DmKieuHD" v-model="kieuhd_id" :disabled="true"></select2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">Kênh thu</div>
                        <div class="value">
                            <div class="select-custom">
                                <select2 :options="DmKenhThu" v-model="kenhthu_id" :disabled="true"></select2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">Tổng tiền</div>
                        <div class="value">
                            <input type="text" class="form-control tright red bold" value="0" v-model="ThongTinKH.txtTongTien" @blur="formatTT">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">
                <div class="pull-left">
                    <span v-b-toggle.collapse-ttkh class="icon fa fa-angle-up"></span>
                    <span v-b-toggle.collapse-ttkh class="icon fa fa-angle-down"></span> Thông tin khách hàng
                </div>
                <div class="col-sm-2 col-12 pull-left">
                    <div class="check-action normal bold" style="color: rgb(108 104 104)">
                        <input type="checkbox" class="check" :disabled="true" id="chkHen">
                        <span class="name">Lắp đặt theo yêu cầu</span>
                    </div>
                </div>
                <div class="col-sm-1 col-12 pull-left" v-if="false">
                    <span class="item bold red">{{ThongTinKH.txtSoDTLH}}</span>
                </div>
                <div class="col-sm-6 col-12 pull-left">
                    <span class="item bold red">Nhân viên YC : </span>
                    <span class="item bold red">{{ThongTinKH.txtTenNV_YC}}</span> 
                </div>
                <div class="clearfix"></div>
            </div>
            <b-collapse visible id="collapse-ttkh">
            <div class="row">
                <div class="col-sm-7 col-12">
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Loại HĐ/PL
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmLoaiHD" v-model="loaihd_id" :disabled="false"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Quy trình
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmQuyTrinh" v-model="quytrinh_id" :disabled="false"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Mã GD <span class="red">(*)</span>
                                </div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <SearchContractModal ref="popupSearchContract" @accept="acceptSearchContract" :loai_hd_id="loaihd_id*1" :dichvu_id="DichVuVienThong.MEGAWAN" :trangthai_hd="9"/>
                                        <button class="btn" @click.prevent="showPopupSearchContract">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" class="form-control highlight bold" v-model="ThongTinKH.txtMaGD" v-on:keyup.enter="MaGD_KeyUp" id="txtMaGD">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Account <span class="red">(*)</span>
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control highlight bold" v-model="ThongTinKH.txtMaTB" v-on:keyup.enter="MaTB_KeyUp">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Số ảo <span class="red">(*)</span>
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control highlight" v-model="ThongTinKH.txtSoAoWan">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Kiểu LĐ
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control bold" v-model="ThongTinKH.txtKieuLD">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Loại hình <span class="red">(*)</span>
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control highlight bold" v-model="ThongTinKH.txtLoaiHinh">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-5 col-12">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Tên thuê bao
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control bold" v-model="ThongTinKH.txtTenTB">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w60">
                                    Khu vực
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control bold" v-model="ThongTinKH.txtKhuVuc">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">
                            Địa chỉ LĐ
                        </div>
                        <div class="value">
                            <div class="input-more-button">
                                <ModalChonDiaChi modalId="popupDiaChiLD" :data="diaChiLD" @xacnhan="getDiaChiLD"/>
                                <button class="btn" @click="btnBanDoLD_Click">
                                    <span class="one-map-location f20"></span>
                                </button>
                                <input type="text" class="form-control bold" v-model="ThongTinKH.txtDiaChiLD" :disabled="true">
                            </div>

                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">
                            Địa chỉ LĐ cũ
                        </div>
                        <div class="value">
                            <input type="text" class="form-control bold" v-model="ThongTinKH.txtDiaChiLDCu">
                        </div>
                    </div>
                </div>
            </div>
            </b-collapse>

        </div>
        <div class="box-form">
            <div class="legend-title">
                <div class="pull-left">
                    <span v-b-toggle.collapse-tthc class="icon fa fa-angle-up"></span>
                    <span v-b-toggle.collapse-tthc class="icon fa fa-angle-down"></span> Thông tin hoàn công
                </div>
                <div class="col-sm-2 col-12 pull-left">
                    <div class="list-checks normal">
                        <div class="item bold" style="color: #800000">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkLayTSo" :disabled="LayTSoStatus">
                                <span class="name">Lấy thông số thi công</span>
                            </div>
                        </div>           
                    </div>
                </div>
                <div class="col-sm-6 col-12 pull-left">
                    <span class="item bold red">Liên hệ : </span>
                    <span class="item bold red">{{ThongTinHC.txtTenNV_HC}}</span> 
                </div>
                <div class="pull-right">
                    <div class="list-checks normal">                  
                        <div class="item bold">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="ThongTinHC.chkLuongGiuKenh" :disabled="!ThongTinHC.LuongGiuKenhStatus">
                                <span class="name">Luồng giữ kênh</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <b-collapse visible id="collapse-tthc">
            <div class="row">
                <div class="col-sm-7 col-12">
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">Mã TN</div>
                                <div class="value">
                                    <input type="text" class="form-control highlight" v-model="ThongTinHC.txtMaTB_TN" :disabled="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Người GV</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmNguoiGV" v-model="nguoigv_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">Ngày GV</div>
                                <div class="value w20 padt7">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkNgayGV">
                                        <span class="name"></span>
                                    </div>
                                </div>
                                <div>
                                    <div class="input-icon-right">
                                        <k-date-picker format="DD/MM/YYYY hh:mm A" type="datetime" v-model="ngaygv" :disabled="true"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">Thời hạn</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmThoiHan" v-model="thoihan_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Loại kênh</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmLoaiKenh" v-model="loaikenh_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">Ngày HT</div>
                                <div class="value w20 padt7">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkNgayHT">
                                        <span class="name"></span>
                                    </div>
                                </div>
                                <div>
                                    <div class="input-icon-right">
                                        <k-date-picker format="DD/MM/YYYY hh:mm A" type="datetime" v-model="ngayht" :disabled="!ngayhtStatus"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">Modem</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmMoDem" v-model="modem_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Tốc độ CIR</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmTocDoCIR" v-model="tocdocir_id" :disabled="true"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkTD_NIX" :disabled="true">
                                        <span class="name text-main">TĐ NIX</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :disabled="true" :options="DmTocDoNIX" v-model="tocdonix_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">Trang bị</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmTrangBi" v-model="trangbi_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkTD_PIR" :disabled="true">
                                        <span class="name">TĐ PIR</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :disabled="true" :options="DmTocDoPIR" v-model="tocdopir_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkTD_ISP" :disabled="true">
                                        <span class="name text-main">TĐ ISP</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :disabled="true" :options="DmTocDoISP" v-model="tocdoisp_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">Loại node</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmLoaiNode" v-model="loainode_id" :disabled="true"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Địa chỉ KN
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtDiaChiKN" :disabled="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Loại thiết bị
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmLoaiTBi" v-model="loaitbi_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">Lắp kèm</div>
                                <div class="value">
                                    <input type="text" class="form-control highlight" v-model="ThongTinHC.txtLapKem" :disabled="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Hướng KN
                                </div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click.prevent="popupDSHuongKN" :disabled="!ThongTinHC.HuongKNStatus">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" class="form-control" v-model="ThongTinHC.txtHuongKN" :disabled="true">
                                    </div>

                                </div>
                                <div class="value w32">
                                    <button class="btn btn-second h31">
                                        <span class="one-search"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Chủ quản
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmChuQuan" v-model="chuquan_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkDoiTac" :disabled="true">
                                        <span class="name text-main">Đối tác</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :disabled="true" :options="DmDoiTac" v-model="doitac_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Nội dung TH
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtNoiDungTH" style="color: #800000">
                                </div>
                                <div class="value w32">
                                    <button class="btn btn-second h31" @click.prevent="btnNoiDungTH">
                                        <span class="nc-icon-glyph ui-1_edit-76"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Số lượng IP
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtSoLuongIP">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Site ID
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtSiteID" :disabled="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Ghi chú
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtGhiChu" :disabled="true">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title">Danh sách nhân viên thực hiện</div>
                    <div class="table-content" style="height: 76px">
                        <table class="table-result table-gachle">
                            <div>
                                <DataGrid v-bind:columns="DsNhanVienTH.headers" v-bind:dataSource="DsNhanVienTH.data"
                                    :enable-paging-server="false" :allowPaging="true" :showFilter="false">
                                </DataGrid>
                            </div>
                        </table>
                    </div>

                    <div class="legend-title">Dịch vụ đăng ký</div>
                    <div class="table-content" style="height: 76px">
                        <table class="table-result table-gachle">
                            <div>
                                <DataGrid v-bind:columns="DsDichVuDK.headers" v-bind:dataSource="DsDichVuDK.data"
                                    :enable-paging-server="false" :allowPaging="true" :showFilter="false">
                                </DataGrid>
                            </div>
                        </table>
                    </div>

                </div>
                <div class="col-sm-5 col-12">
                    <div class="title" style="margin-bottom: 15px;">Thông tin PE (router biên VTN)</div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Router</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmRouter" v-model="router_id"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Slot</div>
                                <div class="value">
                                    <input type="text" class="form-control bold" v-model="ThongTinHC.txtSlotPE">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Port PE</div>

                                <div class="value">
                                    <input type="text" class="form-control bold" v-model="ThongTinHC.txtPortPE">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Trạm T.Bị</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtTramTB">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Chọn port</div>
                                <div class="value">
                                    <div class="list-checks">
                                        <div class="item">
                                            <button class="btn btn-second" :disabled="!ChonPortTDongStatus" @click.prevent="btnChonPort_TuDong_Click" ref="btnChonPort_TuDong">
                                                <span class="one-check f20 text-warning"></span>
                                            </button>
                                            T.động
                                        </div>
                                        <div class="item">
                                            <ChonPort ref="ref-chon-port" @select="onSelectPort"></ChonPort>
                                            <button class="btn btn-second" :disabled="!ChonPortStatus" @click.prevent="chonPortNcong" ref="btnChonPort">
                                                <span class="one-check f20"></span>
                                            </button>
                                            N.công
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">{{ThongTinHC.lblDsLam}}</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn btn-main h31" data-toggle="dropdown" aria-expanded="false" v-on:click="DsLam_OnClick()">
                                            <span class="fa fa-angle-down"></span>
                                        </button>
                                        <div class="dropdown-menu padt0" style="width: 750px;">
                                            <DataGrid v-bind:columns="DsLam.headers" v-bind:dataSource="DsLam.data"
                                                :showColumnCheckbox="false" :enable-paging-server="false" :allowPaging="true" dataKeyField=""
                                                :showFilter="true" ref="gridDsHopDongTB" >
                                            </DataGrid>                                  
                                        </div>
                                        <input type="text" class="form-control highlight" :disabled="ThongTinHC.DsLamStatus" v-model="ThongTinHC.txtDsLam" id="txtDsLam">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Adsl port</div>
                                <div class="value">
                                    <input type="text" class="form-control" :disabled="true" v-model="ThongTinHC.txtADSLport" id="txtAdsl_Port">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Port MDF</div>
                                <div class="value">
                                    <input type="text" class="form-control" :disabled="true" v-model="ThongTinHC.txtPortMDF">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">NasportID</div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control" :disabled="true" v-model="ThongTinHC.txtNasportID" id="txtNasportID">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Ip Dslam</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtIPADSL" :disabled="true" style="color: #800000">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">SvLan <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" :disabled="ThongTinHC.SvLanStatus" v-model="ThongTinHC.txtSvLan" id="txtSvLan">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Wan IP <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" v-model="ThongTinHC.txtWanIP" id="txtWAN_IP">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">CvLan <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" :disabled="ThongTinHC.CvLanStatus" v-model="ThongTinHC.txtCvLan" id="txtCvLan">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Lan IP <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" :disabled="ThongTinHC.LanIPStatus" v-model="ThongTinHC.txtLanIP" id="txtLAN_IP">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Vrf/vfi <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" v-model="ThongTinHC.txtVRF">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Link <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" v-model="ThongTinHC.txtLink">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Route <span class="red">(*)</span></div>
                                <div class="value">
                                    <input style="color: #800000" type="text" class="form-control highlight" v-model="ThongTinHC.txtRoute">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên T.Bị</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmThietBi" v-model="thietbi_id" :disabled="ThongTinHC.DmThietBiStatus"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Serial</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtSerial">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div :style="!visible.palThongTinCapCu ? 'display: none' : ''">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Loại cáp</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="DmLoaiCap" v-model="loaicap_id" :disabled="true"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Liên tủ</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtLienTu">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Cáp gốc</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtCapGoc" id="txtCapGoc">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Cáp ngọn</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtCapNgon" id="txtCapNgon">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Hộp cáp ngọn</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtHopCapNgon"> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Tủ cáp gốc</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtTuCapGoc" id="txtTuCapGoc">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Tủ cáp ngọn</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtTuCapNgon">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Tuyến cáp</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtTuyenCap">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Đôi cáp gốc</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtDoiCapGoc" id="txtDoiCapGoc">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Đôi cáp ngọn</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtDoiCapNgon" id="txtDoiCapNgon">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w100">Cự ly</div>
                                <div class="value">
                                    <input type="text" class="form-control tright" v-model="ThongTinHC.txtCuLy" id="txtSoMetDay">
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    <div class="box-form" :style="visible.palThongSoKyThuat ? 'margin-top: 7px !important' : 'display: none'">                     
                        <div id="wbrTSKT" style="height: 100px; overflow: scroll;"></div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-12">
                            <div class="info-row">
                                <div class="key w90">ND giao</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtNDgiao">
                                </div>
                            </div>
                        </div>    
                    </div>                     
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Lý do trả</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtLyDoTra">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Nội dung trả</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="ThongTinHC.txtThongTinTra">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            </b-collapse>

        </div>

        <div class="box-form">
            <div class="legend-title">
                <div class="pull-left">
                    Danh sách thuê bao
                </div>
                <div class="pull-right">
                    <div class="list-checks red normal bold">
                        <div class="item">
                            <div class="check-action">
                                <input type="radio" class="check"  value="0" v-model="rdLoaiPhieu">
                                <span class="name">Phiếu mới</span>
                            </div>
                        </div>
                        <div class="item">
                            <div class="check-action">
                                <input type="radio" class="check" value="1" v-model="rdLoaiPhieu">
                                <span class="name">Phiếu trả lại</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="table-content">
                    <div>
                        <DataGrid v-bind:columns="DsThueBao.headers" v-bind:dataSource="DsThueBao.data" :enable-paging-server="false"
                            :allowPaging="true" :showFilter="true"  @rowSelected="gridDSTBSelected" panelDataHeight="250"
                            :showColumnCheckbox="false" :selectionSettings="{ checkboxMode: 'ResetOnRowClick' }"
                            ref="DsThueBao" :enabledSelectFirstRow="false" @actionComplete="gview_DsThueBao_actionComplete" >
                        </DataGrid>
                    </div>
            </div>

        </div>
    </div>
    <b-modal id="popupComponentsMegawan" size="xl"
        hide-footer
        hide-header
        hide-header-close
        body-class="modal-body p-0">
        <component :is="popupComponent" ref="generalPopup" :dulieu="popupComponentData" v-bind="popupComponentAttr" isPopup="true" v-on="popupComponentEvts"></component> <!--v-dynamic-events="popupComponentEvents"-->
    </b-modal>

    <b-modal v-model="showModalTraphieu" modal-class="traphieu" header-class="popup-header"
        content-class="traphieu-content" body-class="none-padding traphieu-body" size="xl" title="Trả phiếu" hide-footer>
        <TraPhieu ref="popupTraPhieu" @update_success="traphieu_success" :ma_gd="ThongTinKH.txtMaTB" 
        :ma_tb="ThongTinKH.txtMaTB" :kieu="3" :loaihd_id="loaihd_id" :dichvuvt_id="DsThueBao.dichvuvt_id"></TraPhieu>
    </b-modal>

    <b-modal id="PopUpHuongKN" size="xl" hide-footer body-class="modal-body p-0" :no-close-on-backdrop="true">
        <div slot="modal-title" class="popup-header">
            <div class="title">Chọn hướng kết nối</div>
        </div>

        <div class="modal-content popup-box">

            <div class="list-actions-top">
                <ul class="list">
                    <li>
                        <a  @click.prevent="btnTimKiem">
                            <span class="icon one-search"></span>Tìm kiếm
                        </a>
                    </li>
                    <li>
                        <a  @click.prevent="btnChapNhan">
                            <span class="icon nc-icon-glyph ui-1_check-circle-08"></span>Chấp nhận
                        </a>
                    </li>

                </ul>
            </div>
            <div class="popup-body">
                <div class="box-form">
                    <div class="legend-title">
                        Thông tin tìm kiếm
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key">Tra cứu theo</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="listbox.tracuutheo.list"
                                            v-model="listbox.tracuutheo.value.id">
                                            <option disabled value="0">Select one</option>
                                        </select2>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Thông tin tra cứu</div>
                                <div class="value">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check">
                                        <span class="name">Dịch vụ</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="listbox.dichvu.list" v-model="listbox.dichvu.value.id">
                                            <option disabled value="0">Select one</option>
                                        </select2>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check">
                                        <span class="name">Đơn vị</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 :options="listbox.donvi.list" v-model="listbox.donvi.value.id">
                                            <option disabled value="0">Select one</option>
                                        </select2>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-2 col-12">
                            <div class="list-checks-v">
                                <div class="item marb10 mart7">
                                    <div class="check-action">
                                        <input type="radio" class="check">
                                        <span class="name">Hợp đồng</span>
                                    </div>
                                </div>
                                <div class="item marb10 mart7">
                                    <div class="check-action">
                                        <input type="radio" class="check">
                                        <span class="name">Danh bạ</span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="box-form">
                    <div class="legend-title">Danh sách khách hàng</div>
                    <div class="table-content">
                        <table class="table-result table-gachle table-filter" id="table">
                            <div>
                                <DataGrid v-bind:columns="[                                    
                              {fieldName: 'dvgt', headerText: 'STT', allowFiltering: true},  
                              {fieldName: 'tendv', headerText: 'Mã KH', allowFiltering: true},
                              {fieldName: 'kieuyc', headerText: 'Mã HĐ/PL', allowFiltering: true , allowHtml : true},  
                              {fieldName: 'noidung', headerText: 'Tên khách hàng', allowFiltering: true , allowHtml : true},
                              {fieldName: 'noidung', headerText: 'Địa chỉ khách hàng', allowFiltering: true , allowHtml : true},                                        
                              ]" v-bind:dataSource="listbox.ds_khachhang.list" :enable-paging-server="false"
                                    :allowPaging="true" :showFilter="true" @selectedRowChanged="gridDSKHChanged">
                                </DataGrid>
                            </div>
                        </table>
                    </div>

                </div>
                <div class="box-form">
                    <div class="legend-title">
                        <div class="pull-left">
                            Danh sách hướng kết nối
                        </div>
                        <div class="pull-right">
                            <div class="info-row">
                                <div class="key w30 nowrap red">Tỉnh kết nối</div>
                                <div class="select-custom">
                                    <select2 :options="listbox.tinhketnoi.list" v-model="listbox.tinhketnoi.value.id">
                                        <option disabled value="0">Select one</option>
                                    </select2>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="table-content">
                        <table class="table-result table-gachle">
                            <div>
                                <DataGrid v-bind:columns="[                                    
                              {fieldName: 'dvgt', headerText: 'VRF/VFI', allowFiltering: true},  
                              {fieldName: 'tendv', headerText: 'Mã thuê bao', allowFiltering: true},
                              {fieldName: 'kieuyc', headerText: 'Tên thuê bao', allowFiltering: true , allowHtml : true},  
                              {fieldName: 'noidung', headerText: 'Địa chỉ lắp đặt', allowFiltering: true , allowHtml : true},
                              {fieldName: 'noidung', headerText: 'Loại hình', allowFiltering: true , allowHtml : true},  
                              {fieldName: 'noidung', headerText: 'Tốc độ', allowFiltering: true , allowHtml : true},                                        
                              {fieldName: 'noidung', headerText: 'Số ảo', allowFiltering: true , allowHtml : true},                                        
                              {fieldName: 'noidung', headerText: 'Trạng thái', allowFiltering: true , allowHtml : true},                                        
                              ]" v-bind:dataSource="listbox.ds_huongketnoi.list" :enable-paging-server="false"
                                    :allowPaging="true" :showFilter="true" @selectedRowChanged="gridDSHuongKNChanged">
                                </DataGrid>
                            </div>
                        </table>
                    </div>

                </div>

            </div>
        </div>

    </b-modal>



    <b-modal id="PopUpKetNoiSoChinhSoFu" size="xl" hide-footer body-class="modal-body p-0" :no-close-on-backdrop="true">
        <div slot="modal-title" class="popup-header">
            <div class="title">Chi tiết kết nối số chính, số phụ</div>
        </div>
        <div class="modal-content popup-box">

            <div class="list-actions-top">
                <ul class="list">
                    <li>
                        <a >
                            <span class="icon one-search"></span>Lấy DS (F5)
                        </a>
                    </li>

                </ul>
            </div>
            <div class="popup-body">
                <div class="box-form">
                    <div class="legend-title">
                        Thông tin tìm kiếm
                    </div>
                    <div class="info-row">
                        <div class="key w50">Mã KH</div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" class="form-control ">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="box-form">
                            <div class="legend-title">Danh sách số chính</div>
                            <div class="table-content">
                                <table class="table-result table-gachle">
                                    <div>
                                        <DataGrid v-bind:columns="[                                    
                                  {fieldName: 'dvgt', headerText: 'Account', allowFiltering: true},  
                                  {fieldName: 'tendv', headerText: 'Số ảo', allowFiltering: true},
                                  {fieldName: 'kieuyc', headerText: 'Tốc độ', allowFiltering: true , allowHtml : true},  
                                  {fieldName: 'noidung', headerText: 'Địa chỉ LĐ', allowFiltering: true , allowHtml : true},
                                  ]" v-bind:dataSource="listbox.ds_sochinh.list" :enable-paging-server="false"
                                            :allowPaging="true" :showFilter="true"
                                            @selectedRowChanged="gridDSSoChinhChanged">
                                        </DataGrid>
                                    </div>
                                </table>
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="box-form">
                            <div class="legend-title">Danh sách số phụ</div>
                            <div class="table-content">
                                <table class="table-result table-gachle">
                                    <div>
                                        <DataGrid v-bind:columns="[                                    
                                  {fieldName: 'dvgt', headerText: 'Account', allowFiltering: true},  
                                  {fieldName: 'tendv', headerText: 'Số ảo', allowFiltering: true},
                                  {fieldName: 'kieuyc', headerText: 'Tốc độ', allowFiltering: true , allowHtml : true},  
                                  {fieldName: 'noidung', headerText: 'Địa chỉ LĐ', allowFiltering: true , allowHtml : true},
                                  ]" v-bind:dataSource="listbox.ds_sofu.list" :enable-paging-server="false"
                                            :allowPaging="true" :showFilter="true"
                                            @selectedRowChanged="gridDSSoFuChanged">
                                        </DataGrid>
                                    </div>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="box-form">
                            <div class="legend-title">Thông tin số chính</div>
                            <div class="title marb7">Thông tin PE (router biên VTN)</div>
                            <div class="row">
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w70">Router</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select2 :options="listbox.router_sochinh.list"
                                                    v-model="listbox.router_sochinh.value.id">
                                                    <option disabled value="0">Select one</option>
                                                </select2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">{{ThongTinHC.lblDsLam}}</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Tên Tbị</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Vrf</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Link</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Lan_IP</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Loại cáp</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select2 :options="listbox.loaicap_sochinh.list"
                                                    v-model="listbox.loaicap_sochinh.value.id">
                                                    <option disabled value="0">Select one</option>
                                                </select2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">T.cáp gốc</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Đ.cáp gốc</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Cáp gốc</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-8 col-12">
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Slot PE</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Port PE</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">Trạm Tbị</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">SvLan</div>
                                                <div class="value">
                                                    <input type="text" class="form-control" >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">CvLan</div>
                                                <div class="value">
                                                    <input type="text" class="form-control" >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Port</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Route</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">Serial</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">Wan_ip</div>
                                        <div class="value">
                                            <input type="text" class="form-control"> 
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">H.cáp ngọn</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">T.cáp ngọn</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Tuyến cáp</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">D.cáp ngọn</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Liên tủ</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Cáp ngọn</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Cự ly</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="box-form">
                            <div class="legend-title">Thông tin số phụ</div>
                            <div class="title marb7">Thông tin PE (router biên VTN)</div>
                            <div class="row">
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w70">Router</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select2 :options="listbox.router_sofu.list"
                                                    v-model="listbox.router_sofu.value.id">
                                                    <option disabled value="0">Select one</option>
                                                </select2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Dslam</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Tên Tbị</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Vrf/vfi</div>
                                        <div class="value">
                                            <input type="text" class="form-control" >
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Link</div>
                                        <div class="value">
                                            <input type="text" class="form-control" >
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Lan_IP</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Loại cáp</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select2 :options="listbox.loaicap_sofu.list"
                                                    v-model="listbox.loaicap_sofu.value.id">
                                                    <option disabled value="0">Select one</option>
                                                </select2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">T.cáp gốc</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Đ.cáp gốc</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w70">Cáp gốc</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-8 col-12">
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Slot PE</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Port PE</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">Trạm Tbị</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">SvLan</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">CvLan</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Port</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Route</div>
                                                <div class="value">
                                                    <input type="text" class="form-control" >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">Serial</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">Wan_ip</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="info-row">
                                        <div class="key w80">H.cáp ngọn</div>
                                        <div class="value">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">T.cáp ngọn</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Tuyến cáp</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">D.cáp ngọn</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Liên tủ</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Cáp ngọn</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-12">
                                            <div class="info-row">
                                                <div class="key w80">Cự ly</div>
                                                <div class="value">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </b-modal>  

    <CTKetNoi ref="ppCTKetNoi" :vma_tb="ThongTinKH.txtMaTB" :vhuong_kn="ThongTinKH.txtMaTB" :vhdtb_id="DsThueBao.hdtb_id" />
    <CTKetNoi_VFI ref="ppCTKetNoi_VFI" />
    <daunoithuebao ref="daunoithuebao"/>

    <ejs-dialog :enableResize='true' :visible="false" ref="popupfrnGiaoPhieuNV" :header='"Giao phiếu nhân viên"'
        showCloseIcon=true target=".main-wrapper" width='60%' height="800">
        <frnGiaoPhieuNV ref="frnGiaoPhieuNV" @giaoviec_success="giaoviec_success" />
    </ejs-dialog>

    <GiaoPhieu_PH ref="ppGiaoPhieu_PH" :vquytrinh_id="Number(quytrinh_id)" :vhdtb_id_cur="DsThueBao.hdtb_id" :vphieu_id_cur="DsThueBao.phieu_id" />

    <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false'
              ref="popupUploadHoSo" :header='"Upload hồ sơ"' showCloseIcon=true width='80%' height='90%' target='.main-wrapper'>
        <UploadEProfileContent :Tag="'1'" :ma_thue_bao="ThongTinKH.txtMaTB" ref="ppUpload" />
    </ejs-dialog>

    <XemBaoCao ref="XemBaoCao1" ma_bc="INPHIEU_TC_MGWAN" :ds-gia-tri="dsGiaTri"></XemBaoCao>
    <XemBaoCao ref="XemBaoCao2" ma_bc="INPHIEU_TC_DC_MGWAN" :ds-gia-tri="dsGiaTri"></XemBaoCao>

    <!-- <ejs-dialog :enableResize='true' :allowDragging='true' :visible='false' :cssClass="'popupGiaoPhieu'" :position="{X: 'center', Y: 'top'}"
              ref="popupGiaoPhieu" :header='"Giao phiếu điều hành thi công"' showCloseIcon=true width='80%' height='90%' target='.main-wrapper'>
        <GiaoPhieu ref="ppGiaoPhieu" :isPopup="true" @giaophieu_success="giaophieu_success" />
    </ejs-dialog> -->
    <ejs-dialog
      :isModal="true"
      :enableResize="true"
      :resizeHandles="['All']"
      :visible="false"
      ref="GiaoPhieuView"
      :header='"Giao phiếu điều hành thi công"'
      showCloseIcon="true"
      target=".main-wrapper"
      width="90%"
      allowDragging="true"
      :animationSettings="animationSettings"
      @close="GiaoPhieuView_OnClose"
    >
      <div>
        <GiaoPhieuView v-if="giaoPhieuViewDialog.isVisiable" type="modal"  v-bind="giaoPhieuViewDialog.input" @onGiaoPhieuSuccessListener="giaophieu_success" />
      </div>
    </ejs-dialog>
</div>