<div class="main-wrapper">
    <breadcrumb :title_in="'[LẬP HỢP ĐỒNG]: CHUYỂN QUYỀN'" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a ref="tsbtnNhapMoi" @click="tsbtnNhapMoi_Click">
                    <span class="icon one-file-plus"></span> Nhập mới
                </a>
            </li>
            <li>
                <a ref="tsbtnGhiLai" @click="tsbtnGhiLai_Click">
                    <span class="icon  one-save"></span> Ghi lại
                </a>
            </li>

            <li>
                <a ref="tsbtnHuyBo" @click="tsbtnHuyBo_Click">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Hủy
                </a>
            </li>
            <li>
                <a ref="tsbtnGiaoPhieu" style="display: none;" @click="tsbtnGiaoPhieu_Click">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Giao phiếu
                </a>
            </li>
            <li>
                <a ref="tsbtnXoa" @click="tsbtnXoa_Click">
                    <span class="icon one-trash"></span>Xóa HĐ
                </a>
            </li>
            <li>
                <a ref="tsbtnThanhToan" @click="tsbtnThanhToan_Click">
                    <span class="icon nc-icon-glyph shopping_credit-card"></span>Thanh toán
                </a>
            </li>
            <li>
                <a ref="tsddbIn" @click="tsddbIn_Click">
                    <span class="icon nc-icon-glyph files_single-content-02"></span>Hồ sơ
                </a>
            </li>
            <li>
                <a ref="tsbtnThemTB" @click="tsbtnThemTB_Click">
                    <span class="icon one-mobile-plus"></span>Thêm TB
                </a>
            </li>
            <li>
                <a ref="tsbtnXoaTB" @click="tsbtnXoaTB_Click">
                    <span class="icon one-phone-remove"></span>Xóa TB
                </a>
            </li>
            <li>
                <a ref="tsbtnThemTB_DS" @click="tsbtnThemTB_DS_Click">
                    <span class="icon one-clipart-plus"></span>Thêm DS
                </a>
            </li>
            <li>
                <a ref="tsbtnXoaTB_DS" @click="tsbtnXoaTB_DS_Click">
                    <span class="icon one-clipart-plus"></span>Xóa DS
                </a>
            </li>
            <li>
                <a ref="tsbtnThemTT" class="disabled" @click="tsbtnThemTT_Click">
                    <span class="icon one-mobile-plus"></span>Thêm TT
                </a>
            </li>
            <li>
                <a ref="tsbtnXoaTT" class="disabled" @click="tsbtnXoaTT_Click">
                    <span class="dropdown-icon one-phone-remove"></span> Xóa TT
                </a>
            </li>
        </ul>
        <div class="more dropdown">
            <a ref="" data-toggle="dropdown">
                <span class="icon -ap  icon-dots-three-vertical"></span>
            </a>
            <ul class="dropdown-menu">
                <li>
                    <a ref="tsbtnThongTinLH" @click="tsbtnThongTinLH_Click">
                        <span class="dropdown-icon nc-icon-glyph business_contacts"></span> Liên hệ
                    </a>
                </li>
                <li>
                    <a ref="tsbtnEmail" @click="tsbtnEmail_Click">
                        <span class="dropdown-icon nc-icon-glyph ui-1_email-83"></span> Email
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="row">
                <div class="col-sm-1 col-12"></div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w110">
                            <div>
                                <span class="name">Mã dự án</span>
                            </div>
                        </div>
                        <div class="value">
                            <input ref="txtMaDuAn" type="text" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w110">
                            <div class="check-action">
                                <input ref="chkCTV" @change="chkCTV_CheckedChanged" type="checkbox" class="check">
                                <span class="name">Cộng tác viên</span>
                            </div>
                        </div>
                        <div class="value">
                            <input ref="txtCTV" type="text" disabled class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w130">
                            <div class="check-action">
                                <input ref="chkNguoiGT" @change="chkNguoiGT_CheckedChanged" type="checkbox" class="check">
                                <span class="name">Người giới thiệu</span>
                            </div>
                        </div>
                        <div class="value">
                            <input ref="txtNguoiGT" disabled type="text" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row marb0">
                        <div class="key w80">
                            Tổng tiền
                        </div>
                        <div class="value">
                            <input type="text" ref="txtTongTienHD" class="form-control text fw6 tright" value="0">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nav tabs tab-over">
            <a href="#tabTBCQ" data-toggle="tab" class="active">Thuê bao chuyển quyền</a>
            <a href="#tabKHNQ" data-toggle="tab">Khách hàng nhận quyền</a>
        </div>
        <div class="tab-content box-form">
            <div class="tab-pane active" id="tabTBCQ">
                <div class="legend-title">
                    <span class="icon fa fa-angle-up"></span>
                    Thông tin phiếu yêu cầu
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="title-bg-main">
                            <span class="title">Thông tin phiếu yêu cầu</span>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã giao dịch</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button ref="btnLayMaGD" @click="btnLayMaGD_Click" class="btn">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <ejs-dialog :enableResize='true' :visible="false" ref="popupFrmTraCuuHopDong"
                                            :header='"Tra cứu hợp đồng, phụ lục"' showCloseIcon=true width="80%"
                                            :target="'#app .main-wrapper'" height="800">
                                            <SearchContractModal ref="searchContractModal"
                                                :donviId="Number($root.token.getDonViID())"
                                                :nhanvienId="Number($root.token.getNhanVienID())"
                                                :loaihd_id="modalSearch.loaihd_id"
                                                :ngay_yc="modalSearch.ngay_yc"
                                                :kieu="1"
                                                :tthd_id="modalSearch.tthd_id" @accept="acceptSearchContract" />
                                            </ejs-dialog>
                                            <input type="text" ref="txtMaGD" @keyup.enter="txtMaGD_KeyPress" class="form-control highlight">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngày yêu cầu</div>
                                    <div class="value">
                                        <VueDateExt ref="dtpNgayYC" :disable="true" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã HĐ cũ</div>
                                    <div class="value">
                                        <input ref="txtMaHDCu" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngày lập HĐ</div>
                                    <div class="value">
                                        <VueDateExt ref="dtpNgayLapHDNQ" :disable="true" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Dịch vụ</div>
                                    <div class="value">
                                        <Select2Ext @change="cboDichVuVT_SelectedValueChanged" ref="cboDichVuVT" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w100">Loại hình</div>
                                    <div class="value">
                                        <Select2Ext ref="cboLoaihinhTB" :disable="true" @change="cboLoaihinhTB_SelectedValueChanged" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Kiểu yêu cầu</div>
                            <div class="value">
                                <Select2Ext ref="cboKieuLD" @change="cboKieuLD_SelectedValueChanged" />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="title-bg-main">
                            <span class="title">Thông tin cũ</span>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã KH cũ</div>
                                    <div class="value">
                                        <input ref="txtMaKHCu" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w110">Mức cước TB cũ</div>
                                    <div class="value">
                                        <Select2Ext ref="cboMuccuocTBCu" :disable="true" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Tên TB cũ</div>
                            <div class="value">
                                <input type="text" ref="txtTenTBCu" class="form-control">
                                <input type="text" ref="txtMaTBCu" style="display:none" class="form-control">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Tên KH cũ</div>
                            <div class="value">
                                <input type="text" ref="txtTenKHCu" class="form-control">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ KH cũ</div>
                            <div class="value">
                                <input ref="txtDiaChiKHCu" readonly type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="legend-title">
                    <span class="icon fa fa-angle-up"></span>
                    Thông tin thuê bao mới
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Số máy/Acc (*)</div>
                                    <div class="value">
                                        <input ref="txtMaTB" @keyup.enter="txtMaTB_KeyPress" type="text" class="form-control highlight">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngày SD</div>
                                    <div class="value">
                                        <VueDateExt ref="dtpNgaySD" :disable="true" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Tên thuê bao</div>
                                    <div class="value">
                                        <input ref="txtTenTB" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngày sinh (*)</div>
                                    <div class="value">
                                        <VueDateExt ref="txtNgaySinhTB"  :nullable="true" format="DD/MM/YYYY" type="Date" value="" />
                                        <!-- <input class="form-control" ref="txtNgaySinhTB" value="__/__/____" /> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ TB</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button ref="btnDiaChiTB" @click="btnDiaChiTB_Click" class="btn">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input ref="txtDiaChiTB" readonly type="text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ LĐ</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" ref="btnDiachiLD" disabled @click="DiachiLD_Click">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input ref="txtDiachiLD" readonly type="text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">ĐV thuê bao</div>
                                    <div class="value">
                                        <Select2Ext ref="cboDaiVT" :disable="true" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w100">Thanh toán</div>
                                    <div class="value">
                                        <Select2Ext ref="cboTT" @change="cboTT_SelectedValueChanged"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Đối tượng</div>
                            <div class="value">
                                <Select2Ext ref="cboDoituongTB" :disable="true" />
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Mức cước TB</div>
                            <div class="value">
                                <Select2Ext ref="cboMucCuocTB" />
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Ghi chú</div>
                            <div class="value">
                                <input type="text" ref="txtGhiChuTB" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div ref="palThongSoKyThuat" style="display: none;border: 1px solid blue; padding: 10px; margin: 10px;height: 250px;overflow-y: scroll;">
                            <div ref="wbrTSKT" class="thongso"></div>
                        </div>
                        <div ref="pnlTSL" style="display: none;">
                            <div class="info-row">
                                <div class="key w100">Mã HĐ - TTKĐ</div>
                                <div class="value">
                                    <input class="form-control" ref="txtMaHD_TTKD_TSL" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Tốc độ kênh</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTocDoKenhTSL" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Loại kênh</div>
                                        <div class="value">
                                            <Select2Ext ref="cboLoaiKenhTSL" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Thời hạn</div>
                                        <div class="value">
                                            <Select2Ext ref="cboThoiHan" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Trang bị</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTrangBi" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Chủ quản</div>
                                        <div class="value">
                                            <Select2Ext ref="cboChuQuan" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Loại thiết bị</div>
                                        <div class="value">
                                            <Select2Ext ref="cboLoaiTBTSL" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Địa chỉ đầu</div>
                                <div class="value">
                                    <input class="form-control" ref="txtDiaChiDau" readonly />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Địa chỉ cuối</div>
                                <div class="value">
                                    <input class="form-control" ref="txtDiaChiCuoi" readonly />
                                </div>
                            </div>
                        </div>
                        <div ref="pnlInt"></div>
                        <div ref="pnlDD">
                            <div class="info-row">
                                <div class="key w100">Gói cước DĐ</div>
                                <div class="value">
                                    <Select2Ext ref="cboGoiCuocDD" :disable="true" />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">ĐT Vinaphone</div>
                                <div class="value">
                                    <Select2Ext ref="cboDTVinaPhone" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Simcard</div>
                                        <div class="value">
                                            <input ref="txtSimCard" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Trang bị</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTrangBiDD" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ref="pnlAdsl" style="display: none">
                            <div class="info-row">
                                <div class="key w100">Tốc độ</div>
                                <div class="value">
                                    <Select2Ext ref="cboGoiCuocAdsl" :disable="true" />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Mức cước</div>
                                <div class="value">
                                    <Select2Ext ref="cboMucCuoc" :disable="true" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Mã truy nhập</div>
                                        <div class="value">
                                            <input class="form-control" ref="txtMaTB_TN" />
                                            <input class="form-control" style="display: none;" ref="txtEmailAdsl" />

                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Trang bị</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTrangBiADSL" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ref="pnlWan" style="display: none;">
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Mã HĐ - TTKĐ</div>
                                        <div class="value">
                                            <input class="form-control" ref="txtMaHD_TTKD_MGW" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Site ID</div>
                                        <div class="value">
                                            <input class="form-control" ref="txtSiteID" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Thời hạn</div>
                                        <div class="value">
                                            <Select2Ext ref="cboThoihanWan" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Trang bị</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTrangBiWan" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Loại kênh</div>
                                        <div class="value">
                                            <Select2Ext ref="cboLoaiKenhWan" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Loại thiết bị</div>
                                        <div class="value">
                                            <Select2Ext ref="cboLoaiTBiWan" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Tốc độ CIR</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTocDo" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Tốc độ PIR</div>
                                        <div class="value">
                                            <Select2Ext ref="cboTocDo_PIR" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-8 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Chủ quản</div>
                                        <div class="value">
                                            <Select2Ext ref="cboChuQuanWan" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Modem</div>
                                        <div class="value">
                                            <Select2Ext ref="cboLoaiModem" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ref="pnlGphone" style="display: none">
                            <div class="row">
                                <div class="col-sm-11 col-12">
                                    <div class="info-row">
                                        <div class="key w100">Số sim</div>
                                        <div class="value">
                                            <input ref="txtSosimGP" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-1 col-12">
                                    <div class="info-row">
                                        <div class="key w100">VSVX</div>
                                        <div class="value">
                                            <input type="checkbox" ref="cboTrangBiGP" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Trang bị</div>
                                <div class="value">
                                    <Select2Ext ref="cboTrangBiGP" />
                                </div>
                            </div>
                        </div>
                        <div ref="pnlIMS">
                            <div class="info-row">
                                <div class="key w100">Trang bị</div>
                                <div class="value">
                                    <Select2Ext ref="cboTrangBiIMS" />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Loại thiết bị</div>
                                <div class="value">
                                    <Select2Ext ref="cboThietBi" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="legend-title">
                    <span class="icon fa fa-angle-up"></span>
                    Dịch vụ cộng thêm
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="title-bg-main">
                            <span class="title">Dịch vụ cộng thêm</span>
                        </div>
                        <div class="input-more-button">
                            <button disabled class="btn">
                                <span class="-ap icon-more_horiz"></span>
                            </button>
                            <textarea readonly ref="lvDvkhac_TT" class="form-control" style="height: 110px;resize: vertical;"></textarea>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="title-bg-main">
                            <span class="title">Dịch vụ khác</span>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <textarea readonly ref="lvDvkhac" class="form-control" style="height: 110px;resize: vertical;"></textarea>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w70">Tổng tiền</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnTienCQ_Click" ref="btnTienCQ">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input readonly ref="txtTongTien" type="text" class="form-control tright red">
                                        </div>
                                    </div>
                                </div>
                                <div class="info-row">
                                    <div class="key w70">Tổng VAT</div>
                                    <div class="value">
                                        <input readonly type="text" ref="txtTongVat" class="form-control tright red">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="legend-title">
                    Danh sách hợp đồng thuê bao
                </div>
                <div class="title-bg-main">
                    <span class="title">Danh sách hợp đồng thuê bao</span>
                    <div class="pull-right red" >
                        <div>Tiền thuê bao (có VAT): <span ref="lblTongTien"></span></div>
                    </div>
                </div>
                <div class="table-content">
                        <DataGridCustom :columns="columns" ref="lvwThueBao" @rowSelected="lvwThueBao_SelectedIndexChanged" />
                </div>
            </div>
            <div class="tab-pane " id="tabKHNQ">
                <div class="legend-title">
                    <span class="icon fa fa-angle-up"></span>
                    Thông tin phiếu yêu cầu
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Mã KH (*)</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" ref="bntLayMaKh" @click="bntLayMaKh_Click">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input @keyup.enter="txtMaKH_KeyPress" ref="txtMaKH" type="text" class="form-control highlight">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90"></div>
                                    <div class="value">
                                        <button ref="btnTTKhac" @click="btnTTKhac_Click" class="btn btn-second fullw">Thông tin khác</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Mã hợp đồng (*)</div>
                                    <div class="value">
                                        <input ref="txtMaHD" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Ngày lập HĐ</div>
                                    <div class="value">
                                        <VueDateExt ref="dtpNgayLapHDCQ" :disable="true" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w120">Tên khách hàng (*)</div>
                            <div class="value">
                                <input ref="txtTenKH" @keyup.enter="txtTenKH_Leave" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w120">Địa chỉ KH (*)</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button @click="btnDiaChiKH_Click" class="btn">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input @keyup.enter="txtDiaChiKH_KeyPress" readonly ref="txtDiaChiKH" type="text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Loại giấy tờ (*)</div>
                                    <div class="value">
                                        <Select2Ext ref="cboGiayToKH" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Số giấy tờ (*)</div>
                                    <div class="value">
                                        <input ref="txtSoGT" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Ngày cấp GT (*)</div>
                                    <div class="value">
                                        <VueDateExt ref="txtNgayCap" :nullable="true" format="DD/MM/YYYY" type="Date" value="" />
                                        <!-- <input type="text" class="form-control" value="__/__/____" ref="txtNgayCap"> -->
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Nơi cấp</div>
                                    <div class="value">
                                        <input ref="txtNoiCap" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Ngày hết hạn</div>
                                    <div class="value">
                                        <VueDateExt ref="txtNgayHetHan" :nullable="true" format="DD/MM/YYYY" type="Date" value="" />
                                        <!-- <input type="text" class="form-control" value="__/__/____" ref="txtNgayHetHan"> -->
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Ngày sinh (*)</div>
                                    <div class="value">
                                        <VueDateExt ref="txtNgaySN" @change="txtNgaySN_Leave" :nullable="true" format="DD/MM/YYYY" type="Date" value="" />
                                        <!-- <input type="text" class="form-control" value="__/__/____" ref="txtNgaySN"> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Giới tính</div>
                                    <div class="value">
                                        <div class="list-checks mart5">
                                            <div class="item">
                                                <div class="check-action">
                                                    <input checked name="gioitinh" ref="rdoGTNone" type="radio" class="check">
                                                    <span class="name">Không</span>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="check-action">
                                                    <input name="gioitinh" ref="rdoGTNam" type="radio" class="check">
                                                    <span class="name">Nam</span>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="check-action">
                                                    <input name="gioitinh" ref="rdoGTNu" type="radio" class="check">
                                                    <span class="name">Nữ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Quốc tịch</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <Select2Ext ref="cboQuocTich" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Ngành nghề</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" ref="btnNganhNghe" @click="btnNganhNghe_Click">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <div class="select-custom">
                                                <Select2Ext ref="cboNganhNgheLoc" @change="cboNganhNgheLoc_EditValueChanged" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Dân tộc</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <Select2Ext ref="cboDanToc" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Loại KH</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <div class="select-custom">
                                                <ComboboxGridCustom
                                                @change="cboLoaiKH2_EditValueChanged"
                                                :columns="[{
                                                        fieldName: 'ma_loaikh',
                                                        headerText: 'Mã loại KH',
                                                        allowFiltering: true,
                                                        allowSorting: false,
                                                        width: 'auto',
                                                        textAlign: 'left',
                                                    },
                                                    {
                                                        fieldName: 'ten_loaikh',
                                                        headerText: 'Tên loại KH',
                                                        allowFiltering: true,
                                                        allowSorting: false,
                                                        width: 'auto',
                                                        textAlign: 'left'
                                                    },
                                                    {
                                                        fieldName: 'group_lon',
                                                        headerText: 'Group lớn',
                                                        allowFiltering: true,
                                                        allowSorting: false,
                                                        width: 'auto',
                                                        textAlign: 'left',
                                                        isGroupedColumn: true,
                                                        },
                                                        {
                                                            fieldName: 'group_nho',
                                                            headerText: 'Group nhỏ',
                                                            allowFiltering: true,
                                                            allowSorting: false,
                                                            width: 'auto',
                                                            textAlign: 'left',
                                                            isGroupedColumn: true,
                                                            },
                                                ]" ref="cboLoaiKH" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w70" style="display: none" ref="lblPhanLoaiKH">PL KH</div>
                                    <div class="key w70" ref="lblKHL">KH lớn</div>
                                    <div class="value">
                                        <input ref="txtPhanLoaiKH" style="display: none" type="text" class="form-control">
                                        <input ref="txtGhiChuTT" style="display: none" type="text" class="form-control">
                                        <div ref="cboKhachHangLon_div"><Select2Ext ref="cboKhachHangLon" /></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Người đại diện</div>
                                    <div class="value">
                                        <input ref="txtNguoiDD" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w70">Chức vụ</div>
                                    <div class="value">
                                        <input ref="txtChucDanhDD" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ NĐD</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" @click="btnDiaChiNDD_Click" ref="btnDiaChiNDD">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input ref="txtDiaChiNDD" readonly type="text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Điện thoại (*)</div>
                                    <div class="value">
                                        <input ref="txtTelKH" type="number" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w70">Fax</div>
                                    <div class="value">
                                        <input ref="txtFaxKH" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Hộ khẩu</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button ref="btnDCHoKhau" @click="btnDCHoKhau_Click" class="btn">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input ref="txtHoKhau" type="text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Nơi cấp HK</div>
                                    <div class="value">
                                        <input ref="txtNoiCapHK" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w70">Ngày cấp</div>
                                    <div class="value">
                                        <VueDateExt ref="txtNgayCapHK" :nullable="true" format="DD/MM/YYYY" type="Date" value="" />
                                        <!-- <input type="text" class="form-control" value="__/__/____" ref="txtNgayCapHK"> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã số thuế</div>
                                    <div class="value">
                                        <input ref="txtMaSTKH" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w70">Tài khoản</div>
                                    <div class="value">
                                        <input ref="txtSTK_TT" type="text" class="form-control">
                                        <input ref="txtMaTBDD" type="text" style="display: none" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">
                                <div class="check-action">
                                    <input ref="chkNganHangKH" type="checkbox" class="check">
                                    <span class="name">Ngân hàng</span>
                                </div>
                            </div>
                            <div class="value">
                                <div class="select-custom">
                                    <Select2Ext ref="cboNganHangKH" :disable="true" />
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Đặc trưng</div>
                            <div class="value">
                                <input ref="txtDacTrung" type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="legend-title">
                    <span class="icon fa fa-angle-up"></span>
                    Thông tin thanh toán
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Mã TT(*)</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button ref="btnLayMaTT" @click="btnLayMaTT_Click" class="btn">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input ref="txtMaTT" @keyup.enter="txtMaTT_KeyPress" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Mã đại diện</div>
                                    <div class="value">
                                        <Select2Ext ref="cboMaDD" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w120">Tên thanh toán(*)</div>
                            <div class="value">
                                <input type="text" ref="txtTenTT" class="form-control">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w120">Địa chỉ TT(*)</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" ref="btnDiaChiTT" @click="btnDiaChiTT_Click">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" readonly ref="txtDiaChiTT" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w120">Địa chỉ CT</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button @click="btnDiaChiCT_Click" class="btn">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" ref="txtDiaChiCT" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w120">Địa chỉ BC</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" @click="btnDiaChiBC_Click">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" readonly ref="txtDiaChiBC" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w120">Email</div>
                                    <div class="value">
                                        <input type="text" ref="txtEmail" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Điện thoại (*)</div>
                                    <div class="value">
                                        <input type="number" ref="tbDienThoaiLienHe" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w110">Mã in ghép</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button ref="btnTaoMIG" @click="btnTaoMIG_Click" class="btn">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input ref="txtMaIG" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Đơn vị QL</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <Select2Ext ref="cboDonviQL" :disable="true" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w110">Hình thức TT (*)</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <Select2Ext ref="cboHTTT" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Mã NVTC (*)</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button ref="btnTraCuuNVTC" @click="btnTraCuuNVTC_click" class="btn">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <PopupTimKiemNhanVienThuCuoc :input="objNVTC"  @response-data="getNVTCProcess($event)" id="dlgTimKiemNVTC"></PopupTimKiemNhanVienThuCuoc>
                                            <div class="row">
                                                <div class="col-sm-6 col-12">
                                                    <input ref="txtMaNVTC" type="text" class="form-control ">
                                                </div>
                                                <div class="col-sm-6 col-12">
                                                    <input ref="txtMaTuyen" type="text" class="form-control ">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w110">Tài khoản</div>
                                    <div class="value">
                                        <input ref="txtSoTKKH" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Chủ TK</div>
                                    <div class="value">
                                        <input ref="txtChu_TK" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w110">Ngân hàng</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button @click="btnNSNN_Click" ref="btnNSNN" class="btn">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <div class="select-custom">
                                                <Select2Ext ref="cboNganHangTT" :disable="true" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Mã số thuế</div>
                                    <div class="value">
                                        <input ref="txtMST_TT" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w110">Ghi chú</div>
                                    <div class="value">
                                        <input ref="txtGhiChuKH" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-12 tright">
                                <div class="info-row">
                                    <div class="key w90">Mã NVQL</div>
                                    <div class="value">
                                        <input ref="txtNhanVienQL" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="legend-title">Danh sách hợp đồng</div>
                <div class="row">
                    <div class="col-sm-9 col-12">
                        <div class="title-bg-main">
                            <span class="title">Danh sách hợp đồng thanh toán</span>
                        </div>
                        <DataGridCustom
                        @rowSelected="lvwThanhToan_SelectedIndexChanged"
                        ref="lvwThanhToan"
                        :columns="[
                            {
                            fieldName: 'stt',
                            headerText: 'STT',
                            allowFiltering: true,
                            allowSorting: true,
                            width: 'auto',
                          },
                          {
                            fieldName: 'ma_tt',
                            headerText: 'Mã TT',
                            allowFiltering: true,
                            allowSorting: true,
                            width: 'auto',
                          },
                          {
                            fieldName: 'ten_tt',
                            headerText: 'Tên thanh toán',
                            allowFiltering: true,
                            allowSorting: true,
                            width: 'auto',
                          },
                          {
                            fieldName: 'diachi_tt',
                            headerText: 'Địa chỉ thanh toán',
                            allowFiltering: true,
                            allowSorting: true,
                            width: 'auto',
                          },
                          {
                            fieldName: 'diachi_ct',
                            headerText: 'Địa chỉ chứng từ',
                            allowFiltering: true,
                            allowSorting: true,
                            width: 'auto',
                          }
                        ]" />
                    </div>
                    <div class="col-sm-3 col-12">
                        <div class="title-bg-main">
                            <span class="title">Dịch vụ khác</span>
                        </div>
                        <div ref="lvDvgt" class="form-control" style="height: 300px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <frmCT_Tien_KM ref="frmCT_Tien_KM" @closeDialog="btnTien_Close" />
    <frmDSTBCungMa ref="frmDSTBCungMa" @chonTBCungma="chonTBCungma" />
    <popupChiTietMLNS ref="popupChiTietMLNS" @hideDialog="acceptNganhang" :nganhang_input="objNganhang"/>
    <ModalChonDiaChi :clearAfterClose="false" modalId="diaChiModal" :isStrictMode="false" :data="dataDiaChi" @xacnhan="onAcceptDiaChi" />
    <frmTC_DBTB_KH @chapnhan="setDBTB" ref="frmTC_DBTB_KH" />
    <b-modal id="popupComponents" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0"> <component :is="popupComponent" ref="generalPopup" :dulieu="popupComponentData" v-bind="popupComponentAttr" isPopup="true" v-on="popupComponentEvts"></component></b-modal>
    <b-modal ref="frmThanhToanHD" id="frmThanhToanHD" size="xl" title="" hide-footer
        body-class="p-0 thanhtoan-modal">
        <frmThanhToanHD :magiaodich="ma_gd" @paymentSuccess="paymentSuccess" />
    </b-modal>
    <b-modal ref="ThongTinEmail" id="ThongTinEmail" size="xl" title="Thôn tin Email" hide-footer
        body-class="p-0 thanhtoan-modal">
        <ThongTinEmail :hdkh_id="hdkh_id" :khachhang_id="khachhang_id" />
    </b-modal>
    <b-modal ref="ThongTinLienHe" id="ThongTinLienHe" size="xl" title="Thôn tin liên hệ" hide-footer
        body-class="p-0 thanhtoan-modal">
        <ThongTinLienHe :hdkh_id="hdkh_id" :khachhang_id="khachhang_id" />
    </b-modal>
    <ChonDonVi ref="popupChonDonVi" id="popupChonDonVi"></ChonDonVi>
    <InHoSo ref="popupInHoSo" :params="popupInHoSo_Param"/>
    <ejs-dialog :enableResize='true'  :visible='false' ref='thanhtoanDialog' :position='position'
    :header='"THANH TOÁN HỢP ĐỒNG"' showCloseIcon='true' :target='targetTop' width='100%' :open="open_thanhToanPopUp">
    <!-- <thanhToan ref='thanhToanPopUp'  @paymentSuccess="paymentSuccess"/> -->
        <keep-alive>
        <div class="popupComponentPayment">
            <component :is="userComponentModule"  ref='thanhToanPopUp' :ispopup="true" :magiaodich='txtMaGDTT'  v-bind="popupComponentAttr" v-on="popupComponentEvts" />
        </div>
        </keep-alive>
  </ejs-dialog>
</div>
