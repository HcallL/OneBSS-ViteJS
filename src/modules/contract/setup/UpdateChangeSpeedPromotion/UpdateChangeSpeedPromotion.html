<div class="main-wrapper">
    <div class="breadcrumb-top">
        <div class="main-title">Sửa khuyến mại thay đổi tốc độ Internet</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item"><a href="#">Cập nhật KQTC</a></li>
            <li class="breadcrumb-item"><a href="#">Thay đổi, khóa mở, thanh lý</a></li>
            <li class="breadcrumb-item">Sửa khuyến mại thay đổi tốc độ Internet</li>
        </ul>
    </div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a @click.prevent="tsbtnSuaKM_Click">
                    <span class="icon nc-icon-glyph ui-1_edit-76"></span>Sửa KM
                </a>
            </li>
            <li>
                <a @click.prevent="btnOpenfrmDangKyGoiDaDVLM" :class="{ disabled: !listTT_Phieu_YC.magiaodich }">
                    <span class="icon one-file-edit"></span>Gói đa DV
                </a>
            </li>
            <li>
                <a @click.prevent="clickInPL">
                    <span class="icon one-print"></span>In PL
                </a>
            </li>
            <!-- <li>
                <a @click="openPopup">
                    <span class="icon one-print"></span>test
                </a>
            </li> -->
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form padt8 padb8 fw6">
            <div class="row">
                <div class="col-sm-2 col-12">

                </div>
                <div class="col-sm-2 col-12">

                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">Mã dự án</div>
                        <div class="value">
                            <input type="text" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap fw6">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="filterbox.ctv.ischecked"
                                    @change="ShowPopupCTV()">
                                <span class="name">Cộng tác viên</span>
                            </div>
                        </div>
                        <div class="value" :class="{disabled:!filterbox.ctv.ischecked}">
                            <input type="text" class="form-control" v-model="filterbox.ctv.value" :readonly="true">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap fw6">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="filterbox.nguoigt.ischecked"
                                    @change="ShowPopupNguoiGT()">
                                <span class="name">Người giới thiệu</span>
                            </div>
                        </div>
                        <div class="value" :class="{disabled:!filterbox.nguoigt.ischecked}">
                            <input type="text" class="form-control" v-model="filterbox.nguoigt.value" :readonly="true">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            Tổng tiền
                        </div>
                        <div class="value">
                            <vue-numeric class="form-control tright" separator="," v-model="params.tongtienhd"
                                placeholder="0" output-type="Number"></vue-numeric>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Thông tin phiếu yêu cầu</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w120">Mã giao dịch</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click.prevent="showPopupSearchContract">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <SearchContractModal ref="popupSearchContract" @accept="acceptSearchContract"
                                            :loai_hd_id="1" :dichvu_id="parseInt(listTT_Phieu_YC.dichvuvt)"
                                            :ngay_yc="listTT_Phieu_YC.ngayyeucau?listTT_Phieu_YC.ngayyeucau.toString():''"
                                            :trangthai_hd="1" />
                                        <input type="text" class="form-control highlight"
                                            v-model="listTT_Phieu_YC.magiaodich" @keypress.enter="MaGDChanged">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <!-- <div class="key">Ngày yêu cầu</div> -->
                                <div class="value" :disabled="params.disable">
                                    <div class="input-icon-right">
                                        <vue-date labelWidth="100" v-model="listTT_Phieu_YC.ngayyeucau" type="date" format="DD/MM/YYYY" label="Ngày yêu cầu"
                                            class="col-sm-12 col-12"></vue-date>
                                        <!-- <ejs-datepicker v-model="listTT_Phieu_YC.ngayyeucau" :value="params.p_today"
                                            :format="'dd/MM/yyyy'" :showClearButton="false"
                                            :placeholder="'Chọn ngày'" :disabled="params.disable">
                                        </ejs-datepicker> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w120">Mã HĐ/PL</div>
                                <div class="value">
                                    <input type="text" class="form-control fw6 text" v-model="listTT_Phieu_YC.maHDPL">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <!-- <div class="key">Ngày lập HĐ</div> -->
                                <div class="value" :disabled="params.disable">
                                    <div class="input-icon-right">
                                        <vue-date labelWidth="100" v-model="listTT_Phieu_YC.ngayLapHD" type="date" format="DD/MM/YYYY" label="Ngày lập HĐ"
                                            class="col-sm-12 col-12"></vue-date>
                                        <!-- <ejs-datepicker v-model="listTT_Phieu_YC.ngayLapHD"
                                            :disabled="params.disable" :placeholder="'Chọn ngày'">
                                        </ejs-datepicker> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w120">Dịch vụ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 class="select-custom" v-model="listTT_Phieu_YC.dichvuvt"
                                            :options="listTT_Phieu_YC.dichvuvt_options"
                                            @select="onDichVuChange($event)"></select2>
                                        <!--  <b-form-select v-model="listTT_Phieu_YC.dichvuvt" v-on:change="onDichVuChange"
                                        class="form-control" :options="listTT_Phieu_YC.dichvuvt_options" value-field="id"
                                        text-field="text">
                                        </b-form-select> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key">Loại hình</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 class="select-custom" v-model="listTT_Phieu_YC.loaihinh"
                                            :options="listTT_Phieu_YC.loaihinh_options"
                                            @select="onLoaiHinhChange($event)"></select2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Kiểu yêu cầu</div>
                        <div class="value">
                            <div class="select-custom">
                                <select2 class="select-custom" v-model="listTT_Phieu_YC.kieuyc" :disabled="true"
                                    :options="listTT_Phieu_YC.kieuyc_options" @select="onKieuYCChange"></select2>
                            </div>
                        </div>
                        <div class="value w30 nowrap padt7">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-on:click="checkTucThi()"
                                    v-model="params.chk_tucthi" :disabled="!isChkTucThi">
                                <span class="name">Tức thì</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-12">
                <div class="box-form" style="min-height: 595px;">
                    <div class="legend-title">Thông tin thuê bao</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w120">Account</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click.prevent="ShowSearchAccount">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" v-model.trim="list_TTThueBao.mathuebao" autofocus
                                            ref="list_TTThueBao.mathuebao" class="form-control highlight"
                                            @keyup.enter="txtMaTB_KeyPress">
                                    </div>
                                </div>
                                <div class="value w30">
                                    <button class="btn btn-second" @click.prevent="ShowDSThueBao">
                                        <span class="-ap icon-plus2"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key">Loại thiết bị</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 class="select-custom" v-model="list_TTThueBao.loaitbi"
                                            :options="list_TTThueBao.loaitbi_options"></select2>
                                        <!--   <b-form-select v-model="list_TTThueBao.loaitbi" v-on:change=""
                                        class="form-control" :options="list_TTThueBao.loaitbi_options" value-field="id"
                                        text-field="text">
                                        </b-form-select> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Tên thuê bao</div>
                        <div class="value">
                            <input type="text" class="form-control fw6 text" v-model="list_TTThueBao.tenthuebao">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w120">Tốc độ mới</div>
                                <div class="value">
                                    <select2 class="select-custom" v-model="list_TTThueBao.tocdomoi"
                                        :options="list_TTThueBao.tocdomoi_options" @select="onTocDoMoiChange($event)">
                                    </select2>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Tốc độ thực mới</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 class="select-custom" v-model="list_TTThueBao.tocdothucmoi"
                                            :options="list_TTThueBao.tocdothucmoi_options" @select="" :disabled="true">
                                        </select2>
                                    </div>
                                </div>
                            </div>
                            <div v-if="isCongNgheMoi === true">
                                <div class="info-row">
                                    <div class="key w120">Công nghệ mới</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt v-model="list_TTThueBao.congnghemoi"
                                                :options="list_TTThueBao.congnghemoi_options"
                                                @select="onMucCuocMoiChange($event)" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-else>
                                <div class="info-row">
                                    <div class="key w120">Mức cước mới</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <select2 v-model="list_TTThueBao.muccuocmoi"
                                                :options="list_TTThueBao.muccuocmoi_options"
                                                @select="onMucCuocMoiChange($event)" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key">Tốc độ cũ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.tocdocu"
                                            :options="list_TTThueBao.tocdocu_options" @select=""
                                            :disabled="params.disable" />
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Số tháng CK</div>
                                <div class="value">
                                    <input type="text" v-model="list_TTThueBao.sothangCK" class="form-control fw6 text">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Mức cước cũ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.muccuoccu"
                                            :options="list_TTThueBao.muccuoccu_options" @select=""
                                            :disabled="params.disable" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Loại IP</div>
                        <div class="value">
                            <div class="select-custom">
                                <select2 v-model="list_TTThueBao.loaiip" :options="list_TTThueBao.loaiip_options"
                                    @select="" placeholder="Chọn IP"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w120">Tháng trả</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select2 v-model="list_TTThueBao.thangtra"
                                                    :options="list_TTThueBao.thangtra_options" @select="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w60">Ngày trả</div>
                                        <div class="value">
                                            <div class="input-icon-right">
                                                <ejs-datepicker v-model="list_TTThueBao.ngaytra" :value="params.p_today"
                                                    :format="'dd/MM/y HH:mm'" :showClearButton="false"
                                                    :placeholder="'Chọn ngày'" :disabled="params.disable">
                                                </ejs-datepicker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Tiền trả trước</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator=","
                                        v-model="list_TTThueBao.tientratruoc" placeholder="0" output-type="Number">
                                    </vue-numeric>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Đối tượng mới</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.doituongmoi"
                                            :options="list_TTThueBao.doituongmoi_options"
                                            @select="onDoiTuongMoiChange($event)" />
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Mức cước TB mới</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.muccuoctbmoi"
                                            :options="list_TTThueBao.muccuoctbmoi_options" @select="" />
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Khuyến mại</div>
                                <div class="value w20 padt7">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkKhuyenMai">
                                        <span class="name"></span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" :disabled="!chkKhuyenMai"
                                            @click.prevent="ShowPopupChonKhuyenMai(0)">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <div class="select-custom">
                                            <!-- <select2 class="select-custom" v-model="list_TTThueBao.khuyenmai"
                                                :disabled="!chkKhuyenMai"
                                                :options="list_TTThueBao.khuyenmai_options.map(km=>({id:km.khuyenmai_id,text:km.ten_km}))">
                                            </select2> -->
                                            <select2 class="select-custom" v-model="list_TTThueBao.khuyenmai" :disabled="!chkKhuyenMai"
                                                :options="list_TTThueBao.khuyenmai_options">
                                            </select2>
                                        </div>
                                    </div>

                                </div>
                                <div class="value w30 nowrap">
                                    <button class="btn btn-second" @click="btnChiTietKM_Click" :disabled="!isKhuyenMai">
                                        <span class="one-eye f16 inline vcenter"></span> Chi tiết
                                    </button>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w120">Trả trước</div>
                                <div class="value w20 padt7">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkTraTruoc">
                                        <span class="name"></span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" :disabled="!chkTraTruoc"
                                            @click.prevent="ShowPopupChonKhuyenMai(1)">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <div class="select-custom">
                                            <select2 class="select-custom" v-model="list_TTThueBao.tratruoc"
                                                :disabled="!chkTraTruoc"
                                                :options="list_TTThueBao.tratruoc_options">
                                            </select2>
                                            <!--   <b-form-select v-model="list_TTThueBao.tratruoc"  :disabled="!isTraTruoc"
                                            class="form-control" :options="list_TTThueBao.tratruoc_options.map(km=>({id:km.khuyenmai_id,text:km.ten_km}))" value-field="id"
                                            text-field="text">
                                            </b-form-select> -->
                                        </div>
                                    </div>

                                </div>
                                <div class="value w30 nowrap">
                                    <button class="btn btn-second" :disabled="!isTraTruoc"
                                        @click.prevent="btnChiTietTraTruoc_Click">
                                        <span class="one-eye f16 inline vcenter"></span> Chi tiết
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key">Cước sử dụng</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator=","
                                        v-model="list_TTThueBao.cuocsd" placeholder="0" output-type="Number">
                                    </vue-numeric>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Cước thiết bị</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator=","
                                        v-model="list_TTThueBao.cuocthietbi" placeholder="0" output-type="Number">
                                    </vue-numeric>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Đối tượng cũ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.doituongcu"
                                            :options="list_TTThueBao.doituongcu_options" @select=""
                                            :disabled="params.disable" />
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Mức cước TB cũ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.muccuoctbcu"
                                            :options="list_TTThueBao.muccuoctbcu_options" @select=""
                                            :disabled="params.disable" />
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Trang bị mới</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.trangbimoi"
                                            :options="list_TTThueBao.trangbimoi_options"
                                            @select="onTrangBiMoiChange($event)" :disabled="!chkKhuyenMai"/>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key">Trang bị cũ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select2 v-model="list_TTThueBao.trangbicu" :disabled="!chkTraTruoc"
                                            :options="list_TTThueBao.trangbicu_options" @select="" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-12">
                <div class="box-form">
                    <div class="legend-title">Thông tin khách hàng</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w120">Mã khách hàng</div>
                                <div class="value">
                                    <input type="text" class="form-control fw6 text"
                                        v-model="list_TTKhachHang.makhachhang">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="value">
                                    <div class="input-icon-right">
                                        <vue-date labelWidth="100" v-model="list_TTKhachHang.ngaysinh" type="date" format="DD/MM/YYYY"
                                            label="Ngày sinh" class="col-sm-12 col-12"></vue-date>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Tên khách hàng</div>
                        <div class="value">
                            <input type="text" class="form-control fw6 text" v-model="list_TTKhachHang.tenkhachhang">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Địa chỉ KH</div>
                        <div class="value">
                            <input type="text" class="form-control fw6 text" v-model="list_TTKhachHang.diachikhachhang">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">Thông tin TC</div>
                        <div class="value">
                            <div class="input-more-button">
                                
                                <button class="btn" @click="clickThongTinTC"><!-- :disabled="!isThongTinTC "-->
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" class="form-control " v-model="list_TTKhachHang.thongtintc">
                            </div>

                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-on:click="checkTTTCVisa()"
                                    v-model="params.chk_tttcvisa" :disabled="true">
                                    <!-- :disabled="!params.isChktttcvisa"> -->
                                <span class="name">TTTC Visa</span>
                            </div>
                        </div>
                        <div class="value">
                            <textarea v-model="list_TTKhachHang.txtTTTCVisa" class="form-control"
                                style="height: 100px;resize: none;" :disabled="true"></textarea>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w120">
                            Ghi chú
                        </div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="list_TTKhachHang.txtGhiChu">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w120">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="chkThoiHan" :disabled="true">
                                        <span class="name">Thời hạn</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" :disabled="!isThoiHan"
                                        v-model="list_TTKhachHang.sothang">
                                </div>
                                <div class="value w30 nowrap padt7">
                                    (tháng)
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w60">
                                    Từ ngày
                                </div>
                                <div class="value">
                                    <div class="value">
                                        <div class="input-icon-right">
                                            <flat-pickr class="form-control" :config="dateconfig"
                                                v-model="list_TTKhachHang.tungay" :disabled="!isThoiHan" />
                                            <span class="icon one-calendar"></span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w60">
                                    Đến ngày
                                </div>
                                <div class="value">
                                    <div class="value">
                                        <div class="input-icon-right">
                                            <flat-pickr class="form-control" :config="dateconfig"
                                                v-model="list_TTKhachHang.denngay" :disabled="!isThoiHan" />
                                            <span class="icon one-calendar"></span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-form">
                    <div class="legend-title">
                        Chi tiết tiền theo khoản mục
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">

                                <div class="key w120">Tổng tiền</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click.prevent="popupTienKM">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <vue-numeric class="form-control tright red fw6 disabled" separator=","
                                            v-model="list_ChiTietTien.tien" placeholder="0" output-type="Number">
                                        </vue-numeric>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">

                                <div class="key w50">
                                    VAT
                                </div>
                                <div class="value disabled">
                                    <vue-numeric class="form-control tright red fw6" separator=","
                                        v-model="list_ChiTietTien.tienvat" placeholder="0" output-type="Number">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="info-row">
                        <div class="key">
                            Tổng tiền
                        </div>
                        <div class="value disabled">
                            <vue-numeric class="form-control tright red fw6" separator="," 
                            :value="list_ChiTietTien.tien + list_ChiTietTien.tienvat" 
                            placeholder="0" output-type="Number"></vue-numeric>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">
                <div class="pull-left">Danh sách thuê bao</div>
                <div class="pull-right red weight">Tiền thuê bao (có VAT): {{params.tongtienhd}}</div>
                <div class="clearfix"></div>
            </div>
            <div class="table-content">
                <table class="table-result table-gachle">
                    <DataGrid v-bind:columns="[
                            {fieldName: 'STT', headerText: 'Stt', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'ma_tb', headerText: 'Số máy/Acc', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'ten_tb', headerText: 'Tên thuê bao', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'diachi_ld', headerText: 'Địa chỉ lắp đặt', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'td_cu', headerText: 'Tốc độ cũ', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'td_moi', headerText: 'Tốc độ mới', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'muccuoc_cu', headerText: 'Mức cước cũ', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'muccuoc_moi', headerText: 'Mức cước mới', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'kieutra_cu', headerText: 'Kiểu trả cũ', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                            {fieldName: 'kieutra_moi', headerText: 'Kiểu trả mới', allowFiltering: true, allowSorting: false, textAlign: 'left'},
                        ]" v-bind:dataSource="ds_Thuebao_table" :showFilter="true" @selectedRowChanged="onDSTBChange"
                        :showColumnCheckbox="false" @selectedItemsChanged="" dataKeyField=""
                        :defaultColumnCheckboxChecked="false" :allowPaging="true" :enablePagingServer="false">
                    </DataGrid>
                </table>
            </div>
        </div>
    </div>
    <!-- <div class="popup-header">
        <div class="title">
            <span class="icon one-notepad"></span> Chọn khuyến mại
        </div>
        <div class="close -ap icon-close" data-dismiss="modal"></div>
    </div> -->

    <b-modal id="popupComponents" size="xl" hide-footer body-class="modal-body p-0" :title="title">
            <component :is="popupComponent" isPopup="true" @form-close="popupClosed" ref="popupComponent"
                :dulieu="popupComponentData" @acceptChangeCTV="popupClosed" @acceptChangeNGT="popupClosed"
                @PopUpCongTacVien_Thoat="ClosePopup('popupComponents')"
                @PopUpNguoiGioiThieu_Thoat="ClosePopup('popupComponents')"></component>
    </b-modal>
    <!-- <ejs-dialog :enableResize='true' :allowDragging='true' :visible="false" ref="thongtinemail" :header='"Thông tin Email"'
                showCloseIcon=true   width='90%' height="600" target=".main-wrapper">
        <ThongTinEmail />
    </ejs-dialog> -->
    <popupTraCuuThueBao @chapnhan="setMaTB" ref="tracuuthuebao" />
    <!-- <ThongTinHenKhachHang  ref="popupThongTinHenKhachHang" :hdkh_id="list_TTKhachHang.hopdongkhid" /> -->
    <!-- <ejs-dialog :enableResize='true' :visible="false" ref="thongtinlienhe" :header='"Thông tin liên hệ"' :hdkh_id="hdkh_id" :khachhang_id="khachhang_id"
        showCloseIcon=true target=".main-wrapper" width='60%' height="800">
        <ThongTinLienHe />
    </ejs-dialog> -->

    <!--   <ejs-dialog :enableResize='true' :allowDragging='true' :visible="false" ref="tienhopdong" :header='"Tiền hợp đồng"'
    showCloseIcon=true  :position='position' width='100%' height="800" target=".main-wrapper">
    <Payment/>
    </ejs-dialog> -->


    <!--   <b-modal id="popupComponents" size="xl"
    hide-footer
    hide-header
    hide-header-close
    body-class="modal-body p-0">
        <component :is="popupComponent" ref="popupComponent" :dulieu="popupComponentData" isPopup="true" @form-close="popupClosed" @acceptChangeCTV="popupClosed" @acceptChangeNGT="popupClosed"></component> <!--v-dynamic-events="popupComponentEvents"
    </b-modal> -->
    <popupDieuChinh ref="popupDieuChinh" v-on:confirmPopup="getPicked" />
    <ModalInPhieu ref="popupInHopDong" :params="param" />
    <!-- TRA CỨU DANH BẠ -->
    <b-modal ref="popupSearchAccount" size="lg" hide-footer hide-header body-class="modal-body p-0">
        <SearchAccount :isPopup='true' :vma_tb="list_TTThueBao.mathuebao" :vdichvuvt_id="listTT_Phieu_YC.dichvuvt" @form-close="popupClosed" />
    </b-modal>

    <b-modal ref="popupKM" size="lg" hide-footer hide-header body-class="modal-body p-0">
        <popupKM :dulieu="popupComponentData" @form-close="popupClosed"/>
    </b-modal>

    <!-- Tiền khoản mục -->
    <b-modal ref="popupTienKM" size="lg" hide-footer hide-header hide-header-close body-class="modal-body p-0">
        <Popup_TienKM :dulieu="popupComponentData" @form-close="formCloseTienKM" />
    </b-modal>

    <!-- THÔNG TIN TRA CỨU CƯỚC -->
    <b-modal ref="popupThongTinTC" size="lg" hide-footer hide-header hide-header-close body-class="modal-body p-0">
        <popupThongTinTC :dulieu="popupComponentData" @form-close="formCloseThongTinTC" />
    </b-modal>

    <!-- GÓI ĐA DỊCH VỤ -->
        <frmDangKyGoiDaDVLM ref="frmDangKyGoiDaDVLM" />
    
    
</div>


<!-- <script>
    $(".select2js").select2();
</script> -->
<!-- <script type="application/javascript" src="../vendor/jquery/split.js"></script>
<script type="application/javascript"></script> -->