<div class="main-wrapper" id="khoiPhucThanhLy">
    <div class="breadcrumb-top">
        <div class="main-title">khôi phục thuê bao thanh lý</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item"><a href="#">Lập hợp đồng</a></li>
            <li class="breadcrumb-item active">Lắp đặt mới</li>
        </ul>
    </div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a @click="btnNhapMoiClick" title="Nhập mới" class="cursor-pointer" :class="tsbtnNhapMoi.Enabled ? '' : 'disabled'">
                    <span class="icon one-file-plus"></span>Nhập mới(F5)
                </a>
            </li>
            <li>
                <a @click="btnGhiLaiClick" title="Ghi lại" class="cursor-pointer" :class="tsbtnGhiLai.Enabled ? '' : 'disabled'">
                    <span class="icon one-save"></span>Ghi lại (F9)
                </a>
            </li>
            <li>
                <a @click="btnHuyBoClick" title="Huỷ" class="cursor-pointer" :class="tsbtnHuyBo.Enabled ? '' : 'disabled'">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Huỷ
                </a>
            </li>
            <li>
                <a @click="btnXoaHD_Click" title="Xoá HĐ" class="cursor-pointer" :class="tsbtnXoa.Enabled ? '' : 'disabled'">
                    <span class="icon one-trash"></span>Xoá HĐ (F8)
                </a>
            </li>
            <li>
                <a class="cursor-pointer"  title="Thanh toán":class="tsbtnThanhToan.Enabled ? '' : 'disabled'" @click.prevent='btnThanhToan_Click'>
                    <span class="icon nc-icon-glyph shopping_credit-card"></span>Thanh toán
                </a>
            </li>
            <li>
                <a @click="btnThemTB_Click"  title="Thêm TB" class="cursor-pointer" :class="tsbtnThemTB.Enabled ? '' : 'disabled'">
                    <span class="icon one-mobile-plus"></span>Thêm TB 
                </a>
            </li>
            <li>
                <a @click="btnXoaTB_Click" title="Xóa TB" class="cursor-pointer" :class="tsbtnXoaTB.Enabled ? '' : 'disabled'">
                    <span class="icon one-phone-remove"></span>Xóa TB
                </a>
            </li>
            <li>
                <a @click="btnGiaoPhieu_Click" title="Giao phiếu" class="cursor-pointer" :class="tsbtnGiaoPhieu.Enabled ? '' : 'disabled'">
                    <span class="icon one-file-arrow-right1"></span>Giao phiếu
                </a>
            </li>
            <li>
                <a class="cursor-pointer" title="Liên hệ" :class="tsbtnThongTinLH.Enabled ? '' : 'disabled'" @click.prevent="btnLienHe_Click">
                    <span class="icon nc-icon-glyph business_contacts"></span>Liên hệ
                </a>
            </li>
            <li>
                <a class="cursor-pointer" title="Email" :class="tsbtnEmail.Enabled ? '' : 'disabled'" @click.prevent="btnEmail_Click">
                    <span class="icon one-email"></span>Email
                </a>
            </li>
        </ul>
        
    </div>
    <div class="page-content">
        <div class="box-form padt8 padb8">
            <div class="row">
                <div class="col-sm-6 col-12"></div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkCTV.Checked" :disabled="!chkCTV.Enabled" @change="chkCTVChange">
                                <span class="name">Cộng tác viên</span>
                            </div>
                        </div>
                        <div class="value">
                            <input ref="txtCTV" type="text" class="form-control" v-model="txtCTV.Text">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkNguoiGT.Checked" :disabled="!chkNguoiGT.Enabled" @change="chkNguoiGTChange">
                                <span class="name">Người giới thiệu</span>
                            </div>
                        </div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtNguoiGT.Text">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            Tổng tiền
                        </div>
                        <div class="value">
                            <input type="text" class="form-control tright" v-model="txtTongTienHD.Text">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Thông tin phiếu yêu cầu</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã giao dịch</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click="btnMaGD_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtMaGD" v-model="txtMaGD.Text" @keydown="onTransactionCodeChange($event)" type="text" class="form-control ">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày yêu cầu</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <date-picker :disabled="true"  placeholder="dd/mm/yyyy" v-model="dtpNgayYeuCau.Value" :formatter="momentFormat"
                                    valueType="format"></date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã hợp đồng</div>
                                <div class="value">
                                    <input type="text" v-model="txtMaHD.Text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày lập HĐ</div>
                                <div class="value" disabled>
                                    <div class="input-icon-right">
                                        <date-picker :disabled="true" placeholder="dd/mm/yyyy" v-model="dtpNgayLapHD.Value" :formatter="momentFormat" 
                                    valueType="format"></date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <!-- <select3 label="Dịch vụ" :options="listTelecomService" v-model="cboDichVuVT.SelectedValue" valueField="dichvuvt_id"
                            labelField="ten_dvvt" labelWidth="90"/> -->
                                <div class="key w90">
                                    Dịch vụ
                                </div>
                                <div class="value">
                                <!-- <ejs-combobox 
                                :dataSource='cboDichVuVT.Items' 
                                :fields="{ text: 'ten_dvvt', value: 'dichvuvt_id' }" 
                                v-model="cboDichVuVT.SelectedValue" 
                                @change="cboDichVuVT_SelectedValueChanged"></ejs-combobox> -->
                                <SelectExt 
                                    v-model="cboDichVuVT.SelectedValue" 
                                    :allowFiltering="true" 
                                    dataTextField="ten_dvvt"
                                    dataValueField="dichvuvt_id" 
                                    :dataSource="cboDichVuVT.Items"
                                    @select = "cboDichVuVT_SelectedValueChanged"
                                >
                                </SelectExt>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="info-row">
                                    <!-- <select3 label="Loại hình" :options="listSubscriptionType" v-model="cboLoaihinhTB.SelectedValue" valueField="LOAITB_ID"
                                    labelField="LOAIHINH_TB" labelWidth="90" @input="onSubscriptionTypeChange"/> -->
                                    <div class="key w90">
                                        Loại hình
                                    </div>
                                    <div class="value" >
                                        <!-- <ejs-combobox 
                                            :dataSource='cboLoaihinhTB.Items' 
                                            :fields="{ text: 'LOAIHINH_TB', value: 'LOAITB_ID' }" 
                                            v-model="cboLoaihinhTB.SelectedValue" 
                                            @change="cboLoaihinhTB_SelectedValueChanged">
                                        </ejs-combobox> -->
                                        <SelectExt 
                                            class="disabled"
                                            v-model="cboLoaihinhTB.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="LOAIHINH_TB"
                                            dataValueField="LOAITB_ID" 
                                            :dataSource="cboLoaihinhTB.Items"
                                            @select = "cboLoaihinhTB_SelectedValueChanged"
                                        >
                                        </SelectExt>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <!-- <select3 ref="cboKieuLD" label="Kiểu yêu cầu" :options="listRequestType" v-model="cboKieuLD.SelectedValue" valueField="ID"
                            labelField="NAME" labelWidth="90"/> -->
                            <div class="key w90">
                                Kiểu yêu cầu
                            </div>
                            <div class="value">
                                <!-- <ejs-combobox 
                                    :dataSource='cboKieuLD.Items' 
                                    :fields="{ text: 'ten_kieuld', value: 'kieuld_id' }" 
                                    v-model="cboKieuLD.SelectedValue" 
                                    @change="cboKieuLD_SelectedValueChanged"
                                    @click="cboKieuLD_Click">
                                </ejs-combobox> -->
                                <!-- <SelectExt 
                                    v-model="cboKieuLD.SelectedValue" 
                                    :allowFiltering="true" 
                                    dataTextField="ten_kieuld"
                                    dataValueField="kieuld_id" 
                                    :dataSource="cboKieuLD.Items"
                                    @select = "cboKieuLD_SelectedValueChanged"  
                                    @close="cboKieuLD_Click()"                                  
                                >                                
                                </SelectExt> -->
                                <select2 
                                    v-model="cboKieuLD.SelectedValue" 
                                    class="select-custom" 
                                    :options="ckieu_ld"                                     
                                    @select="Kieuld_click=true" 
                                    @open="Kieuld_click=true" 
                                    @close="cboKieuLD_SelectedValueChanged();">
                                </select2>
                            </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày thanh lý</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <date-picker :disabled="true" placeholder="dd/mm/yyyy" v-model="dtpNgayTL.Value" :formatter="momentFormat"
                                    valueType="format"></date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                   
                </div>
            </div>
            <div class="legend-title mart20">Thông tin thuê bao</div>
            <div class="row">
                <div class="col-sm-6 col-12" id="boxLeft">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Số máy/Acc</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click="btnSearchAccountClick">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtMaTB" v-model="txtMaTB.Text" @keydown="onMaTBKeyPress($event)" type="text" class="form-control highlight">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã TN</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click="btnMaTN_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtMaTN_ADSL" type="text" v-model="txtMaTN_ADSL.Text" class="form-control highlight">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên thuê bao</div>
                                <div class="value">
                                    <input type="text" v-model="txtTenTB.Text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Khu vực</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button ref="btnMaNVKD" class="btn" @click="btnMaNVKD_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtKhuVuc" type="text" v-model="txtKhuVuc.Text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Địa chỉ TB</div>
                                <div class="value">
                                    <input type="text" v-model="txtDiaChiTB.Text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key">
                                    <div class="check-action">
                                        <input v-model="chkDungThu.Checked" type="checkbox" class="check" :disabled="!chkDungThu.Enabled">
                                        <span class="name">Dùng thử</span>
                                    </div>
                                </div>
                    
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Địa chỉ LĐ</div>
                                <div class="value">
                                    <input type="text" v-model="txtDiaChiLD.Text" class="form-control">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Ghi chú</div>
                                <div class="value">
                                    <input type="text" v-model="txtGhiChu.Text" class="form-control">
                                </div>
                            </div>
                        </div>
                    
                    </div>
                </div>
                <div class="col-sm-6 col-12" id="boxRight">
                    <div>
                        <!-- Panel co dinh -->
                        <div class="overlay-panel" :class="{ visible: ![4,7,8,10,11].includes(parseInt(cboDichVuVT.SelectedValue))}">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                        :dataSource='cboDaiVT_CD.Items' 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                        v-model="cboDaiVT_CD.SelectedValue" 
                                        @change="cboDaiVT_CD_SelectedValueChanged">
                                    </ejs-combobox> -->
                                    <SelectExt 
                                        class="disabled"
                                        v-model="cboDaiVT_CD.SelectedValue" 
                                        :allowFiltering="true" 
                                        dataTextField="ten_dv"
                                        dataValueField="donvi_id" 
                                        :dataSource="cboDaiVT_CD.Items"
                                        @select = "cboDaiVT_CD_SelectedValueChanged"
                                    >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                            :dataSource='cboTram_CD.Items' 
                                            :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                            v-model="cboTram_CD.SelectedValue">
                                        </ejs-combobox> -->
                                    <SelectExt 
                                        v-model="cboTram_CD.SelectedValue" 
                                        :allowFiltering="true" 
                                        dataTextField="ten_dv"
                                        dataValueField="donvi_id" 
                                        :dataSource="cboTram_CD.Items"                                        
                                    >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Mức cước TB</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                                :dataSource='cboMucCuocTB_CD.Items' 
                                                :fields="{ text: 'tenmuccuoc', value: 'mucuoctb_id' }" 
                                                v-model="cboMucCuocTB_CD.SelectedValue">
                                            </ejs-combobox> -->
                                    <SelectExt 
                                            v-model="cboMucCuocTB_CD.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="tenmuccuoc"
                                            dataValueField="mucuoctb_id" 
                                            :dataSource="cboMucCuocTB_CD.Items"      
                                                                              
                                        >
                                        </SelectExt>
                                </div>
                            </div>
                        </div>
                        <!-- Panel IMS -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 11 }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                        :dataSource='cboDaiVT_IMS.Items' 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                        v-model="cboDaiVT_IMS.SelectedValue" 
                                        @change="cboDaiVT_IMS_SelectedValueChanged">
                                    </ejs-combobox> -->
                                    <SelectExt 
                                            v-model="cboDaiVT_IMS.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="ten_dv"
                                            dataValueField="donvi_id" 
                                            :dataSource="cboDaiVT_IMS.Items"    
                                            @select = "cboDaiVT_IMS_SelectedValueChanged"  
                                            class="disabled"                                  
                                        >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                            :dataSource='cboTram_IMS.Items' 
                                            :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                            v-model="cboTram_IMS.SelectedValue">
                                        </ejs-combobox> -->
                                    <SelectExt 
                                        v-model="cboTram_IMS.SelectedValue" 
                                        :allowFiltering="true" 
                                        dataTextField="ten_dv"
                                        dataValueField="donvi_id" 
                                        :dataSource="cboTram_IMS.Items"                                                                           
                                    >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Mức cước TB</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                                :dataSource='cboMucCuocTB_IMS.Items' 
                                                :fields="{ text: 'tenmuccuoc', value: 'mucuoctb_id' }" 
                                                v-model="cboMucCuocTB_IMS.SelectedValue">
                                            </ejs-combobox> -->
                                    <SelectExt 
                                            v-model="cboMucCuocTB_IMS.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="tenmuccuoc"
                                            dataValueField="mucuoctb_id" 
                                            :dataSource="cboMucCuocTB_IMS.Items"                                                                           
                                        >
                                    </SelectExt>
                                </div>
                            </div>
                        </div>
                        <!-- Panel METRONET & MEGAWAN -->
                        <div class="overlay-panel" :class="{ visible: (cboDichVuVT.SelectedValue == 7 || cboDichVuVT.SelectedValue == 8) }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                        :dataSource='cboDVQL_MGW.Items' 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                        v-model="cboDVQL_MGW.SelectedValue" 
                                        @change="cboDVQL_MGW_SelectedValueChanged">
                                    </ejs-combobox> -->
                                    <SelectExt 
                                            v-model="cboDVQL_MGW.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="ten_dv"
                                            dataValueField="donvi_id" 
                                            :dataSource="cboDVQL_MGW.Items"    
                                            @select = "cboDVQL_MGW_SelectedValueChanged"     
                                            class="disabled"                                                                  
                                        >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                            :dataSource='cboTram_MGW.Items' 
                                            :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                            v-model="cboTram_MGW.SelectedValue">
                                        </ejs-combobox> -->
                                    <SelectExt 
                                        v-model="cboTram_MGW.SelectedValue" 
                                        :allowFiltering="true" 
                                        dataTextField="ten_dv"
                                        dataValueField="donvi_id" 
                                        :dataSource="cboTram_MGW.Items"                                                                             
                                    >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tốc độ</div>
                                        <div class="value">
                                            <!-- <ejs-combobox 
                                            :dataSource='cboTocDo_MGW.Items' 
                                            :fields="{ text: 'toc_do', value: 'tocdo_id' }" 
                                            v-model="cboTocDo_MGW.SelectedValue">
                                        </ejs-combobox> -->
                                            <SelectExt 
                                                v-model="cboTocDo_MGW.SelectedValue" 
                                                :allowFiltering="true" 
                                                dataTextField="toc_do"
                                                dataValueField="tocdo_id" 
                                                :dataSource="cboTocDo_MGW.Items"        
                                                class="disabled"                                
                                            >
                                            </SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số ảo</div>
                                        <div class="value">
                                            <input type="text" class="form-control highlight" v-model="txtSoAo_Wan.Text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Hướng KN</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtHuongKN.Text">
                                </div>
                            </div>
                        </div>
                        <!-- Panel GP -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 10 }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                        :dataSource='cboDVQLGP.Items' 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                        v-model="cboDVQLGP.SelectedValue">
                                    </ejs-combobox> -->
                                    <SelectExt 
                                            v-model="cboDVQLGP.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="ten_dv"
                                            dataValueField="donvi_id" 
                                            :dataSource="cboDVQLGP.Items"      
                                            class="disabled"                                                                     
                                        >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Số Sim</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtSoSimGphone.Text">
                                </div>
                            </div>
                        </div>
                        <!-- Panel ADSL -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 4 }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <!-- <ejs-combobox 
                                        :dataSource='cboDaiVT_ADSL.Items' 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                        v-model="cboDaiVT_ADSL.SelectedValue" 
                                        @change="cboDaiVT_ADSL_SelectedValueChanged">
                                    </ejs-combobox> -->
                                    <SelectExt 
                                            class="disabled"
                                            v-model="cboDaiVT_ADSL.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="ten_dv"
                                            dataValueField="donvi_id" 
                                            :dataSource="cboDaiVT_ADSL.Items"       
                                            @select = "cboDaiVT_ADSL_SelectedValueChanged"                                                                             
                                        >
                                    </SelectExt>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <!-- <ejs-combobox 
                                            :dataSource='cboVeTinh_Adsl.Items' 
                                            :fields="{ text: 'ten_dv', value: 'donvi_id' }" 
                                            v-model="cboVeTinh_Adsl.SelectedValue">
                                        </ejs-combobox> -->
                                        <SelectExt 
                                            v-model="cboVeTinh_Adsl.SelectedValue" 
                                            :allowFiltering="true" 
                                            dataTextField="ten_dv"
                                            dataValueField="donvi_id" 
                                            :dataSource="cboVeTinh_Adsl.Items"                                                                                                                           
                                        >
                                        </SelectExt>
                                    </div>
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tốc độ</div>
                                        <div class="value">
                                            <!-- <ejs-combobox 
                                            :dataSource='cboTocDo_Adsl.Items' 
                                            :fields="{ text: 'toc_do', value: 'tocdo_id' }" 
                                            v-model="cboTocDo_Adsl.SelectedValue">
                                        </ejs-combobox> -->
                                            <SelectExt 
                                                    class="disabled"
                                                    v-model="cboTocDo_Adsl.SelectedValue" 
                                                    :allowFiltering="true" 
                                                    dataTextField="toc_do"
                                                    dataValueField="tocdo_id" 
                                                    :dataSource="cboTocDo_Adsl.Items"                                                                                                                           
                                                >
                                            </SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mức cước</div>
                                        <div class="value">
                                            <!-- <ejs-combobox 
                                                :dataSource='cboMucCuoc_ADSL.Items' 
                                                :fields="{ text: 'tenmuccuoc', value: 'muccuoc_id' }" 
                                                v-model="cboMucCuoc_ADSL.SelectedValue">
                                            </ejs-combobox> -->
                                            <SelectExt 
                                                    v-model="cboMucCuoc_ADSL.SelectedValue" 
                                                    :allowFiltering="true" 
                                                    dataTextField="tenmuccuoc"
                                                    dataValueField="muccuoc_id" 
                                                    :dataSource="cboMucCuoc_ADSL.Items"     
                                                    class="disabled"                                                                                                                      
                                                >
                                            </SelectExt>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mức cước TB</div>
                                        <div class="value">
                                            <!-- <ejs-combobox 
                                                :dataSource='cboMucCuocTB_ADSL.Items' 
                                                :fields="{ text: 'muccuoc', value: 'mucuoctb_id' }" 
                                                v-model="cboMucCuocTB_ADSL.SelectedValue">
                                            </ejs-combobox> -->
                                            <SelectExt 
                                                    v-model="cboMucCuocTB_ADSL.SelectedValue" 
                                                    :allowFiltering="true" 
                                                    dataTextField="muccuoc"
                                                    dataValueField="mucuoctb_id" 
                                                    :dataSource="cboMucCuocTB_ADSL.Items"                                                                                                                           
                                                >
                                            </SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số ảo</div>
                                        <div class="value">
                                            <input type="text" class="form-control highlight" v-model="txtSoAo_ADSL.Text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">
                                            <div class="check-action">
                                                <input type="checkbox" class="check" v-model="chkDoiTac_ADSL.Checked" @change="chkDoiTac_ADSL_CheckedChanged">
                                                <span class="name">Đối tác</span>
                                            </div>
                                        </div>
                                        <div class="value">
                                            
                                            <SelectExt 
                                                    v-model="cboDoiTac_ADSL.SelectedValue" 
                                                    :allowFiltering="true" 
                                                    dataTextField="ten_dt"
                                                    dataValueField="doitac_id" 
                                                    :dataSource="cboDoiTac_ADSL.Items"                                                                                                                           
                                                >
                                            </SelectExt>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Cước ĐT</div>
                                        <div class="value">
                                            <input type="text" class="form-control" v-model="txtCuocDT_Adsl.Text" :disabled="!txtCuocDT_Adsl.Enabled">
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                        <!-- Panel TSL -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 9 }">
                            <div class="info-row">
                                <div class="key w90">Thông số TC</div>
                                <div class="value">
                                    <div class="key input-more-button ">
                                        <button class="btn btn-tsl" @click="btnDiemDau_Click">
                                            Điểm đầu
                                        </button>
                                    </div>
                                    <div class="key input-more-button">
                                        <button class="btn btn-tsl" @click="btnDiemCuoi_Click">
                                            Điểm cuối
                                        </button>
                                    </div>
                                </div>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-12" id="boxLeft1">
                    <div class="legend-title mart20">Thông tin khách hàng</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã KH</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtMaKH.Text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Số điện thoại</div>
                                <div class="value">
                                    <input ref="txtSoDT" type="text" class="form-control" v-model="txtSoDT.Text">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên KH</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtTenKH.Text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã dự án</div>
                                <div class="value">
                                    <input ref="txtMaDA" type="text" class="form-control" v-model="txtMaDA.Text">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Địa chỉ KH</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtDiaChiKH.Text">
                        </div>
                    </div>
                    <div class="legend-title mart20">Dịch vụ cộng thêm</div>
                    <div class="info-row">
                        <div class="key w90"></div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="btnDvCongThem_Click">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <!-- <textarea name="" class="form-control" style="height: 100px;resize: none;"></textarea> -->
                                <ejs-listbox :cssClass="'form-control listbox'" :dataSource="lvDvgt.Items.map(r => ({ id: r.DICHVUGT_ID, text: r.TEN_DVGT }))"></ejs-listbox>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title mart20">Chi tiết tiền khoản mục</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Tổng tiền</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click="btnTienKM_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" class="form-control tright red" value="0" disabled v-model="txtTongTien.Text">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Tổng VAT</div>
                                <div class="value">
                                    <input type="text" class="form-control tright red" value="0" disabled v-model="txtTongVat.Text">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="col-sm-6 col-12" id="boxRight1">
                    <div class="legend-title mart20">Thông tin thanh toán</div>
                    <div class="info-row">
                        <div class="key w90">Mã TT</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtMaTT.Text">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Tên TT</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtTenTT.Text">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Địa chỉ TT</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtDiaChiTT.Text">
                        </div>
                    </div>
                    <div class="legend-title mart20">Dịch vụ khác</div>
                    <div class="info-row">
                        <div class="key w90"></div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="btnDvKhac_Click">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <ejs-listbox :cssClass="'form-control listbox'" :dataSource="lvDvkhac.Items.map(r => r)"></ejs-listbox>
                                <!-- <textarea name="" class="form-control" style="height: 100px;resize: none;"></textarea> -->
                            </div>
                        </div>
                    </div>
                    <div class="legend-title mart20">Thông tin tính cước</div>
                    <div class="info-row" :class="{disabled: true}">
                        <div class="key w90">TTTC</div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="btnThongTinCuoc_Click">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <textarea ref="txtTTCuoc" name="" class="form-control" style="height: 100px;resize: none;" v-model="txtTTCuoc.Text"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách thuê bao</div>
            <ejs-grid
              ref="lvwThueBao"
              :dataSource="dgvDanhSach.Rows"
              :allowPaging="true"
              :pageSettings="pageSettings"
              :selectionSettings="gridSelectionSettings"
              :allowSorting="false"
              :allowFiltering="true"
              :allowTextWrap="true"
              gridLines="Both"
              @rowSelected="dgvDanhSach_SelectionChanged"
            >
              <e-columns>
                <!-- <e-column type='checkbox' width='50'></e-column> -->
                <e-column` field="stt" headerText="Stt" width=80></e-column>
                <e-column field="hdtb_id" isPrimaryKey='true' :visible="false"></e-column>
                <e-column field="ma_tb" headerText="Số máy/Acc" width=200></e-column>
                <e-column field="ten_tb" headerText="Tên thuê bao"></e-column>
                <e-column field="diachi_tb" headerText="Địa chỉ thuê bao"></e-column>
                <e-column field="dichvuvt_id" headerText="dvID" :visible="false"></e-column>
                <e-column field="trangthai_dongbo" headerText="Trạng thái đồng bộ"></e-column>
              </e-columns>
            </ejs-grid>  
        </div>
    </div>
    <footer class="footer">
        VNPT-IT &copy; 2021
    </footer>

    <DialogSearchAccount ref="dlgSearchAccount" :isDialog="true" @onSelectCustomer="onSelectCustomer"/>
    <DialogKhuVuc ref="dlgKhuVuc" @onAccept="dlgKhuVucChapNhan"/>
    <DialogTienKhoanMuc ref="dlgTienKhoanMuc" @onAccept="dlgTienKM_Close"/>
    <!-- <DialogDVCongThem ref="dlgDvCongThem" @onAccept="dlgDvCongThem_formClose"/> -->
    <DialogDVKhac ref="dlgDvKhac" @onAccept="dlgDvKhac_Close"/>
    <DialogMaTN ref="dlgMaTN" @onClose="dlgMaTN_Close"/>
    <DialogTinhCuoc ref="dlgTinhCuoc"/>
    <DialogThongTinLienHe ref="dlgLienHe"/>
    <DialogEmail ref="dlgEmail"/>
    <DialogNguoiGioiThieu ref="dlgNguoiGioiThieu" @onAccept="dlgNguoiGioiThieu_Accept"/>
    <SearchContractModal ref="dlgSearchContract" @accept="onAcceptSearchContract" :loai_hd_id="30" :dichvu_id="parseInt(cboDichVuVT.SelectedValue)" :ngay_yc="dtpNgayYeuCau.Value" :trangthai_hd="1" />
    <frmChonTinhTSL ref="frmChonTinhTSL" @chapnhan="frmChonTinhTSL_onChapNhan" />
    <DialogChonTinh ref="dlgChonTinh"/>
    <ThongSoCoDinh ref="frmThongSoCoDinh" @capnhat="capnhat_TSCD"
        :pLoaihinhTB="loaitb_id" :tinhtc="tinh" :_ploaitb_ld="loaitb_id"
        :_thuebao_id_ban="thuebao_id" :_thuebao_id_thicong="thuebao_tc_id" :_vloaihd="30"
        :khachhang_id="khachhang_tc_id" :Text="'Cập nhật thông tin thi công'" />
    <ejs-dialog :enableResize='true' :visible='false' ref='TocDoMucCuocDialog' :position='position'
                :header='"Chọn tốc độ mức cước theo đối tượng"' showCloseIcon='true' :target='targetTop' height="800" width='70%'>
            <TocDoMucCuoc ref='TocDoMucCuocPopup' :thongso_ban="thongso_ban" :thongso_tc="thongso_tc"
                    :_ploaitb_ld="parseInt(cboLoaihinhTB.SelectedValue)" :_ploaitb_td="parseInt(cboLoaihinhTB.SelectedValue)"
                    :tinhtc="Number(tinh.tinhthicong_id)" :_vloaihd="30" :thuebao_id_tc="thuebao_tc_id" :thuebao_id="thuebao_id"
                    @accept="acceptTocDoMucCuoc"

        />
    </ejs-dialog>
    <DangKyDVGTBC ref="frmDangKyDVGTBC" @chapnhan="chapnhan_DangKyDVGTBC"
        :dsDK_DVGT="m_dsThueBao_DichVu" :dichvuvt_id="Number(dichvuvt_id)" :ngay_yc="dtpNgayYeuCau.Value" :lapmoi="false" />
    <frmThongSoWan ref="ref_frmThongSoWan" @closeThongSoWan="CloseHienThiChonThongSoMegaWan"></frmThongSoWan>
    <frmThongSoTSL ref="frmThongSoTSLDau" @chapnhan="frmThongSoTSLDau_onChapNhan" name="frmThongSoTSLDau"></frmThongSoTSL>
    <frmThongSoTSL ref="frmThongSoTSLCuoi" @chapnhan="frmThongSoTSLCuoi_onChapNhan" name="frmThongSoTSLCuoi" ></frmThongSoTSL>
</div>
