<div class="main-wrapper">
    <breadcrumb :header="header" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a @click.prevent="TimThongTinKH()">
                    <span class="icon one-search"></span>Tìm kiếm
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">

        <div class="box-form">
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w140">Mã giao dịch</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn disabled">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" class="form-control
                                            highlight disabled" v-model = "ma_gd">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140">Mã hợp đồng</div>
                                <div class="value">
                                    <input type="text" class="form-control
                                        disabled">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w140">Số máy</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <span class="btn highlight text-desc
                                            fw6" style="border-color: #d9d9d9;">
                                            84
                                        </span>
                                        <input type="text" 
                                            v-on:keyup.enter="TimThongTinKH"
                                            class="form-control highlight"
                                            v-model="so_tb" ref="focus"
                                            >
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140">Đối tượng sử dụng <span
                                        class="red"> (*)</span></div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt placeholder="Đối tượng sử
                                            dụng" v-model="doituongsd_id"
                                            :allowFiltering="true"
                                            dataTextField="TEN_DT"
                                            dataValueField="DOITUONGSD_ID"
                                            :dataSource="options.cbx_doituongsd"></SelectExt>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w140">Tên thuê bao <span
                                        class="red">(*)</span></div>
                                <div class="value">
                                    <input type="text" class="form-control"
                                        v-model="ten_tb">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140">Ngày sinh <span
                                        class="red"> (*)</span></div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <input type="text" class="form-control"
                                            v-model="ngay_sinh">
                                        <span class="icon one-calendar"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w140">Loại giấy tờ <span
                                        class="red">(*)</span></div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt placeholder="Loại giấy tờ"
                                            v-model="loaigt_id"
                                            :allowFiltering="true"
                                            dataTextField="TENLOAI_GT"
                                            dataValueField="LOAIGT_ID_NEO"
                                            :dataSource="options.cbx_dsloaigt">
                                        </SelectExt>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140">Số GT <span class="red">
                                        (*)</span></div>
                                <div class="value">
                                    <input type="text" class="form-control"
                                        v-model="so_gt">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w140">Nơi cấp <span class="red">(*)</span></div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt placeholder="Nơi cấp"
                                            v-model="tinh_id"
                                            :allowFiltering="true"
                                            dataTextField="TENTINH_NEO"
                                            dataValueField="TENTAT_NEO"
                                            :dataSource="options.cbx_dstinh"></SelectExt>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140">Ngày cấp<span class="red">
                                        (*)</span></div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <input type="text" class="form-control"
                                            v-model="ngay_cap">
                                        <span class="icon one-calendar"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w140">Nơi ĐKHK thường trú</div>
                                <div class="value">
                                    <input type="text" class="form-control"v-model="noi_dkhk">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140 text-main underline">Mã xác
                                    thực</div>
                                <div class="value">
                                    <input type="text" class="form-control
                                        disabled">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <a href="#" class="link underline mart7 block"
                                @click.prevent="onLayLSTTClicked">
                                <b style="font-size: 16px;">Lấy lịch sử thay đổi
                                    thông tin thuê bao</b>
                            </a>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w140">Trạng thái:</div>
                                <div class="value">
                                    <label type="text" class="form-control
                                        highlight not-overflow" v-html="trang_thai" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w140">Mã KH</div>
                                    <div class="value">
                                        <input type="text" class="form-control
                                            disabled">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w140">Loại khách hàng <span
                                            class="red">(*)</span></div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt placeholder="Loại khách
                                                hàng" v-model="loaikh_id"
                                                :allowFiltering="true"
                                                dataTextField="TEN_LKH"
                                                dataValueField="LOAIKH_ID"
                                                :dataSource="options.cbx_dsloaikh"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w140">Địa chỉ TB</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn disabled">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" class="form-control
                                        disabled">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w140">Giới tính</div>
                                    <div class="value">
                                        <div class="list-checks mart7">
                                            <div class="item">
                                                <div class="check-action">
                                                    <input type="radio" class="check disabled" value="male" v-model="gioi_tinh" />
                                                    <span class="name">Nam</span>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="check-action">
                                                    <input type="radio" class="check disabled" value="female" v-model="gioi_tinh" />
                                                    <span class="name">Nữ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w140">Nước <span
                                            class="red">(*)</span></div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt placeholder="Quốc tịch"
                                                v-model="nuoc_id"
                                                :allowFiltering="true"
                                                dataTextField="TENQUOCTICH"
                                                dataValueField="QUOCTICH_NEO_ID"
                                                :dataSource="options.cbx_dsnuoc"></SelectExt>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w140">Ghi chú</div>
                            <div class="value">
                                <input type="text" class="form-control"v-model="ghi_chu">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w140">Ghi chú upload ảnh</div>
                            <div class="value">
                                <div class="select-custom">
                                    <select name="" id="" class="form-control
                                        disabled">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w140"></div>
                            <div class="value tright">
                                <div class="item marb7">
                                    <button class="btn nocorner btn-main
                                        disabled" style="min-width: 160px;">Tải
                                        ảnh</button>
                                </div>
                                <div class="item">
                                    <button data-toggle="modal"
                                        v-on:click="popup()" class="btn nocorner
                                        btn-second"
                                        style="min-width: 160px;"><b>Xem ảnh
                                            CCBS</b></button>
                                </div>
                                <div v-if="showPopup" class="modal" id="popupTCTTTB"
                                v-bind:style="{display: displayStylePopup}" style="margin-top: 100px;">
                                    <div class="modal-dialog" style="width:
                                        100%; max-width: 1220px;">
                                        <div class="modal-content popup-box">
                                            <div class="popup-header">
                                                <div class="title"><span
                                                        class="-ap icon
                                                        icon-apps text-main"></span>Ảnh
                                                    thuê bao di động trên CCBS</div>
                                                <div class="close -ap
                                                    icon-close"
                                                    v-on:click="closepopup()"
                                                    data-dismiss="modal">
                                                </div>
                                            </div>

                                            <div class="popup-body">
                                                <div class="box-form">
                                                    <div class="legend-title">Số
                                                        máy: <label>{{so_tb}}
                                                        </label></div>
                                                    <div class="row">
                                                        <div v-for="(item, index) in thongtin_anhht" :key="index"
                                                            
                                                        class="col-sm-3
                                                        col-12">
                                                        <div v-if="item.image_base!=null" class="image"  @click="imgClick(item)">
                                                            <img
                                                                :src="`data:image/png;base64,${item.image_base}`"
                                                                alt=""
                                                                class="fullw
                                                                img-thuebao"
                                                                />
                                                        </div>
                                                        <div v-else class="image">
                                                            <img
                                                                src="https://www.chanchao.com.tw/vietnamwood/images/default.jpg"
                                                                alt=""
                                                                class="fullw">
                                                        </div>
                                                        
                                                        <div v-if="item.image_base!=null" class="text
                                                            center mart10">
                                                            <span>{{item.image_file}}
                                                            </span>
                                                        </div>
                                                        <div v-else class="text
                                                            center mart10">
                                                            <span></span>
                                                        </div>



                                                        <div class="center
                                                            mart10">
                                                            <button
                                                                class="btn
                                                                btn-main" v-on:click="imgClick(item)">Xem
                                                                 {{item.image_name}}</button>
                                                        </div>
                                                    
                                                    </div>


                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div  class="modal" id="anh" v-bind:style="{display: displayStyleImage}" style="margin-top:100px;">
                                    <div class="modal-dialog" style="width: 80%; max-width: 70vw; max-height:70vh">
                                        <div class="modal-content popup-box">
                                            <div class="popup-header">
                                                <div v-if="anhDaChon!=null" class="title"><span class="-ap icon icon-apps text-main"></span><span>{{anhDaChon.image_name}}</span></div>
                                                <div class="close -ap icon-close" v-on:click="displayStyleImage='none'"
                                                    data-dismiss="modal">
                                                </div>
                                            </div>
                                            <div class="popup-body">
                                            
                                                <div v-if="anhDaChon!=null">
                                                    <img  :src="`data:image/png;base64,${anhDaChon.image_base}`"
                                                        alt="" class="fullw img-full" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                         
                            </div>
                        </div>
                    </div>
                </div>
                <div class="nav tabs tab-over mart20">
                    <a href="#" :class="{active:!isActiceTabAnh}"
                        @click.prevent="onTabTbClicked">Lịch sử thuê bao</a>

                    <a href="#" :class="{active:isActiceTabAnh}"
                        @click.prevent="onTabAnhClicked">Lịch sử thay đổi ảnh</a>
                        
                </div>
                <div class="tab-content">

                    <table class="table-result table-gachle">
                        <tr>
                            <td>
                                <div v-if="!isActiceTabAnh">
                                    <DataGrid
                                        v-bind:columns="ds_lichsu_thaydoi_tt.header"
                                        v-bind:dataSource="ds_lichsu_thaydoi_tt.list"
                                        :enable-paging-server="false"
                                        :allowPaging="true" :showFilter="true"
                                        :showColumnCheckbox="false"
                                        @selectedRowChanged="onSelectedRowChange">
                                    </DataGrid>
                                </div>
                                <div v-if="isActiceTabAnh">
                                    <DataGrid
                                        v-bind:columns="ds_lichsu_thaydoi_anh.header"
                                        v-bind:dataSource="ds_lichsu_thaydoi_anh.list"
                                        :enable-paging-server="false"
                                        :allowPaging="true" :showFilter="true"
                                        :showColumnCheckbox="false"
                                        @selectedRowChanged="onSelectedRowChange">
                                    </DataGrid>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

        </div>
        <footer class="footer">
            VNPT-IT &copy; 2021
        </footer>
    </div>
