<div class="main-wrapper1 main-wrapper-payment">
  <breadcrumb :header="header" v-show="!ispopup"/>
  <!-- <div class="breadcrumb-top"  v-show="!ispopup">
      <div class="main-title">Thanh toán hợp đồng</div>
      <ul class="breadcrumb" v-show="!ispopup">
          <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
              </a></li>
          <li class="breadcrumb-item"><a href="#">Lập hợp đồng</a></li>
          <li class="breadcrumb-item active">Thanh toán hợp đồng </li>
      </ul>
  </div> -->
  <div class="list-actions-top ">
      <ul class="list">
          <li>
              <a href="javascript:void(0)" v-bind:class="{disabled: !Fn.GachNo}" :disabled="Fn.GachNo"
                  v-on:click.prevent='tsbGachnothat_Click'>
                  <span class="icon nc-icon-glyph shopping_credit-card"></span>Thanh toán
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" v-bind:class="{disabled: !tsbtnInHoaDon_Enabled}"
                  :disabled="tsbtnInHoaDon_Enabled" v-on:click.prevent='tsbtnInHoaDon_Click'>
                  <span class="icon one-print"></span>In HĐ
              </a>
          </li>

          <li>
              <a href="javascript:void(0)" v-bind:class="{'disabled': !tsbtnInPhieuThu_Enabled}"
                  :disabled="tsbtnInPhieuThu_Enabled" v-on:click.prevent='tsbtnInPhieuThu_Click'>
                  <span class="icon one-file-arrow-left"></span>Phiếu thu
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" @click.prevent="tsbtnPhieuBienNhan_Click">
                  <span class="icon nc-icon-glyph files_single-content-02"></span>Phiếu biên nhận
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" v-bind:class="{'disabled': !Fn.PhieuTra}" @click.prevent="PhieuTra">
                  <span class="icon one-file-back"></span>Phiếu trả
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" v-bind:class="{disabled: !Fn.GiaoPhieu}" :disabled="Fn.GiaoPhieu"
                  @click.prevent="GiaoPhieu">
                  <span class="icon one-file-arrow-right1"></span>Giao phiếu
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" @click.prevent="TonPhieu">
                  <span class="icon one-calendar-number"></span>Tồn phiếu
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" id="btnChuyenTo" v-on:click.prevent='ShowChuyenPBH'>
                  <span class="icon one-file-back-1"></span>Chuyển PBH
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" @click.prevent="ChuyenLinkUploadHoSoDienTu">
                  <span class="dropdown-icon nc-icon one-file-arrow-up"></span> Up hồ sơ
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" @click.prevent="thongTinEmailOpen">
                  <span class="dropdown-icon one-email"></span> Email
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" @click.prevent="lienHeOpen">
                  <span class="dropdown-icon nc-icon-glyph business_contacts"></span> Liên hệ
              </a>
          </li>
          <li>
              <a href="javascript:void(0)" @click.prevent="tsbtnUpDSFile_Click">
                <span class="icon one-file-attach"></span> Up DS File
              </a>
          </li>


      </ul>

      <div class="more dropdown">
          <a href="#" data-toggle="dropdown">
            v2<span class="icon -ap  icon-dots-three-vertical"></span>
          </a>
          <div class="dropdown-menu">
              <!--
                  <a href="#" @click.prevent="ChuyenLinkUploadHoSoDienTu">
                  <span class="dropdown-icon nc-icon one-file-arrow-up"></span> Up hồ sơ
              </a>
              <a href="#" @click.prevent="thongTinEmailOpen">
                  <span class="dropdown-icon one-email"></span> Emaiil
              </a>
              <a href="#" @click.prevent="lienHeOpen">
                  <span class="dropdown-icon nc-icon-glyph business_contacts"></span> Liên hệ
              </a> -->
              <a href="javascript:void(0)" @click.prevent="tsbtnXuaHD_Click"
                  v-bind:class="{disabled: !tsbtnXuaHD_Enabled}" :disabled="tsbtnXuaHD_Enabled">
                  <span class="dropdown-icon one-file-download"></span> Xuất HDDT
              </a>
              <a href="javascript:void(0)" @click.prevent="tsbtnDongBoVNP_Click"
                  v-bind:class="{disabled: !tsbtnDongBoVNP_Enabled}" :disabled="tsbtnDongBoVNP_Enabled">
                  <span class="dropdown-icon one-sync1"></span> Đồng bộ vinaphone
              </a>
              <a href="javascript:void(0)" @click.prevent="tsbtnInPhieu_HH_Click" v-bind:class="{disabled: !tsbtnInPhieu_HH_Enabled}" :disabled="tsbtnInPhieu_HH_Enabled">
                  <span class="dropdown-icon one-sign"></span> Ký nhận hoa hồng
              </a>
              <a href="javascript:void(0)" @click.prevent="btnThongTinVi_Click">
                  <span class="dropdown-icon one-wallet"></span> Thông tin ví
              </a>
              <a v-if="false" href="javascript:void(0)" @click.prevent="Test_Click">
                  <span class="dropdown-icon one-wallet"></span> Test
              </a>

          </div>
      </div>

  </div>
  <div class="page-content">
      <div class="row">
          <div class="col-sm-6 col-12">
              <div class="box-form" style="min-height: 433px;">
                  <div class="legend-title">Thông tin phiếu yêu cầu</div>
                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Mã giao dịch</div>
                              <div class="value">
                                  <div class="input-more-button">
                                      <button class="btn" @click.prevent="btnLayMaGD_Click">
                                          <span class="-ap icon-more_horiz"></span>
                                      </button>
                                      <input type="text" v-model.trim="txtMaGD" ref="reftxtMaGD"
                                          class="form-control highlight" v-on:keyup.enter="searchTheoMaGD">
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Loại HĐ/PL</div>
                              <div class="value">
                                  <input type="text" v-model="txtLoaiHD" class="form-control">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12">
                          <div class="info-row">
                              <div class="key">Tên khách hàng</div>
                              <div class="value">
                                  <input type="text" :class="{ 'is-invalid': $v.txtTenKH.$error }"
                                      v-model.trim="$v.txtTenKH.$model" class="form-control" ref="txtTenKH">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-12 col-12">
                          <div class="info-row">
                              <div class="key">Địa chỉ KH</div>
                              <div class="value">
                                  <input type="text" v-model='txtDiaChiKH' class="form-control">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-12 col-12">
                          <div class="info-row">
                              <div class="key">Địa chỉ CT</div>
                              <div class="value">
                                  <input type="text" v-model="txtDiaChiCT" class="form-control">
                              </div>
                          </div>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Người đại diện</div>
                              <div class="value">
                                  <input type="text" v-model='txtNguoiDaiDien' class="form-control" maxlength="25">
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Điện thoại</div>
                              <div class="value">
                                  <input type="text" v-model='txtDienThoai' class="form-control" maxlength="15">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Mã số thuế</div>
                              <div class="value">
                                  <input type="text" v-model='txtMaSoThue' class="form-control">
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Tài khoản</div>
                              <div class="value">
                                  <input type="text" v-model='txtSoTaiKhoan' class="form-control">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Ngày yêu cầu</div>
                              <div class="value">
                                  <div class="input-icon-right">
                                      <date-picker :format="dateFormat" :value-type="dateFormat" ref="txtNgayYeuCau"
                                          :time-title-format="dateFormat" v-model="txtNgayYeuCau" :type="typeFormat"
                                          :disabled-date="disabledRange">
                                          <template #icon-calendar>
                                              <span class="icon one-calendar"></span>
                                          </template>
                                      </date-picker>

                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90 red">Tổng tiền trả</div>
                              <div class="value">
                                  <!-- <input type="text" v-model='txtTongTienTra' class="form-control highlight tright"
                                      readonly="true" value="0"> -->
                                  <vue-numeric class="form-control highlight tright" separator=","
                                      v-model="txtTongTienTra" :readonly="true" id="txtTongTienTra" placeholder="0"
                                      output-type="Number">
                                  </vue-numeric>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-12 col-12">
                          <div class="info-row">
                              <div class="key">Bằng chữ</div>
                              <div class="value">
                                  <input type="text" v-model='txtTienBangChu' readonly=true class="form-control red">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-12 col-12">
                          <div class="info-row">
                              <div class="key">Ghi chú</div>
                              <div class="value">
                                  <input type="text" v-model='txtGhiChu' class="form-control">
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="col-sm-6 col-12">
              <div class="box-form box-tttt">
                  <div class="legend-title">Thông tin thanh toán</div>
                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Hình thức trả</div>
                              <div class="value">
                                  <div class="select-custom" lang="vi">
                                      <SelectExt :disabled='!hinhThucTTIdStatus ' v-model="hinhThucTTId"
                                          :options="DmHinhThucTra" language="vi" lang="vi"  @change="hinhThucTTIdChanged"/>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Kênh thu</div>
                              <div class="value">
                                  <div class="select-custom">
                                      <Select2 :id='"kenhThuId"' ref="refkenhThuId" :disabled='!kenhThuIdtatus ' v-model="kenhThuId"
                                          :options="DmKenhThu" :settings="settingSelect2" @change="kenhThuIdChanged" />
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Người BL</div>
                              <div class="value">
                                  <div class="input-more-button">
                                      <button class="btn" :class="{'disabled': !btnNguoiBLStatus}"
                                          :disabled='!btnNguoiBLStatus' @click.prevent="ShowNguoiBL">
                                          <span class="-ap icon-more_horiz"></span>
                                      </button>
                                      <input type="text" :disabled='!txtNguoiBLStatus' ref="reftxtNguoiBL" v-model='txtNguoiBL'
                                          class="form-control " maxlength="100">
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Trạng thái</div>
                              <div class="value">
                                  <div class="select-custom">
                                      <select name="trangThaiThanhToanId" id="trangThaiThanhToanId"
                                          :disabled='!trangThaiThanhToanStatus' v-model='trangThaiThanhToanId'
                                          class="form-control">
                                          <option v-for="item in DmTrangThaiTT" v-bind:key="item.trangthai_id"
                                              v-bind:value="item.trangthai_id">{{
                                              item.ten_tt}} </option>
                                      </select>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-12 col-12">
                          <div class="info-row">
                              <div class="key">
                                  <div class="check-action">
                                      <input type="checkbox" class="check" v-model='chkNganHang'>
                                      <span class="name">Ngân hàng</span>
                                  </div>
                              </div>
                              <div class="value">
                                  <div class="select-custom">
                                      <Select2 :id='"nganHangId"' :disabled='!nganHangIdStatus' v-model="nganHangId"
                                          :options="DmNganHang" />
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">Ngày NH</div>
                              <div class="value">
                                  <div class="input-icon-right">
                                      <date-picker :disabled='!txtNgayNHStatus' :format="dateFormat"
                                          :value-type="dateFormat" :time-title-format="dateFormat" v-model="txtNgayNH"
                                          :type="typeFormat" :disabled-date="disabledRange">
                                          <template #icon-calendar>
                                              <span class="icon one-calendar"></span>
                                          </template>
                                      </date-picker>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Chứng từ</div>
                              <div class="value">
                                  <input type="text" :disabled='!txtChungTuStatus' v-model='txtChungTu'
                                      class="form-control" maxlength="25">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="legend-title mart20">
                      <div class="pull-left">Thông tin hóa đơn</div>
                      <div class="pull-right">
                          <div class="check-action" v-show="chkHoaDonDienTuVisible">
                              <input type="checkbox" :disabled='!chkHoaDonDienTuStatus' class="check"
                                  v-model='chkHoaDonDienTu'>
                              <span class="name">Hoá đơn điện tử</span>
                          </div>
                      </div>
                      <div class="clearfix"></div>
                  </div>
                  <div class="row">
                      <div class="col-sm-8 col-12">
                          <div class="info-row">
                              <div class="key">
                                  <div class="check-action">
                                      <input :disabled="!chkLoaiHDStatus" type="checkbox" class="check"
                                          v-model="chkLoaiHD">
                                      <span class="name">Loại hoá đơn</span>
                                  </div>
                              </div>
                              <div class="value">
                                  <div class="select-custom">
                                      <Select2 :disabled="!loaiHoaDonIdStatus" v-model="loaiHoaDonId"
                                          :options="DmLoaiHoaDon" />
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Ngày HĐ</div>
                              <div class="value">
                                  <div class="input-icon-right">
                                      <date-picker :disabled="!txtNgayHDStatus" :format="dateFormat"
                                          :value-type="dateFormat" :time-title-format="dateFormat" v-model="txtNgayHD"
                                          :type="typeFormat" :disabled-date="disabledRange">
                                          <template #icon-calendar>
                                              <span class="icon one-calendar"></span>
                                          </template>
                                      </date-picker>

                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-5 col-12">
                          <div class="info-row">
                              <div class="key">
                                  Seri
                              </div>
                              <div class="value">
                                  <Select2 :id='"loaiSeriId"' ref="refloaiSeriId" :disabled="!loaiSeriIdStatus" v-model="loaiSeriId" :options="DmSeri" />
                                  <!-- <div class="select-custom">

                                  </div> -->
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-3 col-12">
                          <div class="info-row">
                              <div class="key w60">
                                  Hoá đơn
                              </div>
                              <div class="value">
                                  <input  type="text" :disabled="!txtHoaDonStatus" v-model.trim='txtHoaDon'
                                      class="form-control" maxlength="25" ref="reftxtHoaDon">
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Phiếu thu</div>
                              <div class="value">
                                  <input ref="txtPhieuThuHD" type="text" :disabled="!txtPhieuThuHDStatus"
                                      maxlength="10" v-model.trim='$v.txtPhieuThuHD.$model' class="form-control"
                                      :class="{ 'is-invalid': $v.txtPhieuThuHD.$error }">
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-5 col-12">
                          <div class="info-row">
                              <div class="key">
                                  Loại tiền
                              </div>
                              <div class="value">
                                  <Select2 :disabled="!loaiTienIdStatus" v-model="loaiTienId" :options="DmLoaiTien" />
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-3 col-12">
                          <div class="info-row">
                              <div class="key w60">
                                  Tỷ giá
                              </div>
                              <div class="value">
                                  <input type="text" :disabled="!txtTyGiaStatus" v-model.trim='txtTyGia'
                                      class="form-control">
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Ngày TT</div>
                              <div class="value">
                                  <div class="input-icon-right">
                                      <date-picker :disabled="!txtNgayTTStatus" :format="dateFormat"
                                          :value-type="dateFormat" :time-title-format="dateFormat" v-model="txtNgayTT"
                                          :type="typeFormat" :disabled-date="disabledRange2">
                                          <template #icon-calendar>
                                              <span class="icon one-calendar"></span>
                                          </template>
                                      </date-picker>

                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-5 col-12">
                          <div class="info-row">
                              <div class="key">
                                  Thu ngân
                              </div>
                              <div class="value cbothuNgan" style="overflow:hidden;">
                                  <Select2 :disabled="!thuNganIdStatus" v-model="thuNganId"
                                  :options="DmThuNgan" />
                                  <!-- <div class="select-custom" style="overflow:hidden;">

                                  </div> -->
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-3 col-12">
                          <div class="info-row">
                              <div class="key w60">
                                  Số BNTT
                              </div>
                              <div class="value">
                                  <input type="text" v-model.trim='txtSoBNTT' class="form-control" maxlength="25">
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-4 col-12">
                          <div class="info-row">
                              <div class="key w90">Thông tin PT</div>
                              <div class="value">
                                  <input type="text" :disabled="!txtThongTinPTStatus" v-model.trim='txtThongTinPT'
                                      class="form-control" value="0">
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="box-form">
          <div class="legend-title">Danh sách theo thuê bao</div>
          <!-- dataKeyField="hdtb_id" -->
          <DataGridC v-bind:columns="DsThueBao.headers" :enabledSelectFirstRow="false"
              v-bind:dataSource="DsThueBao.data" :showColumnCheckbox="true" :enable-paging-server="false"
              :allowPaging="false" :showFilter="true" ref="gridDsThueBao" @rowClicked="select_selectThueBao"
              @selectedItemsChanged="select_selectedItemsChangedDagan"
              @dataBound="gridThueBao_DataBound"
              @rowDataBound="gridThueBao_RowDataBound"
              @actionComplete="gridThueBao_ActionComplete"
              >
          </DataGridC>
      </div>
      <div class="row">
          <div class="col-sm-6 col-12">
              <div class="box-form">
                  <div class="legend-title">Danh sách các khoản mục</div>
                  <DataGrid ref="gridDsKhoanMuc" v-bind:columns="DsKhoanMuc.headers"
                      v-bind:dataSource="DsKhoanMuc.data" :showColumnCheckbox="false" :enable-paging-server="false"
                      :allowPaging="false" :showFilter="false" @rowClicked="select_KhoanMuc">
                  </DataGrid>
              </div>
          </div>
          <div class="col-sm-6 col-12">
              <div class="box-form">
                  <div class="legend-title">Chi tiết theo từng khoản mục</div>
                  <DataGrid ref="gridDsKhoanMucCT" v-bind:columns="DsKhoanMucCT.headers"
                      v-bind:dataSource="DsKhoanMucCT.data" :showColumnCheckbox="false" :enable-paging-server="false"
                      :allowPaging="false" :showFilter="false">
                  </DataGrid>
              </div>
          </div>
      </div>
  </div>
  <ejs-dialog :enableResize='true' :position='position' :allowDragging='true' :visible='false'
      :animationSettings='animationSettings' ref="dialogObjDonViNhanPhieu" :header='"Chuyển đơn vị"'
      showCloseIcon=true width='90%' :target="targetTop">
      <div class="main-wrapper1">
          <div class="list-actions-top">
              <ul class="list">
                  <li>
                      <a href="#" @click.prevent="updateDonViNhanPhieu">
                          <span class="icon one-reload1"></span>Cập nhật
                      </a>
                  </li>
              </ul>
          </div>
          <div class="popup-body">
              <div class="box-form padt8 padb8 fw6 upper">
                  Thay đổi đơn vị nhận phiếu
              </div>
              <div class="box-form">
                  <div class="legend-title">Thông tin phiếu yêu cầu</div>
                  <div class="info-row">
                      <div class="key w70">Đơn vị</div>
                      <div class="value">
                          <ComboboxGrid :valueField="ChuyenPBH.valueField" :textField="ChuyenPBH.textField"
                              v-model="ChuyenPBH.DonViId" :value="ChuyenPBH.DonViId" :columns="ChuyenPBH.headers"
                              :panelDataHeight="ChuyenPBH.panelDataHeight" :enabledSelectFirstRow="true"
                              :dataSource="ChuyenPBH.data" @selectedChanged="ChuyenPbh_Changed">
                          </ComboboxGrid>
                          <!-- <Select2 v-model="ChuyenPBH.DonViId" :options="ChuyenPBH.DonVi" /> -->
                      </div>
                  </div>
                  <div class="info-row">
                      <div class="key w70">Nội dung</div>
                      <div class="value">
                          <input type="text" :class="{ 'is-invalid': $v.ChuyenPBH.NoiDung.$error }"
                              ref="chuyenPBHNoiDung" v-model.trim="$v.ChuyenPBH.NoiDung.$model" class="form-control">
                      </div>
                  </div>
              </div>
              <div class="box-form">
                  <div class="legend-title">Danh sách thuê bao</div>
                  <DataGrid v-bind:columns="DsThueBaoPopUp.headers" v-bind:dataSource="DsThueBaoPopUp.data"
                      :showColumnCheckbox="false" :enable-paging-server="false" :allowPaging="true"
                      @rowClicked="DsThueBaoPopUp_Changed" :showFilter="true">
                  </DataGrid>
              </div>
              <div class="box-form">
                  <div class="legend-title">Thông tin phiếu cần chuyển đổi</div>
                  <DataGrid v-bind:columns="DsPhieuYC.headers" v-bind:dataSource="DsPhieuYC.data"
                      :showColumnCheckbox="false" :enable-paging-server="false" :allowPaging="true" :showFilter="true"
                      @rowClicked="DsPhieuYCPopUp_Changed">
                  </DataGrid>
              </div>
          </div>
      </div>
      <!-- </b-modal> -->
  </ejs-dialog>
  <b-modal id="my-modal-nguoibl" class="modal-dialog" hide-footer size="lg" :no-close-on-backdrop="true">
      <div slot="modal-title" class="popup-header">
          Người BL
      </div>
      <div class="list-actions-top">
          <ul class="list">
              <li>
                  <a href="#">
                      <span class="icon one-reload1"></span>Cập nhật (F9)
                  </a>
              </li>
          </ul>
      </div>
  </b-modal>
  <ejs-dialog :enableResize='true' :allowDragging='true' :visible=false :animationSettings='animationSettings'
      ref="dialogObjDsCanTT" :position='position' :close="closeDialog" :header='"Danh sách hợp đồng cần thu tiền"'
      showCloseIcon=true width='90%' :target='target1'>
      <div class="">
          <div class="list-actions-top">
              <ul class="list">
                  <li>
                      <a href="javascript:void(0)" @click.prevent="TimKiemTBCanThanhToan">
                          <span class="icon one-search"></span> Tìm kiếm
                      </a>
                  </li>
                  <li>
                      <a href="javascript:void(0)" @click.prevent="TimKiemTBChapNhan">
                          <span class="icon nc-icon-glyph ui-1_check-circle-08"></span>Chấp nhận
                      </a>
                  </li>
              </ul>
          </div>
          <div class="popup-body">
              <div class="box-form">
                  <div class="legend-title">Thông tin tìm kiếm</div>
                  <div class="grid-stack-box">
                      <div class="box-col" id="boxLeft" style="width: calc(50% - 8px);">
                          <div class="info-row">
                              <div class="key">
                                  <div class="check-action">
                                      <input type="checkbox" class="check" v-model="DsThueBaoCanTT.LoaiHD.checked">
                                      <span class="name">Loại HĐ/PL</span>
                                  </div>
                              </div>
                              <div class="value" abc="DsThueBaoCanTT.LoaiHD.list">
                                  <Select2 :disabled="!DsThueBaoCanTT.LoaiHD.checked"
                                      v-model="DsThueBaoCanTT.LoaiHD.val" :options="DsThueBaoCanTT.LoaiHD.list" />
                              </div>
                          </div>
                          <div class="info-row">
                              <div class="key">
                                  <div class="check-action">
                                      <input type="checkbox" class="check" v-model="DsThueBaoCanTT.DichVu.checked">
                                      <span class="name">Dịch vụ</span>
                                  </div>
                              </div>
                              <div class="value">
                                  <Select2 :disabled="!DsThueBaoCanTT.DichVu.checked"
                                      v-model="DsThueBaoCanTT.DichVu.val" :options="DsThueBaoCanTT.DichVu.list" />

                              </div>
                          </div>
                          <div class="info-row">
                              <div class="key">
                                  <div class="check-action">
                                      <input type="checkbox" class="check" v-model="DsThueBaoCanTT.LoaiHinh.checked">
                                      <span class="name">Loại hình</span>
                                  </div>
                              </div>
                              <div class="value">
                                  <Select2 :disabled="!DsThueBaoCanTT.LoaiHinh.checked"
                                      v-model="DsThueBaoCanTT.LoaiHinh.val" :options="DsThueBaoCanTT.LoaiHinh.list" />
                              </div>
                          </div>
                      </div>
                      <div class="gutter gutter-horizontal" style="width: 16px;"></div>
                      <div class="box-col" id="boxRight" style="width: calc(50% - 8px);">
                          <div class="info-row">
                              <div class="key">
                                  <div class="check-action">
                                      <input type="checkbox" class="check" v-model="DsThueBaoCanTT.TTHopDong.checked">
                                      <span class="name">Trạng thái HĐ</span>
                                  </div>
                              </div>
                              <div class="value">
                                  <Select2 :disabled="!DsThueBaoCanTT.TTHopDong.checked"
                                      v-model="DsThueBaoCanTT.TTHopDong.val"
                                      :options="DsThueBaoCanTT.TTHopDong.list" />
                              </div>
                          </div>
                          <div class="info-row">
                              <div class="key">Mã giao dịch</div>
                              <div class="value">
                                  <input type="text" class="form-control" v-model="DsThueBaoCanTT.txtMaGiaoDich">
                              </div>
                          </div>
                          <div class="info-row">
                              <div class="key">Số máy/Acc</div>
                              <div class="value">
                                  <input type="text" class="form-control" v-model="DsThueBaoCanTT.txtSoMay">
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="box-form">
                  <div class="legend-title">Danh sách hợp đồng thuê bao</div>
                  <div class="key" v-show="false">
                      <div class="check-action">
                          <input type="checkbox" class="check" v-model="DsThueBaoCanTT.chkHddt">
                          <span class="name">Danh sách các hợp đồng có thuê bao dùng thử đã gạch nợ giả</span>
                      </div>
                  </div>
                  <DataGrid ref="gridDSTBCanTT" v-bind:columns="DsThueBaoCanTT.headers"
                      v-bind:dataSource="DsThueBaoCanTT.data" :showColumnCheckbox="false"
                      :enable-paging-server="false" :allowPaging="true" :showFilter="true"
                      @rowClicked="SelectDsThueBaoCanTT" @rowDoubleClicked="SelectDsThueBaoCanTTDbc">
                  </DataGrid>
              </div>
          </div>
      </div>
  </ejs-dialog>
  <popupTimKiemNhanVienThuCuoc :input="0" @acceptChange="getNVTCProcess($event)" ref="dlgTimKiemNVTC">
  </popupTimKiemNhanVienThuCuoc>
  <ejs-dialog :enableResize='true' :allowDragging='true' :visible=false :animationSettings='animationSettings'
      ref="dialogObjNguoiBL" :position='position' :header='"Danh sách người bảo lãnh"' showCloseIcon=true width='80%'
      :target='target' height="400">
      <div>
      </div>
  </ejs-dialog>
  <phieuTra ref="refdialogObjPhieuTra" @close="phieuTraModalDlgClose" />
  <tonPhieu ref="dialogObjPhieuTon" @close="phieuTonModalDlgClose" :trangthaiId="TrangThaiHdId" :phieuId="PhieuId" />

  <ejs-dialog :enableResize='true' :allowDragging='true' :visible="false" ref="dialogObjHoSo" :position='position'
      :header='"Quản lý file hồ sơ khách hàng"' showCloseIcon=true width='98%' :target='target1' height="800">
      <div class="dialogObjHoSoKhachHang">
          <uploadEProfile ref='refuploadEProfile' :param="paramHSDT" :ma_thue_bao="txtMaGD" :Tag="'1'" />
          <!-- <div class="popup-body dialogObjHoSoKhachHang">

          </div> -->
      </div>
  </ejs-dialog>
  <ejs-dialog :enableResize='true' :allowDragging='true' :visible="false" ref="dialogObjthongTinEmail"
      :position='position' :header='"Email"' showCloseIcon=true width='98%' :target='target1'>
      <div>
          <div class="popup-body dialogObjthongTinEmail">
              <thongTinEmail v-if="showEmail" ref="thongTinEmailPopUp" :hdkh_id="HdKhIdInt"
                  :khachhang_id="KhachHangIdInt" />
          </div>
      </div>
  </ejs-dialog>
  <ejs-dialog :enableResize='true' :position='position' :visible="false" ref="dialogObjthongtinlienhe"
      :header='"Thông tin liên hệ"' showCloseIcon=true target=".main-wrapper" width='98%' height="800">
      <div>
          <div class="popup-body dialogObjthongTinLienHe">
              <ThongTinLienHe ref="thongTinLienHePopUp" :hdkh_id="HdKhIdInt" :khachhang_id="KhachHangIdInt"
          v-if="showLienHe" />
          </div>
      </div>
  </ejs-dialog>
  <inHopDong ref="popupInHopDong" :params="modelIn" />
  <inPhieuThu ref="popupInPhieuThu" :ma_gd="txtMaGDTT" />
  <XemBaoCao ref="popupXemBaoCao" ma_bc="MAU_BNTT_PTTB" :dsGiaTri="dsGiaTri" />
  <XemBaoCao ref="refXemBaoCao" ma_bc="PHIEU_CHI_A5" :dsGiaTri="dsGiaTri" />
  <selectPrintType ref="refselectPrintType"  @selectprintType="selectprintType" />
  <selectPrintPhieuChi ref="refselectPrintPhieuChi"  @selectprintType="selectprintPhieuChi" />
  <XemBaoCao ref="refInHD" ma_bc="PHIEU_CHI" :dsGiaTri="dsGiaTriHD" />

  <PrintReport ref="printReport" :data="this.dataReport" :type="6" />
  <ejs-dialog :enableResize='true' :visible="false" ref="refHandoverTicketDialog" :animationSettings="animationSettings"
      :header='"GIAO PHIẾU ĐIỀU HÀNH THI CÔNG"' showCloseIcon=true target="#app .main-wrapper" :position='position'
      @close="onCloseGiaoPhieu">
    <!--
      <HandoverTicketContent ref="refHandoverTicketContent" :isPopup="true"></HandoverTicketContent>
      -->
  </ejs-dialog>

  <ejs-dialog :enableResize='true' :visible="false" ref="refSelfManageEinvoiceDialog" :position='position'
      :animationSettings="animationSettings" :header='"Phát hành hóa đơn điện tử tự quản"' showCloseIcon=true
      :target="target1" width='100%'>
      <div class="popup-body selfManageEinvoiceDialog">
          <SelfManageEinvoice ref="refSelfManageEinvoice" :i_ma_gd="vma_gd" :isPopup="true" :linkForm="1">
          </SelfManageEinvoice>
          <!-- <component :is="popupComponent" ref="refSelfManageEinvoice" :i_ma_gd="vma_gd" v-bind="popupComponentAttr"
          v-on="popupComponentEvts" :isPopup="true" :linkForm="1"></component> -->
      </div>
  </ejs-dialog>
  <ejs-dialog :enableResize='true' :visible="false" ref="refDongBoLapMoiVinaDialog"
      :animationSettings="animationSettings" :position='position'
      :header='"Đồng bộ dữ liệu thuê bao di động lên VNP"'
      showCloseIcon=true :target="target1" width='90%'>
      <div class="popup-body selfManageEinvoiceDialog DongBoLapMoiVinaDialog">
          <DongBoLapMoiVina ref="refDongBoLapMoiVina" :isPopup="true"></DongBoLapMoiVina>
      </div>
  </ejs-dialog>
  <ejs-dialog :enableResize='true' :visible="false" ref="refeInvoiceDialog2"
      :animationSettings="animationSettings" :position='position'
      :header='"Xuất hóa đơn điện tử"'
      showCloseIcon=true :target="target1" width='90%'>
      <div class="popup-body selfManageEinvoiceDialog DongBoLapMoiVinaDialog">
          <eInvoice2 ref="refeInvoice2" ></eInvoice2>
      </div>
  </ejs-dialog>
  <ejs-dialog :enableResize='true' :visible="false" ref="refeInvoiceDialog"
  :animationSettings="animationSettings" :position='position'
  :header='"Xuất hóa đơn điện tử"'
  showCloseIcon=true :target="target1" width='90%'>
  <div class="popup-body selfManageEinvoiceDialog DongBoLapMoiVinaDialog">
      <eInvoice ref="refeInvoice" ></eInvoice>
  </div>
</ejs-dialog>
  <b-modal id="popupComponentPayment" hide-footer body-class="modal-body p-0">
      <template #modal-title>
          <h3 class="title">Đồng bộ dữ liệu thuê bao di động lên VNP</h3>
        </template>
      <component :is="popupComponent" ref="generalPopup" :dulieu="popupComponentData" v-bind="popupComponentAttr"
          isPopup="true" v-on="popupComponentEvts"></component>

  </b-modal>
  <ejs-dialog :enableResize='false' :visible="false" ref="refVNPTPayInfo"
      :animationSettings="animationSettings" :position='position'
      :header='"Thông tin ví"'
      showCloseIcon=true :target="target1" width='500'>
      <div class="popup-body selfManageEinvoiceDialog DongBoLapMoiVinaDialog">
          <div class="box-form">
              <div class="info-row">
                  <div class="key">Số điện thoại:</div>
                  <div class="value">
                      <input type="text" disabled class="form-control text-right" v-model="PayInfo.phoneNumber">
                  </div>
              </div>
              <div class="info-row">
                  <div class="key">Số tiền:</div>
                  <div class="value">
                      <vue-numeric v-bind:disabled="true" class="form-control highlight tright" separator=","
                                      v-model="PayInfo.availableBalance" :readonly="true" id="availableBalance" placeholder="0"
                                      output-type="Number">
                                  </vue-numeric>
                  </div>
              </div>
          </div>
          <p class="text-center">
              <button @click="closeVNPTPayInfo" class="btn btn-primary">Đóng</button>
          </p>
      </div>
  </ejs-dialog>
    <ejs-dialog :enableResize='true' :visible="false" ref="refHandoverTicketDialog1" :animationSettings="animationSettings"
            :header='"GIAO PHIẾU ĐIỀU HÀNH THI CÔNG"' showCloseIcon=true target="#app .main-wrapper" :position='position'
            @close="onCloseGiaoPhieu"  width='90%'>
    <keep-alive>
      <div class="popupComponentPayment">
        <component :is="userComponentModule"  ref='refHandoverTicketContent1' :ispopup="true"  v-bind="popupComponentAttr" v-on="popupComponentEvts" />
      </div>
    </keep-alive>
  </ejs-dialog>
   <ejs-dialog
  :isModal="true"
  :enableResize="true"
  :resizeHandles="['All']"
  :visible="false"
  ref="GiaoPhieuView"
  :header='"Giao phiếu điều hành thi công"'
  showCloseIcon="true"
  target=".main-wrapper"
  width="90%"
  allowDragging="true"
  :animationSettings="giaoPhieuViewDialog.animationSettings"
  @close="GiaoPhieuView_OnClose"
  >
  <div>
      <GiaoPhieuView v-if="giaoPhieuViewDialog.isVisiable" type="modal" v-bind="giaoPhieuViewDialog.input" />
  </div>
</ejs-dialog>
</div>
