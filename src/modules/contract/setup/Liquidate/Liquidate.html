<div class="main-wrapper" id="thanhLy">
  <breadcrumb ref="crumb" :header="headerBreadcrumb" />
  <b-tooltip target="tooltip-target-1" placement="bottom" title="Nhập mới" boundary="viewport" />
  <b-tooltip target="tooltip-target-2" placement="bottom" title="Ghi lại" boundary="viewport" />
  <b-tooltip target="tooltip-target-3" placement="bottom" title="Hủy" boundary="viewport" />
  <b-tooltip target="tooltip-target-4" placement="bottom" title="Xóa HĐ" boundary="viewport" />
  <b-tooltip target="tooltip-target-5" placement="bottom" title="In PL" boundary="viewport" />
  <b-tooltip target="tooltip-target-6" placement="bottom" title="In phiếu YC" boundary="viewport" />
  <b-tooltip target="tooltip-target-7" placement="bottom" title="Đồng bộ" boundary="viewport" />
  <b-tooltip target="tooltip-target-8" placement="bottom" title="Up hồ sơ" boundary="viewport" />
  <b-tooltip target="tooltip-target-9" placement="bottom" title="Giao phiếu" boundary="viewport" />
  <b-tooltip target="tooltip-target-10" placement="bottom" title="Thêm TB" boundary="viewport" />
  <b-tooltip target="tooltip-target-11" placement="bottom" title="Xóa TB" boundary="viewport" />
  <b-tooltip target="tooltip-target-12" placement="bottom" title="Hẹn LĐ" boundary="viewport" />
  <div class="list-actions-top">
    <ul class="list">
      <li id="tooltip-target-1">
        <a ref="tsbtnNhapMoi" @click="nhapMoi" :class="toolbarButtons.nhapMoi ? '' : 'disabled'">
          <span class="icon one-file-plus"></span>Nhập mới(F5)
        </a>
      </li>
      <li id="tooltip-target-2">
        <a ref="tsbtnGhiLai" @click="btnGhiLaiClick" :class="toolbarButtons.ghiLai ? '' : 'disabled'">
          <span class="icon one-save"></span>Ghi lại (F9)
        </a>
      </li>
      <li id="tooltip-target-3">
        <a ref="tsbtnHuyBo" @click="huy" :class="toolbarButtons.huy ? '' : 'disabled'">
          <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Huỷ
        </a>
      </li>
      <li id="tooltip-target-4">
        <a ref="tsbtnXoa" @click="btnXoaHDClick" :class="toolbarButtons.xoaHD ? '' : 'disabled'">
          <span class="icon one-trash"></span>Xoá HĐ (F8)
        </a>
      </li>
      <li id="tooltip-target-5">
        <a ref="toolStripDropDownButton1" @click="btnInPL_Click" :class="toolbarButtons.inPL ? '' : 'disabled'">
          <span class="icon one-print"></span>In PL
        </a>
      </li>
      <li id="tooltip-target-6">
        <a ref="toolStripDropDownButton1" @click="downloadPDF" :class="toolbarButtons.inPhieuYC ? '' : 'disabled'">
          <span class="icon one-print"></span>In phiếu YC
        </a>
      </li>
      <li id="tooltip-target-7">
        <a ref="tsbtnKichHoat" @click="btnDongBoClick" :class="toolbarButtons.dongBo ? '' : 'disabled'">
          <span class="icon one-sync1"></span>Đồng bộ
        </a>
      </li>
      <li id="tooltip-target-8">
        <a ref="tsbUpHoSoTL" @click="upHS" :class="toolbarButtons.upHS ? '' : 'disabled'">
          <span class="icon one-file-arrow-up"></span>Up hồ sơ
        </a>
      </li>
      <li id="tooltip-target-9">
        <a ref="tsbtnGiaoPhieu" @click="giaoPhieu" :class="toolbarButtons.giaoPhieu ? '' : 'disabled'">
          <span class="icon one-file-arrow-right1"></span>Giao phiếu
        </a>
      </li>
      <li id="tooltip-target-10">
        <a ref="tsbtnThemTB" @click="btnThemTBClick" :class="toolbarButtons.themTB ? '' : 'disabled'">
          <span class="icon one-mobile-plus"></span>Thêm TB
        </a>
      </li>
      <li id="tooltip-target-11">
        <a ref="tsbtnXoaTB" @click="btnXoaTBClick" :class="toolbarButtons.xoaTB ? '' : 'disabled'">
          <span class="icon one-phone-remove"></span>Xoá TB
        </a>
      </li>
      <li id="tooltip-target-12">
        <a ref="tsbtnHen" @click="btnHenLDClick" :class="toolbarButtons.henLD ? '' : 'disabled'">
          <span class="icon one-calendar-check"></span>Hẹn LĐ
        </a>
      </li>
      <li id="tooltip-target-13">
        <a ref="tsbtnCapNhatDV" @click="btnCapNhatDVClick" :class="toolbarButtons.henLD">
          <span class="icon one-file-save"></span>Cập nhật ĐV
        </a>
      </li>
      <!-- <li>
              <a ref="tsbtnVatTu" @click="btnVatTuClick" :class="toolbarButtons.vatTu ? '' : 'disabled'">
                  <span class="dropdown-icon one-vt"></span> Vật tư
              </a>
            </li>
            <li>
              <a ref="tsbtnEmail" @click="btnEmailClick" :class="toolbarButtons.email ? '' : 'disabled'">
                  <span class="dropdown-icon one-email"></span> Email
              </a>
            </li>
            <li>
              <a ref="btnCuocnong" @click="tinhCuocNong" :class="toolbarButtons.cuocNong ? '' : 'disabled'">
                  <span class="dropdown-icon one-money"></span>Cước nóng
              </a>
            </li> -->

    </ul>
    <div class="more dropdown">
      <a href="#" data-toggle="dropdown">
        <span class="icon -ap  icon-dots-three-vertical"></span>
      </a>
      <div class="dropdown-menu">
        <a ref="tsbtnVatTu" @click.prevent="btnVatTuClick" :class="toolbarButtons.vatTu ? '' : 'disabled'">
          <span class="dropdown-icon one-vt"></span> Vật tư
        </a>
        <a ref="tsbtnEmail" @click.prevent="btnEmailClick" :class="toolbarButtons.email ? '' : 'disabled'">
          <span class="dropdown-icon one-email"></span> Email
        </a>
        <a ref="btnCuocnong" @click.prevent="tinhCuocNong" :class="toolbarButtons.cuocNong ? '' : 'disabled'">
          <span class="dropdown-icon one-money"></span>Cước nóng
        </a>
      </div>
    </div>
  </div>
  <div class="page-content">
    <div class="box-form">
      <div class="legend-title">Thông tin phiếu yêu cầu</div>
      <div class="row">
        <div class="col-sm-6 col-12">
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key">Mã giao dịch</div>
                <div class="value">
                  <div class="input-more-button">
                    <button ref="btnLayMaGD" v-b-tooltip.hover.bottom="'Lấy mã giao dịch'" class="btn"
                      @click="btnTraCuuHopDongClick">
                      <span class="-ap icon-more_horiz"></span>
                    </button>
                    <input ref="txtMaGD" v-model="requestFormInfo.maGiaoDich" type="text" class="form-control highlight"
                      @keypress="onMaGiaoDichKeyPress">
                  </div>
                </div>
                <div class="value w30">
                  <button ref="btnTimKiemNangCao" class="btn btn-second">
                    <span class="one-search f20"></span>
                  </button>
                </div>
              </div>
              <div class="info-row">
                <div class="key">Mã HĐ/PL</div>
                <div class="value">
                  <input ref="txtMaHD" v-model="requestFormInfo.maHDPL" type="text" class="form-control ">
                </div>

              </div>
              <div class="info-row">
                <div class="key">
                  <div class="check-action">
                    <input ref="chkCongVan" v-model="requestFormInfo.checkboxSoCV" type="checkbox" class="check"
                      :disabled="!requestFormInfo.checkboxSoCVEnable">
                    <span class="name">Số CV/LCT</span>
                  </div>
                </div>
                <div class="value">
                  <input ref="txtCongVan" v-model="requestFormInfo.soCV" type="text" class="form-control ">
                </div>

              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">Ngày YC</div>
                <div class="value">
                  <div class="input-icon-right">
                    <date-picker ref="dtpNgayYeuCau" placeholder="dd/mm/yyyy" v-model="requestFormInfo.ngayYC"
                      :formatter="momentFormat" valueType="format"></date-picker>
                  </div>
                </div>

              </div>
              <div class="info-row">
                <div class="key w70">Ngày LHĐ</div>
                <div class="value">
                  <div class="input-icon-right">
                    <date-picker ref="dtpNgayLapHD" placeholder="dd/mm/yyyy" v-model="requestFormInfo.ngayLHD"
                      :formatter="momentFormat" valueType="format"></date-picker>
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w70">Ngày CV</div>
                <div class="value">
                  <div class="input-icon-right">
                    <date-picker ref="dtpNgayCV" placeholder="dd/mm/yyyy" v-model="requestFormInfo.ngayCV"
                      :formatter="momentFormat" valueType="format"></date-picker>
                  </div>
                </div>
              </div>
            </div>
          </div>


        </div>
        <div class="col-sm-6 col-12">
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w110">
                  Dịch vụ
                </div>
                <div class="value">
                  <ejs-dropdownlist :dataSource="listTelecomService"
                    :fields="{ text: 'TEN_DVVT', value: 'DICHVUVT_ID' }" v-model="requestFormInfo.dichVu"
                    noRecordsTemplate="Không có dữ liệu tìm kiếm" :allowFiltering="true"
                    @filtering="onFilteringDropDownList($event, listTelecomService, 'TEN_DVVT')"
                    @change="selectTelecomServiceOnChange" />
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w100">
                  Loại hình
                </div>
                <div class="value">
                  <ejs-dropdownlist :dataSource="listSubscriptionType"
                    :fields="{ text: 'LOAIHINH_TB', value: 'LOAITB_ID' }" v-model="requestFormInfo.loaiHinh"
                    noRecordsTemplate="Không có dữ liệu tìm kiếm" :allowFiltering="true"
                    @filtering="onFilteringDropDownList($event, listSubscriptionType, 'LOAIHINH_TB')"
                    @change="selectSubscriptionTypeOnChange" />
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w110">
                  Kiểu yêu cầu
                </div>
                <div class="value">
                  <!-- <ejs-dropdownlist :dataSource="listRequestTypeData" :fields="{ text: 'NAME', value: 'ID' }"
                    v-model="requestFormInfo.kieuYeuCau" noRecordsTemplate="Không có dữ liệu tìm kiếm"
                    :allowFiltering="true" @filtering="onFilteringDropDownList($event, listRequestTypeData, 'NAME')" /> -->
                    <div class="select-custom" ref="kieuld">
                      <select2 :settings="{ dropdownParent: $refs['kieuld'] }" ref="cboKieuLD"
                          v-model="requestFormInfo.kieuYeuCau" class="select2"
                          :options="listRequestTypeData.map(e=> ({id: e.ID, text: e.NAME}))">
                      </select2>
                    </div> 
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w100">
                  <div class="check-action">
                    <input ref="chkNgayHT" type="checkbox" class="check" v-model="requestFormInfo.cbxNgayHT"
                      :disabled="!requestFormInfo.cbxNgayHTEnable">
                    <span class="name">Ngày YC HT</span>
                  </div>
                </div>
                <div class="value">
                  <div class="input-icon-right">
                    <date-picker ref="dtpNgayHT" placeholder="dd/mm/yyyy" v-model="requestFormInfo.ngayYCHT"
                      :formatter="momentFormat" valueType="format" :disabled="!requestFormInfo.cbxNgayHT"></date-picker>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key">Mã HĐ - TTKD</div>
                <div class="value">
                  <input ref="txtMaHD_TTKD" v-model="requestFormInfo.maHDTTKD" type="text" class="form-control ">
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w100">
                  Cước nóng
                </div>
                <div class="value">
                  <input ref="txtCuocnong" type="text" v-model="requestFormInfo.cuocNong"
                    class="form-control highlight tright red" value="0">
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-12" id="boxLeft">
          <div class="legend-title mart20">Thông tin thuê bao</div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key">Số máy/Acc</div>
                <div class="value">
                  <div class="input-more-button">
                    <button ref="bntLayMaKh" v-b-tooltip.hover.bottom="'Tìm kiếm'" class="btn"
                      @click="btnSearchAccountClick">
                      <span class="-ap icon-more_horiz"></span>
                    </button>
                    <input ref="txtMaTB" v-model="subscriptionFormInfo.soMayAcc" type="text"
                      class="form-control highlight" @keypress="onMaTBKeyPress">
                  </div>
                </div>
                <div class="value w30">
                  <button ref="btnLayDSTB" class="btn btn-second" @click="btnLayDSTBClick">
                    <span class="-ap icon-plus"></span>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">
                  Tốc độ
                </div>
                <div class="value">
                  <ejs-dropdownlist :dataSource="listChanelSpeed" :fields="{ text: 'thuonghieu', value: 'tocdo_id' }"
                    v-model="subscriptionFormInfo.tocDo" noRecordsTemplate="Không có dữ liệu tìm kiếm"
                    :allowFiltering="true"
                    @filtering="onFilteringDropDownList($event, listChanelSpeed, 'thuonghieu')" />
                    <!-- <div class="select-custom" ref="tocdo">
                      <select2 :settings="{ dropdownParent: $refs['tocdo'] }" ref="cboTocDo"
                          v-model="subscriptionFormInfo.tocDo" class="select2"
                          :options="listChanelSpeed.map(e=> ({id: e.tocdo_id, text: e.thuonghieu}))">
                      </select2>
                    </div>  -->
                </div>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key">Hướng KN</div>
                <div class="value">
                  <input ref="txtHuongKN" type="text" v-model="subscriptionFormInfo.huongKN" class="form-control">
                </div>

              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">Site ID</div>
                <div class="value">
                  <input ref="txtSiteID" type="text" v-model="subscriptionFormInfo.siteID" class="form-control">
                </div>
              </div>

            </div>
          </div>
          <div class="info-row">
            <div class="key">Tên thuê bao</div>
            <div class="value">
              <input ref="txtTenTB" type="text" v-model="subscriptionFormInfo.tenThueBao" class="form-control">
            </div>

          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key">Địa chỉ TB</div>
                <div class="value">
                  <input ref="txtDiaChiTB" type="text" v-model="subscriptionFormInfo.diaChiTB" class="form-control">
                </div>

              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">Mã ERP</div>
                <div class="value">
                  <input ref="txtMaERP" type="text" v-model="subscriptionFormInfo.maERP" class="form-control">
                </div>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key">Địa chỉ LĐ</div>
                <div class="value">
                  <input ref="txtDiaChiLD_Dau" type="text" v-model="subscriptionFormInfo.diaChiLD" class="form-control">
                </div>

              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">Mã BSS</div>
                <div class="value">
                  <input ref="txtMaBSS" type="text" v-model="subscriptionFormInfo.maBSS" class="form-control">
                </div>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w110">
                  Trạm VT
                </div>
                <div class="value">
                  <!-- <ejs-dropdownlist :dataSource="listSatellite" :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                    v-model="subscriptionFormInfo.tramVT" noRecordsTemplate="Không có dữ liệu tìm kiếm"
                    :allowFiltering="true" @filtering="onFilteringDropDownList($event, listSatellite, 'ten_dv')" /> -->

                  <div class="select-custom" ref="tramvt">
                    <select2 :settings="{ dropdownParent: $refs['tramvt'] }" ref="cboTramVT"
                        v-model="subscriptionFormInfo.tramVT" class="select2"
                        :options="listSatellite.map(e=> ({id: e.donvi_id, text: e.ten_dv}))">
                    </select2>
                  </div>  
                </div>
              </div>
              
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">Số ảo</div>
                <div class="value">
                  <input ref="txtSoAo" type="text" v-model="subscriptionFormInfo.soAo" class="form-control highlight">
                </div>
              </div>

            </div>
          </div>
          <div class="info-row">
            <div class="key">Ghi chú</div>
            <div class="value">
              <textarea ref="txtGhiChu" name="" v-model="subscriptionFormInfo.ghiChu" class="form-control"
                style="height: 66px;resize: none;"></textarea>
            </div>

          </div>
        </div>
        <div class="col-sm-6 col-12" id="boxRight">
          <div class="legend-title mart20">Thông tin khách hàng</div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key">Tên khách hàng</div>
                <div class="value">
                  <input ref="txtTenKH" type="text" v-model="customerFormInfo.tenKhachHang" class="form-control">
                </div>

              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w100">
                  Mã khách hàng
                </div>
                <div class="value">
                  <input ref="txtMaKH" type="text" v-model="customerFormInfo.maKhachHang" class="form-control">
                </div>
              </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key">Địa chỉ KH</div>
            <div class="value">
              <input ref="txtDiaChiKH" type="text" v-model="customerFormInfo.diaChiKH" class="form-control">
            </div>

          </div>
          <div class="info-row">
            <div class="key">Địa chỉ TT</div>
            <div class="value">
              <input ref="txtDiaChiTT" type="text" v-model="customerFormInfo.diaChiTT" class="form-control">
            </div>

          </div>
          <div class="legend-title mart20">Lý do huỷ</div>
          <div class="info-row">
            <div class="key">Lý do</div>
            <div class="value">
              <div class="input-more-button">
                <button ref="btnEditLyDoHuy" v-b-tooltip.hover.bottom="'Lý do hủy'" class="btn"
                  @click="btnLyDoHuyClick">
                  <span class="-ap icon-more_horiz"></span>
                </button>
                <!-- <textarea ref="lvLyDoHuy" name="" v-model="customerFormInfo.lyDoHuy" class="form-control" style="height: 140px;resize: none;"></textarea> -->
                <ejs-listbox :cssClass="'list-lydohuy'" :fields="{ text: 'text', value: 'id'}"
                  :dataSource="dsDKHUY.map(r => ({ id: r.lydohuy_id, text: r.lydohuy }))"
                  v-model="lbLyDoHuy.SelectedItems" :itemTemplate="datatemplate"></ejs-listbox>
              </div>
            </div>

          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-12">
          <div class="legend-title">Điểm đầu</div>
          <div class="info-row">
            <div class="key">Địa chỉ LĐ</div>
            <div class="value">
              <input ref="txtDiaChiLD_Dau" type="text" v-model="startPointFormInfo.diaChiLD" class="form-control">
            </div>

          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w110">
                  Trạm VT
                </div>
                <div class="value">
                  <!-- <ejs-dropdownlist :dataSource="listSatellite" :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                    v-model="startPointFormInfo.tramVT" noRecordsTemplate="Không có dữ liệu tìm kiếm"
                    :allowFiltering="true" @filtering="onFilteringDropDownList($event, listSatellite, 'ten_dv')" /> -->
                    <div class="select-custom" ref="tramvtdau">
                      <select2 :settings="{ dropdownParent: $refs['tramvtdau'] }" ref="cboTramVTDau"
                          v-model="startPointFormInfo.tramVT" class="select2"
                          :options="listSatellite.map(e=> ({id: e.donvi_id, text: e.ten_dv}))">
                      </select2>
                    </div> 
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w70">Số ảo</div>
                <div class="value">
                  <input ref="txtSoAo_Dau" type="text" v-model="startPointFormInfo.soAo" class="form-control highlight">
                </div>
              </div>

            </div>
          </div>
        </div>
        <div class="col-sm-6 col-12">
          <div class="legend-title">Điểm cuối</div>
          <div class="info-row">
            <div class="key">Địa chỉ LĐ</div>
            <div class="value">
              <input ref="txtDiaChiLD_Cuoi" type="text" v-model="endPointFormInfo.diaChiLD" class="form-control">
            </div>

          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <div class="info-row">
                <div class="key w110">
                  Trạm VT
                </div>
                <div class="value">
                  <!-- <ejs-dropdownlist :dataSource="listSatellite" :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                    v-model="endPointFormInfo.tramVT" noRecordsTemplate="Không có dữ liệu tìm kiếm"
                    :allowFiltering="true" @filtering="onFilteringDropDownList($event, listSatellite, 'ten_dv')" /> -->
                    <div class="select-custom" ref="tramvtcuoi">
                      <select2 :settings="{ dropdownParent: $refs['tramvtcuoi'] }" ref="cboTramVTCuoi"
                          v-model="endPointFormInfo.tramVT" class="select2"
                          :options="listSatellite.map(e=> ({id: e.donvi_id, text: e.ten_dv}))">
                      </select2>
                    </div> 
                </div>
              </div>
            </div>
            <div class="col-sm-4 col-12">
              <div class="info-row">
                <div class="key w60">Số ảo</div>
                <div class="value">
                  <input ref="txtSoAo_Cuoi" type="text" v-model="endPointFormInfo.soAo" class="form-control highlight">
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="box-form">
      <div class="legend-title">
        <div class="pull-left">
          Danh sách thuê bao
        </div>
        <div class="pull-right">
          <div class="list-checks red normal">
            <div class="item">
              <div class="check-action">
                <input ref="chkThuHoi" type="checkbox" v-model="checkboxThuHoiThietBiGiaoDich" class="check"
                  @change="ckbThuHoiChange">
                <span class="name">Thu hồi thiết bị tại giao dịch</span>
              </div>
            </div>
            <div class="item">
              <div class="check-action">
                <input ref="ckbKhong_TH" type="checkbox" v-model="checkboxKhongCanThuHoiThietBi" class="check"
                  @change="ckbKhongThuHoiChange">
                <span class="name">Không cần thu hồi thiết bị</span>
              </div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="table-content">

        <ejs-grid ref="lvwThueBao" :dataSource="dsThueBao" :allowPaging="true" :pageSettings="pageSettings"
          :allowSorting="false" :allowFiltering="true" :allowTextWrap="true"
          @rowSelected="lvwThueBaoSelectedIndexChanged" gridLines="Both">
          <e-columns>
            <!-- <e-column type='checkbox' width='50'></e-column> -->
            <e-column field="stt" headerText="Stt" width=80></e-column>
            <e-column field="hdtb_ID" isPrimaryKey='true' :visible="false"></e-column>
            <e-column field="ma_TB" headerText="Số máy/Acc" width=200></e-column>
            <e-column field="ten_TB" headerText="Tên thuê bao"></e-column>
            <e-column field="diachi_TB" headerText="Địa chỉ thuê bao"></e-column>
            <e-column field="dichvuvt_ID" headerText="dvID" :visible="false"></e-column>
            <e-column field="trangthai_DONGBO" headerText="Trạng thái đồng bộ"></e-column>
          </e-columns>
        </ejs-grid>
      </div>
    </div>
  </div>
  <footer class="footer">
    VNPT-IT &copy; 2021
  </footer>
  <UploadEProfile ref="uploadEProfile" :style="{display: isShowUploadEProfile ? 'block' : 'none'}"
    @close="() => {isShowUploadEProfile = false}"></UploadEProfile>
  <DialogGiaoPhieu ref="dlgGiaoPhieu" :dichVu="requestFormInfo.dichVu" @close="onGiaoPhieuClose" />
  <DialogUpHoSo ref="dlgUpHoSo" @close="onUpHoSoClose" />
  <DialogLyDoHuy ref="dlgHuy" :loaildID="1" :loaitbID="loaitb_id" @onAccept="onDialogLyDoHuyAccepted" />
  <DialogSearchAccount ref="dlgSearchAccount" :isDialog="true" @onSelectCustomer="onSelectCustomer" />
  <SearchContractModal ref="dlgSearchContract" @accept="onAcceptSearchContract" :loai_hd_id="4"
    :dichvu_id="requestFormInfo.dichVu" :ngay_yc="requestFormInfo.ngayYC?requestFormInfo.ngayYC:''"
    :ngay_kt="requestFormInfo.ngayYC?requestFormInfo.ngayYC:''" :trangthai_hd="1" />
  <DialogTraCuuThueBao ref="dlgTraCuuThueBao" @chapnhan="onTraCuuAccept" />
  <DialogEmail ref="dlgEmail" />
  <DialogInHoSo ref="dlgInHopDong" :params="inHoSoParams" />
  <vue-html2pdf style="visibility: hidden;" :show-layout="true" :float-layout="true" :enable-download="false"
    :preview-modal="false" filename="hehehe" :paginate-elements-by-height="1100" :pdf-quality="2" pdf-format="a4"
    pdf-orientation="portrait" pdf-content-width="800px" :manual-pagination="false"
    @beforeDownload="beforeDownload($event)" ref="html2Pdf">
    <section slot="pdf-content">
      <div class="container-page">
        <div class="ber center f23 mt-50">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</div>
        <div class="ber center u f20">Độc lập - Tự do - Hạnh phúc</div>
        <div class="b r">
          <div class="border-2 mr-45 p-h p-h-35 f17 mt-15">{{ customerFormInfo.maKhachHang }}</div>
        </div>
        <div class="title center flex-column">
          <div class="title-page ber">PHIẾU YÊU CẦU</div>
          <div class="title-page ber">ĐĂNG KÝ, HỦY DỊCH VỤ CỘNG THÊM</div>
        </div>
        <div class="info-client mt-25">
          <div class="info-client__contain">
            <div class="info-client__left">Tên khách hàng:</div>
            <div class="info-client__right b">{{ customerFormInfo.tenKhachHang }}</div>
          </div>
          <div class="info-client__contain">
            <div class="info-client__left">Địa chỉ khách hàng:</div>
            <div class="info-client__right b">{{ customerFormInfo.diaChiKH }}</div>
          </div>
        </div>
        <div class="center flex-column">
          <div class="ber f18 mt-15">NỘI DUNG YÊU CẦU</div>
          <table class="table-print">
            <thead class="table-header">
              <tr>
                <th>STT</th>
                <th>Số máy/Account</th>
                <th>Loại hình thuê bao</th>
                <th>Tên dịch vụ</th>
                <th>Ngày đăng ký</th>
                <th>Ghi chú</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="item of dsThueBaoPrint">
                <td>{{ item.index }}</td>
                <td>{{ item.ma_TB }}</td>
                <td>{{ item.ten_TB }}</td>
                <td>{{ item.ten_DVVT }}</td>
                <td>{{ item.ngaylap_HD }}</td>
                <td>{{ item.ghichu }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="info-client mt-25">
          <div class="sign-client__contain">
            <div class="sign-client__left">
              <div class="center flex-column">
                <div class="f17 b">Giao dịch viên</div>
                <div class="f17 italic">(Ký, ghi rõ họ tên)</div>
              </div>
            </div>
            <div class="sign-client__right">
              <div class="center flex-column">
                <div class="f17 italic">Hải Phòng, ngày {{ datePrint }} tháng {{ monthPrint }} năm {{
                  yearPrint }}</div>
                <div class="f17 b">Đại diện, cơ quan hoặc cá nhân</div>
                <div class="f17 italic">(Ký tên, đóng dấu, ghi rõ họ tên)</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </vue-html2pdf>
  <VatTuThueBao ref="dlgVatTuThueBao" :inputData="dlgVatTuInput" />
  <DialogHenKH ref="dlgHenKH" :hdkh_id="hdkh_id" />
  <PopupCapNhatDV ref='popupCapNhatDV' />
  <!-- <DongBo ref="dlgDongBo" /> -->
</div>
