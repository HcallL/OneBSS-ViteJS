<div class="main-wrapper" id="khoiPhucThanhLy">
    <div class="breadcrumb-top">
        <div class="main-title">khôi phục thuê bao thanh lý</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item"><a href="#">Lập hợp đồng</a></li>
            <li class="breadcrumb-item active">Khôi phục thuê bao thanh lý</li>
        </ul>
    </div>
    <b-tooltip target="tooltip-target-1" placement="bottom" title="Nhập mới" boundary="viewport" />
    <b-tooltip target="tooltip-target-2" placement="bottom" title="Ghi lại" boundary="viewport" />
    <b-tooltip target="tooltip-target-3" placement="bottom" title="Hủy" boundary="viewport" />
    <b-tooltip target="tooltip-target-4" placement="bottom" title="Xóa HĐ" boundary="viewport" />
    <b-tooltip target="tooltip-target-5" placement="bottom" title="Thanh toán" boundary="viewport" />
    <b-tooltip target="tooltip-target-6" placement="bottom" title="Thêm TB" boundary="viewport" />
    <b-tooltip target="tooltip-target-7" placement="bottom" title="Xóa TB" boundary="viewport" />
    <b-tooltip target="tooltip-target-8" placement="bottom" title="Giao phiếu" boundary="viewport" />
    <b-tooltip target="tooltip-target-9" placement="bottom" title="Liên hệ" boundary="viewport" />
    <b-tooltip target="tooltip-target-10" placement="bottom" title="Email" boundary="viewport" />
    <div class="list-actions-top">
        <ul class="list">
            <li id="tooltip-target-1">
                <a @click="btnNhapMoiClick" class="cursor-pointer" :class="tsbtnNhapMoi.Enabled ? '' : 'disabled'">
                    <span class="icon one-file-plus"></span>Nhập mới(F5)
                </a>
            </li>
            <li id="tooltip-target-2">
                <a @click="btnGhiLaiClick" class="cursor-pointer" :class="tsbtnGhiLai.Enabled ? '' : 'disabled'">
                    <span class="icon one-save"></span>Ghi lại (F9)
                </a>
            </li>
            <li id="tooltip-target-3">
                <a @click="btnHuyBoClick" class="cursor-pointer" :class="tsbtnHuyBo.Enabled ? '' : 'disabled'">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Huỷ
                </a>
            </li>
            <li id="tooltip-target-4">
                <a @click="btnXoaHD_Click" class="cursor-pointer" :class="tsbtnXoa.Enabled ? '' : 'disabled'">
                    <span class="icon one-trash"></span>Xoá HĐ (F8)
                </a>
            </li>
            <li id="tooltip-target-5">
                <a class="cursor-pointer" :class="tsbtnThanhToan.Enabled ? '' : 'disabled'" @click.prevent='btnThanhToan_Click'>
                    <span class="icon nc-icon-glyph shopping_credit-card"></span>Thanh toán
                </a>
            </li>
            <li id="tooltip-target-6">
                <a @click="btnThemTB_Click" class="cursor-pointer" :class="tsbtnThemTB.Enabled ? '' : 'disabled'">
                    <span class="icon one-mobile-plus"></span>Thêm TB 
                </a>
            </li>
            <li id="tooltip-target-7">
                <a @click="btnXoaTB_Click" class="cursor-pointer" :class="tsbtnXoaTB.Enabled ? '' : 'disabled'">
                    <span class="icon one-phone-remove"></span>Xóa TB
                </a>
            </li>
            <li id="tooltip-target-8">
                <a class="cursor-pointer" :class="tsbtnGiaoPhieu.Enabled ? '' : 'disabled'" @click.prevent="tsbtnGiaoPhieu_Click">
                    <span class="icon one-file-arrow-right1"></span>Giao phiếu
                </a>
            </li>
            <li id="tooltip-target-9">
                <a class="cursor-pointer" :class="tsbtnThongTinLH.Enabled ? '' : 'disabled'" @click.prevent="btnLienHe_Click">
                    <span class="icon nc-icon-glyph business_contacts"></span>Liên hệ
                </a>
            </li>
            <li id="tooltip-target-10">
                <a class="cursor-pointer" :class="tsbtnEmail.Enabled ? '' : 'disabled'" @click.prevent="btnEmail_Click">
                    <span class="icon one-email"></span>Email
                </a>
            </li>
        </ul>
        
    </div>
    <div class="page-content">
        <div class="box-form padt8 padb8">
            <div class="row">
                <div class="col-sm-6 col-12"></div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkCTV.Checked" :disabled="!chkCTV.Enabled" @change="chkCTVChange">
                                <span class="name">Cộng tác viên</span>
                            </div>
                        </div>
                        <div class="value">
                            <input ref="txtCTV" type="text" class="form-control" v-model="txtCTV.Text">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkNguoiGT.Checked" :disabled="!chkNguoiGT.Enabled" @change="chkNguoiGTChange">
                                <span class="name">Người giới thiệu</span>
                            </div>
                        </div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtNguoiGT.Text">
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row marb0">
                        <div class="key w30 nowrap">
                            Tổng tiền
                        </div>
                        <div class="value">
                            <input type="text" class="form-control tright" v-model="txtTongTienHD.Text">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Thông tin phiếu yêu cầu</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã giao dịch</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button v-b-tooltip.hover.bottom="'Lấy mã giao dịch'" class="btn" @click="btnMaGD_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtMaGD" v-model="txtMaGD.Text" @keydown="onTransactionCodeChange($event)" type="text" class="form-control ">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày yêu cầu</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <date-picker placeholder="dd/mm/yyyy" v-model="dtpNgayYeuCau.Value" :formatter="momentFormat"
                                    valueType="format"></date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã hợp đồng</div>
                                <div class="value">
                                    <input type="text" v-model="txtMaHD.Text" class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày lập HĐ</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <date-picker placeholder="dd/mm/yyyy" v-model="dtpNgayLapHD.Value" :formatter="momentFormat"
                                    valueType="format"></date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <!-- <select3 label="Dịch vụ" :options="listTelecomService" v-model="cboDichVuVT.SelectedValue" valueField="dichvuvt_id"
                            labelField="ten_dvvt" labelWidth="90"/> -->
                                <div class="key w90">
                                    Dịch vụ
                                </div>
                                <div class="value">
                                <ejs-dropdownlist 
                                    :dataSource="cboDichVuVT.Items" 
                                    v-model="cboDichVuVT.SelectedValue" 
                                    :fields="{ text: 'ten_dvvt', value: 'dichvuvt_id' }"
                                    :allowFiltering="true"
                                    noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    @filtering="onFilteringDropDownList($event, cboDichVuVT.Items, 'ten_dvvt')"
                                    @change="cboDichVuVT_SelectedValueChanged"
                                />
                            </div> 
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="info-row">
                                    <!-- <select3 label="Loại hình" :options="listSubscriptionType" v-model="cboLoaihinhTB.SelectedValue" valueField="LOAITB_ID"
                                    labelField="LOAIHINH_TB" labelWidth="90" @input="onSubscriptionTypeChange"/> -->
                                    <div class="key w90">
                                        Loại hình
                                    </div>
                                    <div class="value">
                                        <ejs-dropdownlist 
                                            :dataSource="cboLoaihinhTB.Items" 
                                            v-model="cboLoaihinhTB.SelectedValue" 
                                            :fields="{ text: 'LOAIHINH_TB', value: 'LOAITB_ID' }"
                                            :allowFiltering="true"
                                            @filtering="onFilteringDropDownList($event, cboLoaihinhTB.Items, 'LOAIHINH_TB')"
                                            noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                            @change="cboLoaihinhTB_SelectedValueChanged"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <!-- <select3 ref="cboKieuLD" label="Kiểu yêu cầu" :options="listRequestType" v-model="cboKieuLD.SelectedValue" valueField="ID"
                            labelField="NAME" labelWidth="90"/> -->
                            <div class="key w90">
                                Kiểu yêu cầu
                            </div>
                            <div class="value">
                                <ejs-dropdownlist 
                                    :dataSource="cboKieuLD.Items" 
                                    v-model="cboKieuLD.SelectedValue" 
                                    :fields="{ text: 'NAME', value: 'ID' }"
                                    :allowFiltering="true"
                                    @filtering="onFilteringDropDownList($event, cboKieuLD.Items, 'NAME')"
                                    noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    @change="cboKieuLD_SelectedValueChanged"
                                />
                            </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày thanh lý</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <date-picker placeholder="dd/mm/yyyy" v-model="dtpNgayTL.Value" :formatter="momentFormat"
                                    valueType="format"></date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                   
                </div>
            </div>
            <div class="legend-title mart20">Thông tin thuê bao</div>
            <div class="row">
                <div class="col-sm-6 col-12" id="boxLeft">
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Số máy/Acc</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button v-b-tooltip.hover.bottom="'Tìm kiếm'" class="btn" @click="btnSearchAccountClick">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtMaTB" v-model="txtMaTB.Text" @keydown="onMaTBKeyPress($event)" type="text" class="form-control highlight">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã TN</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button v-b-tooltip.hover.bottom="'Chọn mã truy nhập'" class="btn" @click="btnMaTN_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtMaTN_ADSL" type="text" v-model="txtMaTN_ADSL.Text" class="form-control highlight">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên thuê bao</div>
                                <div class="value">
                                    <input type="text" v-model="txtTenTB.Text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Khu vực</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button v-b-tooltip.hover.bottom="'Tìm kiếm thông tin khu vực'" ref="btnMaNVKD" class="btn" @click="btnMaNVKD_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input ref="txtKhuVuc" type="text" v-model="txtKhuVuc.Text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Địa chỉ TB</div>
                                <div class="value">
                                    <input type="text" v-model="txtDiaChiTB.Text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key">
                                    <div class="check-action">
                                        <input v-model="chkDungThu.Checked" type="checkbox" class="check" :disabled="!chkDungThu.Enabled">
                                        <span class="name">Dùng thử</span>
                                    </div>
                                </div>
                    
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Địa chỉ LĐ</div>
                                <div class="value">
                                    <input type="text" v-model="txtDiaChiLD.Text" class="form-control">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Ghi chú</div>
                                <div class="value">
                                    <input type="text" v-model="txtGhiChu.Text" class="form-control">
                                </div>
                            </div>
                        </div>
                    
                    </div>
                </div>
                <div class="col-sm-6 col-12" id="boxRight">
                    <div>
                        <!-- Panel co dinh -->
                        <div class="overlay-panel" :class="{ visible: ![4,7,8,10,11].includes(parseInt(cboDichVuVT.SelectedValue))}">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <ejs-dropdownlist 
                                        :dataSource="cboDaiVT_CD.Items" 
                                        v-model="cboDaiVT_CD.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboDaiVT_CD.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                        @change="cboDaiVT_CD_SelectedValueChanged"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                        <ejs-dropdownlist 
                                        :dataSource="cboTram_CD.Items" 
                                        v-model="cboTram_CD.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboTram_CD.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Mức cước TB</div>
                                <div class="value">
                                            <ejs-dropdownlist 
                                        :dataSource="cboMucCuocTB_CD.Items" 
                                        v-model="cboMucCuocTB_CD.SelectedValue" 
                                        :fields="{ text: 'tenmuccuoc', value: 'mucuoctb_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboMucCuocTB_CD.Items, 'tenmuccuoc')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                </div>
                            </div>
                        </div>
                        <!-- Panel IMS -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 11 }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <ejs-dropdownlist 
                                        :dataSource="cboDaiVT_IMS.Items" 
                                        v-model="cboDaiVT_IMS.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboDaiVT_IMS.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                        @change="cboDaiVT_IMS_SelectedValueChanged"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                    <ejs-dropdownlist 
                                        :dataSource="cboTram_IMS.Items" 
                                        v-model="cboTram_IMS.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboTram_IMS.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Mức cước TB</div>
                                <div class="value">
                                            <ejs-dropdownlist 
                                        :dataSource="cboMucCuocTB_IMS.Items" 
                                        v-model="cboMucCuocTB_IMS.SelectedValue" 
                                        :fields="{ text: 'tenmuccuoc', value: 'mucuoctb_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboMucCuocTB_IMS.Items, 'tenmuccuoc')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                </div>
                            </div>
                        </div>
                        <!-- Panel METRONET & MEGAWAN -->
                        <div class="overlay-panel" :class="{ visible: (cboDichVuVT.SelectedValue == 7 || cboDichVuVT.SelectedValue == 8) }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <ejs-dropdownlist 
                                        :dataSource="cboDVQL_MGW.Items" 
                                        v-model="cboDVQL_MGW.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboDVQL_MGW.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                        @change="cboDVQL_MGW_SelectedValueChanged"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                        <ejs-dropdownlist 
                                        :dataSource="cboTram_MGW.Items" 
                                        v-model="cboTram_MGW.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboTram_MGW.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tốc độ</div>
                                        <div class="value" style="pointer-events:none !important; ">
                                                <ejs-dropdownlist 
                                                :dataSource="cboTocDo_MGW.Items ? cboTocDo_MGW.Items.map(e => ({id: e.tocdo_id, text: '['+e.tocdo_id+'] - ' + e.toc_do})) : []" 
                                                v-model="cboTocDo_MGW.SelectedValue" 
                                                :fields="{ text: 'text', value: 'id' }"
                                                :allowFiltering="true"
                                                @filtering="onFilteringDropDownList($event, cboTocDo_MGW.Items, 'text')"
                                                noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                            />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số ảo</div>
                                        <div class="value">
                                            <input type="text" class="form-control highlight" v-model="txtSoAo_Wan.Text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Hướng KN</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtHuongKN.Text">
                                </div>
                            </div>
                        </div>
                        <!-- Panel GP -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 10 }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <ejs-dropdownlist 
                                        :dataSource="cboDVQLGP.Items" 
                                        v-model="cboDVQLGP.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboDVQLGP.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Số Sim</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtSoSimGphone.Text">
                                </div>
                            </div>
                        </div>
                        <!-- Panel ADSL -->
                        <div class="overlay-panel" :class="{ visible: cboDichVuVT.SelectedValue == 4 }">
                            <div class="info-row">
                                <div class="key w90">Đơn vị QL</div>
                                <div class="value">
                                    <ejs-dropdownlist 
                                        :dataSource="cboDaiVT_ADSL.Items" 
                                        v-model="cboDaiVT_ADSL.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboDaiVT_ADSL.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                        @change="cboDaiVT_ADSL_SelectedValueChanged"
                                    />
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Trạm VT</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <ejs-dropdownlist 
                                        :dataSource="cboVeTinh_Adsl.Items" 
                                        v-model="cboVeTinh_Adsl.SelectedValue" 
                                        :fields="{ text: 'ten_dv', value: 'donvi_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboVeTinh_Adsl.Items, 'ten_dv')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                    </div>
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tốc độ</div>
                                        <div class="value" style="pointer-events:none !important; ">
                                            <ejs-dropdownlist 
                                                :dataSource="cboTocDo_Adsl.Items ? cboTocDo_Adsl.Items.map(e => ({id: e.tocdo_id, text: '['+e.tocdo_id+'] - ' + e.thuonghieu})) : []" 
                                                v-model="cboTocDo_Adsl.SelectedValue" 
                                                :fields="{ text: 'text', value: 'id' }"
                                                :allowFiltering="true"
                                                @filtering="onFilteringDropDownList($event, cboTocDo_Adsl.Items, 'text')"
                                                noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                                @change="cboTocDoADSL_SelectedValueChanged"
                                            />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mức cước</div>
                                        <div class="value">
                                            <ejs-dropdownlist 
                                                :dataSource="cboMucCuoc_ADSL.Items" 
                                                v-model="cboMucCuoc_ADSL.SelectedValue"
                                                :fields="{ text: 'tenmuccuoc', value: 'muccuoc_id' }" 
                                                :allowFiltering="true"
                                                @filtering="onFilteringDropDownList($event, cboMucCuoc_ADSL.Items, 'tenmuccuoc')"
                                                noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                                />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mức cước TB</div>
                                        <div class="value" style="pointer-events:none !important; ">
                                            <ejs-dropdownlist 
                                                :dataSource="cboMucCuocTB_ADSL.Items" 
                                                v-model="cboMucCuocTB_ADSL.SelectedValue" 
                                                :fields="{ text: 'tenmuccuoc', value: 'mucuoctb_id' }"
                                                :allowFiltering="true"
                                                @filtering="onFilteringDropDownList($event, cboMucCuocTB_ADSL.Items, 'tenmuccuoc')"
                                                noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                            />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số ảo</div>
                                        <div class="value">
                                            <input type="text" class="form-control highlight" v-model="txtSoAo_ADSL.Text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">
                                            <div class="check-action">
                                                <input type="checkbox" class="check" v-model="chkDoiTac_ADSL.Checked" @change="chkDoiTac_ADSL_CheckedChanged">
                                                <span class="name">Đối tác</span>
                                            </div>
                                        </div>
                                        <div class="value">
                                            <ejs-dropdownlist 
                                        :dataSource="cboDoiTac_ADSL.Items" 
                                        :enabled="cboDoiTac_ADSL.Enabled"
                                        v-model="cboDoiTac_ADSL.SelectedValue" 
                                        :fields="{ text: 'ten_dt', value: 'doitac_id' }"
                                        :allowFiltering="true"
                                        @filtering="onFilteringDropDownList($event, cboDoiTac_ADSL.Items, 'ten_dt')"
                                        noRecordsTemplate="Không có dữ liệu tìm kiếm"
                                    />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Cước ĐT</div>
                                        <div class="value">
                                            <input type="text" class="form-control" v-model="txtCuocDT_Adsl.Text" :disabled="!txtCuocDT_Adsl.Enabled">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-12" id="boxLeft1">
                    <div class="legend-title mart20">Thông tin khách hàng</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã KH</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="txtMaKH.Text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Số điện thoại</div>
                                <div class="value">
                                    <input ref="txtSoDT" type="text" class="form-control" v-model="txtSoDT.Text">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Tên KH</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtTenKH.Text">
                        </div>
                    </div>
                    
                    <div class="info-row">
                        <div class="key w90">Địa chỉ KH</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtDiaChiKH.Text">
                        </div>
                    </div>
                    <div class="legend-title mart20">Dịch vụ cộng thêm</div>
                    <div class="info-row">
                        <div class="key w90"></div>
                        <div class="value">
                            <div class="input-more-button">
                                <button v-b-tooltip.hover.bottom="'Dịch vụ cộng thêm'" class="btn" @click="btnDvCongThem_Click">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <!-- <textarea name="" class="form-control" style="height: 100px;resize: none;"></textarea> -->
                                <ejs-listbox :cssClass="'form-control listbox'" :dataSource="lvDvgt.Items.map(r => ({ id: r.DICHVUGT_ID, text: r.TEN_DVGT }))"></ejs-listbox>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title mart20">Chi tiết tiền khoản mục</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w90">Tổng tiền</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button v-b-tooltip.hover.bottom="'Chi tiết tiền khoản mục'" class="btn" @click="btnTienKM_Click">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" class="form-control tright red" value="0" disabled v-model="txtTongTien.Text">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w90">Tổng VAT</div>
                                <div class="value">
                                    <input type="text" class="form-control tright red" value="0" disabled v-model="txtTongVat.Text">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="col-sm-6 col-12" id="boxRight1">
                    <div class="legend-title mart20">Thông tin thanh toán</div>
                    <div class="info-row">
                        <div class="key w90">Mã TT</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtMaTT.Text">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Tên TT</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtTenTT.Text">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Địa chỉ TT</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtDiaChiTT.Text">
                        </div>
                    </div>
                    <div class="legend-title mart20">Dịch vụ khác</div>
                    <div class="info-row">
                        <div class="key w90"></div>
                        <div class="value">
                            <div class="input-more-button">
                                <button v-b-tooltip.hover.bottom="'Tìm kiếm dịch vụ'" class="btn" @click="btnDvKhac_Click">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <ejs-listbox :cssClass="'form-control listbox'" :dataSource="lvDvkhac.Items.map(r => r)"></ejs-listbox>
                                <!-- <textarea name="" class="form-control" style="height: 100px;resize: none;"></textarea> -->
                            </div>
                        </div>
                    </div>
                    <div class="legend-title mart20">Thông tin tính cước</div>
                    <div class="info-row">
                        <div class="key w90">TTTC</div>
                        <div class="value" :class="{disabled: true}">
                            <div class="input-more-button">
                                <button v-b-tooltip.hover.bottom="'Tìm kiếm thông tin tính cước'" class="btn" @click="btnThongTinCuoc_Click">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <textarea ref="txtTTCuoc" name="" class="form-control" style="height: 100px;resize: none;" v-model="txtTTCuoc.Text"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách thuê bao</div>
            <ejs-grid
              ref="lvwThueBao"
              :dataSource="dgvDanhSach.Rows"
              :allowPaging="true"
              :pageSettings="pageSettings"
              :selectionSettings="gridSelectionSettings"
              :allowSorting="false"
              :allowFiltering="true"
              :allowTextWrap="true"
              gridLines="Both"
              @rowSelected="dgvDanhSach_SelectionChanged"
            >
              <e-columns>
                <!-- <e-column type='checkbox' width='50'></e-column> -->
                <e-column` field="stt" headerText="Stt" width=80></e-column>
                <e-column field="hdtb_id" isPrimaryKey='true' :visible="false"></e-column>
                <e-column field="ma_tb" headerText="Số máy/Acc" width=200></e-column>
                <e-column field="ten_tb" headerText="Tên thuê bao"></e-column>
                <e-column field="diachi_tb" headerText="Địa chỉ thuê bao"></e-column>
                <e-column field="dichvuvt_id" headerText="dvID" :visible="false"></e-column>
                <e-column field="trangthai_dongbo" headerText="Trạng thái đồng bộ"></e-column>
              </e-columns>
            </ejs-grid>  
        </div>
    </div>
    <footer class="footer">
        VNPT-IT &copy; 2021
    </footer>
    <b-modal id="popupComponents" ref="popupComponents" size="xl"
    hide-footer
    hide-header
    hide-header-close
    body-class="modal-body p-0">
        <component :is="popupComponent" ref="generalPopup" @form-close="popupClosed" :dulieu="popupComponentData" v-bind="popupComponentAttr" isPopup="true" v-on="popupComponentEvts"></component> <!--v-dynamic-events="popupComponentEvents"-->
    </b-modal>
    <DialogSearchAccount ref="dlgSearchAccount" :isDialog="true" @onSelectCustomer="onSelectCustomer"/>
    <DialogKhuVuc ref="dlgKhuVuc" @onAccept="dlgKhuVucChapNhan"/>
    <DialogTienKhoanMuc ref="dlgTienKhoanMuc" @onAccept="dlgTienKM_Close"/>
    <DialogDVCongThem ref="dlgDvCongThem" @onAccept="dlgDvCongThem_formClose"/>
    <DialogDVKhac ref="dlgDvKhac" @onAccept="dlgDvKhac_Close"/>
    <DialogMaTN ref="dlgMaTN" @onClose="dlgMaTN_Close"/>
    <DialogTinhCuoc ref="dlgTinhCuoc" @onAccept="dlgTinhCuoc_onAccept"/>
    <DialogThongTinLienHe ref="dlgLienHe"/>
    <DialogEmail ref="dlgEmail"/>
    <DialogNguoiGioiThieu ref="dlgNguoiGioiThieu" @onAccept="dlgNguoiGioiThieu_Accept"/>
    <SearchContractModal ref="dlgSearchContract" @accept="onAcceptSearchContract" :loai_hd_id="30" :dichvu_id="parseInt(cboDichVuVT.SelectedValue)" :ngay_yc="dtpNgayYeuCau.Value" :trangthai_hd="1" />
</div>
