<div v-bind:class="[!isPopup ? 'main-wrapper' : 'modal-content popup-box']">
    <breadcrumb :header="header" v-if="!isPopup" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="#" @click.prevent="btnSearchClicked">
                    <span class="icon one-search"></span>Tìm kiếm
                </a>
            </li>
            <li v-if="isPopup">
                <a href="#" @click.prevent="btnChonClick">
                    <span class="icon one-clipart-add"></span>Chọn
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnExportFile">
                    <span class="icon one-download"></span>Xuất File
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="btnExportFileClicked">
                    <span class="icon one-xlsx-import"></span>Xuất Excel
                </a>
            </li>
            
            
        </ul>
        
    </div>
    <div v-bind:class="[!isPopup ? 'page-content' : 'popup-body']">
        <div class="box-form">
            <div class="legend-title">Thông tin tra cứu</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="info-row">
                        <div class="key w90">Tra cứu theo</div>
                        <!-- <div class="value">
                            <div class="row">
                                <div class="col-sm-4 col-12">
                                    <div class="select-custom">
                                        <select name="" id="" class="form-control" v-model="listbox.ds_dktracuu1.value">
                                            <option  v-for="dktracuu in listbox.ds_dktracuu1.list" v-bind:value="dktracuu">{{ dktracuu.kieu_tk }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-8 col-12">
                                    <input type="text" class="form-control" v-model="txtTraCuu" v-on:keyup.enter="onTraCuuEnter">
                                </div>
                            </div>
                        </div> -->
                        <div class="value">
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <SelectExt class="select-custom" v-model="listbox.dk_tracuu.dk1.value" :dataSource="listbox.dk_tracuu.list" dataTextField="NAME" dataValueField="ID" :disabled="!listbox.dk_tracuu.dk1.isEnabled"></SelectExt>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <input type="text" class="form-control" v-model="listbox.dk_tracuu.dk1.value_text" v-on:keyup.enter="SearchClient">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="listbox.dk_tracuu.dk2.isEnabled">
                                <span class="name">Tra theo</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <SelectExt class="select-custom" v-model="listbox.dk_tracuu.dk2.value" :dataSource="listbox.dk_tracuu.list" dataTextField="NAME" dataValueField="ID" :disabled="!listbox.dk_tracuu.dk2.isEnabled"></SelectExt>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <input type="text" class="form-control" :disabled="!listbox.dk_tracuu.dk2.isEnabled" v-model="listbox.dk_tracuu.dk2.value_text" v-on:keyup.enter="SearchClient">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="listbox.dk_tracuu.dk3.isEnabled">
                                <span class="name">Tra theo</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="row">
                                <div class="col-sm-6 col-12">
                                    <SelectExt class="select-custom" v-model="listbox.dk_tracuu.dk3.value" :dataSource="listbox.dk_tracuu.list" dataTextField="NAME" dataValueField="ID" :disabled="!listbox.dk_tracuu.dk3.isEnabled"></SelectExt>
                                </div>
                                <div class="col-sm-6 col-12">
                                    <input type="text" class="form-control" :disabled="!listbox.dk_tracuu.dk3.isEnabled" v-model="listbox.dk_tracuu.dk3.value_text" v-on:keyup.enter="SearchClient">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="info-row">
                        <div class="key w90">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="tratheo_1">
                                <span class="name">Tra theo</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="row">
                                <div class="col-sm-4 col-12">
                                    <div class="select-custom">
                                        <select name="" id="" class="form-control" v-model="listbox.ds_dktracuu2.value" :disabled="!isTraTheo1">
                                            <option  v-for="dktracuu in listbox.ds_dktracuu2.list" v-bind:value="dktracuu">{{ dktracuu.kieu_tk }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-8 col-12">
                                    <input type="text" class="form-control" v-model="txtTraCuu1" :disabled="!isTraTheo1">
                                </div>
                            </div>
                        </div>
                    </div> -->                    
                    <!-- <div class="info-row">
                        <div class="key w90">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="tratheo_2">
                                <span class="name">Tra theo</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="row">
                                <div class="col-sm-4 col-12">
                                    <div class="select-custom">
                                        <select name="" id="" class="form-control" v-model="listbox.ds_dktracuu3.value" :disabled="!isTraTheo2">
                                            <option  v-for="dktracuu in listbox.ds_dktracuu3.list" v-bind:value="dktracuu">{{ dktracuu.kieu_tk }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-8 col-12">
                                    <input type="text" class="form-control" v-model="txtTraCuu2" :disabled="!isTraTheo2">
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div class="legend-title mart20">Lọc theo</div>
                    <div class="row">
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="dich_vu1">
                                        <span class="name">Dịch vụ</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <!-- <select name="" id="" class="form-control" v-model="listbox.ds_dichvu1.value.dichvuvt_id" :disabled="!isDichVu1" @change="DichVuChanged">
                                            <option  v-for="dichvu in listbox.ds_dichvu1.list" v-bind:value="dichvu.dichvuvt_id">{{ dichvu.ten_dvvt }}</option>
                                        </select> -->
                                        <select2 :options="listbox.ds_dichvu1.list" v-model="listbox.ds_dichvu1.value.dichvuvt_id" @change="DichVuChanged" :disabled="!isDichVu1"> 
                                            <option disabled value="0">Select one</option> 
                                        </select2> 
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="loai_hinh">
                                        <span class="name">Loại hình</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <!-- <select name="" id="" class="form-control" v-model="listbox.ds_loaihinh.value.dichvuvt_id" :disabled="!isLoaiHinh" @change="LoaiHinhChanged">
                                            <option  v-for="loaihinh in listbox.ds_loaihinh.list" v-bind:value="loaihinh.loaitb_id">{{ loaihinh.loaihinh_tb }}</option>
                                        </select> -->
                                        <select2 :options="listbox.ds_loaihinh.list" v-model="listbox.ds_loaihinh.value.loaitb_id" @change="LoaiHinhChanged" :disabled="!isLoaiHinh"> 
                                            <option disabled value="0">Select one</option> 
                                        </select2> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="dich_vu">
                                        <span class="name">Dịch vụ</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <!-- <select name="" id="" class="form-control" v-model="listbox.ds_dichvu.value.dichvuvt_id" :disabled="!isDichVu">
                                            <option  v-for="dichvu in listbox.ds_dichvu.list" v-bind:value="dichvu.dichvuvt_id">{{ dichvu.ten_dvvt }}</option>
                                        </select> -->
                                        <select2 :options="listbox.ds_dichvu.list" v-model="listbox.ds_dichvu.value.dichvuvt_id" :disabled="!isDichVu"> 
                                            <option disabled value="0">Select one</option> 
                                        </select2> 
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="don_vi">
                                        <span class="name">Đơn vị</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="select-custom">
                                        <!-- <select name="" id="" class="form-control" v-model="listbox.ds_donvi.value.donvi_id" :disabled="!isDonVi">
                                            <option  v-for="donvi in listbox.ds_donvi.list" v-bind:value="donvi.donvi_id">{{ donvi.ten_dv }}</option>
                                        </select> -->
                                        <select2 :options="listbox.ds_donvi.list" v-model="listbox.ds_donvi.value.donvi_id" :disabled="!isDonVi"> 
                                            <option disabled value="0">Select one</option> 
                                        </select2> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w80">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="ma_kh">
                                <span class="name">Mã KH</span>
                            </div>
                        </div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="txtMaKH" :disabled="!isMaKH">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Số máy/Acc
                                </div>
                                <div class="value">
                                    <input type="text" v-model="txtSoMayAcc" class="form-control" @keydown="isSearchtxtSoMayAcc=true">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key w80">
                                    Số ảo
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model='txtSoAo'>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách thuê bao</div>
            <div class="table-content">
                <table class="table-result table-gachle">
                    <!-- <gridview id="table1" :datalist="listbox.ketquatimkiem.list" :headers="listbox.ketquatimkiem.header" flcol="false" 
                    v-bind:checkheader="false" lastcoltemplate="0" :flcol="false"></gridview> -->
                    <DataGrid
                      v-bind:columns="listbox.ketquatimkiem.header"                    
                      v-bind:dataSource="listbox.ketquatimkiem.list"
                      :enable-paging-server="false"                                        
                      :allowPaging="true"
                      :showFilter="true"
                      :showColumnCheckbox="false"
                      @selectedItemsChanged="selectedItemsChangedGridbox"
                      @rowSelected="dgrList_SelectionChanged"
                      @rowDoubleClicked = "ThongSoKT_DoubleClick"
                      >
                  </DataGrid>  
                  
                  <TraCuuThongSoKTModal 
                        ref="traCuuThongSoKTModal" 
                        :dichvuvt_id="parseInt(formData.dichvuvt_id)"
                        :kieu="1"
                        :thuebao_id="parseInt(formData.thuebao_id)"
                        :ma_tb="formData.ma_tb"
                    />
                </table>
            </div>
           
        </div>
    </div>
   
  
    <ExportDataModal ref="exportDataModal" :data="this.listbox.ketquatimkiem.list"></ExportDataModal>
</div>