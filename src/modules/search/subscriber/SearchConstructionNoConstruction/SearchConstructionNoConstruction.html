<div class="main-wrapper">
    <breadcrumb :header="header" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="#"  @click.prevent="btnSearchClicked">
                    <span class="icon one-search"></span>Tìm kiếm
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="XuatDL">
                    <span class="icon one-download"></span>Xuất file
                </a>
            </li>
            <li>
                <a href="#" @click.prevent="XuatExcel">
                    <span class="icon one-xlsx-import"></span>Xuất Excel
                </a>
            </li>
            <li>
                <a href="#">
                    <span class="icon one-circle-question"></span>Trợ giúp
                </a>
            </li>
        </ul>
        
    </div>
    <div class="page-content">
        <div class="row">
            <div class="col-sm-3 col-12">
                <div class="box-form">
                    <div class="legend-title">Chọn đơn vị</div>
                    <div class="tree-plus" style="height: 320px;overflow: auto;">
                        <div class="tree-view-wrapper">
                            <ejs-treeview :fields='listbox.fields' @nodeSelected="tvDonVi_FocusedNodeChanged"></ejs-treeview>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-9 col-12">
                <div class="box-form">
                    <div class="legend-title">Thông tin thuê bao</div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Loại nhóm</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select name="" id="" class="form-control" v-model="listbox.loai_nhom.value" @change="filterThueBao">
                                            <option  v-for="nhom in listbox.loai_nhom.list" v-bind:value="nhom.nhom_id">{{ nhom.ten_nhom }}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Loại HĐ/PL</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select name="" id="" class="form-control" v-model="listbox.hop_dong.value">
                                                    <option  v-for="hd in listbox.hop_dong.list" v-bind:value="hd.loaihd_id">{{ hd.ten_loaihd }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Dịch vụ</div>
                                        <div class="value">
                                            <div class="select-custom">
                                                <select name="" id="" class="form-control" v-model="listbox.dich_vu.value">
                                                    <option  v-for="dv in listbox.dich_vu.list" v-bind:value="dv.dichvuvt_id">{{ dv.ten_dvvt }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Mã GD</div>
                                        <div class="value">
                                            <input type="text" class="form-control fw6 text" v-model="TxtMaGD">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số máy/Acc</div>
                                        <div class="value">
                                            <input type="text" class="form-control fw6 text highlight" v-model="TxtSoMay">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Kiểu LĐ</div>
                                        <div class="value">
                                            <input type="text" class="form-control fw6 text" v-model="TxtKieuLD">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Loại KH lớn</div>
                                        <div class="value">
                                            <input type="text" class="form-control  italic" v-model="TxtKHLon">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên thuê bao</div>
                                <div class="value">
                                    <input type="text" class="form-control fw6 text" v-model="TxtTenTB">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Địa chỉ LĐ</div>
                                <div class="value">
                                    <input type="text" class="form-control fw6 text" v-model="TxtDiaChi">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Số ảo</div>
                                <div class="value">
                                    <input type="text" class="form-control fw6 text">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Ghi chú</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="TxtGhiChu">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title mart20">Thông tin phiếu giao</div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    <div class="check-action">
                                        <input type="checkbox" class="check"  v-model="checkNgayGiao">
                                        <span class="name">Ngày giao</span>
                                    </div>
                                </div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <ejs-datepicker
                                            :format="config.dateConfig.format"
                                            :showClearButton="false"
                                            v-model = "NgayGiao"
                                            :value="config.dateConfig.value"
                                            :enabled="checkNgayGiao"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Đơn vị</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="TxtDonVi">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">
                                    Số quyết định
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="TxtSoQD">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Nhân viên</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="TxtNhanVien">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">
                            Nội dung giao
                        </div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="TxtNoiDungGiao">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ModalXuatDuLieu 
        id="modal-xuat-dulieu" 
        :thuocTinh="dsThuocTinh"
        :data="ketquatimkiem.list"></ModalXuatDuLieu>
        <div class="box-form">
            <div class="nav tabs tab-over">
                <a href="#tab1" data-toggle="tab" class="active" @click="resultTab ='dsPhieu'">Danh sách phiếu yêu cầu</a>
                <a href="#tab2" data-toggle="tab" @click="resultTab ='dsPhieuChuaUp'">Danh sách phiếu chưa upload BBNT</a>
            </div>
            <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    <div class="form-group tright">
                        <div class="check-action">
                            <input type="checkbox" class="check" v-model="chkLoc">
                            <span class="name">Lọc theo nhân viên lập PL</span>
                        </div>
                    </div>
                    <div class="table-content">
                            <DataGrid v-bind:columns="ketquatimkiem.columns"
                                v-bind:dataSource="ketquatimkiem.list"
                                :enable-paging-server="false"
                                :showFilter="true"
                                :allowPaging="true"
                                :showColumnCheckbox="false"
                                :enabledSelectFirstRow="true"
                                @selectedRowChanged="selectedRowChanged">
                            </DataGrid>
                    </div>
                </div>
                <div class="tab-pane" id="tab2">
                    <div class="table-content">
                            <DataGrid id="sample-grid" v-bind:columns="ketquatimkiem1.columns"
                                v-bind:dataSource="ketquatimkiem1.list"
                                :enable-paging-server="false"
                                :showFilter="true"
                                :allowPaging="true"
                                :showColumnCheckbox="false"
                                :enabledSelectFirstRow="true"
                                >
                            </DataGrid>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>