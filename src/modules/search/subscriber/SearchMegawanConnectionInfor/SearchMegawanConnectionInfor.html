<div>
  <b-modal
    ref="searchMegawanConnectionInforRef"
    size="huge"
    hide-header
    hide-header-close
    hide-footer
    no-close-on-backdrop
    body-class="p-0"
  >
    <div class="modal-content popup-box">
      <div class="popup-header">
        <div class="title">
          Chi tiết kết nối số chính, số phụ
        </div>
        <div class="close -ap icon-close" @click="onClose"></div>
      </div>
      <div class="popup-body">
        <div class="row">
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="legend-title">
                Thông tin tìm kiếm
              </div>
              <div class="row">
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key" style="width: 100px;">Mã KH</div>
                    <div class="value">
                      <div class="input-more-button">
                        <button class="btn" @click="btnTimKiemKH_Click">
                          <span class="-ap icon-more_horiz"></span>
                        </button>
                        <input type="text" class="form-control" ref="txtMaKHRef" v-model.trim="filter.txtMaKH">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-12">
                  <div class="info-row">
                    <div class="key" style="width: 100px">Tên KH</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="filter.txtTenKH">
                    </div>
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key" style="width: 100px">Địa chỉ KH</div>
                <div class="value">
                  <input type="text" class="form-control" v-model.trim="filter.txtDiaChi_KH">
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-12">
            <div class="box-form" style="min-height: 150px">
              <div class="legend-title" style="padding-top: 1.5rem;"></div>
              <div class="info-row">
                <div class="key w100">
                  <div class="check-action">
                    <input type="radio" class="check" v-model="filter.rdoType" :value="1" :checked="filter.rdoType === 1">
                    <span class="name">Danh bạ</span>
                  </div>
                </div>
              </div>
              <div class="info-row">
                <div class="key w100">
                  <div class="check-action">
                    <input type="radio" class="check" v-model="filter.rdoType" :value="2" :checked="filter.rdoType === 2">
                    <span class="name">Hợp đồng</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="legend-title">Danh sách số chính</div>
              <div class="table-content">
                <DataGrid
                  :columns="gridDSSoChinh.headers"
                  :dataSource="gridDSSoChinh.dataSources"
                  :showColumnCheckbox="false"
                  :enable-paging-server="false"
                  :allowPaging="true"
                  :showFilter="true"
                  @selectedRowChanged="gridviewSoChinh_FocusedRowChanged"
                />
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="legend-title">Danh sách số phụ</div>
              <div class="table-content">
                <DataGrid
                  :columns="gridSoPhu.headers"
                  :dataSource="gridSoPhu.dataSources"
                  :showColumnCheckbox="false"
                  :enable-paging-server="false"
                  :allowPaging="true"
                  :showFilter="true"
                  @selectedRowChanged="gridViewSoPhu_FocusedRowChanged"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="legend-title">Thông tin số chính</div>
              <div class="box-fieldset">
                <div class="fieldset-title">
                  Thông tin PE (router biên VTN)
                </div>
                <div class="row">
                  <div class="col-sm-4 col-12">
                    <div class="info-row">
                      <div class="key w70">Router</div>
                      <div class="value">
                        <div class="select-custom" ref="cboRouterChinhRef">
                          <SelectExt
                            dataTextField="pe"
                            dataValueField="pe_id"
                            v-model.number="thongTinSoChinh.cboRouterChinhId"
                            :settings="{ dropdownParent: $refs['cboRouterChinhRef']} "
                            :dataSource="thongTinSoChinh.cboRouterChinh"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-8 col-12">
                    <div class="row">
                      <div class="col-sm-6 col-12">
                        <div class="info-row">
                          <div class="key w80">Slot PE</div>
                          <div class="value">
                            <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtSlotPE_Chinh">
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-6 col-12">
                        <div class="info-row">
                          <div class="key w80">Port PE</div>
                          <div class="value">
                            <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtPortPE_Chinh">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4 col-12">
                  <div class="info-row">
                    <div class="key w70">Dslam</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtDSLAMWan_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Tên Tbị</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtTenTbi_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Vrf</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtVRF_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Link</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtLink_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Lan_IP</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtLAN_IP_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Loại cáp</div>
                    <div class="value">
                      <div class="select-custom" ref="cboLoaiCapChinhRef">
                        <SelectExt
                          dataTextField="loaicap"
                          dataValueField="loaicap_id"
                          v-model.number="thongTinSoChinh.cboLoaiCapChinhId"
                          :settings="{ dropdownParent: $refs['cboLoaiCapChinhRef'] }"
                          :dataSource="thongTinSoChinh.cboLoaiCap_Chinh"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">T.cáp gốc</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtTuCapGoc_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Đ.cáp gốc</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtDoiCapGoc_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Cáp gốc</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtCapGoc_Chinh">
                    </div>
                  </div>
                </div>
                <div class="col-sm-8 col-12">
                  <div class="info-row">
                    <div class="key w80">Trạm Tbị</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtTramTB_Chinh">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">SvLan</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.number="thongTinSoChinh.txtSvLan_Chinh">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">CvLan</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.number="thongTinSoChinh.txtCvLan_Chinh">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Port</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtPort_Chinh">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Route</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtRoute_Chinh">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w80">Serial</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtSerial_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w80">Wan_ip</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtWAN_IP_Chinh">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w80">H.cáp ngọn</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtHopCapNgon_Chinh">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">T.cáp ngọn</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtTuCapNgon_Chinh">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Tuyến cáp</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtTuyenCap_Chinh">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Đ.cáp ngọn</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtDoiCapNgon_Chinh">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Liên tủ</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtLienTu_Chinh">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Cáp ngọn</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoChinh.txtCapNgon_Chinh">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Cự ly</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.number="thongTinSoChinh.txtSoMetDay_Chinh">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-12">
            <div class="box-form">
              <div class="legend-title">Thông tin số phụ</div>
              <div class="box-fieldset">
                <div class="fieldset-title">
                  Thông tin PE (router biên VTN)
                </div>
                <div class="row">
                  <div class="col-sm-4 col-12">
                    <div class="info-row">
                      <div class="key w70">Router</div>
                      <div class="value">
                        <div class="select-custom" ref="cboRouterPhuRef">
                          <SelectExt
                            dataTextField="pe"
                            dataValueField="pe_id"
                            v-model.number="thongTinSoPhu.cboRouterPhuId"
                            :settings="{ dropdownParent: $refs['cboRouterPhuRef'] }"
                            :dataSource="thongTinSoPhu.cboRouterPhu"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-8 col-12">
                    <div class="row">
                      <div class="col-sm-6 col-12">
                        <div class="info-row">
                          <div class="key w80">Slot PE</div>
                          <div class="value">
                            <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtSlotPE_Phu">
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-6 col-12">
                        <div class="info-row">
                          <div class="key w80">Port PE</div>
                          <div class="value">
                            <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtPortPE_Phu">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4 col-12">
                  <div class="info-row">
                    <div class="key w70">Dslam</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtDSLAMWan_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Tên Tbị</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtTenTbi_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Vrf</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtVRF_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Link</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtLink_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Lan_IP</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtLAN_IP_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Loại cáp</div>
                    <div class="value">
                      <div class="select-custom" ref="cboLoaiCapPhuRef">
                        <SelectExt
                          dataTextField="loaicap"
                          dataValueField="loaicap_id"
                          v-model.number="thongTinSoPhu.cboLoaiCapPhuId"
                          :settings="{dropdownParent: $refs['cboLoaiCapPhuRef']}"
                          :dataSource="thongTinSoPhu.cboLoaiCap_Phu"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">T.cáp gốc</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtTuCapGoc_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Đ.cáp gốc</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtDoiCapGoc_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w70">Cáp gốc</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtCapGoc_Phu">
                    </div>
                  </div>
                </div>
                <div class="col-sm-8 col-12">
                  <div class="info-row">
                    <div class="key w80">Trạm Tbị</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtTramTB_Phu">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">SvLan</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.number="thongTinSoPhu.txtSvLan_Phu">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">CvLan</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.number="thongTinSoPhu.txtCvLan_Phu">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Port</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtPort_Phu">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Route</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtRoute_Phu">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w80">Serial</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtSerial_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w80">Wan_ip</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtWAN_IP_Phu">
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="key w80">H.cáp ngọn</div>
                    <div class="value">
                      <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtHopCapNgon_Phu">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">T.cáp ngọn</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtTuCapNgon_Phu">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Tuyến cáp</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtTuyenCap_Phu">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Đ.cáp ngọn</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtDoiCapNgon_Phu">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Liên tủ</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtLienTu_Phu">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Cáp ngọn</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtCapNgon_Phu">
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-12">
                      <div class="info-row">
                        <div class="key w80">Cự ly</div>
                        <div class="value">
                          <input type="text" class="form-control" v-model.trim="thongTinSoPhu.txtSoMetDay_Phu">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </b-modal>

  <b-modal
    ref="popupSearchAccount"
    size="xl"
    title="Tra cứu danh bạ"
    hide-footer
    body-class="modal-body p-0"
    modal-class="bss-modal bss-modal-tracuu-danhba"
  >
    <search-account @form-close="formCloseSearchAccount" :isPopup="true" :vdichvuvt_id="0" />
  </b-modal>

  <b-modal
    ref="popupFrmTraCuuHopDong"
    size="xl"
    title="Tra cứu hợp đồng, phụ lục"
    hide-footer
    body-class="modal-body p-0"
    modal-class="bss-modal bss-modal-tracuu-danhba"
  >
    <search-contract
      :loaihd_id="1"
      :dichvuvt_id="0"
      :ngay_yc="ngayYC"
      :tthd_id="1"
      :kieu="1"
      :isPopup="1"
      @accept="acceptSearchContract"
    />
  </b-modal>
</div>
