<div>
    <div class="breadcrumb-top">
        <div class="main-title">TRA CỨU TỔNG HỢP BÁN CHÉO</div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="/"><span class="nc-icon-outline ui-1_home-simple"></span> Trang chủ
                </a></li>
            <li class="breadcrumb-item">Bán chéo</li>
            <li class="breadcrumb-item active">Tra cứu tổng hợp bán chéo</li>
        </ul>
    </div>
    <div class="list-actions-top">
        <ul class="list">
           <li>
                <span class="name" style="margin-left: 10px; color: darkred"> {{ThongBao}}</span>
           </li>
           <!-- <li>
                <a href="#" @click.prevent="btnVatTu">
                    <span class="icon one-vt"></span> Vật tư
                </a>
            </li> -->
            <!-- <ModalTraCuuVT  ref='formVattu' idModalTraCuuVT="ModalTraCuuVT"></ModalTraCuuVT>  -->
            <li>
                <a href="#" @click.prevent="btnToaNha">
                    <span class="one-building"></span> Tòa nhà
                </a>
            </li>
        </ul>
        <ejs-dialog :enableResize='true' :visible="false" ref="pop_toanha" :header='"Tra cứu thông tin tòa nhà"'
                showCloseIcon=true target=".main-wrapper" width='60%' height="800">
            <!-- <ThueBao_ToaNha ref="formDiachi" :ma_gd="MaKH" :ma_kh="MaKH" :ma_tb="MaTB" :tag="'tracuu_danhba'" :dataDiachi="dataDiachi" /> -->
            <ThueBao_ToaNha ref="formDiachi" :ma_kh="keyMaKH" :tag="'tracuu_danhba'" :dataDiachi="dataDiachi"/>
    </ejs-dialog>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="grid-stack-box">
                <div class="box-col" id="boxLeft">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key" style="color: darkred; width: 135px;">Chọn tỉnh tra cứu:</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt v-model="selTinhTC" :options="ds_TinhTC" @select="sel_TinhTC"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Mã khách hàng <b-button variant="outline-primary" @click="SearchDanhBa">...</b-button></div>
                                <div class="value">
                                    <input ref="txtmaKH" v-model="keyMaKH" style="font-weight: bold;" v-on:keyup.enter="maKHEnter" type="text" class="form-control highlight">
                                </div>
                            </div>
                        </div>
                        <ejs-dialog :enableResize="true" :visible="false" :position="position" ref="searchAccountDialog" :header="'Tra cứu danh bạ'" showCloseIcon="true" target="#app" width="80%" height="800" top="100" class="searchAccount-popup-dlg">
                            <div class="searchAccount-popup popupBody">
                                <searchAccount :isPopup="true" @form-close="searchAccountDialogClose" />
                            </div>
                        </ejs-dialog>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Mã KH cũ</div>
                                <div class="value">
                                    <input v-model="maKHCu" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Tên khách hàng</div>
                                <div class="value">
                                    <input v-model="tenKH" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">PL KH</div>
                                <div class="value">
                                    <input v-model="plKH" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key" style="width: 135px;">Địa chỉ KH</div>
                        <div class="value">
                            <input v-model="dcKH" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Tiền TT</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="kh_tienTT" style="font-weight: bold;"
                                        output-type="String">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Còn nợ</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="kh_tienNo" style="font-weight: bold; color: darkred;"
                                        output-type="String">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title">Thông tin thanh toán</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Mã thanh toán</div>
                                <div class="value">
                                    <input v-model="maTT" type="text" style="font-weight: bold;" v-on:keyup.enter="maTTEnter" class="form-control highlight">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Mã ĐD</div>
                                <div class="value">
                                    <input v-model="maDD" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key" style="width: 135px;">Tên thanh toán</div>
                        <div class="value">
                            <input v-model="tenTT" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key" style="width: 135px;">Địa chỉ TT</div>
                        <div class="value">
                            <input v-model="diachiTT" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key" style="width: 135px;">Địa chỉ BC</div>
                        <div class="value">
                            <input v-model="diachiBC" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Hình thức TT</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="selHinhThucTT" class="form-control" disabled>
                                            <option v-for="(ds_HinhThucTTs, index) in ds_HinhThucTT" v-bind:value="ds_HinhThucTTs.HTTT_ID">
                                                {{ ds_HinhThucTTs.HINHTHUC_TT }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Mã in ghép</div>
                                <div class="value">
                                    <input v-model="maInGhep" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Tiền TT</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="tt_tienTT" style="font-weight: bold;"
                                        output-type="String">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Còn nợ</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="tt_tienNo" style="font-weight: bold; color: darkred;"
                                        output-type="String">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title">Thông tin thuê bao</div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Dịch vụ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="selDVVT" class="form-control" disabled>
                                            <option v-for="(ds_DVVTs, index) in ds_DVVT" v-bind:value="ds_DVVTs.dichvuvt_id">
                                                {{ ds_DVVTs.ten_dvvt }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Loại hình</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="selLoaiHinhTB" class="form-control" disabled>
                                            <option v-for="(ds_LoaiHinhTBs, index) in ds_LoaiHinhTB" v-bind:value="ds_LoaiHinhTBs.LOAITB_ID">
                                                {{ ds_LoaiHinhTBs.LOAIHINH_TB }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Số máy/Acc</div>
                                <div class="value">
                                    <input v-model="soMayAcc" type="text" style="font-weight: bold;" v-on:keyup.enter="maTBEnter" class="form-control highlight">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Số ảo</div>
                                <div class="value">
                                    <input v-model="soAo" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Đối tượng</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="selDoiTuong" class="form-control" disabled>
                                            <option v-for="(ds_DoiTuongs, index) in ds_DoiTuong" v-bind:value="ds_DoiTuongs.doituong_id">
                                                {{ ds_DoiTuongs.ten_dt }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key" style="width: 135px;">Địa chỉ TB</div>
                        <div class="value">
                            <input v-model="diachiTB" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key" style="width: 135px;">Địa chỉ LĐ</div>
                        <div class="value">
                            <input v-model="diachiLD" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Trạng thái TB</div>
                                <div class="value">
                                    <input v-model="trangthaiTB" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Khu vực <b-button variant="outline-primary" @click="btnKhuVuc">...</b-button></div>
                                <div class="value">
                                    <input v-model="khuvuc" type="text" class="form-control">
                                </div>
                            </div>
                            <popupNhanVienDiaBan modalId="popupNVDB" :data="dataPopupNVDB" :diaban="diaban" @form-close="closePopupNVDB"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Tiền TT</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="tb_tienTT" style="font-weight: bold;"
                                        output-type="String">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Còn nợ</div>
                                <div class="value">
                                    <vue-numeric class="form-control tright" separator="," v-model="tb_tienNo" style="font-weight: bold; color: darkred;"
                                        output-type="String">
                                    </vue-numeric>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 135px;">Chủ quản</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="selChuQuan" class="form-control" disabled>
                                            <option v-for="(ds_ChuQuans, index) in ds_ChuQuan" v-bind:value="ds_ChuQuans.chuquan_id">
                                                {{ ds_ChuQuans.ten_tat }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-12">
                            <div class="info-row">
                                <div class="key" style="width: 90px;">Chủ quản LĐ</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <select v-model="selChuQuanLD" class="form-control" disabled>
                                            <option v-for="(ds_ChuQuanLDs, index) in ds_ChuQuanLD" v-bind:value="ds_ChuQuanLDs.chuquan_id">
                                                {{ ds_ChuQuanLDs.ten_tat }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="legend-title">Danh sách nhóm/gói <span style="color: darkred" class="ml-5">Các biến động: liên quan đến thuê bao thuộc gói có thể dẫn đến hủy gói</span></div>
                    <div class="table-content">
                        <DataGrid 
                            v-bind:columns="dsNhomGoi.header"                    
                            v-bind:dataSource="dsNhomGoi.list"
                            :enable-paging-server="false"                                        
                            :allowPaging="true"
                            :showFilter="true"
                            :showColumnCheckbox="false"
                            ref="gridNhomGoi"
                            >
                        </DataGrid>
                    </div>
                </div>
                <div class="box-col" id="boxRight">
                    <div class="legend-title">
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                Khuyến mại: <span style="color: darkred">{{loaiKM}}</span>
                            </div>
                            <div class="col-sm-6 col-12">
                                <div class="check-action" style="float: right;">
                                    <input type="checkbox" class="check" v-model="chkAll" v-on:change="chkAll_KM_CheckedChanged()">
                                    <span class="name"> Tất cả </span>
                                </div>
                            </div>
                        </div> 
                    </div>
                    <div class="table-content">
                        <DataGrid 
                            v-bind:columns="dsKhuyenMai.header"                    
                            v-bind:dataSource="dsKhuyenMai.list"
                            :enable-paging-server="false"                                        
                            :allowPaging="true"
                            :showFilter="true"
                            :showColumnCheckbox="false"
                            ref="gridKhuyenMai"
                            >
                        </DataGrid>
                    </div>
                    <div class="legend-title">Các biến động thuê bao chưa hoàn thành của KH</div>
                    <div class="table-content">
                        <DataGrid 
                            v-bind:columns="dsBienDongChuaHoanThanh.header"                    
                            v-bind:dataSource="dsBienDongChuaHoanThanh.list"
                            :enable-paging-server="false"                                        
                            :allowPaging="true"
                            :showFilter="true"
                            :showColumnCheckbox="false"
                            >
                        </DataGrid>
                    </div>
                    <div class="legend-title">Danh sách thuê bao</div>
                    <div class="table-content">
                        <DataGrid 
                            v-bind:columns="dsDanhBaThueBao.header"                    
                            v-bind:dataSource="dsDanhBaThueBao.list"
                            :enable-paging-server="false"                                        
                            :allowPaging="true"
                            :showFilter="true"
                            :showColumnCheckbox="false"
                            ref="griddsDanhBaThueBao"
                            @rowClicked = "rowClicked" 
                            @selectedRowChanged="gridChanged"
                            >
                        </DataGrid>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>