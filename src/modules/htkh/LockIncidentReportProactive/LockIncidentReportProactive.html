<div>
  <breadcrumb :header="header"/>
  <div class="list-actions-top">
    <ul class="list">
      <li v-if="btnVisible.btnLayTTMoi && tag!=3">
        <a href="javascript: void(0)"
           @click="btnLayTTMoi_Click">
          <span class="icon one-file-attach"></span> Lấy TT(F4)
        </a>
      </li>
      <li v-else>
        <a href="javascript: void(0)"
           @click="tsbtnLayPhieu_Click"
           :class="{hidden: !btnVisible.tsbtnLayPhieu}">
          <span class="icon  one-file-search"></span> Lấy phiếu
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="btnNhapMoi_Click"
           :class="{hidden: !btnVisible.tsbtnNhapMoi}">
          <span class="icon  one-file-plus"></span> Nhập mới(F5)
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="btnTiepNhan_Click"
           :class="{hidden: !btnVisible.tsbtnTiepNhan}">
          <span class="icon one-mail-download"></span> Tiếp nhận(F6)
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="btnGhiLai_Click"
           :class="{hidden: !btnVisible.tsbtnGhiLai}">
          <span class="icon   one-save"></span> Nhận hỏng(F9)
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="tsbtnCapNhatDoThu_Click"
           :class="{hidden: !btnVisible.tsbtnCapNhatDoThu}">
          <span class="icon  one-reload1"></span> Cập nhật
        </a>
      </li>
      <li v-show="btnVisible.tsbtnGiaoPhieu">
        <a href="javascript: void(0)"
           @click="tsbtnXuatPhieu_Click">
          <span class="icon  one-file-arrow-right1"></span> Giao phiếu
        </a>
      </li>
      <li v-show="btnVisible.tsbtnGiaoNhanh">
        <a href="javascript: void(0)" @click="tsbtnGiaoNhanh_Click">
          <span class="icon  one-file-arrow-right1"></span>Giao nhanh
        </a>
      </li>
      <!-- <li>
        <a href="javascript: void(0)"
           @click="tsbtnLayPhieu_Click"
           :class="{hidden: !btnVisible.tsbtnLayPhieu}">
          <span class="icon  one-file-search"></span> Lấy phiếu
        </a>
      </li> -->
      <li>
        <a href="javascript: void(0)"
           @click="tsbtnBoQua_Click"
           :class="{hidden: !btnVisible.tsbtnBoQua}">
          <span class="icon  one-cancel"></span> Bỏ phiếu
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="tsbtnKhoaPhieu_Click"
           :class="{hidden: !btnVisible.tsbtnKhoaPhieu}">
          <span class="icon  one-file-lock"></span> Khóa phiếu (F8)
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="tsbtnGianDo_Click">
          <span class="icon  one-file-search"></span> Tra cứu cáp
        </a>
      </li>
      <li>
        <a href="javascript: void(0)"
           @click="tsbtnDoiMKWifi_Click">
          <span class="icon  nc-icon-glyph objects_key-26"></span> Đổi MK Wifi
        </a>
      </li>
    </ul>
    <div class="more dropdown">
      <a href="#" data-toggle="dropdown">
        <span class="icon -ap  icon-dots-three-vertical"></span>
      </a>
      <ul class="dropdown-menu">
        <li v-show="btnVisible.tsbtnBaoHongAo">
          <a href="javascript: void(0)"
             @click="btnBaoHongAo_Click">
            <span class="dropdown-icon one-file-trash"></span>Báo hỏng ảo
          </a>
        </li>
        <li>
          <a href="javascript: void(0)"
             @click="tsbtnTestAllPort_Click">
            <span class="dropdown-icon nc-icon-glyph arrows-1_simple-up"></span> Test Port
          </a>
        </li>
        <li>
          <a href="javascript: void(0)"
             @click="tsbtnDoKiem_Click">
            <span class="dropdown-icon one-clipart-arrow-right"></span> Show Port
          </a>
        </li>
        <li v-show="btnVisible.tsbtnChuyenMedia">
          <a href="javascript: void(0)"
             @click="tsbtnChuyenMedia_Click">
            <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right"></span> Chuyển VNPT - Media
          </a>
        </li>
        <li v-show="btnVisible.tsbtnChuyenTTDH">
          <a href="javascript: void(0)"
             @click="tsbtnChuyenTTDH_Click">
            <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right text-warning"></span> Chuyển VNPT - NET
          </a>
        </li>
        <li v-show="btnVisible.tsbtnChuyenOMCData">
          <a href="javascript: void(0)"
             @click="tsbtnChuyenOMCData_Click">
            <span class="dropdown-icon nc-icon-glyph arrows-1_simple-right text-warning"></span> Chuyển OMC - Data
          </a>
        </li>
        <li>
          <a href="javascript: void(0)" @click="tsbtnVatTu_Click">
            <span class="dropdown-icon nc-icon-glyph ui-1_database"></span>Vật tư
          </a>
        </li>
        <li v-show="btnVisible.tsbtnXoaPhieu">
          <a href="javascript: void(0)" @click="tsbtnXoaPhieu_Click">
            <span class="dropdown-icon one-file-trash"></span>Xóa phiếu
          </a>
        </li>
        <li>
          <a href="javascript: void(0)" @click="tsbtnTBCungDoiCap_Click">
            <span class="dropdown-icon one-reload-mobile"></span>TB cùng cáp
          </a>
        </li>
        <!--Mạnh Cường báo bỏ-->
        <!--        <li v-show="btnVisible.tsbtnHTKT">-->
        <!--          <a href="javascript: void(0)"-->
        <!--             @click="tsbtnHTKT_Click">-->
        <!--            <span class="dropdown-icon nc-icon-glyph media-2_headphones-mic"></span>Hỗ trợ KT-->
        <!--          </a>-->
        <!--        </li>-->
        <li v-show="btnVisible.tsbtnPHKH">
          <a href="javascript: void(0)" @click="tsbtnPHKH_Click">
            <span class="dropdown-icon business_contacts nc-icon-glyph"></span>Phản hồi KH
          </a>
        </li>
        <li>
          <a href="javascript: void(0)" @click="tsbtnThongTinLH_Click">
            <span class="dropdown-icon business_contacts nc-icon-glyph"></span>Liên hệ
          </a>
        </li>
        <!--        <li v-show="btnVisible.tsbtnChuyenDHIT">-->
        <!--          <a href="javascript: void(0)" @click="tsbtnChuyenDHIT_Click">-->
        <!--            <span class="dropdown-icon one-folder-arrow"></span>Chuyển ĐHIT-->
        <!--          </a>-->
        <!--        </li>-->
        <li v-show="btnVisible.tsbtnChuyenIT360">
          <a href="javascript: void(0)" @click="tsbtnChuyenIT360_Click">
            <span class="dropdown-icon one-folder-arrow"></span>Chuyển IT360
          </a>
        </li>
        <li v-show="btnVisible.tsbtnChuyenVip">
          <a href="javascript: void(0)" @click="tsbtnChuyenVip_Click">
            <span class="dropdown-icon one-file-arrow"></span>Chuyển VIP
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="page-content">
    <div class="row" v-show="lblSuCoTTVT !== ''">
      <div class="col-md-12 text-center">
        <label class="red font-weight-bold"
               @click="lblSuCoTTVT_Click"
               style="cursor: pointer; margin-top: 30px;">{{ lblSuCoTTVT }}</label>
      </div>
    </div>
    <div class="grid-stack-box">
      <div class="box-col box-form" id="boxLeft1">
        <ThongTinTiepNhan v-model="tttn"
                          :options="options"
                          @onEnterMaTB="onEnterMaTB"
                          @showFormTraCuuDanhBa="showFormTraCuuDanhBa"
                          @ipccClick="txtDienThoaiBH_ButtonClick"
                          @togglePanel="togglePanel"
        />
      </div>

      <div class="box-col box-form" id="boxRight1">
        <ThongSoKyThuat :tskt="tskt"/>
      </div>
    </div>

    <div class="grid-stack-box">
      <div class="box-col box-form" id="boxLeft2">
        <DanhSachTiepNhan :dsTiepNhan="dsTiepNhan"
                          @selectedRowChanged="gridTiepNhan_selectedRowChanged"
                          @xoa="tsmXoaPhieu_Click"
                          @togglePanel="togglePanel"
                          ref="danhsachtiepnhan"/>
      </div>

      <div class="box-col box-form" id="boxRight2">
        <LichSuBaoHong :lsBaoHong="lsBaoHong"/>
      </div>
    </div>

    <div class="grid-stack-box">
      <div class="box-col box-form" id="boxLeft3">
        <TinhTrangHong v-model="ttHong" :options="options"
                       @togglePanel="togglePanel"/>
      </div>
      <div class="box-col box-form" id="boxRight3">
        <KetQuaXuLy v-model="kqxl" :options="options"/>
      </div>
    </div>

    <DanhSachBaoHong :dsBaoHong="dsBaoHong"
                     :options="options"
                     :colNguoiGiu_Visible="colNguoiGiu_Visible"
                     :showGiuPhieu="btnVisible.tsmGiuPhieu"
                     :showHuyGiuPhieu="btnVisible.tsmHuyGiuPHieu"
                     @selectedRowChanged="gridviewDanhSach_FocusedRowChanged"
                     @dsbhXoaDSPhieu="tsbtnXoaPhieu_Click"
                     @dsbhKhoaDSPhieu="tsbtnKhoaPhieu_Click"
                     @dsbhShowPort="tsbtnDoKiem_Click"
                     @dsbhTestPort="tsbtnTestAllPort_Click"
                     @dsbhLuuTTPort="LuuTTPort_Click"
                     @dsbhHienThiTTKT="dsbhHienThiTTKT"
                     @dsbhChoXuLy="dsbhChoXuLy"
                     @dsbhGiuPhieu="tsmGiuPhieu_Click"
                     @dsbhHuyGiuPhieu="tsmHuyGiuPHieu_Click"
                     @dsbhTTKenhTrang="dsbhTTKenhTrang"
                     ref="dsBaoHong"
                     v-model="dsbh"/>

    <FormTraCuuTB :dsThueBao="dsThueBao"
                  ref="formTraCuuTB"/>

    <b-modal ref="popupSearchAccount" size="xl" hide-footer hide-header hide-header-close
             body-class="modal-body p-0 frm-chon-port">
      <!--      <SearchAccount @form-close="acceptSearchAccount" :isPopup="true"/>-->
      <keep-alive>
        <component :is="SearchAccountCom" v-on="SearchAccountComEvents" v-bind="SearchAccountComAttrs"/>
      </keep-alive>
    </b-modal>

    <ejs-dialog :enableResize='true'
                :visible="false"
                :position="{X: 'center', Y: 'top'}"
                :header='"Giao phiếu báo hỏng"'
                :isModal="true"
                :cssClass="'popup-giao-phieu'"
                ref="dlg_giaophieu"
                showCloseIcon=false
                target=".main-wrapper"
                width='90%'
                height="800">
      <!--      <HandoverIncident ref="frmGiaoPhieuBH"-->
      <!--                        @onFinishedGiaoPhieu="onFinishedGiaoPhieu"-->
      <!--                        :dataSource="frmGiaoPhieu"-->
      <!--      />-->
      <keep-alive>
        <div class="page-content-component">
          <component :is="HandoverIncidentCom"
                     @hook:mounted="onGiaoPhieuMounted"
                     v-on:onFinishedGiaoPhieu="onFinishedGiaoPhieu"
                     v-on:onFinishedMounted="onGiaoPhieuMounted"
                     v-bind:dataSource="frmGiaoPhieu"/>
        </div>
      </keep-alive>
      <!--                        :inputServiceId="frmGiaoPhieu.inputServiceId"-->
      <!--                        :inputQuyTrinhId="frmGiaoPhieu.inputQuyTrinhId"-->
      <!--                        :inputHuongGiaoId="frmGiaoPhieu.inputHuongGiaoId"-->
      <!--                        :inputStatusId="frmGiaoPhieu.inputStatusId"-->
      <!--                        :inputDtpNgayGiaoTK="frmGiaoPhieu.inputDtpNgayGiaoTK"-->
      <!--                        :inputTxtMaTBList="frmGiaoPhieu.inputTxtMaTBList"-->
    </ejs-dialog>

    <frmXemThongBaoSuCo ref="frmXemThongBaoSuCo"/>
    <frmCatChuyenBH ref="frmCatChuyenBH"/>
    <frmPopUpTiepNhan ref="frmPopUpTiepNhan"/>
    <frmTT_Port_TB_CungDoiCap ref="frmTT_Port_TB_CungDoiCap"/>
    <frmHtktBH ref="frmHtktBH"/>
    <!--    <TraCuuVatTuThueBao ref="frmTraCuuVatTuThueBao"/>-->
    <keep-alive>
      <component :is="TraCuuVatTuThueBaoCom" ref="frmTraCuuVatTuThueBao"/>
    </keep-alive>

    <daunoithuebao id='dandocap' :ma_thuebao="this.tttn.ma_tb"/>
    <ejs-dialog :enableResize='true'
                :visible="false"
                :position="{X: 'center', Y: 'top'}"
                :header='"Tra cứu thuê bao - phiến dọc"'
                :isModal="true"
                :cssClass="'popup-mdf'"
                ref="dlg_mdf"
                showCloseIcon=false
                target=".main-wrapper"
                width='80%'
                height="800">
      <frmTraCuuMDF ref="frmTraCuuMDF"/>
    </ejs-dialog>
    <ejs-dialog :enableResize='true'
                :visible="false"
                :position="{X: 'center', Y: 'top'}"
                :header='"Tiếp nhận phản hồi khách hàng"'
                :isModal="true"
                :cssClass="'popup-phkh'"
                ref="dlg_phkh"
                showCloseIcon=false
                target=".main-wrapper"
                width='95%'
                height="800">
      <!--      <frmTiepNhan_PHKH ref="frmTiepNhan_PHKH"/>-->
      <keep-alive>
        <div class="page-content-component">
          <component :is="frmTiepNhan_PHKHCom" ref="frmTiepNhan_PHKH"/>
        </div>
      </keep-alive>
    </ejs-dialog>

    <ejs-dialog :enableResize='false'
                :visible="false"
                :position="{X: 'center', Y: 'top'}"
                :header='"Công cụ hỗ trợ"'
                :isModal="true"
                :cssClass="'popup-doiwifi'"
                ref="dlg_congcuhotro"
                showCloseIcon=false
                target=".main-wrapper"
                width='95%'
                height="800">
      <!--      <frmBNMTools ref="frmBNMTools"/>-->
      <keep-alive>
        <div class="page-content-component">
          <component :is="frmBNMToolsCom" ref="frmBNMTools"/>
        </div>
      </keep-alive>
    </ejs-dialog>
    <frmThayDoiTTBH ref="reffrmThayDoiTTBH" :params="modelInput" @closefrmThayDoiTTBH="closefrmThayDoiTTBH">
    </frmThayDoiTTBH>

    <!--    <frmPhanAnhBH ref="dialogfrmPhanAnhBH" :params="frmPhanAnhBHInput"></frmPhanAnhBH>-->
    <keep-alive>
      <component :is="frmPhanAnhBHCom" ref="dialogfrmPhanAnhBH" v-bind:params="frmPhanAnhBHInput"/>
    </keep-alive>
    <CreateIssue ref="frmCreateIssue"></CreateIssue>
  </div>

  <ejs-dialog
      :isModal="false"
      :enableResize="true"
      :visible="false"
      ref="checkPort"
      :header='"Kiểm tra Port thuê bao"'
      showCloseIcon="true"
      target=".main-wrapper"
      width="60%"
      height="500"
      allowDragging="true"
      @close="checkPortOnClose"
      :animationSettings="animationSettings"
    >
      <div>
        <CheckPort v-if="checkPortDialog.isVisiable" type="modal"  v-bind="checkPortDialog.input"/>
      </div>
    </ejs-dialog>
</div>
