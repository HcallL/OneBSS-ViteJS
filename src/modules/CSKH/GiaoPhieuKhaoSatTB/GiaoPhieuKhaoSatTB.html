<div class="">
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="javascript: void(0)" @click="onTimKiemClicked">
                    <span class="icon one-search"></span> Tìm kiếm
                </a>
            </li>
            <li :class="{disabled: !isTabGiaoPhieu}">
                <a href="javascript: void(0)" @click="onGiaoPhieuClicked">
                    <span class="icon one-file-arrow-right1"></span> Giao phiếu
                </a>
            </li>
            <li>
                <a href="javascript: void(0)" @click="onDocFileClicked">
                    <span class="icon one-book"></span> Đọc file
                </a>
                <appReadFile
                    ref="appReadFileKSTB"
                    @closed="onChapNhan"
                ></appReadFile>
            </li>
            <li :class="{disabled: isTabGiaoPhieu}">
                <a href="javascript: void(0)" @click="onHuyGiaoClicked">
                    <span class="icon one-cancel"></span> Huỷ giao
                </a>
            </li>
            <li :class="{disabled: isTabGiaoPhieu}">
                <a href="javascript: void(0)" @click="onXoaPhieuClicked">
                    <span class="icon one-trash"></span> Xoá phiếu
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="nav tabs tab-over">
            <a
                href="#tabGiaoPhieu"
                data-toggle="tab"
                class="active"
                @click="isTabGiaoPhieu = true"
                >Giao phiếu</a
            >
            <a
                href="#tabDaGiao"
                data-toggle="tab"
                @click="isTabGiaoPhieu = false"
                >Đã giao</a
            >
        </div>
        <div class="box-form tab-content">
            <div class="tab-pane active" id="tabGiaoPhieu">
                <div class="row">
                    <div class="col-sm-12 col-12">
                        <div class="legend-title">Thông tin tìm kiếm</div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">Tra cứu theo</div>
                                    <div class="value w250">
                                        <div class="select-custom">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboDKTraCuuValue"
                                            >
                                                <option
                                                    v-for="item in cboDKTraCuu"
                                                    :value="item.KIEUTK_ID"
                                                    >{{item.KIEU_TK}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control bold highlight"
                                            v-model="txtTextBoxTC"
                                        />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">
                                        <div class="check-action">
                                            <input
                                                type="checkbox"
                                                class="check"
                                                v-model="chkDichVuVT"
                                            />
                                            <span class="name">Dịch vụ</span>
                                        </div>
                                    </div>
                                    <div class="value w150">
                                        <div class="select-custom ">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboDichVuVTValue"
                                                :disabled="!chkDichVuVT"
                                            >
                                                <option
                                                    v-for="item in cboDichVuVT"
                                                    :value="item.DICHVUVT_ID"
                                                    >{{item.TEN_DVVT}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                    <div class="key w80">
                                        <div
                                            class="check-action "
                                            style="margin-left: 10px;"
                                        >
                                            <input
                                                type="checkbox"
                                                class="check"
                                                v-model="chkDonVi"
                                            />
                                            <span class="name">Đơn vị</span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboDonViValue"
                                                :disabled="!chkDonVi"
                                            >
                                                <option
                                                    v-for="item in cboDonVi"
                                                    :value="item.DONVI_ID"
                                                    >{{item.TEN_DV}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">
                                        <div class="check-action ">
                                            <input
                                                type="checkbox"
                                                class="check"
                                                v-model="chkDK2"
                                            />
                                            <span class="name">Tra theo</span>
                                        </div>
                                    </div>
                                    <div class="value w250">
                                        <div class="select-custom">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboDK2Value"
                                                :disabled="!chkDK2"
                                            >
                                                <option
                                                    v-for="item in cboDK2"
                                                    :value="item.KIEUTK_ID"
                                                    >{{item.KIEU_TK}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control"
                                            v-model="txtTraCuu2"
                                            :disabled="!chkDK2"
                                        />
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã KH</div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control"
                                            v-model="txtMaKH"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">
                                        <div class="check-action ">
                                            <input
                                                type="checkbox"
                                                class="check"
                                                v-model="chkDK3"
                                            />
                                            <span class="name">Tra theo</span>
                                        </div>
                                    </div>
                                    <div class="value w250">
                                        <div class="select-custom">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboDK3Value"
                                                :disabled="!chkDK3"
                                            >
                                                <option
                                                    v-for="item in cboDK3"
                                                    :value="item.KIEUTK_ID"
                                                    >{{item.KIEU_TK}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control"
                                            v-model="txtDK3"
                                            :disabled="!chkDK3"
                                        />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">Số máy/Acc</div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control"
                                            v-model="txtMaTB"
                                        />
                                    </div>
                                    <div
                                        class="key w80"
                                        style="padding-left: 10px !important;"
                                    >
                                        Số ảo
                                    </div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control"
                                            v-model="txtMa_lt"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">Hình thức KS</div>
                                    <div class="value w250">
                                        <div class="select-custom">
                                            <!-- <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboHinhThucValue"
                                            >
                                                <option
                                                    v-for="item in cboHinhThuc"
                                                    :value="item.HINHTHUCKS_ID"
                                                    >{{item.HINHTHUC_KS}}</option
                                                >
                                            </select> -->
                                            <SelectExt v-model.trim="cboHinhThucValue" :dataSource="cboHinhThuc" dataTextField="HINHTHUC_KS_TXT"
                  dataValueField="HINHTHUCKS_ID" placeholder="Chọn hình thức"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="legend-title">Lọc theo</div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">
                                        <div class="check-action ">
                                            <input
                                                type="checkbox"
                                                class="check"
                                                v-model="chkbDVFilter"
                                            />
                                            <span class="name">Dịch vụ</span>
                                        </div>
                                    </div>
                                    <div class="value w250">
                                        <div class="select-custom">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboTKDichVuValue"
                                                :disabled="!chkbDVFilter"
                                            >
                                                <option
                                                    v-for="item in cboTKDichVu"
                                                    :value="item.DICHVUVT_ID"
                                                    >{{item.TEN_DVVT}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                    <div class="key w100">
                                        <div
                                            class="check-action "
                                            style="margin-left: 10px;"
                                        >
                                            <input
                                                type="checkbox"
                                                class="check"
                                                v-model="chkTkLoaiHinh"
                                                :disabled="!chkbDVFilter"
                                            />
                                            <span class="name">Loại hình</span>
                                        </div>
                                    </div>
                                    <div class="value w250">
                                        <div class="select-custom">
                                            <select
                                                name=""
                                                id=""
                                                class="form-control"
                                                v-model="cboTKLoaiHinhValue"
                                                :disabled="!chkTkLoaiHinh"
                                            >
                                                <option
                                                    v-for="item in cboTKLoaiHinh"
                                                    :value="item.LOAITB_ID"
                                                    >{{item.LOAIHINH_TB}}</option
                                                >
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="legend-title">Thông tin phiếu giao</div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w80">HT từ ngày</div>
                                    <div class="value">
                                        <ejs-datepicker
                                            v-model="dtpTuNgay"
                                            :format="'dd/MM/yyyy'"
                                            :allowEdit="true"
                                            :showClearButton="false"
                                            class="redcolor"
                                        >
                                        </ejs-datepicker>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w80">Người giao</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <!-- <appCombobox
                                                ref="cboDsNhanVienGiao"
                                                v-bind:columns="[
                                                    {fieldName: 'MA_NV', headerText: 'Mã NV', allowFiltering: true},
                                                    {fieldName: 'TEN_NV', headerText: 'Tên nhân viên', allowFiltering: true},
                                                ]"
                                                v-bind:dataSource="cboNguoiGiao"
                                                textField="TEN_NV"
                                                valueField="NHANVIEN_ID"
                                                @selectedChanged="onDsNhanVienGiaoChanged"
                                                disabled
                                                :allowPaging="true"
                                            >
                                            </appCombobox> -->
                                            <input
                                                type="text"
                                                class="form-control"
                                                v-model="txtNguoiGiao"
                                                disabled
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w80">HT đến ngày</div>
                                    <div class="value">
                                        <ejs-datepicker
                                            v-model="dtpDenNgay"
                                            format="dd/MM/yyyy"
                                            :allowEdit="true"
                                            :showClearButton="false"
                                            class="redcolor"
                                            :width="'100%'"
                                        >
                                        </ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w80">Người nhận</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <appCombobox
                                                ref="cboDsNhanVienNhanGP"
                                                v-bind:columns="[
                                                    {fieldName: 'MA_NV', headerText: 'Mã NV', allowFiltering: true},
                                                    {fieldName: 'TEN_NV', headerText: 'Tên nhân viên', allowFiltering: true},
                                                ]"
                                                v-bind:dataSource="cboNguoiNhan"
                                                textField="TEN_NV"
                                                valueField="NHANVIEN_ID"
                                                @selectedChanged="onDsNhanVienNhanChanged"
                                                :allowPaging="true"
                                            >
                                            </appCombobox>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-12">
                                <div class="info-row">
                                    <div class="key w80">Ghi chú</div>
                                    <div class="value">
                                        <input
                                            type="text"
                                            class="form-control"
                                            v-model="txtGhiChu_GP"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-content mart10">
                    <div class="legend-title">Danh sách thuê bao</div>
                    <DataGrid
                        :columns='[
                            { fieldName: "MA_TT", headerText: "Mã TT", allowFiltering: true, allowSorting: false, cellCssClass: "w20 center", width: 130},
                            { fieldName: "MA_TB", headerText: "Số máy/Acc", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "MA_LT", headerText: "Số ảo", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "LOAIHINH_TB", headerText: "Loại hình", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TOCDO", headerText: "Tốc độ", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TEN_TB", headerText: "Tên thuê bao", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "DIACHI_TB", headerText: "Địa chỉ thuê bao", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "DIACHI_LD", headerText: "Địa chỉ lắp đặt", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "NGAY_SD", headerText: "Ngày SD", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "TRANGTHAI_TB", headerText: "Trạng thái", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "MA_CUOC", headerText: "Mã cước", allowFiltering: true, allowSorting: false,  width: 130},
                        ]'
                        :dataSource="getDSDTThueBao"
                        :showColumnCheckbox="true"
                        :showFilter="true"
                        dataKeyField="STT"
                        @selectedRowChanged="dtThueBaoSelectedRowChanged"
                        ref="gridDTThueBao"
                        :enablePagingServer="true"
                        :allowPaging="true"
                        :totalRecords="dtThueBaoTotalRows"
                        @pageChanged="dtThueBaoGridChanged"
                        @selectedItemsChanged="dtThueBaoSelectedItemsChanged"
                    ></DataGrid>
                </div>
            </div>
            <div class="tab-pane" id="tabDaGiao">
                <div class="legend-title">Thông tin tìm kiếm</div>
                <div class="row">
                    <div class="col-sm-3 col-12">
                        <div class="info-row">
                            <div class="key">
                                <div class="check-action">
                                    <input
                                        type="checkbox"
                                        class="check"
                                        v-model="chkNgayGiao"
                                    />
                                    <span class="name">Giao từ ngày</span>
                                </div>
                            </div>
                            <div class="value">
                                <ejs-datepicker
                                    v-model="dtpGiaoTu"
                                    format="dd/MM/yyyy"
                                    :allowEdit="true"
                                    :showClearButton="false"
                                    :enabled="chkNgayGiao"
                                    class="redcolor"
                                    :width="'100%'"
                                >
                                </ejs-datepicker>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 col-12">
                        <div class="info-row">
                            <div class="key">
                                Đến ngày
                            </div>
                            <div class="value">
                                <ejs-datepicker
                                    v-model="dtpGiaoDen"
                                    format="dd/MM/yyyy"
                                    :allowEdit="true"
                                    :showClearButton="false"
                                    :enabled="chkNgayGiao"
                                    class="redcolor"
                                    :width="'100%'"
                                >
                                </ejs-datepicker>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w100">Hình thức KS</div>
                            <div class="value w250">
                                <div class="select-custom">
                                    <!-- <select
                                        name=""
                                        id=""
                                        class="form-control"
                                        v-model="cboHinhThucKS_DaGiaoValue"
                                    >
                                        <option
                                            v-for="item in cboHinhThucKS_DaGiao"
                                            :value="item.HINHTHUCKS_ID"
                                            >{{item.HINHTHUC_KS}}</option
                                        >
                                    </select> -->
                                    <SelectExt v-model.trim="cboHinhThucKS_DaGiaoValue" :dataSource="cboHinhThucKS_DaGiao" dataTextField="HINHTHUC_KS_TXT"
                  dataValueField="HINHTHUCKS_ID" placeholder="Chọn hình thức"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key">
                                <div class="check-action">
                                    <input
                                        type="checkbox"
                                        class="check"
                                        v-model="chkNguoiGiao"
                                    />
                                    <span class="name">Người giao</span>
                                </div>
                            </div>
                            <div class="value">
                                <div class="select-custom">
                                    <appCombobox
                                        ref="cboDsNhanVienGiao"
                                        v-bind:columns="[
                                            {fieldName: 'MA_NV', headerText: 'Mã NV', allowFiltering: true},
                                            {fieldName: 'TEN_NV', headerText: 'Tên nhân viên', allowFiltering: true},
                                        ]"
                                        v-bind:dataSource="cboNguoiGiao_DG"
                                        textField="TEN_NV"
                                        valueField="NHANVIEN_ID"
                                        @selectedChanged="onCBONguoiGiaoDGChanged"
                                        :disabled="!chkNguoiGiao"
                                        :allowPaging="true"
                                    >
                                    </appCombobox>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key">
                                <div class="check-action">
                                    <input
                                        type="checkbox"
                                        class="check"
                                        v-model="chkNguoiNhan"
                                    />
                                    <span class="name">Người nhận</span>
                                </div>
                            </div>
                            <div class="value">
                                <div class="select-custom">
                                    <appCombobox
                                        ref="cboDsNhanVienNhan"
                                        v-bind:columns="[
                                            {fieldName: 'MA_NV', headerText: 'Mã NV', allowFiltering: true},
                                            {fieldName: 'TEN_NV', headerText: 'Tên nhân viên', allowFiltering: true},
                                        ]"
                                        v-bind:dataSource="cboNguoiNhan_DG"
                                        textField="TEN_NV"
                                        valueField="NHANVIEN_ID"
                                        @selectedChanged="onDsNhanVienNhanDGChanged"
                                        :disabled="!chkNguoiNhan"
                                        :allowPaging="true"
                                    >
                                    </appCombobox>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="legend-title mart20">
                    Danh sách lượt giao khảo sát
                </div>
                <div class="table-content">
                    <DataGrid
                        :columns='[
                            { fieldName: "STT", headerText: "STT", allowFiltering: true, allowSorting: false, cellCssClass: "w20 center",  width: 130},
                            { fieldName: "NHANVIEN_GIAO", headerText: "Người giao", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "NGAYGIAO", headerText: "Ngày giao", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "MA_NV", headerText: "Mã nhân viên", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TEN_DV", headerText: "Tên đơn vị", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "NHANVIEN_NHAN", headerText: "Người nhận", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "SOLUONG_TB", headerText: "Số lượng", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "LOAINHOM", headerText: "Loại", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "HINHTHUC_KS", headerText: "Hình thức KS", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "GHICHU", headerText: "Ghi chú", allowFiltering: true, allowSorting: false, width: 130 },
                        ]'
                        :dataSource="dtPhieuKS"
                        :showColumnCheckbox="false"
                        :showFilter="true"
                        dataKeyField="STT"
                        ref="gridDTPhieuKS"
                        @selectedRowChanged="dtPhieuKSSelectedRowChanged"
                        :enablePagingServer="true"
                        :allowPaging="true"
                        :totalRecords="dtPhieuKSTotalRows"
                        @pageChanged="dtPhieuKSGridChanged"
                    ></DataGrid>
                </div>
                <div class="legend-title mart20">
                    Danh sách phiếu đã giao khảo sát
                </div>
                <div class="table-content mart10">
                    <DataGrid
                        :columns='[
                            { fieldName: "MA_TB", headerText: "Số máy/Acc", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "LOAIHINH_TB", headerText: "Loại hình TB", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TEN_TB", headerText: "Tên thuê bao", allowFiltering: true, allowSorting: false,  width: 130},
                            { fieldName: "DIACHI_LD", headerText: "Địa chỉ lắp đặt", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TRANGTHAI_TB", headerText: "Trạng thái TB", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TEN_DT", headerText: "Đối tượng", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "DONVI_QL", headerText: "Đơn vị QL", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "DIENTHOAI_LH", headerText: "Điện thoại LH", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "NHA_MANG", headerText: "Nhà mạng", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "TRANGTHAI_KS", headerText: "Trạng thái KS", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "NGUOI_CN", headerText: "Người CN", allowFiltering: true, allowSorting: false, width: 130 },
                            { fieldName: "NGAY_CN", headerText: "Ngày CN", allowFiltering: true, allowSorting: false, width: 130 },

                        ]'
                        :dataSource="dtPhieuDaGiao"
                        :showColumnCheckbox="false"
                        :defaultColumnCheckboxChecked="false"
                        :showFilter="true"
                        dataKeyField="MA_TB"
                        ref="gridPhieuDaGiaoKhaoSat"
                        @selectedRowChanged="dtPhieuDaGiaoSelectedRowChanged"
                        :enablePagingServer="false"
                        :allowPaging="true"
                    ></DataGrid>
                </div>
            </div>
        </div>
    </div>
</div>
