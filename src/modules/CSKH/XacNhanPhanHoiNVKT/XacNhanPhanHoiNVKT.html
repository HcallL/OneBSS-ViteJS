<div class="">
  <!-- <breadcrumb :header="header" /> -->
  <div class="list-actions-top">
    <ul class="list">
      <li>
        <a href="javascript: void(0)" @click="onXacNhan" data-toggle="tooltip" title="Xác nhận">
          <span class="icon nc-icon-glyph ui-1_check-circle-08"></span>Xác nhận
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" data-toggle="tooltip" title="Nhắc việc" @click="onNhacViecClicked">
          <span class="icon one-file-noti"></span>Nhắc việc
        </a>
      </li>

      <li>
        <a href="javascript: void(0)" v-b-modal.popup-nhanVienXuLy data-toggle="tooltip" title="Danh sách các nhân viên xử lý phiếu">
          <span class="icon  one-sitemap-user"></span>Nhân viên xử lý
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" data-toggle="tooltip" title="Xuất file" @click="onXuatFileClicked">
          <span class="icon  one-download"></span>Xuất file
        </a>
        <appXuatFile id="modal-xuat-dulieu" :thuocTinh='dsThuocTinh' :data="DsPhieuLH" />
      </li>
      <!-- <li>
        <a href="http://10.70.52.164:8081/FILE/hdsd/frmXacNhan_CL_NVKT_v2.html" target="_blank">
          <span class="icon  one-circle-question"></span>Trợ giúp
        </a>
      </li> -->
    </ul>
  </div>
  <div class="page-content">
    <div class="row">
      <div class="col-sm-6 col-12">
        <div class="box-form" ref="boxTTDKS">
          <div class="legend-title">
            <div class="pull-left">
              Thông tin đã khảo sát
            </div>
            <div class="pull-right">
              <div class="list-checks">
                <div class="item">
                  <div class="check-action">
                    <input
                      type="radio"
                      class="check"
                      :value="false"
                      v-model="pCboDaXacNhan"
                      checked
                    />
                    <span class="name">Chưa xác nhận</span>
                  </div>
                </div>
                <div class="item">
                  <div class="check-action">
                    <input
                      type="radio"
                      class="check"
                      :value="true"
                      v-model="pCboDaXacNhan"
                    />
                    <span class="name">Đã xác nhận</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">{{labelMaGD}}</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="pTxtMaGD" />
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w70">{{labelNgayYC}}</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="pTxtNgayYC" disabled/>
                  <!-- <ejs-datepicker v-model="pTxtNgayYC" :value="today" :max="today" :format="'dd/MM/y'"
                      :showClearButton=false>
                  </ejs-datepicker> -->
                  <!-- <div class="input-icon-right">
                    <input type="text" class="form-control" />
                    <span class="icon one-calendar" v-model="pTxtNgayYC"></span>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">{{labelLoaiHD}}</div>
                <div class="value">
                  <input
                    type="text"
                    class="form-control"
                    v-model="pTxtLoaiHD"
                  />
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w70">Ngày KS</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="pTxtNgayKS" disabled/>
                  <!-- <ejs-datepicker v-model="pTxtNgayYC" :value="today" :max="today" :format="'dd/MM/y'"
                      :showClearButton=false>
                  </ejs-datepicker> -->
                  <!-- <div class="input-icon-right">
                    <input
                      type="text"
                      class="form-control"
                      v-model="pTxtNgayKS"
                    />
                    <span class="icon one-calendar"></span>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">{{labelTenKH}}</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="pTxtTenKH" />
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w70">Điện thoại</div>
                <div class="value">
                  <input
                    type="text"
                    class="form-control"
                    v-model="pTxtDienThoaiLH"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w100">{{labelDiaChiKH}}</div>
            <div class="value">
              <input type="text" class="form-control" v-model="pTxtDiaChiKH" />
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">Người trả lời</div>
                <div class="value">
                  <input
                    type="text"
                    ref="txtTenNguoiTL"
                    class="form-control"
                    v-model="pTxtTenNguoiTL"
                  />
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w70">Số liên hệ</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="pTxtSoLH" />
                </div>
              </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w100">Ghi chú</div>
            <div class="value">
              <input type="text" class="form-control" v-model="pTxtGhiChu" />
            </div>
          </div>
          <div class="info-row">
            <div class="key w100">Ý kiến đề nghị</div>
            <div class="value">
              <input type="text" class="form-control" v-model="pTxtYKienXN" />
            </div>
          </div>
          <div class="info-row">
            <div class="key w100">ND thực hiện</div>
            <div class="value">
              <input
                type="text"
                class="form-control"
                v-model="pTxtNDThucHien"
              />
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">Đơn vị bị PA</div>
                <div class="value">
                  <div class="select-custom">
                    <appSelect2
                      :options="DsDonViLoiXacNhan"
                      v-model="pCboDonViLoiSelected"
                    >
                    </appSelect2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w70">Nhân viên</div>
                <div class="value">
                  <div class="select-custom">
                    <appSelect2 :options="DsNhanVienLoi" v-model="pCboNVLoi">
                    </appSelect2>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w100">Nhóm ng.nhân</div>
                <div class="value">
                  <div class="select-custom">
                    <appSelect2
                      :options="DsNhomNguyenNhan"
                      @input="onNhomNguyenNhanChanged"
                      v-model="pCboNhomNN"
                    >
                    </appSelect2>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-12">
              <div class="info-row">
                <div class="key w70">Ng.nhân</div>
                <div class="value">
                  <div class="select-custom">
                    <ejs-multiselect mode="CheckBox" selectAllText="Chọn tất cả"
                                            unSelectAllText="Bỏ chọn tất cả" v-model="pCboNguyenNhan" locale='vi-VN'
                                            :dataSource='DsNguyenNhan' :allowFiltering='true'
                                            :fields="{value:'id', text: 'text'}" :showSelectAll="true"
                                            :showDropDownIcon="true"></ejs-multiselect>
                    <!-- <appSelect2
                      :options="DsNguyenNhan"
                      v-model="pCboNguyenNhan"
                    >
                    </appSelect2> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="info-row">
            <div class="key w100"></div>
            <div class="value">
              <div class="list-checks">
                <div class="item">
                  <div class="check-action">
                    <input type="radio" class="check"
                    v-model="pCboDongY"
                    checked
                    :value="true"/>
                    <span class="name">Đồng ý</span>
                  </div>
                </div>
                <div class="item">
                  <div class="check-action">
                    <input type="radio" class="check"
                    v-model="pCboDongY"
                      :value="false"/>
                    <span class="name">Không đồng ý</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-12">
        <div class="box-form" :style="styles.dstb">
          <div class="legend-title">
            <div class="pull-left">
              Danh sách thuê bao
            </div>
            <div class="pull-right">
              <div class="list-checks">
                <div class="item">
                  <div class="check-action">
                    <input
                      type="radio"
                      class="check"
                      v-model="pCboPhieuKS"
                      checked
                      :value="true"
                    />
                    <span class="name">Phiếu khảo sát</span>
                  </div>
                </div>
                <!-- <div class="item">
                  <div class="check-action">
                    <input
                      type="radio"
                      class="check"
                      v-model="pCboPhieuKS"
                      :value="false"
                    />
                    <span class="name">Phiếu phản hồi</span>
                  </div>
                </div> -->
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="table-content" style="height: 355px;">
            <DataGrid
              :columns='[
                            { fieldName: "MA_TB", headerText: "Số máy/Acc", allowFiltering: true, allowSorting: false, },
                            { headerText: "Audio", allowFiltering: true, allowSorting: false, template: audioTemplate, width: 120 },
                            { headerText: "Download", allowFiltering: true, allowSorting: false, template: downloadTemplate, width: 120 },
                            { fieldName: "TRANGTHAI_TB", headerText: "Trạng thái TB", allowFiltering: true, allowSorting: false, },
                            { fieldName: "NGUOI_GIAO", headerText: "Người giao", allowFiltering: true, allowSorting: false, },
                            { fieldName: "DV_NHAN", headerText: "ĐV nhận", allowFiltering: true, allowSorting: false, },
                            { fieldName: "LOAIPHIEU", headerText: "Loại phiếu", allowFiltering: true, allowSorting: false, },
                            { fieldName: "MA_GD", headerText: "Mã giao dịch", allowFiltering: true, allowSorting: false, },
                            { fieldName: "ND_GIAO", headerText: "ND Giao", allowFiltering: true, allowSorting: false, },
                            { fieldName: "NGAY_CN", headerText: "Ngày CN", allowFiltering: true, allowSorting: false, },
                            { fieldName: "NGUOI_CN", headerText: "Người CN", allowFiltering: true, allowSorting: false, },
                        ]'
              :dataSource="DsPhieuLH"
              :showColumnCheckbox="false"
              :showFilter="true"
              dataKeyField="PHIEU_ID"
              :allowPaging="true"
                                    :enablePagingServer="false"
              ref="gridPhieuDieuLaiXacNhan"
              @selectedRowChanged="gridPhieuDieuLaiXacNhan_selectedRowChanged"
            ></DataGrid>
          </div>
        </div>
      </div>
    </div>
    <div class="box-form">
      <div class="legend-title">
        <div class="pull-left">Ý kiến tổ Tổng hợp</div>
        <div class="pull-right">
          <a
            href="javascript: void(0)"
            v-b-modal.popup-noiDungKhaoSat
            class="link"
            >Nội dung khảo sát của Đài hỗ trợ (ấn vào để xem)</a
          >
        </div>
        <div class="clearfix"></div>
      </div>
      <cauHoiKS
          ref="cauHoiKS"
          :hinhThuc="0"
          :nhanVienId="6"
          :tbtlId="p_TBTL_ID"
      />
      <!-- <template v-for="(cauHoi, index) in pKhaoSat.dsCauHoiChinh">
          <appCauHoi :cauHoi="cauHoi" :key="index"></appCauHoi>
      </template> -->
      <!-- <div class="box-form" v-for="(cauHoi, index) in pKhaoSat.dsCauHoiChinh" :key="index">
        <div class="desc marb10" v-if="cauHoi.NOIDUNG">{{ cauHoi.NOIDUNG }}</div>
        <div class="list-check-ver">
          <div
            class="item marb5"
            v-for="(cauHoiPhu, indexPhu) in cauHoi.cauHoiPhu"
            :key="cauHoiPhu.RCH_ID"
          >
            <div class="check-action -color">
              <input
                :type="cauHoi.LOAICH_ID == 1 ? 'radio' : 'checkbox'"
                class="check"
                :name="cauHoi.CAUHOI_ID"
                :value="cauHoiPhu.Checked"
                @change="onTraLoiChecked(index, indexPhu)"
              />
              <span class="name">{{ cauHoiPhu.NOIDUNG_TL }}</span>
            </div>
            <input type="text" class="form-control" v-if="cauHoiPhu.Checked && cauHoiPhu.LOAI == 1" v-model="cauHoiPhu.TxtNoiDung"/>
          </div>
        </div>
      </div> -->
    </div>
  </div>
  <appNoiDungKhaoSat :ghiChu="pTxtGhiChu" :tbtlId="p_TBTL_ID" :khaoSat="pKhaoSat" @ghiAm="playAudio2"/>
  <appNhanVienXuLy :baoHongId="p_BAOHONG_ID" :hdtbId="p_HDKH_ID"/>
  <frmNhacViecBH ref="reffrmNhacViecBH2" :params="frmNhacViecBHInput"></frmNhacViecBH>
  <b-modal id="popup-audio" size="sm" hide-footer hide-header body-class="modal-body p-0" centered>
    <div class="modal-content popup-box">
        <audio :src="srcAudio" controls autoplay></audio>
    </div>
  </b-modal>
</div>
