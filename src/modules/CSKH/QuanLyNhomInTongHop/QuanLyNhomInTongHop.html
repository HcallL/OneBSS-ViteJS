<div class="">
  <div class="list-actions-top">
    <ul class="list">
      <li>
        <a href="javascript: void(0)" @click="onNhapMoiClicked" :class="{'disabled': !btnNhapMoiEnable}" data-toggle="tooltip" title="Nhập mới">
          <span class="icon one-file-plus"></span>Nhập mới
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="onCapNhapClicked" :class="{'disabled': !btnCapNhapEnable}" data-toggle="tooltip" title="Cập nhật">
          <span class="icon one-reload1"></span>Cập nhật
        </a>
      </li>
      <li>
        <a href="javascript: void(0)" @click="onXoaNhomClicked" :class="{'disabled': !btnXoaNhomEnable}" data-toggle="tooltip" title="Xoá nhóm">
          <span class="icon one-trash"></span>Xoá nhóm
        </a>
      </li>
    </ul>
  </div>
  <div class="page-content">
    <div class="row">
      <div class="col-sm-8 col-12">
        <div class="box-form">
          <div class="legend-title">Thông tin nhóm</div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w90">Nhân viên<BssRequiredMarker/></div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="optNhanVien.selectedValue" :dataSource="optNhanVien.dataSource"
                        dataTextField="text" dataValueField="id" placeholder="Chọn nhân viên"/>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w90">Số máy/Acc<BssRequiredMarker/></div>
                <div class="value">
                  <input type="text" class="form-control highlight" ref="txtSMTaoNhom" v-model="txtSMTaoNhom"
                        @keyup.enter="onTxtSMTaoNhom_KeyPress" data-toggle="tooltip" title="Số máy sử dụng để tạo nhóm">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w90">Mã nhóm</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="txtMaNhom" ref="txtMaNhom" maxlength="20">
                </div>
              </div>
            </div>
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w90">Tên nhóm<BssRequiredMarker/></div>
                <div class="value">
                  <input type="text" class="form-control" v-model="txtTenNhom" ref="txtTenNhom">
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w90">Mã in ghép</div>
                <div class="value">
                  <input type="text" ref="txtMaIG" class="form-control" v-model="txtMaIG">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w90">Người liên hệ<BssRequiredMarker/></div>
                <div class="value">
                  <input type="text" class="form-control" v-model="txtNguoiLH" ref="txtNguoiLH">
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w90">Fax</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="txtSoFax" ref="txtSoFax">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w90">Email<BssRequiredMarker/></div>
                <div class="value">
                  <input type="email" class="form-control" v-model="txtEmail" ref="txtEmail" title="email1,email2,...(cách nhau bởi dấu ,)">
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w90">Số điện thoại</div>
                <div class="value">
                  <input type="text" class="form-control" v-model="txtSDT" ref="txtSDT" title="sdt1,sdt2,...(cách nhau bởi dấu ,)">
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7 col-12">
                <div class="info-row">
                    <div class="key w90">Địa chỉ<BssRequiredMarker/></div>
                    <div class="value">
                      <input type="text" class="form-control" v-model="txtDiaChi" ref="txtDiaChi">
                    </div>
                </div>
            </div>
            <div class="col-sm-5 col-12">
                <div class="info-row">
                    <div class="key w90">File</div>
                    <div class="value">
                        <div class="select-custom">
                            <ejs-multiselect mode="CheckBox" selectAllText="Chọn tất cả" unSelectAllText="Bỏ chọn tất cả"
                              v-model="IdsFile" locale='vi-VN' :dataSource='dsLoaiFile' :allowFiltering='true'
                              :fields="{value:'LOAI_ID', text: 'TEN'}" showSelectAll="true" :showDropDownIcon="true"
                              :value="IdsFile" placeholder="Chọn loại file" popupWidth="300px"></ejs-multiselect>
                          </div>
                    </div>
                </div>
            </div>
          </div>

        </div>
        <div class="box-form">
          <div class="legend-title mart10">Thông tin tìm kiếm</div>
          <div class="row">
            <div class="col-sm-7 col-12">
              <div class="info-row">
                <div class="key w90">Lọc theo NV</div>
                <div class="value">
                  <div class="select-custom">
                    <SelectExt v-model.trim="optNhanVien.nvLocSelectedValue" :dataSource="optNhanVien.dataSource"
                        dataTextField="text" dataValueField="id" placeholder="Chọn nhân viên" @change="onDsNVTaoNhomLocChange"/>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-5 col-12">
              <div class="info-row">
                <div class="key w90">Số máy/Acc</div>
                <div class="value">
                  <input type="text" class="form-control highlight" v-model="txtMaTB" ref="txtMaTB" @keyup.enter="onTxtMaTB_KeyPress" data-toggle="tooltip" title="Lọc dữ liệu theo Số máy/Acc">
                </div>
              </div>
            </div>
          </div>
            <DataGrid3
              :columns="dgvNhomKHL.columns"
              :dataSource="dgvNhomKHL.dataSource"
              ref="dgvNhomKHL"
              :panelDataHeight="'400'"
              @selectedRowChanged="onDsNhomKHLonSelected"
              dataKeyField="NHOMKH_ID"
              :showFilter="true"
              :allowPaging="true"
              :enablePagingServer="false"
              :enabledSelectFirstRow="true"
              >
            </DataGrid3>
            <!-- <DataGrid2 :columns="dsNhomKHLonFields" :dataSource="dsNhomKHLonGetter" ref="dsKHLon" style="height:400px"
              @selectedRowChanged="onDsNhomKHLonSelected" dataKeyField="NHOMKH_ID" :showFilter="true"></DataGrid2> -->

        </div>
      </div>
      <div class="col-sm-4 col-12">
        <div class="box-form">
          <div class="legend-title">Danh sách mã thanh toán thuộc nhóm</div>
          <div class="info-row">
            <div class="key w40 padt0 nowrap" style="padding-top: 0px !important">
              <button class="btn-custom btn btn-second padt3 padb3" @click="onThemClicked">
                Thêm <span class="icon f16 inline vcenter  icon-plus2 -ap"></span>
              </button>
            </div>
            <div class="value">
              <input type="text" class="form-control" v-model="txtMaTT">
            </div>
            <div class="value w40 nowrap">
              <button class="btn-custom btn btn-second padt3 padb3" @click="onXoaClicked">
                Xoá <span class="icon f16 inline vcenter  icon-minus2 -ap"></span>
              </button>
            </div>
            <div class="value w40 nowrap">
              <button class="btn-custom btn btn-second padt3 padb3" @click="onThemFileClicked">
                Thêm File <span class="icon f16 inline vcenter  nc-icon-glyph files_folder-add"></span>
              </button>
            </div>
          </div>
          <div class="info-row">
            <div class="key w80 padt0 nowrap">
            </div>
            <div class="value">
              <div>
                <b-form-checkbox class="check" v-model="tuDongStatus" value="1" unchecked-value="0">
                  <span class="name">Tự động cập nhật</span>
                </b-form-checkbox>
              </div>
            </div>
          </div>
          <div class="table-content" style="min-height: 200px;">
            <!-- <DataGrid2 @selectedRowChanged="onDsMaThanhToanThuocNhomRowSelected" :columns="dsMaThanhToanThuocNhomFields"
              :dataSource="dsThanhToanThuocNhomGetter" ref="dsMaThanhToanThuocNhom" dataKeyField="THANHTOAN_ID"
              :showFilter="true"></DataGrid2> -->
              <DataGrid3
                :columns="dgvMaTTThuocNhom.columns"
                :dataSource="dgvMaTTThuocNhom.dataSource"
                ref="dgvMaTTThuocNhom" dataKeyField="THANHTOAN_ID"
                :showFilter="true"
                :allowPaging="true"
                :enablePagingServer="false"
                :enabledSelectFirstRow="true"
                :useAggregates="true"
                :aggregates="TC_TTThuocNhomAggregatesColumns"
              >
              </DataGrid3>
          </div>
        </div>
        <div class="box-form">
          <div class="legend-title">Danh sách mã thanh toán không thuộc nhóm</div>
          <div class="table-content" style="min-height: 300px;">
            <DataGrid3
                :columns="dgvMaTTKoThuocNhom.columns"
                :dataSource="dgvMaTTKoThuocNhom.dataSource"
                ref="dgvMaTTKoThuocNhom" dataKeyField="THANHTOAN_ID"
                :showFilter="true"
                :allowPaging="true"
                :enablePagingServer="false"
                :enabledSelectFirstRow="true"
                :useAggregates="true"
                :aggregates="TC_TTKoThuocNhomAggregatesColumns"
              >
            </DataGrid3>
            <!-- <DataGrid2 :columns="dsMaThanhToanKoThuocNhomFields" :dataSource="dsThanhToanKoThuocNhomGetter"
              ref="dsMaThanhToanKoThuocNhom" dataKeyField="THANHTOAN_ID" :showFilter="true"></DataGrid2> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <b-modal id="popup-xoaConfirm" ref="xoaConfirm" title="Thông báo!">
    <span>Bạn thật sự muốn xóa thanh toán không ?</span>
    <template #modal-footer="{ ok, cancel }">
      <b-button variant="secondary" style="color: white" @click="$bvModal.hide('popup-xoaConfirm')">Hủy</b-button>
      <b-button variant="primary" style="color: white" @click="onXoaConfirm">Đồng ý</b-button>
    </template>
  </b-modal>
  <b-modal id="popup-xoaNhomConfirm" ref="xoaNhomConfirm" title="Thông báo!">
    <span>Bạn thật sự muốn xóa nhóm không ?</span>
    <template #modal-footer="{ ok, cancel }">
      <b-button variant="secondary" style="color: white" @click="$bvModal.hide('popup-xoaNhomConfirm')">Hủy</b-button>
      <b-button variant="primary" style="color: white" @click="onXoaNhomConfirm">Đồng ý</b-button>
    </template>
  </b-modal>
  <appChonThanhToanTuFile ref="popupChonThanhToanTuFile"  @onHideEvent="refreshDsTTThuocNhom"/>
  <!-- <b-modal id="popupChonThanhToanTuFile" ref="popupChonThanhToanTuFile" title="Chọn thanh toán từ file" size="xl" hide-footer>
    <ChonThanhToanTuFile :nhomKHId="nhomKHLon.NHOMKH_ID" :tenNhom="nhomKHLon.TENNHOM" />
</b-modal> -->
</div>
