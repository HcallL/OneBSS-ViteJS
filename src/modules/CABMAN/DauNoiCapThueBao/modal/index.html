<b-modal :id="modalId" 
    size="xl" 
    hide-header 
    hide-footer 
    body-class="modal-body p-0"
    no-close-on-esc
    no-close-on-backdrop
    @shown="showForm"
>
    <div class="modal-content popup-box form-daunoi-cap-thuebao">
        <div class="popup-header">
            <div class="title"><span class="icon -ap icon-apps text-main"></span>Đấu nối cáp thuê bao</div>
            <div class="close -ap icon-close" data-dismiss="modal" @click="$bvModal.hide(modalId)">
            </div>
        </div>
        <div class="list-actions-top">
            <ul class="list" style="position: unset;">
                <li>
                    <a href="javascript:void(0)" @click="btnLamMoi_Click">
                        <span class="icon one-search"></span>Làm mới
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)" @click="btnXacNhan_Click">
                        <span class="icon one-connect"></span>Xác nhận
                    </a>
                </li>
            </ul>
        </div>
        <div class="popup-body">
            <div class="row">
                <div class="col-sm-5 col-12">
                    <div class="box-form">
                        <div class="row">
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="key w100">Đấu nối vào</div>
                                    <div class="value">
                                        <div class="list-checks mart7">
                                            <div class="item">
                                                <div class="check-action">
                                                    <input name="DauNoi" type="radio" class="check" value="0" v-model="rd_daunoi">
                                                    <span class="name">Kết cuối</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                            </div>
                            <div class="col-sm-6 col-12">
                                <div class="info-row">
                                    <div class="value">
                                        <div class="list-checks mart7">
                                            <div class="item">
                                                <div class="check-action">
                                                    <input name="DauNoi" type="radio" class="check" value="1" v-model="rd_daunoi">
                                                    <span class="name">Thiết bị</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                            </div>
                        </div>
                        <div v-if="rd_daunoi == 0">
                            <div class="info-row">
                                <div class="key w100">Ký hiệu kết cuối</div>
                                <div class="value">
                                    <input type="text" class="form-control highlight" v-model.trim="txtKyHieuKC" @keyup.enter="NAP_DS_PORT">
                                </div>
                            </div>
                        </div>
                        <div v-if="rd_daunoi == 1">
                            <div class="info-row">
                                <div class="key w100">Trung tâm VT</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt
                                        v-model.trim="cboTTVT"
                                        :settings="{dropdownParent: $refs['cboTTVT']}"
                                        :dataSource="dsTTVT"
                                        dataTextField="TEN_DV"
                                        dataValueField="DONVI_ID"/>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Tổ kỹ thuật</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cboTOKT"
                                            :settings="{dropdownParent: $refs['cboTOKT']}"
                                            :dataSource="dsTOKT"
                                            dataTextField="TEN_DV"
                                            dataValueField="DONVI_ID"/>
                                        </div>
                                    </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Trạm thiết bị</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cboTRAM"
                                            :settings="{dropdownParent: $refs['cboTRAM']}"
                                            :dataSource="dsTRAM"
                                            dataTextField="TEN_DV"
                                            dataValueField="DONVI_ID"/>
                                        </div>
                                    </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Loại thiết bị</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cboLOAI_TBI"
                                            :settings="{dropdownParent: $refs['cboLOAI_TBI']}"
                                            :dataSource="dsLOAI_TBI"
                                            dataTextField="LOAI_TBI"
                                            dataValueField="LOAITBI_ID"/>
                                        </div>
                                    </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Thiết bị</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cboTHIETBI"
                                            :settings="{dropdownParent: $refs['cboTHIETBI']}"
                                            :dataSource="dsTHIETBI"
                                            dataTextField="TEN_TB"
                                            dataValueField="THIETBI_ID"/>
                                        </div>
                                    </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Card</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cboCARD"
                                            :settings="{dropdownParent: $refs['cboCARD']}"
                                            :dataSource="dsCARD"
                                            dataTextField="TEN_TB"
                                            dataValueField="THIETBI_ID"/>
                                        </div>
                                    </div>
                            </div>
                            <div class="info-row">
                                <div class="key w100">Sub-card (module)</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cboMODULE"
                                            :settings="{dropdownParent: $refs['cboMODULE']}"
                                            :dataSource="dsMODULE"
                                            dataTextField="TEN_TB"
                                            dataValueField="THIETBI_ID"/>
                                        </div>
                                    </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Cổng</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cboPORT"
                                    :settings="{dropdownParent: $refs['cboPORT']}"
                                    :dataSource="dsPORT"
                                    dataTextField="VITRI"
                                    dataValueField="VITRI"/>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Cự ly (mét)</div>
                            <div class="value">
                                <input type="number" class="form-control" v-model.trim="txtCuLy">
                            </div>
                        </div>
                        <div class="legend-title mart10">Ghi chú</div>
                        <div class="info-row">
                            <div class="value">
                                <textarea class="form-control" style="height: 150px;resize: none;" v-model.trim="txtGhiChu" ></textarea>
                            </div>
                        </div>
                        <!-- <div class="info-row">
                            <div class="value center">
                                <button class="btn btn-second" style="min-width: 100px;">
                                    <span class="icon fa fa-check-circle"></span> Cập nhật ghi chú
                                </button>
                            
                            </div>
                        </div> -->
                    </div>
                </div>
                <div class="col-sm-7 col-12">
                    <div class="box-form">
                        <!-- <div class="legend-title">Danh sách đấu nối</div> -->
                        <DataGrid v-bind:columns="[
                                {fieldName: 'STT', headerText: 'STT', allowFiltering: true, allowSorting: true, width: 100},
                                {fieldName: 'LOAI_TBI', headerText: 'Loại thiết bị', allowFiltering: true},
                                {fieldName: 'TEN_TBI', headerText: 'Tên thiết bị', allowFiltering: true},
                                {fieldName: 'VITRI', headerText: 'Cổng Sợi', allowFiltering: true},
                                {fieldName: 'DIACHI', headerText: 'Địa chỉ', allowFiltering: true},
                                {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true}
                            ]"
                        v-bind:dataSource="dsDanDo" :showFilter="true"></DataGrid>
                    </div>
                </div>
            </div>
        </div>
    </div>
</b-modal>
