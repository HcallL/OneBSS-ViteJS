<div>
    <Modal modalId="popupImportByFile" />
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="javascript:void(0)" class="btn" v-b-modal.popupImportByFile><span class="icon one-template"></span>Nhập từ file</a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">
                Lọc theo cáp gốc
            </div>
            <div class="row">
                <div class="col-sm-3 col-12">
                    <div class="info-row">
                        <div class="key w60">
                            TTVT
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model.trim="dataSelected.TTVT" :dataSource="dsTTVT" dataTextField="TEN_DV"
                                dataValueField="DONVI_ID" @change="onChangeTTVT($event)"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-12">
                    <div class="info-row">
                        <div class="key w60">
                            Tổ QL
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model.trim="dataSelected.ToQL" :dataSource="dsToQL" dataTextField="TEN_DV"
                                dataValueField="DONVI_ID" @change="onChangeToQL($event)"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="info-row">
                        <div class="key w60">
                            Tổng đài
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model.trim="dataSelected.TongDai" :dataSource="dsTongDai" dataTextField="TEN_DV"
                                    dataValueField="DONVI_ID" @change="onChangeTongDai($event)" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 col-12">
                    <div class="info-row">
                        <div class="key w60">
                            Nhóm
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model.trim="dataSelected.NhomCap" :dataSource="dsNhomCap" dataTextField="loai_cap"
                                    dataValueField="loai_cap" @change="onChangeNhomCap()" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-9 col-12">
                    <div class="info-row">
                        <div class="key w60">
                            Cáp gốc
                        </div>
                        <ComboboxGrid ref="cap-goc" v-bind:columns="[
                      {fieldName: 'KYHIEU', headerText: 'Ký hiệu', allowFiltering: true},
                      {fieldName: 'TEN_CAP', headerText: 'Tên cáp', allowFiltering: true},
                      ]" v-bind:dataSource="dsCapGoc" textField="TEN_CAP" valueField="CAP_ID"
                            @selectedChanged="cbb_selectedChanged"></ComboboxGrid>
                    </div>
                </div>
            </div>
        </div>

        <div class="box-form">
            <div class="legend-title">
                {{tenCapGoc}}
            </div>
            <div class="box-move-select-table">
                <div class="box-col">
                    <div class="box-form">
                        <div class="legend-title">Kết cuối chưa phân nhân viên quản lý</div>
                        <DataGrid v-bind:columns="[
                      
                        {fieldName: 'KYHIEU', headerText: 'Ký hiệu', allowFiltering: true},
                        {fieldName: 'DUNGLUONG', headerText: 'Dung lượng', allowFiltering: true},
                        {fieldName: 'DIACHI', headerText: 'Địa chỉ', allowFiltering: true},                      
                        ]" v-bind:dataSource="dsKetCuoiChuaPhan" :showColumnCheckbox="true" dataKeyField="KETCUOI_ID"
                            @selectedItemsChanged="selectCP_selectedItemsChanged" :showFilter="true"></DataGrid>
                    </div>

                </div>
                <div class="actions">
                    <a class="btn" @click="ganql()">
                        <span class="fa fa-angle-right"></span>
                    </a>
                    <button class="btn" @click="ganAllql()">
                        <span class="fa fa-angle-double-right"></span>
                    </button>
                    <button class="btn" @click="goql()">
                        <span class="fa fa-angle-left"></span>
                    </button>
                    <button class="btn" @click="goAllql()">
                        <span class="fa fa-angle-double-left"></span>
                    </button>
                </div>
                <div class="box-col">
                    <div class="title-bg-main">
                        <span class="title">Kết cuối đã có nhân viên quản lý</span>
                    </div>
                    <div class="info-row">
                        <div class="key w70">
                            Nhân viên
                        </div>
                        <div class="value">
                            <div class="select-custom"  ref="nhanvien" >
                                <SelectExt v-model.trim="dataSelected.NhanVien" 
                                :settings="{selectionCssClass:isError}"                                                      
                                :dataSource="dsNhanVien" dataTextField="TEN_NV"
                                 dataValueField="NHANVIEN_ID" />     
                            </div>
                        </div>
                    </div>
                    <div class="box-move-select-table">

                        <div class="box-form">
                            <DataGrid  ref= "grid" v-bind:columns="[
                               
                                {fieldName: 'KYHIEU', headerText: 'Ký hiệu', allowFiltering: true},
                                {fieldName: 'DUNGLUONG', headerText: 'Dung lượng', allowFiltering: true},
                                {fieldName: 'DIACHI', headerText: 'Địa chỉ', allowFiltering: true}, 
                                {fieldName: 'TEN_NV', headerText: 'Nhân viên QL', allowFiltering: true,cellCreatedEventEnabled: true},                     
                                ]" v-bind:dataSource="dsKetCuoiDaPhan" :showFilter="true" :showColumnCheckbox="true"
                                dataKeyField="KETCUOI_ID" @selectedItemsChanged="selectDP_selectedItemsChanged"
                                @dataGridCellCreated="grid_dataGridCellCreated"></DataGrid>
                        
                            </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>