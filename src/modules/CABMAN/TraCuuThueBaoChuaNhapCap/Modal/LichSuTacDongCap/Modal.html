<b-modal 
    :id="modalId" 
    size="lg" 
    no-close-on-backdrop
    hide-footer 
    hide-header 
    hide-header-close 
    @hidden="hiddenModal"
    @shown="shownModal"
    body-class="modal-body p-0">    
    <div class="modal-content popup-box">
        <div class="popup-header">
            <div class="title"><span class="icon one-notepad"></span>Lịch sử tác động thông tin cáp</div>
            <div class="close -ap icon-close" data-dismiss="modal" @click="$bvModal.hide(modalId)">
            </div>
        </div>
        <div class="list-actions-top">
            <ul class="list">
                <li @click="getData" :class="{'disable-btn': checkDisable()}">
                    <a href="javascript:void(0)">
                        <span class="icon one-file-search"></span>Tra cứu
                    </a>
                </li>
            </ul>
        </div>
        <div class="popup-body">
            <div class="box-form">
                <div class="legend-title">Thông tin tìm kiếm</div>
                <div class="row">
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w80">Số máy/Acc</div>
                            <div class="value">
                                <input  type="text" class="form-control highlight" v-model="matb">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w70">Từ ngày</div>
                            <div class="value">
                                <div class="input-icon-right">
                                    <flat-pickr
                                      id="tungay"
                                      v-model="tungay"
                                      class="form-control"                                      
                                      :config="dateConfig"
                                    />
                                    <span class="icon one-calendar normal"></span>
                                </div>
                            </div>                          
                        </div>
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="info-row">
                            <div class="key w70">Đến ngày</div>                           
                            <div class="value">
                                <div class="input-icon-right">
                                    <flat-pickr
                                      id="denngay"
                                      v-model="denngay"
                                      class="form-control"                                     
                                      :config="dateConfig"
                                    />
                                    <span class="icon one-calendar normal"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-form">
                <div class="legend-title">
                    <div class="title">Lịch sử tác động thông tin cáp</div>
                </div>
                <div class="table-content">
                    <DataGrid v-bind:columns="[
                                {fieldName: 'MA_GD', headerText: 'Mã GD', allowFiltering: true},
                                {fieldName: 'MA_TB', headerText: 'Số máy/Acc', allowFiltering: true},
                                {fieldName: 'TEN_KH', headerText: 'Tên KH', allowFiltering: true},
                                {fieldName: 'CAP_ID', headerText: 'Cáp', allowFiltering: true},

                                {fieldName: 'KETCUOI_ID', headerText: 'Kết cuối', allowFiltering: true},
                                {fieldName: 'DOICAP', headerText: 'Đôi cáp', allowFiltering: true},
                                {fieldName: 'VITRI', headerText: 'Vị trí', allowFiltering: true},

                                {fieldName: 'CAPCU', headerText: 'Cáp cũ', allowFiltering: true},
                                {fieldName: 'KETCUOICU', headerText: 'Kết cuối cũ', allowFiltering: true},
                                {fieldName: 'DOICAPCU', headerText: 'Đôi cáp cũ', allowFiltering: true},                                                                
                                {fieldName: 'VITRICU', headerText: 'Vị trí cũ', allowFiltering: true},


                                {fieldName: 'NGUOI_CN', headerText: 'Người cập nhật', allowFiltering: true},
                                {fieldName: 'NGAY_CN', headerText: 'Ngày cập nhật', allowFiltering: true},
                                {fieldName: 'MAY_CN', headerText: 'Máy CN', allowFiltering: true},
                                {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true}]"
                                v-bind:dataSource="danhsach" 
                                :showFilter="true" 
                                dataKeyField="THUEBAO_ID"  
                                :enable-paging-server="false"                                        
                                :allowPaging="true"
                                @selectedRowChanged="grid_selectedRowChanged" 
                                :selectedRow="indexFocus" >
                        </DataGrid>                        
                </div>               
            </div>
        </div>
    </div>
</b-modal>