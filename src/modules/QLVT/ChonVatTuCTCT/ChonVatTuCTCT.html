<ejs-dialog
    :enableResize='true'
    :allowDragging='true'
    :visible='false'
    ref="popupChonVatTuCTCT"
    :animationSettings='animationSettings'
    showCloseIcon=true width='90%'
    :target='target'
    :header='"Chọn chi tiết vật tư cho chứng từ"'
    :close="closeChonVatTuCTCT">    
    <div class="">
        <div class="list-actions-top">
            <ul class="list">
                <li @click="tsbtnLayTT_Click">
                    <a>
                        <span class="icon nc-icon-glyph ui-1_check-circle-08"></span> Lấy TT
                    </a>
                </li>
            </ul>
        </div>
        <div class="popup-body">
            <div class="box-move-select-table">
                <div class="box-form">
                    <div class="legend-title">
                        <span class="title pull-left mart7">
                            Danh sách chi tiết vật tư
                        </span>
                        <!-- <div class="pull-left">Danh sách chi tiết vật tư</div> -->
                        <div class="clearfix"></div>
                    </div>
                    <div class="table-content">
                     
                        <DataGrid3 :columns="[
                            {fieldName: 'ID_NHAPGOC', headerText: 'IDG', allowFiltering: true },
                            {fieldName: 'CTCT_ID', headerText: 'CTCT', allowFiltering: true , isPrimaryKey:true },
                            {fieldName: 'LOHANG', headerText: 'Lô hàng', allowFiltering: true },
                            {fieldName: 'MA_VT', headerText: 'Mã vật tư', allowFiltering: true },
                            {fieldName: 'TEN_VT', headerText: 'Tên vật tư', allowFiltering: true },
                            {fieldName: 'DVI_TINH', headerText: 'ĐVT', allowFiltering: true },
                            {fieldName: 'SOLUONG', headerText: 'Số lượng', allowFiltering: true , format: 'N3', type: 'number' },
                            {fieldName: 'DONGIA', headerText: 'Đơn giá', allowFiltering: true , format: 'N3', type: 'number' },
                            {fieldName: 'TIEN', headerText: 'Thành tiền', allowFiltering: true , format: 'N3', type: 'number'},
                            {fieldName: 'LOAIKHO', headerText: 'Loại kho', allowFiltering: true },
                            {fieldName: 'MAKHOTD', headerText: 'Mã kho TD', allowFiltering: true },
                            {fieldName: 'TK_KHO', headerText: 'TK Kho', allowFiltering: true },
                            {fieldName: 'TK_DOIUNG', headerText: 'TK Đối ứng', allowFiltering: true },
                            {fieldName: 'TY_LE', headerText: 'Tỷ lệ thu hồi (%)', allowFiltering: true },
                            {fieldName: 'MATHETS', headerText: 'Thẻ TS', allowFiltering: true },
                            {fieldName: 'SOTHANG_PB', headerText: 'Số tháng PB', allowFiltering: true },
                            {fieldName: 'LOAI_TBI', headerText: 'Loại thiết bị', allowFiltering: true },
                            {fieldName: 'HAN_BH', headerText: 'Hạn BH', allowFiltering: true },
                            {fieldName: 'MA_HD', headerText: 'Mã HĐ', allowFiltering: true },
                            {fieldName: 'MA_TH', headerText: 'Đợt TH', allowFiltering: true },
                            {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true },
                            {fieldName: 'DUAN', headerText: 'Dự án', allowFiltering: true },
                            {fieldName: 'GHICHU_HD', headerText: 'Ghi chú HĐ', allowFiltering: true },
                            {fieldName: 'TEN_CONGTRINH', headerText: 'Tên CT', allowFiltering: true },
                            {fieldName: 'DS_DVI_TC', headerText: 'Đơn vị TC', allowFiltering: true },
                            ]" 
                            :dataSource="DSVatTu"
                            dataKeyField="CTCC_ID" 
                            :showFilter="true" 
                            @selectedRowChanged="gridVatTuFocus" 
                            ref="gridVatTu" 
                            :allowPaging="true"
                            :enablePagingServer="false"
                            :enabledSelectFirstRow="true"              
                            />   
                        </DataGrid3>   
                       
                    </div>
                </div>
            </div>
            <div class="box-move-select-table">
                <div class="box-col box-form">
                    <div class="legend-title">
                        <span class="title pull-left mart7">
                            Thông tin chi tiết vật tư đã gán
                        </span>
                        <!-- <div class="pull-left">Thông tin chi tiết vật tư đã gán</div> -->
                        <div class="clearfix"></div>
                    </div>
                    <div class="table-content">
                        <DataGrid3  :columns="[
                            {fieldName: 'ID_NHAPGOC', headerText: 'IDG', allowFiltering: true , freeze: 'Left' , width: 90},
                            {fieldName: 'CTCT_ID', headerText: 'CTCT', allowFiltering: true , freeze: 'Left' , width: 90},
                            {fieldName: 'LOHANG', headerText: 'Lô hàng', allowFiltering: true },
                            {fieldName: 'MA_VT', headerText: 'Mã vật tư', allowFiltering: true },
                            {fieldName: 'TEN_VT', headerText: 'Tên vật tư', allowFiltering: true },
                            {fieldName: 'DVI_TINH', headerText: 'ĐVT', allowFiltering: true },
                            {fieldName: 'SOLUONG', headerText: 'Số lượng', allowFiltering: true },
                            {fieldName: 'DONGIA', headerText: 'Đơn giá', allowFiltering: true },
                            {fieldName: 'TIEN', headerText: 'Thành tiền', allowFiltering: true },
                            {fieldName: 'LOAIKHO', headerText: 'Loại kho', allowFiltering: true },
                            {fieldName: 'MAKHOTD', headerText: 'Mã kho TD', allowFiltering: true },
                            {fieldName: 'TK_KHO', headerText: 'TK Kho', allowFiltering: true },
                            {fieldName: 'TK_DOIUNG', headerText: 'TK Đối ứng', allowFiltering: true },
                            {fieldName: 'TY_LE', headerText: 'Tỷ lệ thu hồi (%)', allowFiltering: true },
                            {fieldName: 'MATHETS', headerText: 'Thẻ TS', allowFiltering: true },
                            {fieldName: 'SOTHANG_PB', headerText: 'Số tháng PB', allowFiltering: true },
                            {fieldName: 'LOAI_TBI', headerText: 'Loại thiết bị', allowFiltering: true },
                            {fieldName: 'HAN_BH', headerText: 'Hạn BH', allowFiltering: true },
                            {fieldName: 'MA_HD', headerText: 'Mã HĐ', allowFiltering: true },
                            {fieldName: 'MA_TH', headerText: 'Đợt TH', allowFiltering: true },
                            {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true },
                            {fieldName: 'DUAN', headerText: 'Dự án', allowFiltering: true },
                            {fieldName: 'GHICHU_HD', headerText: 'Ghi chú HĐ', allowFiltering: true },                        
                            {fieldName: 'TEN_CONGTRINH', headerText: 'Tên CT', allowFiltering: true },
                            {fieldName: '', headerText: 'Cuộn cáp', allowFiltering: true },
                            {fieldName: 'DS_DVI_TC', headerText: 'Đơn vị TC', allowFiltering: true },                        
                            ]" 
                            :dataSource="DS_DaGan"
                            dataKeyField="" 
                            :showFilter="true" 
                            @selectedRowChanged="" 
                            ref="gridDS_DaGan" 
                            :allowPaging="true"
                            :enablePagingServer="false"
                            :enabledSelectFirstRow="false"   
                            :showColumnCheckbox='true'
                            @selectedItemsChanged="gridDS_DaGanChecked"           
                        ></DataGrid3>   
                    </div>
                </div>
                <div class="actions">
                    
                    <button class="btn" @click="btnGan_Click">
                        <span class="-ap icon-chevron-thin-left"></span>
                    </button>
                    <button class="btn"  @click="btnGo_Click" >
                        <span class="-ap icon-chevron-thin-right"></span>
                    </button>
                </div>
                <div class="box-col box-form">
                    <div class="legend-title">
                        <span class="title pull-left mart7">
                            Thông tin chi tiết vật tư chưa gán
                        </span>
                        <!-- <div class="pull-left">Thông tin chi tiết vật tư chưa gán</div> -->
                        <div class="clearfix"></div>
                    </div>
                    <div class="table-content">
                        <div class="table-content">
                            <DataGrid  :columns="[
                                {fieldName: '', headerText: '', allowSorting:false , allowFiltering:false, textAlign:'Center',  width: 40, headerTemplate:columnsCheckboxAll ,template:columnsCheckbox, freeze: 'Left'},
                                {fieldName: 'ID_NHAPGOC', headerText: 'IDG', allowFiltering: true , freeze: 'Left' , width: 90},
                                {fieldName: 'CTCT_ID', headerText: 'CTCT', allowFiltering: true , freeze: 'Left' , isPrimaryKey:true , width: 90},
                                {fieldName: 'LOHANG', headerText: 'Lô hàng', allowFiltering: true },
                                {fieldName: 'MA_VT', headerText: 'Mã vật tư', allowFiltering: true },
                                {fieldName: 'TEN_VT', headerText: 'Tên vật tư', allowFiltering: true },
                                {fieldName: 'DVI_TINH', headerText: 'ĐVT', allowFiltering: true },
                                {fieldName: 'SOLUONG', headerText: 'Số lượng', allowFiltering: true },
                                {fieldName: 'DONGIA', headerText: 'Đơn giá', allowFiltering: true },
                                {fieldName: 'TIEN', headerText: 'Thành tiền', allowFiltering: true },
                                {fieldName: 'LOAIKHO', headerText: 'Loại kho', allowFiltering: true },
                                {fieldName: 'MAKHOTD', headerText: 'Mã kho TD', allowFiltering: true },
                                {fieldName: 'TK_KHO', headerText: 'TK Kho', allowFiltering: true },
                                {fieldName: 'TK_DOIUNG', headerText: 'TK Đối ứng', allowFiltering: true },
                                {fieldName: 'TY_LE', headerText: 'Tỷ lệ thu hồi (%)', allowFiltering: true },
                                {fieldName: 'MATHETS', headerText: 'Thẻ TS', allowFiltering: true },
                                {fieldName: 'SOTHANG_PB', headerText: 'Số tháng PB', allowFiltering: true },
                                {fieldName: 'LOAI_TBI', headerText: 'Loại thiết bị', allowFiltering: true },
                                {fieldName: 'HAN_BH', headerText: 'Hạn BH', allowFiltering: true },
                                {fieldName: 'MA_HD', headerText: 'Mã HĐ', allowFiltering: true },
                                {fieldName: 'MA_TH', headerText: 'Đợt TH', allowFiltering: true },
                                {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true },
                                {fieldName: 'DUAN', headerText: 'Dự án', allowFiltering: true },
                                {fieldName: 'GHICHU_HD', headerText: 'Ghi chú HĐ', allowFiltering: true },                        
                                {fieldName: 'TEN_CONGTRINH', headerText: 'Tên CT', allowFiltering: true },                               
                                {fieldName: 'DS_DVI_TC', headerText: 'Đơn vị TC', allowFiltering: true },
                                {fieldName: 'SL_XUAT', headerText: 'SL Xuất', allowFiltering: true , freeze: 'Right' , width: 90, allowEditing: true},
                                {fieldName: 'SOPHIEU', headerText: 'Số phiêu', allowFiltering: true , freeze: 'Right' , width: 90},
                                ]" 
                                :dataSource="DS_ChuaGan"
                                dataKeyField="CTCT_ID" 
                                :showFilter="true"
                                ref="gridDS_ChuaGan" 
                                :allowPaging="true"
                                :enablePagingServer="false"
                                :enabledSelectFirstRow="false"   
                                :showColumnCheckbox='false'                         
                                :editSettings='editSettings'  
                                @cellSaved="editGridChuaGan"      
                                />   
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
</ejs-dialog>


