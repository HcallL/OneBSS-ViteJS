<ejs-dialog
    :visible='false'
    ref="popupGiaHanHD"
    :animationSettings="{ effect: 'Zoom' }"
    :showCloseIcon=true 
    :enableResize=true
    :allowDragging=true
    width='80%'
    height ="100%"
    :isModal='true'
    :close="tsbtnThoat_Click"
    :zIndex="1051"
    header='<h1 class="f20 m-0 font-weight-bold">Gia hạn hợp đồng</h1>' 
    >
    <div>
        <div class="list-actions-top d-flex justify-content-start align-items-center">
            <ul class="list">
                <li @click="tsbtnNhapMoi_Click" :class="{'disabled': !Enabled.tsbtnNhapMoi}">    
                    <a>
                        <span class="icon nc-icon-glyph ui-1_circle-add"></span> Nhập mới 
                    </a>                   
                </li>
                <li @click="tsbtnGhiLai_Click" :class="{'disabled': !Enabled.tsbtnGhiLai}">
                    <a>
                        <span class="icon  one-save"></span> Ghi lại
                    </a>
                </li>
                <li @click="tsbtnHuyBo_Click" :class="{'disabled': !Enabled.tsbtnHuyBo}">     
                    <a>
                        <span class="icon  nc-icon-glyph ui-1_circle-remove"></span> Hủy
                    </a>           
                </li>
                <li @click="tsbtnXoa_Click" :class="{'disabled': !Enabled.tsbtnXoa}">    
                    <a>
                        <span class="icon  one-trash"></span> Xóa
                    </a>             
                </li>
                <li>
                    <a>
                    <span class="icon one-circle-question"></span>Trợ giúp
                    </a>
                </li>
            </ul>
        </div>
        <div>
            <div class="box-form">
                <div class="legend-title">Thông tin gia hạn</div>
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w120">Ngày hết hạn</div>
                            <div class="value">
                                <div class="input-icon-right">                                      
                                    <ejs-datepicker 
                                        ref="dtpNgayHH"
                                        locale='vi'
                                        v-model="params.p_dtpNgayHH"
                                        :enabled="false"
                                        :format="'dd/MM/y'">
                                    </ejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w120">Gia hạn đến ngày</div>
                            <div class="value">
                                <div class="input-icon-right">                                      
                                    <ejs-datepicker 
                                        ref="dtpNgayGH"
                                        locale='vi'
                                        v-model="params.p_dtpNgayGH"
                                        @change="dtpNgayGH_EditValueChanged"
                                        :format="'dd/MM/y'">
                                    </ejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w120">Ghi chú</div>
                    <div class="value">
                        <textarea ref="txtGhiChu" class="form-control" v-model="params.p_txtGhiChu"></textarea>
                    </div>
                </div>
                
            </div>

            <div class="box-form py-0">
                <div class="legend-title pt-2">
                    Lịch sử gia hạn
                </div>

                <DataGrid
                    v-bind:columns="[
                    {fieldName: 'NGAY_GH_CU', headerText: 'Ngày hết hạn cũ', textAlign: 'Left', allowFiltering: true},
                    {fieldName: 'TEN_NV', headerText: 'Người gia hạn', textAlign: 'Left', allowFiltering: true},
                    {fieldName: 'NGAY_GH', headerText: 'Ngày gia hạn', textAlign: 'Left', allowFiltering: true},
                    {fieldName: 'GHICHU', headerText: 'Ghi chú', textAlign: 'Left', allowFiltering: true},
                    ]"
                    v-bind:dataSource="grcGiaHanHD"
                    ref="grvGiaHanHD"
                    :showColumnCheckbox='false'
                    :showFilter="true"
                    :editSettings="{ allowEditing: true , mode:'Batch'}"
                    :enabledSelectFirstRow="true"
                    :allowPaging="true"
                    :enablePagingServer='false'
                    @selectedRowChanged="grvGiaHanHD_FocusedRowChanged"
                    >
                </DataGrid>

            </div>

        </div>

    </div>
</ejs-dialog>