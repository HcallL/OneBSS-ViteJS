<div >
    <div class="list-actions-top">
        <ul class="list">
            <li @click="TimKiem">
                <a>
                    <span class="icon one-file-attach"></span> Lấy TT 
                </a>              
            </li>
            <li v-on:click="XacNhan"  v-if="Visible.XacNhan">
                <a>
                    <span class="icon nc-icon-glyph ui-1_circle-add"></span> Xác nhận
                </a>
            </li>  
            <li v-on:click="TraPhieu()" v-if="Visible.TraPhieu">
                <a>
                    <span class="icon one-file-back"></span>Trả phiếu
                </a>
            </li>
            <li v-on:click="XuatNhapKho" v-if="Visible.XuatKho">
                <a>
                    <span class="icon nc-icon-glyph arrows-1_refresh-68"></span>Xuất kho
                </a>
            </li>
            <li v-on:click="HoanThanh" v-if="Visible.HoanThanh">
                <a>
                    <span class="icon nc-icon-glyph ui-1_circle-add"></span> Hoàn thành
                </a>
            </li>  
            <li v-on:click="XuatNhapKho" v-if="Visible.NhapKho">
                <a>
                    <span class="icon one-coin-add"></span>Nhập kho
                </a>
            </li>                    
            
            <li v-on:click="">
                <a >
                    <span class="icon one-print"></span>In phiếu
                </a>
            </li>
            <li v-on:click="XuatExcel">
                <a >
                    <span class="icon one-print"></span>Xuất Excel
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">
                Thông tin luân chuyển
            </div>
            <div class="row">
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            <span class="name">Mã đề nghị</span>
                        </div>
                        <div class="value">
                            <div class="input-icon-right">
                                <input type="text" class="form-control" v-model="params.maDN">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            Quy trình
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <ejs-dropdownlist
                                    class="form-control"
                                    ref="cboQuyTrinh"
                                    locale='vi'        
                                    v-model="params.quyTrinhId"
                                    :dataSource='DSQuyTrinh'                                     
                                    :fields="{value:'QUYTRINH_ID', text: 'QUYTRINH'}"
                                    :allowFiltering="true"
                                    @change = "QuyTrinhSelected"
                                    >
                                </ejs-dropdownlist>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="info-row">
                            <div class="key w100">
                                Hướng giao
                            </div>
                            <div class="value">
                                <div class="select-custom">
                                    <div class="select-custom">
                                        <ejs-dropdownlist
                                            class="form-control"
                                            ref="cboQuyTrinh"
                                            locale='vi'        
                                            v-model="params.huongGiaoId"
                                            :dataSource='DSHuongGiao'                                     
                                            :fields="{value:'HUONGGIAO_ID', text: 'HUONGGIAO'}"
                                            :allowFiltering="true"
                                            @change="HuongGiaoSelected"
                                            >
                                        </ejs-dropdownlist>
                                    </div>
                                </div>
    
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            <span class="name">Từ ngày</span>
                        </div>
                        <div class="value">
                            <div class="input-icon-right" >
                                <ejs-datepicker class="form-control" 
                                    :placeholder="dateConfig.waterMark" 
                                    :format="dateConfig.formatDay"
                                    v-model="params.TuNgay"
                                    >
                                </ejs-datepicker>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            <span class="name">Đến ngày</span>
                        </div>
                        <div class="value">
                            <div class="input-icon-right" >
                                <ejs-datepicker class="form-control" 
                                    :placeholder="dateConfig.waterMark" 
                                    :format="dateConfig.formatDay"
                                    v-model="params.DenNgay"
                                    >
                                </ejs-datepicker>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            <span class="name">Ngày yêu cầu</span>
                        </div>
                        <div class="value">
                            <div class="input-icon-right" >
                                <ejs-datepicker class="form-control" 
                                    :placeholder="dateConfig.waterMark" 
                                    :format="dateConfig.formatDay"
                                    v-model="params.ngayYC"
                                    >
                                </ejs-datepicker>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">               
                
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            Trạng thái
                        </div>
                        <div class="value">
                            <div class="select-custom">
                                <ejs-dropdownlist
                                    class="form-control"
                                    ref="cboTrangThai"
                                    locale='vi'        
                                    v-model="params.trangThaiId"
                                    :dataSource='DSTrangThai'                                     
                                    :fields="{value:'trangThaiId', text: 'trangThai'}"
                                    :allowFiltering="true"
                                    @change = "TrangThaiSelected"
                                    >
                                </ejs-dropdownlist>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            <span class="name">Người lập</span>
                        </div>
                        <div class="value">
                            <div class="input-icon-right">
                                <input type="text" class="form-control" v-model="params.nguoiLap">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">
                            <span class="name">Nội dung</span>
                        </div>
                        <div class="value">
                            <div class="input-icon-right">
                                <input type="text" class="form-control" v-model="params.noiDung">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">
                Danh sách yêu cầu luân chuyển
            </div>
            <div class="table-content">
                <DataGrid class="table-result table-gachle" v-bind:columns="[                        
                        {fieldName: 'MA_DN', headerText: 'Mã ĐN', allowFiltering: true, allowSorting: true, freeze: 'Left'},
                        {fieldName: 'ND_DENGHI', headerText: 'Nội dung ĐN', allowFiltering: true, allowSorting: true}, 
                        {fieldName: 'TINH_GIAO', headerText: 'Tỉnh giao', allowFiltering: true, allowSorting: true}, 
                        {fieldName: 'TINH_NHAN', headerText: 'Tỉnh nhận', allowFiltering: true, allowSorting: true},
                        {fieldName: 'LOAIPHIEU', headerText: 'Loại phiếu', allowFiltering: true, allowSorting: true},
                        {fieldName: 'NGAY_YC', headerText: 'Ngày YC', allowFiltering: true, allowSorting: true},
                        {fieldName: 'NGAY_CN', headerText: 'Ngày CN', allowFiltering: true, allowSorting: true},
                        {fieldName: 'NGAYGIAO', headerText: 'Ngày chuyển', allowFiltering: true, allowSorting: true},
                        {fieldName: 'TRANGTHAI_DN', headerText: 'TT đề nghị', allowFiltering: true, allowSorting: true}, 
                        {fieldName: 'DENGHI_ID', headerText:'', visible:false, isPrimaryKey:true}                                             
                        ]" 
                        v-bind:dataSource="DSLuanChuyen" 
                        ref="grvDSLuanChuyen"
                        :showFilter="true"  
                        dataKeyField="DENGHI_ID"                                        
                        :allowPaging="true"
                        :enablePagingServer="false" 
                        :showColumnCheckbox="false"
                        :enabledSelectFirstRow="true"
                        @selectedRowChanged="grvDSLuanChuyenSelectRow"  

                        >                        
                    </DataGrid>    

            </div>

        </div>
        <div class="box-form">
            <div class="legend-title">
                Chi tiết vật tư luân chuyển
            </div>
            <div class="table-content">
                <DataGrid  class="table-result table-gachle" v-bind:columns="[
                {fieldName: 'MA_CAP5', headerText: 'Mã VT', allowFiltering: true, allowSorting: true, freeze: 'Left'},
                {fieldName: 'TEN_VT', headerText: 'Tên vật tư', allowFiltering: true, allowSorting: true}, 
                {fieldName: 'DVI_TINH', headerText: 'ĐVT', allowFiltering: true, allowSorting: true}, 
                {fieldName: 'SOLUONG', headerText: 'Số lượng', allowFiltering: true, allowSorting: true, },
                {fieldName: 'SL_CHUYEN', headerText: 'SL chuyển', allowFiltering: true, allowSorting: true, },
                {fieldName: 'SL_CL', headerText: 'SL Còn lại', allowFiltering: true, allowSorting: true, },
                {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true, allowSorting: true },                 
                {fieldName: 'VATTU_ID', headerText:'', visible:false, isPrimaryKey:true}                                                                
                ]" 
                v-bind:dataSource="DSVatTu_DaDK" 
                ref="grvDSVatTu_DaDK"
                :showFilter="true"                                 
                @selectedRowChanged=""                                          
                :allowPaging="true"
                :enablePagingServer="false" 
                :showColumnCheckbox="false"  
                :enabledSelectFirstRow="false"   
                dataKeyField="VATTU_ID"  
                                  
                >
            </DataGrid>             
            </div>

        </div>
    </div>

  
</div>