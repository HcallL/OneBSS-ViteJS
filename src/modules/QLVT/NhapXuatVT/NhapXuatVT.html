<div class="nhapxuatvt">
    <div class="list-actions-top d-flex justify-content-start align-items-center">
        <ul class="list" style="overflow: visible !important; z-index: 99999;" >
            <li @click="btnTimKiem_Click">
                <a>
                    <span class="icon one-file-attach"></span> Lấy TT 
                </a>              
            </li>
            <li @click="tsbtnNhapMoi_Click" v-if="Visible.tsbtnNhapMoi" :class="{'disabled': !Enabled.tsbtnNhapMoi}">    
                <a>
                    <span class="icon nc-icon-glyph ui-1_circle-add"></span> Nhập mới 
                </a>                   
            </li>
            <li @click="tsbtnGhiLai_Click" v-if="Visible.tsbtnGhiLai" :class="{'disabled': !Enabled.tsbtnGhiLai}">    
                <a>
                    <span class="icon one-save"></span>Ghi lại 
                </a>             
            </li>           
            <li @click="tsbtnTraLai_Click" v-if="Visible.tsbtnTraLai">  
                <a>
                    <span class="icon one-save"></span>Trả phiếu
                </a>                
            </li>
            <li @click="tsbtnHuyBo_Click" v-if="Visible.tsbtnHuyBo" :class="{'disabled': !Enabled.tsbtnHuyBo}">     
                <a>
                    <span class="icon  nc-icon-glyph ui-1_circle-remove"></span> Hủy
                </a>           
            </li>
            <li @click="tsbtnXoa_Click" v-if="Visible.tsbtnXoa" :class="{'disabled': !Enabled.tsbtnXoa}">    
                <a>
                    <span class="icon  one-trash"></span> Xóa
                </a>             
            </li>
            <li @click="tstbtnDonHang_Click" v-if="Visible.tstbtnDonHang" :class="{'disabled': !Enabled.tstbtnDonHang}">
                <a>
                    <span class="icon  one-file-edit2"></span> Đơn hàng  
                </a>   
            </li>
            <li @click="tsbtnGiaoPhieu_Click">
                <a>
                    <span class="icon  one-file-edit2"></span> Giao phiếu 
                </a>
            </li>

            <li @click="tsbtnThemVT_Click" v-if="Visible.tsbtnThemVT" :class="{'disabled': !Enabled.tsbtnThemVT}">
                <a >
                    <span class="icon  nc-icon-glyph business_coins"></span> Chọn VT 
                </a>                
            </li>
            <li @click="tsbtnDongBo_Click" v-if="Visible.tsbtnDongBo" :class="{'disabled': !Enabled.tsbtnDongBo}">
                <a >
                    <span class="icon  one-sync1"></span> Đồng bộ KT
                </a>                 
            </li>
            <li  @click="tsbtnDongBoIMS_Click" >
                <a>
                    <span class="icon  one-sync1"></span> Đồng bộ IMS
                </a>                
            </li> 
            <li  @click="tsbtnCopyCT_Click" v-if="Visible.tsbtnCopyCT" :class="{'disabled': !Enabled.tsbtnCopyCT}">
                <a>
                    <span class="icon  one-print"></span> Copy CT 
                </a>                   
            </li>
            <li  @click="tsbtnHoanThanh_Click" v-if="Visible.tsbtnHoanThanh" :class="{'disabled': !Enabled.tsbtnHoanThanh}">
                <a>
                    <span class="dropdown-icon one-file-check"></span> Hoàn thành 
                </a>                
            </li>
            
            <li  class="dropdown">                
                <a data-toggle="dropdown" >
                    <span class="icon one-print"></span>In phiếu
                    <span class="arrow fa fa-angle-down"></span>                   
                </a>
                          
                <ul class="dropdown-menu" style="color: #0176FF;">
                    <li @click="tsbtnPhieuNhap_Click('pdf')" :class="{'disabled': !Enabled.tsbtnPhieuNhap}">
                        <a>  
                            <span class="dropdown-icon one-print"></span> Phiếu nhập
                        </a>
                    </li>
                    <li  @click="tsbtnPhieuXuat_Click('pdf')" :class="{'disabled': !Enabled.tsbtnPhieuXuat}">
                        <a >
                            <span class="dropdown-icon one-print"></span> Phiếu xuất
                        </a>
                    </li>
                    <li  @click="tsbtnPhieuChuyen_Click('pdf')" :class="{'disabled': !Enabled.tsbtnPhieuChuyen}">
                        <a >
                            <span class="dropdown-icon one-print"></span> Phiếu chuyển
                        </a>
                    </li>
                    <li @click="tsbtnChiTietSR_Click('pdf')">
                        <a >
                            <span class="dropdown-icon one-print"></span> Chi tiết SR
                        </a>
                    </li>
                    <li @click="tstPhieuTUVT_Click('pdf')" :class="{'disabled': !Enabled.tstPhieuTUVT}">
                        <a >
                            <span class="dropdown-icon one-print"></span> Phiếu tạm ứng VT
                        </a>
                    </li>      
                    <li @click="tstPhieuDA07_Click('pdf')" v-if="IN_BM_KYSO">
                        <a >
                            <span class="dropdown-icon one-print"></span> In phiếu theo đề án 07
                        </a>
                    </li>                
                </ul>
            </li>
            <li  class="dropdown">                
                <a data-toggle="dropdown" >
                    <span class="icon one-print"></span>Xuất phiếu Excel
                    <span class="arrow fa fa-angle-down"></span>                   
                </a>
                          
                <ul class="dropdown-menu" style="color: #0176FF;">
                    <li @click="tsbtnPhieuNhap_Click('xlsx')" :class="{'disabled': !Enabled.tsbtnPhieuNhap}">
                        <a>  
                            <span class="dropdown-icon one-print"></span> Phiếu nhập
                        </a>
                    </li>
                    <li  @click="tsbtnPhieuXuat_Click('xlsx')" :class="{'disabled': !Enabled.tsbtnPhieuXuat}">
                        <a >
                            <span class="dropdown-icon one-print"></span> Phiếu xuất
                        </a>
                    </li>
                    <li  @click="tsbtnPhieuChuyen_Click('xlsx')" :class="{'disabled': !Enabled.tsbtnPhieuChuyen}">
                        <a >
                            <span class="dropdown-icon one-print"></span> Phiếu chuyển
                        </a>
                    </li>
                    <li @click="tsbtnChiTietSR_Click('xlsx')">
                        <a >
                            <span class="dropdown-icon one-print"></span> Chi tiết SR
                        </a>
                    </li>
                    <li @click="tstPhieuTUVT_Click('xlsx')" :class="{'disabled': !Enabled.tstPhieuTUVT}">
                        <a >
                            <span class="dropdown-icon one-print"></span> Phiếu tạm ứng VT
                        </a>
                    </li>                                       
                </ul>
            </li>
           
            <li  class="dropdown">                
                <a data-toggle="dropdown">
                    <span class="icon one-seri"></span>Serial
                    <span class="arrow fa fa-angle-down"></span>                          
                </a>
                          
                <ul class="dropdown-menu" style="color: #0176FF;">
                    <li @click="tsbtnSinhSr_Click" v-if="Visible.tsbtnSinhSr" :class="{'disabled': !Enabled.tsbtnSinhSr}" >
                        <a>  
                            <span class="dropdown-icon one-seri" ></span> Tạo serial
                        </a>
                    </li>
                    <li  @click="toolStripMenuItem3_Click" v-if="Visible.tsbtnSinhSr" :class="{'disabled': !Enabled.tsbtnSinhSr}">
                        <a >
                            <span class="dropdown-icon one-print"></span> In serial
                        </a>
                    </li>                
                </ul>
            </li>
            <li  class="dropdown">                
                <a data-toggle="dropdown">
                    <span class="icon one-seri"></span>VT Excel
                    <span class="arrow fa fa-angle-down"></span>                          
                </a>
                          
                <ul class="dropdown-menu" style="color: #0176FF;">
                    <b-form-file id="fileUploadGhiChu" v-model="arrayImportFile.filexcel" ref="fileUploadGhiChu" @change="this.onChangeGhiChu" accept=".xls, .xlsx" class="-ap icon-more_horiz hidden" plain></b-form-file>
                    <li @click="tsbtnExcelGhiChu_Click"  >
                        <a>  
                            <span class="dropdown-icon one-seri" ></span> Điều chỉnh ghi chú
                        </a>
                    </li>
                    <!-- <li  @click="toolStripMenuItem3_Click" v-if="Visible.tsbtnSinhSr" :class="{'disabled': !Enabled.tsbtnSinhSr}">
                        <a >
                            <span class="dropdown-icon one-print"></span> In serial
                        </a>
                    </li>                 -->
                </ul>
            </li>
        </ul>        
        
        <div class="more dropdown">
            <a href="#" data-toggle="dropdown">
                <span class="icon -ap  icon-dots-three-vertical"></span>
            </a>
            <ul class="dropdown-menu">
                <li>
                    <a @click="tsbtnSMS_Click">
                        <span class="dropdown-icon one-email"></span> Gửi SMS
                    </a>
                </li>
                <li>
                    <a @click="tsbtnDongBoQLTS_Click">
                        <span class="dropdown-icon  one-sync1"></span> Đồng bộ CCDC
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="page-content">
        <div class="row">
            <div class="grid-stack-box">
                <div class="box-col box-form" id="boxLeft">
                    <div class="legend-title">
                        <div class="pull-left">Thông tin chứng từ</div>
                        <div class="pull-right">
                            <div class="info-row">
                                <div class="check-action">
                                    <input type="checkbox" class="check" v-model="params.p_ckbSendSMS">
                                    <span class="name">Send SMS tự động</span>
                                </div>                      
                            </div>                            
                        </div>
                        <div class="clearfix"></div>
                    </div>              
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Số phiếu</div>
                                <div class="value">
                                    <input ref="txtSoPhieu" type="text" class="form-control" v-model="params.p_txtSoPhieu" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Ngày yêu cầu <span style="color: red;">*</span></div>
                                <div class="input-more-button -right" >
                                    <button class="btn" @click="dtpNgayDK_ButtonClick">
                                        <span class="one-save"></span>
                                    </button>
                                    <div class="input-icon-right">                                            
                                        <ejs-datetimepicker 
                                            locale='vi'
                                            v-model="params.p_dtpNgayDK"
                                            :format="'dd/MM/y HH:mm:ss'">
                                        </ejs-datetimepicker>
                                    </div>
                                </div>                               
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Loại chứng từ <span style="color: red;">*</span></div>
                                <div class="value">
                                    <div class="select-custom">                                       
                                        <ejs-dropdownlist
                                            class="form-control"
                                            ref="cboLoaiChungTu"
                                            locale='vi'
                                            v-model="params.p_LoaiChungTu"
                                            :dataSource='cboLoaiChungTu' 
                                            :fields="{value:'loaiCtId', text: 'loaiCt'}"
                                            :allowFiltering="true"
                                            @change='cboLoaiChungTu_EditValueChanged'
                                            >
                                        </ejs-dropdownlist>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Phiếu luân chuyển</div>
                                <div class="value">
                                    <div class="input-more-button -right" >
                                        <button class="btn" @click="PhieuLuanChuyen_ButtonClick">
                                            <span class="one-search"></span>
                                        </button>
                                        <div class="input-icon-right">                                            
                                            <input ref="txtPhieuLuanChuyen" type="text" class="form-control"v-model="params.p_txtLenhDieuChuyen" readonly>
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row d-flex">
                        <div :class="Visible.layoutCtrlPhieuDN ? 'col-sm-6 col-12' : 'col-sm-12 col-12'">
                            <div class="info-row">
                                <div class="key w100">Mục đích <span style="color: red;">*</span></div>
                                <div class="value">
                                    <div class="select-custom">                                
                                        <ejs-dropdownlist
                                            class="form-control"
                                            ref="cboMucDich"
                                            locale='vi'
                                            v-model="params.p_MucDich"
                                            :dataSource='cboMucDich' 
                                            :fields="{value:'mucDichId', text: 'mucDich'}"
                                            :allowFiltering="true"
                                            popupWidth="550px"
                                            >
                                        </ejs-dropdownlist>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12" v-if="Visible.layoutCtrlPhieuDN">
                            <div class="info-row">
                                <div class="key w100">Phiếu đề nghị</div>
                                <div class="value">
                                    <div class="input-more-button -right">
                                        <button class="btn" @click="btnChonPhieuDN_Click">
                                            <span class="one-search"></span>
                                        </button>
                                        <div class="input-icon-right">                                            
                                            <input ref="txtPhieuDeNghi" type="text" class="form-control" v-model="params.p_txtPhieuDeNghi" readonly @dblclick="txtPhieuDeNghi_DoubleClick">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Nghiệp vụ</div>
                                <div class="value">
                                    <div class="select-custom">                                
                                        <ejs-dropdownlist
                                            class="form-control"
                                            ref="cboNghiepVu"
                                            locale='vi'
                                            v-model="params.p_NghiepVu"
                                            :dataSource='cboNghiepVu' 
                                            :fields="{value:'mucDichId', text: 'mucDich'}"
                                            :allowFiltering="true"
                                            @change='cboNghiepVu_EditValueChanged'
                                            popupWidth="500px"
                                            >
                                        </ejs-dropdownlist>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Mã PDA</div>
                                <div class="value">
                                    <div class="input-more-button -right">
                                        <button class="btn" @click="cboMa_PDA_ButtonClick">
                                            <span class="-ap icon-close"></span>
                                        </button>
                                        <div class="select-custom">                                
                                            <input ref="cboMa_PDA" type="text" class="form-control" v-model="params.p_Ma_PDA" readonly @click="cboMa_PDA_DoubleClick">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-row">
                        <div class="key w100">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="params.p_ckbTuKho" @change='ckbTuKho_CheckedChanged'>
                                <span class="name">Từ kho <span style="color: red;">*</span></span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="input-more-button -right">
                                <button class="btn" @click='cboTuKho_ButtonClick'>
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <div class="select-custom">                                  
                                    <ejs-dropdownlist
                                        class="form-control"
                                        ref="cboTuKho"
                                        locale='vi'
                                        v-model="params.p_TuKho"
                                        :dataSource='cboTuKho' 
                                        :fields="{value:'khoId', text: 'tenKho'}"
                                        :allowFiltering="true"
                                        @change="cboTuKho_EditValueChanged"
                                        :enabled="!ReadOnly.cboTuKho"
                                        :filtering='onFilteringTuKho'
                                        :close='onClose'    
                                        :created='onDropdownCreate' 
                                        >
                                    </ejs-dropdownlist>                                  
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="params.p_ckbDenKho" @change='ckbDenKho_CheckedChanged'>
                                <span class="name">Đến kho <span style="color: red;">*</span></span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="select-custom">                               
                                <ejs-dropdownlist
                                    class="form-control"
                                    ref="cboDenKho"
                                    locale='vi'
                                    v-model="params.p_DenKho"
                                    :dataSource='cboDenKho' 
                                    :fields="{value:'khoId', text: 'tenKho'}"
                                    :allowFiltering="true"
                                    @change='cboDenKho_EditValueChanged'
                                    :enabled="!ReadOnly.cboDenKho"
                                    :filtering='onFilteringDenKho'                
                                    >
                                </ejs-dropdownlist>                                
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">Ngày xuất</div>
                                <div class="value">
                                    <div class="input-more-button -right">
                                        <button class="btn" @click="dtpNgayGuiTT_ButtonClick">
                                            <span class="one-save"></span>
                                        </button>
                                        <div class="input-icon-right">                                            
                                            <ejs-datetimepicker 
                                                locale='vi'
                                                v-model="params.p_dtpNgayGuiTT"
                                                :format="'dd/MM/y HH:mm:ss'">
                                            </ejs-datetimepicker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày nhận</div>
                                <div class="value">
                                    <div class="input-more-button -right" >
                                        <button class="btn" @click="dtpNgayNhanTT_ButtonClick">
                                            <span class="one-save"></span>
                                        </button>
                                        <div class="input-icon-right">                                            
                                            <ejs-datetimepicker 
                                                locale='vi'
                                                v-model="params.p_dtpNgayNhanTT"
                                                :format="'dd/MM/y HH:mm:ss'">
                                            </ejs-datetimepicker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">
                            Công trình
                        </div>
                        <div class="value">
                            <div class="select-custom">                                
                                <ejs-dropdownlist
                                    class="form-control"
                                    locale='vi'
                                    v-model="params.p_CongTrinh"
                                    :dataSource='cboCongTrinh' 
                                    :fields="{value:'congTrinhId', text: 'tenCt'}"
                                    :allowFiltering="true"
                                    >
                                </ejs-dropdownlist>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">
                            ND đăng ký
                        </div>
                        <div class="value">
                            <input ref="txtNDDK" class="form-control" v-model="this.params.p_txtNDDK" :disabled="ReadOnly.txtNDDK"></input>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">
                            Nội dung
                        </div>
                        <div class="value">
                            <textarea ref="txtNoiDung" class="form-control" style="height: 120px;" v-model="params.p_txtNoiDung"></textarea>
                        </div>
                    </div>
                </div>
            <div class="box-col box-form" id="boxRight" style="width: 65%">
                    <div class="legend-title">
                        <div class="pull-left">Danh sách các phiếu chứng từ</div>
                        <div class="pull-right">
                            <div class="info-row">
                                <div class="key w100">Đơn vị FMIS</div>
                                <div class="value">
                                    <div class="select-custom">                                
                                        <ejs-dropdownlist
                                            class="form-control"
                                            ref="cboDonVi_FMIS"
                                            locale='vi'
                                            v-model="params.p_DonViFMIS"
                                            :dataSource='cboDonVi_FMIS' 
                                            :fields="{value:'MA_DV', text: 'TEN_DV'}"
                                            :allowFiltering="true"
                                            >
                                        </ejs-dropdownlist>
                                    </div>
                                </div>
                                <div class="value" style="padding-left: 25px;">
                                    <a @click="vbtnRefresh_MouseClick" class="link">
                                        <span class="one-reload1 f20"></span>
                                    </a>
                                </div>                                
                            </div>                            
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w120">Ngày yêu cầu từ <span style="color: red;">*</span></div>
                                <div class="value">
                                    <div class="input-icon-right">                                       
                                        <ejs-datepicker 
                                            locale='vi'
                                            v-model="params.p_dtpTuNgay"
                                            :format="'dd/MM/y'">
                                        </ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-12">
                            <div class="info-row">
                                <div class="key w70">Đến ngày <span style="color: red;">*</span></div>
                                <div class="value">
                                    <div class="input-icon-right">                                      
                                        <ejs-datepicker 
                                            locale='vi'
                                            v-model="params.p_dtpDenNgay"
                                            :format="'dd/MM/y'">
                                        </ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="list-checks mart7">
                                <div class="item">
                                    <div class="check-action">
                                        <input type="checkbox"  @click="chkAll_Phieu_CheckedChanged">
                                        <span class="name">Xem tất cả các phiếu</span>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="params.p_ckb_nd" >
                                        <span class="name">Lọc theo người dùng</span>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="check-action">
                                        <input type="checkbox" class="check" v-model="params.p_ckb_xacNhan"  @click="ckb_xacNhan">
                                        <span class="name">Chưa xác nhận</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-1 col-12">
                            <div class="info-row">
                                <div class="value padl0">
                                    <div class="input-more-button -right">
                                        <button class="btn"  @click="simpleButton3_Click">
                                            <span class="one-search"></span>
                                        </button>
                                        <div class="select-custom" >                                            
                                            <div class="vattu_box">
                                                <div class="input-group">
                                                  <div class="li input-text">
                                                    <div class="select-custom">
                                                      <input type="select" v-model="selectedLocVT" class="form-control" readonly @click="showLocVT = !showLocVT" style="background-color: white;">
                                                      </input>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="vattu_table" v-if="showLocVT" style="min-width: 500px; padding-top: 15px; padding-left: 15px;">
                                                    
                                                        <b-form-radio-group
                                                        v-model="params.rdioFMIS"                                
                                                        class="mb-2"                                   
                                                        >         
                                                            <div class="row">        
                                                                <div class="col-sm-4 col-12">
                                                                    <b-form-radio value="1">Chưa đồng bộ FMIS</b-form-radio>
                                                                </div>   
                                                                <div class="col-sm-4 col-12">
                                                                    <b-form-radio value="2">Đã đồng bộ FMIS</b-form-radio>
                                                                </div> 
                                                                <div class="col-sm-4 col-12">
                                                                    <b-form-radio value="0">Tất cả phiếu</b-form-radio>   
                                                                </div>   
                                                            </div>                           
                                                        </b-form-radio-group>
                                                    
                                                   
                                                        <b-form-radio-group
                                                        v-model="params.rdioIMS"                                
                                                        class="mb-2"                                   
                                                        >                 
                                                            <div class="row">        
                                                                <div class="col-sm-4 col-12">
                                                                    <b-form-radio value="1">Chưa đồng bộ IMS</b-form-radio>
                                                                </div>   
                                                                <div class="col-sm-4 col-12">
                                                                    <b-form-radio value="2">Đã đồng bộ IMS</b-form-radio>
                                                                </div> 
                                                                <div class="col-sm-3 col-12">
                                                                    <b-form-radio value="0">Tất cả phiếu</b-form-radio>   
                                                                </div>   
                                                            </div>                 
                                                        </b-form-radio-group>
                                                 
                                                    
                                                    
                                                  <DataGrid v-bind:columns="[
                                                    { fieldName: '', headerText: '', allowSorting:false , allowFiltering:false, cssClass: 'text-center', allowEditing:false , width: 43, headerTemplate:colCheckboxAllLVT ,template:colCheckboxLVT},
                                                    {fieldName: 'maVatTu', headerText: 'Mã vật tư', allowFiltering: true, allowSorting: false, width: '30%'},
                                                    {fieldName: 'tenVatTu', headerText: 'Tên vật tư', allowFiltering: true, allowSorting: false, width: '70%'}
                                                    ]" 
                                                    v-bind:dataSource="cboLocVattu" 
                                                    :showFilter="true"
                                                    :enablePagingServer="false"
                                                    :allowPaging="true"
                                                    @selectedRowChanged="cboLocVattu_selected"                                                     
                                                    :selectionSettings="{  persistSelection: true }"
                                                    :showColumnCheckbox="false"
                                                    dataKeyField="vatTuID"                                                    
                                                    ref="TableLocVT">
                                                  </DataGrid>
                                                  <!-- @selectedItemsChanged="cboLocVattu_checked" -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                                    
                        
                    <DataGrid
                        v-bind:columns="[
                        {fieldName: '', headerText: '',  template: iconStatus, cssClass: 'text-center', width: '70', allowFiltering: false,allowSorting: false, freeze: 'Left',},   
                        {fieldName: '', headerText: '', allowSorting:false , allowFiltering:false, cssClass: 'text-center', allowEditing:false , width: 43, headerTemplate:colCheckboxAllChungTu ,template:colCheckboxChungTu, freeze: 'Left'},
                        {fieldName: 'SOPHIEU', headerText: 'Số phiếu',textAlign: 'Left', allowFiltering: true, allowSorting: false , freeze: 'Left',},
                        {fieldName: 'LOAI_CT' , headerText: 'Loại chứng từ' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'TRANGTHAI' , headerText: 'Trạng thái' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'NGAY_CT' , headerText: 'Ngày yêu cầu' ,textAlign: 'Right', allowFiltering: true, allowSorting: true },
                        {fieldName: 'TIEN' , headerText: 'Tiền' ,textAlign: 'Right', format: 'n3', type: 'number', allowFiltering: true, allowSorting: true },
                        {fieldName: 'KHO_GIAO' , headerText: 'Từ kho' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'KHO_NHAN' , headerText: 'Đến kho' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'MUCDICH' , headerText: 'Mục đích' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'ND_GIAO' , headerText: 'Nội dung' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'NGUOI_CN' , headerText: 'Người lập' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'NGUOI_XN' , headerText: 'Người XN' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'NGUOI_TH' , headerText: 'Người nhận' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: 'NGUOI_HT' , headerText: 'Người HT' ,textAlign: 'Left', allowFiltering: true, allowSorting: true },
                        {fieldName: '', headerText: 'TT ĐB',textAlign: 'Left', allowFiltering: true, allowSorting: true, width: '80', template: btnTTDBTemplate},
                        {fieldName: 'TT_IMS' , headerText: 'IMS' ,textAlign: 'Left', allowFiltering: true, allowSorting: true , freeze: 'Right', width: '80'},
                        {fieldName: 'DSTB' , headerText: 'DS TB' ,textAlign: 'Left', allowFiltering: true, allowSorting: true,  template: btnTBTemplate,width: '80' , freeze: 'Right' },
                        {fieldName: 'CHUNGTU_ID', headerText:'', visible:false, isPrimaryKey:true} 
                        ]"
                        v-bind:dataSource="gridChungTu"
                        :showFilter="true"
                        :enablePagingServer="false"
                        :allowPaging="true"
                        dataKeyField="CHUNGTU_ID"
                        :allowExcelExport="true"                       
                        @selectedRowChanged="gridviewChungTu_FocusedRowChanged_sender"
                        :showColumnCheckbox='false'                        
                        :enabledSelectFirstRow="false"
                        ref="gridviewChungTu"                        
                        >
                    </DataGrid>
                    <!-- :selectionSettings="{enableToggle: false, type: 'Single', checkboxMode: 'ResetOnRowClick', checkboxOnly: true }"
                     @recordClick="gridviewChungTu_RecordClick"
                    @selectedItemsChanged="gridDSChungTuCheckBox" -->
                    <!--
                         
                        :totalRecords="gridChungTuPage.totalElement"
                        :pageSize="gridChungTuPage.maxSize"
                        :pageIndex="gridChungTuPage.page"
                        @pageChanged="gridChungTuPageHandler" -->
                    <!-- @rowDataBound='gridviewChungTu_CustomRowCellEdit' -->

                    
             
                    
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách vật tư</div>
            <div class="box-move-select-table">
                <div class="box-col"  :style="{width: isTab1 && Visible.ThongTinHDDA ? `calc(75% - 50px)` : `100%`}">
                    <div class="nav tabs tab-over">
                        <a href="#tab-noi-dung" data-toggle="tab" class="active" @click="isTab1 = true" >Nội dung</a>
                        <a href="#tab-thiet-bi" data-toggle="tab" @click="isTab1 = false">Danh sách thiết bị</a>
                        <a href="#tab-tinh-trang" data-toggle="tab" @click="isTab1 = false" v-if="Visible.xtraTabPage3">Nhập tình trạng VT</a>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-noi-dung">
                            <div class="top marb5">
                                <div class="row">
                                    <div class="col-sm-8 col-12">
                                        <div class="group-buttons mart0">
                                            <button class="btn btn-second padt3 padb3" @click="btnXuatExcelVT_Click">
                                                <span class="one-xlsx-import f20 normal inline vcenter lh14 marr5"></span> Xuất excel
                                            </button>
                                            <b-form-file id="fileUploadVT" v-model="arrayImportFile.filexcel" ref="fileUploadVT" @change="this.onChangeVT" accept=".xls, .xlsx" class="-ap icon-more_horiz hidden" plain></b-form-file>
                                            <button class="btn btn-second padt3 padb3" @click="btnExcelVT_Click">
                                                <span class="icon one-xlsx1 f20 inline vcenter"></span>Nhập VT từ excel
                                            </button>
                                            <button class="btn btn-second padt3 padb3" @click="btnTaoTbi_Click">
                                                <span class="nc-icon-glyph ui-2_square-add-11 f16 normal inline vcenter lh14 marr5"></span>Tạo thiết bị
                                            </button>
                                            <button class="btn btn-second padt3 padb3" @click="btnChonTamUng_Click" v-if="Visible.layoutbtnTBi">
                                                <span class="one-file-attach1 f20 normal inline vcenter lh14 marr5"></span> Chọn thiết bị
                                                <frmChonThietBiCT  ref="frmChonTBi_CT" @closed="XacNhan_frmChonTBi_CT"></frmChonThietBiCT>
                                            </button>
                                            <button class="btn btn-second padt3 padb3" @click="btnChuyenTT_Click" v-if="Visible.layoutControlItem29">
                                                <span class="one-file-check f20 normal inline vcenter lh14 marr5"></span> Chuyển TT đầu vào
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-12">
                                        <div class="info-row">
                                            <div class="value w30 nowrap tright">
                                                                                                
                                                <button class="btn btn-second padt3 padb3" @click="btnXoaHetVT_Click">
                                                    <span class="nc-icon-glyph ui-1_simple-remove"></span> Xóa hết
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                            
                            <DataGrid3
                                v-bind:columns="[
                                { allowEditing: false  , fieldName: 'btnXoaVT', headerText: 'Xóa', textAlign: 'Left', allowFiltering: true, template:XoaVTTemplate, width: '70', },
                                { allowEditing: false  , fieldName: 'ISCHECK', headerText: '', type: 'checkbox', headerText:'Center', textAlign: 'Center', allowFiltering: true, width: '60',},

                                { allowEditing: false  , fieldName: 'LOHANG', headerText: 'Lô hàng', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'MA_VT', headerText: 'Mã vật tư', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'TEN_VT', headerText: 'Tên vật tư', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'DVI_TINH', headerText: 'ĐVT', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: true , editType: 'numericedit', fieldName: 'SOLUONG', headerText: 'Số lượng', textAlign: 'Right', format: 'n3', type: 'number', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'DONGIA', headerText: 'Đơn giá', textAlign: 'Right', format: 'n3', type: 'number', allowFiltering: true},
                                { allowEditing: true , editType: 'numericedit', fieldName: 'TIEN', headerText: 'Thành tiền', textAlign: 'Right', format: 'n3', type: 'number', allowFiltering: true},
                                { allowEditing: true , editType: 'numericedit', fieldName: 'SOTHANG_PB', headerText: 'Số tháng PB', textAlign: 'Right', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'LOAI_TBI', headerText: 'Loại thiết bị', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'Trạng thái', headerText: 'Trạng thái', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'HAN_BH', headerText: 'Hạn BH', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'MA_HD', headerText: 'Mã HĐ', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'MA_TH', headerText: 'Đợt TH', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'DUAN' , headerText: 'Dự án', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'GHICHU', headerText: 'Ghi chú', textAlign: 'Left', allowFiltering: true},
                                { allowEditing: false  , fieldName: 'GHICHU_HD', headerText: 'Ghi chú HĐ', textAlign: 'Left', allowFiltering: true},
                                
                                {fieldName: 'DONGIA_SUA' , headerText: 'Sửa ĐG' ,textAlign: 'Left', allowFiltering: true, allowSorting: true, visible: Visible.colDGSua, allowEditing: true , editType: 'numericedit', format: 'n3', type: 'number'},                                

                                { allowEditing: false  , fieldName: 'TachCap', headerText: 'Cuộn cáp', textAlign: 'Left', allowFiltering: true, template: btnEdit_Template, width: '80', },
                                { allowEditing: false  , fieldName: 'CTCT_ID', headerText: '',isPrimaryKey:true, textAlign: 'Left', allowFiltering: true, visible: false},
                                 
                                ]"
                                v-bind:dataSource="gridVatTu"
                                ref="gridViewVatTu"
                                :showColumnCheckbox='false'
                                :showFilter="true"
                                :editSettings="{ allowEditing: true , mode:'Batch'}"
                                :allowPaging="true"
                                :enablePagingServer='false'
                                :enabledSelectFirstRow="true"
                                :totalRecords="gridVatTuPage.totalElement"
                                :pageSize="gridVatTuPage.maxSize"
                                :pageIndex="gridVatTuPage.page"
                                @pageChanged="gridVatTuPageHandler"    
                                @selectedRowChanged="selected_gridVatTuRow" 
                                :aggregates="PTAggregatesColumns"
                                @cellSaved="gridViewVatTu_ValidateRow" 
                                :selectionSettings="{ checkboxOnly: true, persistSelection: true }"
                                >
                            </DataGrid3>
                           
                        </div>
                        <div class="tab-pane" id="tab-thiet-bi">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-sm-5 col-12">
                                        <b-form-file id="fileUpload" v-model="arrayImportFile.filexcel" ref="fileUpload" @change="this.onChange" accept=".xls, .xlsx" class="-ap icon-more_horiz hidden" plain></b-form-file>
                                        <button class="btn btn-main" @click="btnExcelTbi_Click">
                                            <span class="icon one-xlsx1 f20 inline vcenter"></span>Nhập từ excel
                                        </button>
                                        <button class="btn btn-main" @click="txtExcelTbiMau_Click">
                                            <span class="icon one-excel f20 inline vcenter"></span>File excel mẫu
                                        </button>
                                        <button class="btn btn-main" @click="simpleButton2_Click">
                                            <span class="icon one-xlsx-import f20 inline vcenter"></span>Xuất excel
                                        </button>
                                        <button class="btn btn-main" @click="btnXuatTonTbi_Click">
                                            <span class="icon one-xlsx-import f20 inline vcenter"></span>Xuất excel Tbi tồn kho
                                        </button>
                                    </div>
                                    <div class="col-sm-3 col-12">
                                        <div class="info-row">
                                            <div class="value">
                                                <div class="select-custom">
                                                    
                                                    <div class="vattu_box">
                                                        <div class="input-group">
                                                          <div class="li input-text">
                                                            <div class="select-custom">
                                                              <input value="Lấy danh sách seri theo vật tư" :disabled="ReadOnly.CboVatTu" 
                                                              class="form-control" @click="showDSVatTu()">
                                                              </input>
                                                            </div>
                                                          </div>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3 col-12">
                                        <div class="info-row">
                                            <div class="key w60">Serial</div>
                                            <div class="value">
                                                <input type="text" class="form-control" v-model="params.p_txtQuetSerial">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-1 col-12">
                                        <button class="btn btn-main" @click="simpleButton1_Click">
                                            <span class="icon one-trash f20 inline vcenter"></span>Xoá hết
                                        </button>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="table-content" style="overflow-x: hidden;">                            
                                <DataGrid
                                    v-bind:columns="[
                                    { allowEditing: false  ,fieldName: 'LOHANG', headerText: 'Lô hàng', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'MA_VT', headerText: 'Mã vật tư', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'TEN_VT', headerText: 'Tên vật tư', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'MA_TBI', headerText: 'Mã thiết bị', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'MATHUNG', headerText: 'Mã thùng', textAlign: 'Left', allowFiltering: true, visible:Visible.colMaThung},
                                    { allowEditing: true ,fieldName: 'SERIAL', headerText: 'Serial', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'DVI_TINH', headerText: 'ĐVT', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: true ,fieldName: 'SOLUONG', headerText: 'Số lượng', textAlign: 'Right', format: 'n3', type: 'number',  allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'DONGIA', headerText: 'Đơn giá', textAlign: 'Right', format: 'n3', type: 'number',  allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'TIEN', headerText: 'Thành tiền', textAlign: 'Right', format: 'n3', type: 'number',  allowFiltering: true,},
                                    { allowEditing: true ,fieldName: 'GHICHU', headerText: 'Ghi chú', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'SERIAL_GP', headerText: 'Serial GP', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: true ,fieldName: 'MATBI_GOC', headerText: 'Mã TB Gốc', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false  ,fieldName: 'MAC', headerText: 'MAC', textAlign: 'Left', allowFiltering: true,visible: Visible.colMac},
                                    { allowEditing: false  ,fieldName: 'btnXoatbI', headerText: 'Xóa', textAlign: 'Left', allowFiltering: true,template: XoatbITemplate, width: '70'},
                                    { allowEditing: false  ,fieldName: 'CTCT_ID', isPrimaryKey:true ,headerText: '', textAlign: 'Left', allowFiltering: true, visible: false},
                                    ]"
                                    v-bind:dataSource="gridThietBi"
                                    ref="gridViewThietBi"
                                    :showColumnCheckbox='false'
                                    :showFilter="true"
                                    :allowPaging="true"
                                    :enablePagingServer='false'                                    
                                    :editSettings="{ allowEditing: true, mode:'Batch'}"
                                    >
                                </DataGrid>
                                <!-- :totalRecords="gridThietBiPage.totalElement"
                                :pageSize="gridThietBiPage.maxSize"
                                :pageIndex="gridThietBiPage.page"
                                @pageChanged="gridThietBiPageHandler" -->

                            </div>
                        </div>
                        <div class="tab-pane" id="tab-tinh-trang" v-if="Visible.xtraTabPage3">
                            <div class="form-group">
                                <div class="row">
                                    <div class="info-row">
                                        <div class="key w160">
                                            <div class="check-action">
                                                <input type="checkbox" class="check" v-model="params.p_ckbTTALL">
                                                <span class="name">Tình trạng VT</span>
                                            </div>
                                        </div>
                                        <div class="value">
                                            <div class="select-custom">                                                
                                                <ejs-dropdownlist
                                                    class="form-control"
                                                    ref="cboTinhTrang"
                                                    locale='vi'
                                                    v-model="params.p_TinhTrang"
                                                    :dataSource='cboTinhTrang' 
                                                    :fields="{value:'TINHTRANG_ID', text: 'TINHTRANG'}"
                                                    :allowFiltering="true"
                                                    @change="ckbTTALL_CheckedChanged" 
                                                    >
                                                </ejs-dropdownlist>                                               
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <DataGrid
                                v-bind:columns="[
                                {fieldName: 'LOHANG', headerText: 'Lô hàng', textAlign: 'Left', allowFiltering: true,freeze: 'Left'},
                                {fieldName: 'MA_VT', headerText: 'Mã vật tư', textAlign: 'Left', allowFiltering: true},
                                {fieldName: 'TEN_VT', headerText: 'Tên vật tư', textAlign: 'Left', allowFiltering: true},
                                {fieldName: 'SERIAL', headerText: 'Serial', textAlign: 'Left', allowFiltering: true},
                                {fieldName: 'DVI_TINH', headerText: 'ĐVT', textAlign: 'Left', allowFiltering: true},
                                {fieldName: 'SOLUONG', headerText: 'Số lượng', textAlign: 'Right', format: 'n3', type: 'number', allowFiltering: true},
                                {fieldName: 'DONGIA', headerText: 'Đơn giá', textAlign: 'Right', format: 'n3', type: 'number',  allowFiltering: true},
                                {fieldName: 'TIEN', headerText: 'Thành tiền', textAlign: 'Right', format: 'n3', type: 'number', allowFiltering: true},
                                {fieldName: 'TINHTRANG', headerText: 'Tình trạng', textAlign: 'Left', allowFiltering: true},
                                ]"
                                v-bind:dataSource="gridTinhTrang"
                                :showFilter="true"
                                :allowPaging="true"
                                :enablePagingServer="false"
                                :allowExcelExport="true"                                
                                :showColumnCheckbox='false'
                                ref="gridviewTinhTrang"
                                >
                            </DataGrid>
                            <!-- :totalRecords="gridTinhTrang.length"
                            :pageSize="gridTinhTrangPage.maxSize"
                            :pageIndex="gridTinhTrangPage.page"
                            @pageChanged="gridTinhTrangPageHandler" -->
                        </div>
                    </div>
                </div>
                <div class="actions" v-if="isTab1 && Visible.ThongTinHDDA">
                    <button class="btn" @click="btnGan_Click">
                        <span class="-ap icon-chevron-thin-left" ></span>
                    </button>
                    <button class="btn" @click='btnGo_Click'>
                        <span class="-ap icon-chevron-thin-right" ></span>
                    </button>
                </div>
                <div class="box-col box-form" v-if="isTab1 && Visible.ThongTinHDDA" :style="{width: isTab1 && Visible.ThongTinHDDA ? `35%` : ``}">
                    <div class="title-bg-main">
                        <div class="pull-left title">
                            Thông tin hợp đồng dự án
                        </div>
                        <div class="pull-right">
                            <a class="btn btn-main pad3 lh14" @click="btnRef_Click">
                                <span class="nc-icon-outline arrows-1_refresh-69"></span>
                            </a>
                            <a class="btn btn-main pad3 lh14" @click="btnDelete_VTDK_Click">
                                <span class="-ap icon-close"></span>
                            </a>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="info-row">
                        <div class="key w80">
                            Hợp đồng
                        </div>
                        <div class="value">
                            <ComboboxGrid class="select-custom"
                                    :columns="[
                                                        {fieldName: 'maHd', headerText: 'Mã hợp đồng', allowFiltering: true,},
                                                        {fieldName: 'noiDung', headerText: 'Nội dung', allowFiltering: true, },
                                                        {fieldName: 'ngayYc', headerText: 'Ngày yêu cầu', allowFiltering: true, }
                                                        ]"
                                    :dataSource="cboHopDong" textField="maHd" valueField="hdmsId"
                                    ref="cboHopDong"
                                    :allowPaging="false"
                                    data-key-field="hdmsId"
                                    :enabledSelectFirstRow="false"
                                    @selectedChanged="cboHopDong_DDChanged"
                                    v-model="params.p_HopDong">
                            </ComboboxGrid>
                           
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w80">
                            <div class="check-action">
                                <input type="checkbox" v-model="params.p_ckbDuAn" @click="ckbDuAn_CheckedChanged()">
                                <span class="name">Dự án</span>
                            </div>
                        </div>
                        <div class="value">
                            <div class="select-custom">                                
                                <ejs-dropdownlist
                                    class="form-control"
                                    ref="cbo_DuAn"
                                    locale='vi'
                                    v-model="params.p_DuAn"
                                    :dataSource='cbo_DuAn' 
                                    :fields="{value:'DUAN_ID', text: 'MA_CT'}"
                                    :allowFiltering="true"
                                    >
                                </ejs-dropdownlist>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w80">
                            Ghi chú
                        </div>
                        <div class="value">
                            <textarea class="form-control" style="height: 200px;" v-model="params.p_txtGhiChuHD"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    <b-modal 
        no-close-on-backdrop
        hide-footer 
        hide-header 
        hide-header-close 
        class="modal" 
        id="popupTenNguoiNhan">
        
            <div class="modal-content popup-box">
                <div class="popup-header">
                    <div class="title">Tên người nhận</div>
                    <div class="close -ap icon-close"  @click="$bvModal.hide('popupTenNguoiNhan')" data-dismiss="modal">
                    </div>
                </div>
                <div class="list-actions-top">
                    <ul class="list">
                        <li>
                            <a  @click="onClickXacNhanInPhieu()">
                                <span class="icon nc-icon-glyph ui-1_check-circle-08"></span> Xác nhận
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="popup-body">
                    <div class="info-row">
                        <div class="key w90">
                            Nhập tên người nhận
                        </div>
                        <div class="value">
                            <textarea class="form-control" v-model="tenNguoiNhan" value="tenNguoiNhan" style="height: 100px;resize: vertical;"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        
    </b-modal>
    <b-modal 
        no-close-on-backdrop
        hide-footer 
        hide-header 
        hide-header-close 
        class="modal" 
        id="popupDSMauIn">
        
            <div class="modal-content popup-box">
                <div class="popup-header">
                    <div class="title">Danh sách các mẫu in</div>
                    <div class="close -ap icon-close"  @click="$bvModal.hide('popupDSMauIn')" data-dismiss="modal">
                    </div>
                </div>
                <div class="list-actions-top">
                    <ul class="list">
                        <li>
                            <a  @click="XacNhanInPhieuDA07()">
                                <span class="icon nc-icon-glyph ui-1_check-circle-08"></span> In phiếu
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="popup-body">
                    <div class="info-row">
                        <ejs-dropdownlist
                            class="form-control"
                            ref="DSMauIn"
                            locale='vi'
                            v-model="p_mauIn"
                            :dataSource='DSMauIn' 
                            :fields="{value:'MA_BC', text: 'HIENTHI'}"      
                            @change="XacNhanInPhieuDA07"                                                                            
                            >
                        </ejs-dropdownlist>
                    </div>
                </div>
            </div>
        
    </b-modal>
    <b-modal 
        no-close-on-backdrop
        hide-footer 
        hide-header 
        hide-header-close 
        class="modal" 
        size="xl"
        id="popupDSVT">
        
            <div class="modal-content popup-box">
                <div class="popup-header">
                    <div class="title">Danh sách vật tư</div>
                    <div class="close -ap icon-close"  @click="$bvModal.hide('popupDSVT')" data-dismiss="modal">
                    </div>
                </div>
                <div class="list-actions-top">
                    <ul class="list">
                        <li @click="btnFilter_Click">
                            <a >
                                <span class="icon nc-icon-glyph ui-1_check-circle-08"></span> Lấy Serial
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="popup-body">
                    <div class="info-row">                       
                        <DataGrid ref="grvVT" class="table-result table-gachle" v-bind:columns="[
                            {fieldName: 'LOHANG', headerText: 'Lô hàng', allowFiltering: true, allowSorting: true, freeze: 'Left'},
                            {fieldName: 'MA_VT', headerText: 'Mã vật tư', allowFiltering: true, allowSorting: true , textAlign: 'Right'}, 
                            {fieldName: 'TEN_VT', headerText: 'Tên vật tư', allowFiltering: true, allowSorting: true},                                                    
                            ]" 
                            v-bind:dataSource="this.grcVT" 
                            :showFilter="true" 
                            dataKeyField="VATTU_ID"                           
                            :showColumnCheckbox="true"
                            :enabledSelectFirstRow='false'
                            :allowPaging="true"
                            :enablePagingServer="false"
                            >
                            <!-- @selectedItemsChanged="grvVT_Checkbox" -->
                        </DataGrid>  
                    </div>
                </div>
            </div>
        
    </b-modal>
    <!-- <frmGanSeri_Tbi ref="frmGanSeri_Tbi" class=""></frmGanSeri_Tbi> -->
    <frmGiaoPhieu ref="frmGiaoPhieu" /> 
    <TraCuuTTDongBo ref="frmTraCuuTTDongBo" class=""></TraCuuTTDongBo>

    <b-modal 
        no-close-on-backdrop
        hide-footer 
        hide-header 
        hide-header-close 
        class="modal" 
        size="xl"
        id="popupCSHT">
        
            <div class="modal-content popup-box">
                <div class="popup-header">
                    <div class="title">Danh sách CSHT</div>
                    <div class="close -ap icon-close"  @click="closePopupCSHT" data-dismiss="modal">
                    </div>
                </div>
                <div class="list-actions-top" style="padding-right: 0px !important; padding-top: 15px !important;">
                    <div class="col-sm-4 col-12"></div>
                    <div class="col-sm-4 col-12 actions row" style="text-align: center;">
                        <div class="col-sm-3 col-12">
                            <button class="btn btn-main" @click="revious_CHST" >
                                <span class="act -ap icon-chevron-thin-left"></span>
                            </button>
                        </div>
                        <div class="col-sm-6 col-12" style="text-align: center;">
                            <input type="number" class="form-control" v-model="params.pageNumberTQ" @change="onChangePageNumberTQ">
                        </div>
                        <div class="col-sm-3 col-12" >
                            <button class="btn btn-main" @click="next_CHST">
                                <span class="act -ap icon-chevron-thin-right"></span>
                            </button>
                        </div>
                        
                    </div>
                    <div class="col-sm-4 col-12">
                        <div class="pull-right">
                            <button class="btn btn-second pad5" @click="pictureEdit1_Click">
                                <span class="one-reload f16"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="popup-body">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Tìm mã CSHT
                                </div>
                                <div class="value">
                                    <div class="select-custom">                                                        
                                        <ejs-dropdownlist
                                            class="form-control"
                                            ref="cboTinh"
                                            locale='vi'       
                                            v-model="params.p_Tinh"
                                            :dataSource='cboTinh' 
                                            :fields="{value:'tentat_ccbs', text: 'tentinh'}"                                         
                                            >
                                        </ejs-dropdownlist>                                 
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12" >
                            <input type="text" class="form-control" v-model="params.txtTK_MaCSHT" @keyup.enter="pictureEdit1_Click">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-12">
                            <div class="info-row">
                                <div class="key w100">
                                    Tìm tên CSHT
                                </div>
                                <div class="value">
                                    <input type="text" class="form-control"  v-model="params.txtTK_TenCSHT" @keyup.enter="pictureEdit1_Click">
                                </div>
                            </div>
                        </div>                       
                    </div>
                    <div class="table-content col-sm-12 col-12" >
                        <DataGrid :columns="[
                            {fieldName: 'stt', headerText: 'STT', allowFiltering: true},                              
                            {fieldName: 'ma_csht', headerText: 'Mã CSHT', allowFiltering: true},
                            {fieldName: 'ten_csht', headerText: 'Tên CSHT', allowFiltering: true},
                            {fieldName: 'muc_dich_su_dung', headerText: 'MĐ Sử dụng', allowFiltering: true},
                            {fieldName: 'stt',  visible:false, isPrimaryKey:true}     
                            ]" 
                            ref="gridDSMa_PDA"
                            :showFilter="true"
                            :allowPaging="true"
                            :enablePagingServer="false" 
                            dataKeyField="stt"    
                            :showColumnCheckbox='false'                                
                            :enabledSelectFirstRow="false"  
                            v-bind:dataSource="grcMa_CSHT"
                            @selectedRowChanged="gridDSMa_PDAFocus"
                            />                       
                    </div>
                </div>
            </div>
        
    </b-modal>   
    <b-modal 
        no-close-on-backdrop
        hide-footer 
        hide-header 
        hide-header-close 
        class="modal" 
        size="xl"
        id="popupSPDA">
        
            <div class="modal-content popup-box">
                <div class="popup-header">
                    <!-- <div class="title">Mã Dự án</div> -->
                    <div class="close -ap icon-close"  @click="$bvModal.hide('popupSPDA')" data-dismiss="modal">
                    </div>
                </div>
                <div class="list-actions-top" style="padding-right: 0px !important; padding-top: 15px !important;">
                    <div class="col-sm-6 col-12">
                        <div class="info-row" v-if="Visible.layoutMaPhieu">
                            <div class="key">
                                Mã phiếu
                            </div>
        
                            <div class="value">
                                <div class="input-group inline">
                                    <div class="input-text">
                                        <div class="select-custom">
                                            <ejs-dropdownlist
                                                class="form-control"
                                                locale='vi'
                                                v-model="params.p_MaPhieu"
                                                :dataSource='cboMaPhieu' 
                                                :fields="{value:'MaPhieu', text: 'MaPhieu'}" 
                                                @change="cboMaPhieu_EditValueChanged"                
                                                >
                                            </ejs-dropdownlist>
                                        </div>                                        
                                    </div>
                                    <div class="input-addon">
                                        <button class="btn" @click="cboMaPhieu_ButtonClick">
                                            <span class="nc-icon-glyph ui-1_bold-add f14"></span>
                                        </button>                               
                                    </div>
                                </div>
                            </div>                            
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="pull-right">
                            <button class="btn btn-second pad5" @click="v_btnRef_Click">
                                <span class="one-reload f16"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="popup-body">
                    <div class="nav tabs tab-over">
                        <a 
                            href="#dsda" 
                            data-toggle="tab" 
                            :class="{active:tabSPDA == 1}" 
                            @click="SelectedTabSPDA(1)"
                            v-if="Visible.layoutControlDuAn"
                           >
                           Danh sách dự án
                        </a>
                        <a 
                            href="#vtqlts"                            
                            data-toggle="tab"   
                            :class="{active:tabSPDA == 2}" 
                            @click="SelectedTabSPDA(2)"
                            v-if="Visible.layoutControlDieuChinh"
                           >
                            Danh sách vật tư QLTS
                        </a>
                        <a 
                            href="#bbbg" 
                            data-toggle="tab"      
                            :class="{active:tabSPDA == 3}" 
                            @click="SelectedTabSPDA(3)"
                            v-if="Visible.layoutControlBBBG"              
                            >
                            Biên bản bàn giao
                        </a>
                        <a 
                            href="#dsvt"                             
                            data-toggle="tab" 
                            :class="{active:tabSPDA == 4}" 
                            @click="SelectedTabSPDA(4)"
                            v-if="Visible.layoutControlDS_Vattu"
                            >
                            Danh sách vật tư
                        </a>
                    </div>
        
                    <div class="box-form tab-content">
                        <!-- TAB DS dự án -->
                        <div class="tab-pane" :class="{active:tabSPDA == 1}" id="dsda" v-if="Visible.layoutControlDuAn">
                            <div class="row">
                                <div class="col-sm-12 col-12">
                                    <div class="box-form">
                                        <div class="row">                            
                                            <div class=" col-sm-6 col-12" >
                                                <div class="info-row" >
                                                    <div class="key w100">
                                                        Mã DV SD
                                                    </div>                                                    
                                                    
                                                    <div class="value" style="position: relative; z-index: 999;">
                                                        <div class="select-custom" ref="title-dvsd" :class="{'disabled': !Enabled.cboMa_DV_SD}">
                                                            <input type="text" class="form-control" :value="params.text_Ma_DV_SD" readonly style="cursor:default; background-color: #fff !important;" />                                    
                                                        </div>
                                                        <div ref="table-dvsd" style="z-index: 99999; background-color: white; border: 1px solid #ddd; width: 100%;" :style="{display: showDVSD}">
                                                            <div style="position: absolute; z-index: 999; max-width: 800px; overflow: auto; border: 1px solid #ddd; margin-bottom: 5px; ">
                                                                <DataGrid ref="tbNhaThau" class="table-result table-gachle" v-bind:columns="[
                                                                    {fieldName: 'TEN_DV', headerText: 'Tên đơn vị', allowFiltering: true },                                                                                             
                                                                    ]" v-bind:dataSource="cboMa_DV_SD" 
                                                                    :showFilter="true" 
                                                                    dataKeyField="MA_DV_SD"
                                                                    @selectedRowChanged="cboMa_DV_SD_EditValueChanged" 
                                                                    :allowPaging="true"
                                                                    :enablePagingServer="false"
                                                                    :enabledSelectFirstRow="false" >
                                                                </DataGrid>
                                                            </div>
                                                        </div>                                                                                                   
                                                    </div>
                                                </div>                                        
                                            </div> 
                                            <div class=" col-sm-6 col-12">
                                                
                                                <div class="info-row">
                                                    <div class="key w100">
                                                        Mã CSHT
                                                    </div>
                                                    <div class="input-group" style="padding-left: 5px;">
                                                        <div class="input-text">                                                            
                                                            <input type="text"  class="form-control" v-model="params.p_IMS_CSHT" :disabled="!Enabled.cboHD_XuatIMS" @click="openPopupCSHT">                                                              
                                                        </div>
                                                        <div class="input-addon">
                                                            <button class="btn" :disabled="!Enabled.cboHD_XuatIMS" @click="clearCSHT">
                                                                <span class="nc-icon-glyph ui-1_bold-remove f14"></span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>                                        
                                            </div> 
                                                                                
                                        </div>
                                        
                                        <div class="row">                            
                                            <div class="col-sm-6 col-12">
                                                <div class="info-row">
                                                    <div class="key w100">
                                                        Mã DV QL
                                                    </div>                                                                                     

                                                    <div class="value" style="position: relative; z-index: 99;">
                                                        <div class="select-custom" ref="title-dvql" :class="{'disabled': !Enabled.cboMa_DV_QL}">
                                                            <input type="text" class="form-control" :value="params.text_Ma_DV_QL" readonly style="cursor:default; background-color: #fff !important;" />                                    
                                                        </div>
                                                        <div ref="table-dvql" style="z-index: 99999; background-color: white; border: 1px solid #ddd; width: 100%;" :style="{display: showDVQL}">
                                                            <div style="position: absolute; z-index: 999; max-width: 800px; overflow: auto; border: 1px solid #ddd; margin-bottom: 5px; ">
                                                                <DataGrid ref="tbNhaThau" class="table-result table-gachle" v-bind:columns="[
                                                                    {fieldName: 'TEN_DV', headerText: 'Tên đơn vị', allowFiltering: true },                                                                                             
                                                                    ]" v-bind:dataSource="cboMa_DV_QL" 
                                                                    :showFilter="true" 
                                                                    dataKeyField="MA_DV_QL"
                                                                    @selectedRowChanged="cboMa_DV_QL_EditValueChanged" 
                                                                    :allowPaging="true"
                                                                    :enablePagingServer="false"
                                                                    :enabledSelectFirstRow="false" >
                                                                </DataGrid>
                                                            </div>
                                                        </div>                                                                                                   
                                                    </div>
                                                </div>   
                                            </div>
                                            <div class=" col-sm-6 col-12">
                                                <div class="info-row">
                                                    <div class="key w100">
                                                        HĐ PO
                                                    </div>                                                     
                                                    
                                                    <div class="value" style="position: relative; z-index: 999;">
                                                        <div class="select-custom" ref="title-hdpo">
                                                            <input type="text" class="form-control" :value="params.text_HD_XuatIMS" readonly style="cursor:default; background-color: #fff !important;" />                                    
                                                        </div>
                                                        <div ref="table-hdpo" style="z-index: 99999; background-color: white; border: 1px solid #ddd; width: 100%;" :style="{display: showDHPO}">
                                                            <div style="position: absolute; z-index: 999; max-width: 800px; overflow: auto; border: 1px solid #ddd; margin-bottom: 5px; ">
                                                                <DataGrid ref="tbNhaThau" class="table-result table-gachle" v-bind:columns="[
                                                                    {fieldName: 'PO', headerText: 'PO', allowFiltering: true },
                                                                    {fieldName: 'ContractName', headerText: 'Tên hợp đồng', allowFiltering: true},   
                                                                    {fieldName: 'ContractInfoID', headerText: 'ContractInfoID', allowFiltering: true},  
                                                                    {fieldName: 'ContractNumber', headerText: 'Số hợp đồng', allowFiltering: true},   
                                                                    {fieldName: 'ParentContractInfo', headerText: 'ParentContractInfo', allowFiltering: true},                            
                                                                    ]" v-bind:dataSource="cboHD_XuatIMS" 
                                                                    :showFilter="true" 
                                                                    dataKeyField="ProjectCode"
                                                                    @selectedRowChanged="cboHD_XuatIMS_EditValueChanged" 
                                                                    :allowPaging="true"
                                                                    :enablePagingServer="false"
                                                                    :enabledSelectFirstRow="false" >
                                                                </DataGrid>
                                                            </div>
                                                        </div>      
                                                                                              
                                                    </div>
                                                </div>                                        
                                            </div>                                       
                                        </div>
        
                                        <div class="table-content col-sm-12 col-12" >
                                            <DataGrid :columns="[
                                                { fieldName: '', headerText: '' , template: ChonPDATemplate, textAlign:'Center', width: 80},
                                                {fieldName: 'ProjectCode', headerText: 'Mã dự án', allowFiltering: true},   
                                                {fieldName: 'ProjectName', headerText: 'Tên dự án', allowFiltering: true},    
                                                {fieldName: 'ProjectID',  visible:false, isPrimaryKey:true}     
                                                ]" 
                                                ref="gridDSMa_PDA"
                                                :showFilter="true"
                                                :allowPaging="true"
                                                :enablePagingServer="false" 
                                                dataKeyField="ProjectID"    
                                                :showColumnCheckbox='false'                                
                                                :enabledSelectFirstRow="false"  
                                                v-bind:dataSource="grcMa_PDA"
                                                />                       
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- TAB Vật tưu quản lý tài sản -->
                        <div class="tab-pane" :class="{active:tabSPDA == 2}" id="vtqlts" v-if="Visible.layoutControlDieuChinh">
                            <div class="row">
                                <div class="col-sm-12 col-12">
                                    <div class="box-form">
                                        <div class="row">                            
                                            <div class=" col-sm-4 col-12">
                                                <div class="info-row">
                                                    <div class="key w100">
                                                        Tìm kiếm theo
                                                    </div>
                                                    <div class="value">
                                                        <ejs-dropdownlist
                                                            ref="cboLoaiChungTu"
                                                            class="form-control"
                                                            locale='vi'   
                                                            v-model="params.p_LocDCDonVi"
                                                            :dataSource='cboLocDCDonVi' 
                                                            :fields="{value:'LOCDV_ID', text: 'LOC_DV'}"   
                                                            @change="cboLocDCDonVi_EditValueChanged"                                             
                                                            >
                                                        </ejs-dropdownlist>
                                                    </div>                                                                                      
                                                </div>                                        
                                            </div> 
                                            <div class=" col-sm-4 col-12">
                                                <div class="info-row">
                                                    <div class="key w100">
                                                       Loại CT
                                                    </div>
                                                    <div class="value">
                                                        <ejs-dropdownlist
                                                            ref="cboLoaiChungTu"
                                                            class="form-control"
                                                            locale='vi' 
                                                            v-model="params.p_LocDCLoaiCT"
                                                            :dataSource='cboLocDCLoaiCT' 
                                                            :fields="{value:'LOAICT_ID', text: 'LOAI_CT'}"    
                                                            @change="cboLocDCLoaiCT_EditValueChanged"                                                                                           
                                                            >
                                                        </ejs-dropdownlist>
                                                    </div> 
                                                </div>                                        
                                            </div> 
                                            <div class="value w30 nowrap" >
                                                <button class="btn btn-second" @click="btnCapNhatDieuChinh_Click">
                                                    <span class="icon one-key normal"></span> Cập nhật vật tư
                                                </button>
                                            </div>                             
                                        </div>
                                        
        
                                        <div class="table-content" >
                                            <DataGrid :columns="[
                                                {fieldName: 'MAVTHH', headerText: 'Mã VT', allowFiltering: true},   
                                                {fieldName: 'TENVTHH', headerText: 'Tên VT', allowFiltering: true},    
                                                {fieldName: 'SERIAL', headerText: 'Serial', allowFiltering: true},
                                                {fieldName: 'SOLUONG', headerText: 'Số lượng', allowFiltering: true},
                                                {fieldName: 'DONGIA', headerText: 'Đơn giá', allowFiltering: true},
                                                {fieldName: 'IDCHITIET', headerText: 'IDCHITIET', allowFiltering: true},
                                                {fieldName: 'QR_CODE', headerText: 'QR', allowFiltering: true},
                                                {fieldName: 'MACSHTCU', headerText: 'CSHT cũ', allowFiltering: true},                                                   
                                                ]" 
                                                ref="gridDSMa_PDA"
                                                :showFilter="true"
                                                :allowPaging="true"
                                                :enablePagingServer="false"                                                
                                                :showColumnCheckbox='true'                                
                                                :enabledSelectFirstRow="false"  
                                                v-bind:dataSource="gridDieuChinhVT"
                                                @selectedItemsChanged="DieuChinhVT_CheckBox"
                                                />                       
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- TAB Biên bản bàn giao -->
                        <div class="tab-pane"  :class="{active:tabSPDA == 3}" id="bbbg" v-if="Visible.layoutControlBBBG" >
                            <div class="row">
                                <div class="col-sm-12 col-12">
                                    <div class="box-form">
                                        <div class="row">                            
                                            <div class=" col-sm-6 col-12">
                                                <div class="info-row">
                                                    <div class="key">
                                                        Dự án
                                                    </div>
                                                    <div class="value" style="position: relative; z-index: 999;">
                                                        <div class="select-custom" ref="title-du-an">
                                                            <input type="text" class="form-control" :value="params.p_DuanIMS" readonly style="cursor:default; background-color: #fff !important;" />                                    
                                                        </div>
                                                        <div ref="table-du-an" style="z-index: 99999; background-color: white; border: 1px solid #ddd; width: 100%;" :style="{display: showDuAn}">
                                                            <div style="position: absolute; z-index: 999; overflow: auto; border: 1px solid #ddd; margin-bottom: 5px; ">
                                                                <DataGrid ref="tbNhaThau" class="table-result table-gachle" v-bind:columns="[
                                                                    {fieldName: 'ProjectID', headerText: 'STT', allowFiltering: true },
                                                                    {fieldName: 'ProjectCode', headerText: 'Mã dự án', allowFiltering: true},   
                                                                    {fieldName: 'ProjectName', headerText: 'Tên dự án', allowFiltering: true},                             
                                                                    ]" v-bind:dataSource="cboDuanIMS" 
                                                                    :showFilter="true" 
                                                                    dataKeyField="ProjectCode"
                                                                    @selectedRowChanged="cboDuanIMS_EditValueChanged" 
                                                                    :allowPaging="true"
                                                                    :enablePagingServer="false"
                                                                    :enabledSelectFirstRow="false" >
                                                                </DataGrid>
                                                            </div>
                                                        </div>      
                                                        
                                                    </div>                                                                                      
                                                </div>                                        
                                            </div> 
                                            <div class=" col-sm-6 col-12">
                                                
                                                <div class="info-row">
                                                    <div class="key">
                                                        HĐ PO
                                                    </div>
                                                    <div class="value" style="position: relative; z-index: 999;">
                                                        <div class="select-custom" ref="title-hdpo">
                                                            <input type="text" class="form-control" :value="contractNumber" readonly style="cursor:default; background-color: #fff !important;" />                                    
                                                        </div>
                                                        <div ref="table-hdpo" style="z-index: 99999; background-color: white; border: 1px solid #ddd; width: 100%;" :style="{display: showDHPO}">
                                                            <div style="position: absolute; z-index: 999; max-width: 800px; overflow: auto; border: 1px solid #ddd; margin-bottom: 5px; ">
                                                                <DataGrid ref="tbNhaThau" class="table-result table-gachle" v-bind:columns="[
                                                                    {fieldName: 'PO', headerText: 'PO', allowFiltering: true },
                                                                    {fieldName: 'ContractName', headerText: 'Tên hợp đồng', allowFiltering: true},   
                                                                    {fieldName: 'ContractInfoID', headerText: 'ContractInfoID', allowFiltering: true},  
                                                                    {fieldName: 'ContractNumber', headerText: 'Số hợp đồng', allowFiltering: true},   
                                                                    {fieldName: 'ParentContractInfo', headerText: 'ParentContractInfo', allowFiltering: true},                            
                                                                    ]" v-bind:dataSource="cboHDPOIMS" 
                                                                    :showFilter="true" 
                                                                    dataKeyField="ProjectCode"
                                                                    @selectedRowChanged="cboHDPOIMS_EditValueChanged" 
                                                                    :allowPaging="true"
                                                                    :enablePagingServer="false"
                                                                    :enabledSelectFirstRow="false" >
                                                                </DataGrid>
                                                            </div>
                                                        </div>      
                                                                                              
                                                    </div>
                                                </div>                                        
                                            </div> 
                                                                                
                                        </div>
                                        
                                    
                                        <div class="table-content col-sm-6 col-12" >
                                            <DataGrid :columns="[
                                                { fieldName: '', headerText: '' , template: ChonBBBGTemplate, textAlign:'Center', width: 80},
                                                {fieldName: 'AcceptanceGeneralName', headerText: 'Biên bản bàn giao', allowFiltering: true},                                           
                                                ]" 
                                                ref="gridDSMa_PDA"
                                                :showFilter="true"
                                                :allowPaging="true"
                                                :enablePagingServer="false"                                                
                                                :showColumnCheckbox='false'                                
                                                :enabledSelectFirstRow="false"  
                                                v-bind:dataSource="gridBienBanIMS"
                                                />                       
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- TAB Danh sách vật tư -->
                        <div class="tab-pane" :class="{active:tabSPDA == 4}" id="dsvt" v-if="Visible.layoutControlDS_Vattu">
                            <div class="row">
                                <div class="col-sm-12 col-12">
                                    <div class="box-form">
                                        <div class="info-row" style="text-align: right; padding-top: 5px; padding-left: 5px;">                            
                                            <div class="value w30 nowrap" >
                                                <button class="btn btn-second" @click="btnCapNhatVattu_ThuHoi_Click">
                                                    <span class="icon one-key normal"></span> Cập nhật vật tư
                                                </button>
                                            </div>                             
                                        </div>
                                    
                                        <div class="table-content" >
                                            <DataGrid :columns="[
                                                {fieldName: 'MAVTHH', headerText: 'Mã VT', allowFiltering: true},   
                                                {fieldName: 'TENVTHH', headerText: 'Tên VT', allowFiltering: true},    
                                                {fieldName: 'SERIAL', headerText: 'Serial', allowFiltering: true},
                                                {fieldName: 'SOLUONG', headerText: 'Số lượng', allowFiltering: true},
                                                {fieldName: 'DONGIA', headerText: 'Đơn giá', allowFiltering: true},
                                                {fieldName: 'IDCHITIET', headerText: 'IDCHITIET', allowFiltering: true},
                                                {fieldName: 'QR_CODE', headerText: 'QR', allowFiltering: true},
                                                {fieldName: 'MACSHTCU', headerText: 'CSHT cũ', allowFiltering: true},                                                  
                                                ]" 
                                                ref="gridDS_VT_THUHOI"
                                                :showFilter="true"
                                                :allowPaging="true"
                                                :enablePagingServer="false"                                                   
                                                :showColumnCheckbox='true'                                
                                                :enabledSelectFirstRow="false"  
                                                @selectedItemsChanged="DS_VT_THUHOI_CheckBox"
                                                v-bind:dataSource="gridDS_VT_THUHOI"
                                                />
                                                <!-- {fieldName: 'VATTU_ID',  visible:false, isPrimaryKey:true}    
                                                dataKeyField="VATTU_ID"                         -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
    </b-modal> 
    <frmNhapDieuChinh ref="frmNhapDieuChinh"></frmNhapDieuChinh>
    <ejs-dialog
        :visible='false'
        ref="popup_frmGanSeri"
        :animationSettings='animationSettings'
        :showCloseIcon=true 
        :enableResize=true
        :allowDragging=true
        width='90%'
        height ="100%"
        :isModal='true'
        :cssClass="'popup-box'"
        :zIndex='900'
        >
        <frmGanSeri ref="frmGanSeri" class=""></frmGanSeri>
    </ejs-dialog>
    <ejs-dialog
        :visible='false'
        ref="popup_frmChungTu_TBao"
        :animationSettings='animationSettings'
        :showCloseIcon=false 
        :enableResize=true
        :allowDragging=true
        width='80%'
        height ="100%"
        :isModal='true'
        :cssClass="'popup-box'"
        >
        <frmChungTu_TBao ref="frmChungTu_TBao" class=""></frmChungTu_TBao>
    </ejs-dialog>
    <ejs-dialog
        :visible='false'
        ref="popup_frmTaoSerial"
        :animationSettings='animationSettings'
        :showCloseIcon=false 
        :enableResize=true
        :allowDragging=true
        width='80%'
        height ="100%"
        :isModal='true'
        :cssClass="'popup-box'"
        >
        <frmTaoSerial ref="frmTaoSerial" class=""></frmTaoSerial>
    </ejs-dialog>
    <DSVatTu ref="frmDSVatTu"></DSVatTu>
    
    <ejs-dialog
        :visible='false'
        ref="popup_frmDonHangTT"
        :animationSettings='animationSettings'
        :showCloseIcon=true 
        :enableResize=true
        :allowDragging=true
        width='80%'
        height ="100%"
        :isModal='true'
        :zIndex="999"
        :close='XacNhan_frmDonHangTT'
        header='<div class="main-title">Đơn hàng đã nghiệm thu</div>'               
        :closeOnEscape='true'
        >
        <TraCuuDonHangConHan ref="frmDonHangTT" class=""></TraCuuDonHangConHan>
    </ejs-dialog>
    
    <frmVatTuTrongKho  ref='frmVatTuTrongKho'/>
    <ejs-dialog
        :visible='false'
        ref="popup_frmNhapText"
        :animationSettings="{ effect: 'Zoom' }"
        :showCloseIcon=false 
        :closeOnEscape='true'
        :enableResize='true'
        :allowDragging='true'
        width='30%'
        :isModal='true'
        :cssClass="'popup-box'"
        >
        <frmNhapText ref="frmNhapText"></frmNhapText>
    </ejs-dialog>
    
    <frmNhapCap ref="frmNhapCap"></frmNhapCap>
    <frmGanSeri_Tbi ref="GanSeri_Tbi"></frmGanSeri_Tbi>
    <DongBoCCDC ref="DongBoCCDC"></DongBoCCDC>
    <ejs-dialog
        :visible='false'
        ref="popup_frmChonPhieuDeNghi"
        :animationSettings='animationSettings'
        :showCloseIcon=true 
        :enableResize=true
        :allowDragging=true
        width='80%'
        height ="100%"
        :isModal='true'
        :close='XacNhan_frmChonPhieuDeNghi'
        header='<div class="main-title">Tra cứu phiếu đề nghị</div>'               
        :closeOnEscape='true'
        :zIndex="999"
        >
        <frmChonPhieuDeNghi ref="frmChonPhieuDeNghi" class=""></frmChonPhieuDeNghi>
    </ejs-dialog>
    <ejs-dialog
        :visible='false'
        ref="popup_frmPhieuLuanChuyen"
        :animationSettings='animationSettings'
        :showCloseIcon=true 
        :enableResize=true
        :allowDragging=true
        width='80%'
        height ="100%"
        :isModal='true'        
        header='<div class="main-title">Phiếu luân chuyển</div>'               
        :closeOnEscape='true'
        :zIndex="999"
        :close='CloseLuanChuyen'
        >
        <NhanPhieuLuanChuyen ref="frmNhanPhieuLuanChuyen" ></NhanPhieuLuanChuyen>
    </ejs-dialog>
</div>  