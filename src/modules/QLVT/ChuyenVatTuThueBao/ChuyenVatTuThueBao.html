<div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a class="pointer" @click="btnLayTT">
                    <span class="icon one-reload1"></span>Lấy TT
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Danh sách vật tư thuê bao</div>
            <div class="row">
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w60">Số máy/Acc</div>
                        <div class="value">
                            <div class="input-group">
                                <div class="input-text">
                                    <input
                                        type="text"
                                        class="form-control highlight"
                                        v-model="gParams.txtMaTB"
                                        @keyup.enter="txtMaTBEnter"
                                    />
                                </div>
                                <div class="input-addon">
                                    <button class="btn" @click="txtMaTBEnter">
                                        <span class="icon one-search"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w90">
                            Tên thuê bao
                        </div>
                        <div class="value">
                            <input
                                type="text"
                                v-model="gParams.txtTenTB"
                                class="form-control"
                            />
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w70">
                            Loại hình
                        </div>
                        <div class="value">
                            <input
                                type="text"
                                v-model="gParams.txtLoaiHinhTB"
                                class="form-control"
                            />
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-row"></div>
            <div class="table-content">
                <DataGrid
                    v-bind:columns="[
                    { fieldName: field='TEN_VT_NEW', headerText: 'Thiết bị' , textAlign: 'center', allowFiltering: true, width: 130,allowEditing:false,},                        
                    { fieldName: field='SERIAL',  headerText: 'Seri' , textAlign: 'center', allowFiltering: true,width: 130,allowEditing:false,},                        
                    { fieldName: field='MA_TBI', headerText: 'Mã T.Bị' , textAlign: 'center', allowFiltering: true,width: 130,allowEditing:true,},                        
                    { fieldName: field='SOLUONG', headerText: 'Số lượng' , textAlign: 'center', allowFiltering: true,width: 130, allowEditing:false,},                        
                    { fieldName: field='KIEU_TBI', headerText: 'Kiểu tbị' , textAlign: 'center', allowFiltering: true,width: 130, allowEditing:false,},                        
                    { fieldName: field='TINHTRANG_TBI', headerText: 'Tình trạng' , textAlign: 'left', allowFiltering: true,width: 130, allowEditing:false,},                                                                              
                    { fieldName: field='TENTRANGBI', headerText: 'Trang bị' , textAlign: 'left', allowFiltering: true,width: 130, allowEditing:false,},                                                                              
                    { fieldName: field='NGAY_SD', headerText: 'Ngày cấp' , textAlign: 'left', allowFiltering: true,width: 130, allowEditing:false,},                                                                              
                    ]"
                    ref="gridVatTuSD"
                    :dataSource="dtVatTuSD"
                    :showFilter="true"
                    :enablePagingServer="false"
                    :showColumnCheckbox="true"
                    :editSettings=" { allowEditing: true , mode:'Batch'}"
                    :allowPaging="true"
                    @selectedRowChanged="onDtVatTuSDRowChanged"
                    @cellSaved="onGridVTSDCellSaved"
                >
                </DataGrid>
            </div>

            <div class="actions row">
                <div class="info-row col-6" style="padding-right: 0px;">
                    <button
                        class="btn"
                        style="border: 1px solid rgb(206, 212, 218); "
                        @click="btnGan"
                    >
                        <span class="-ap icon-chevron-thin-down"></span>
                    </button>
                </div>
                <div
                    class="info-row col-6"
                    style="text-align: right; padding-right: 0px;"
                >
                    <button
                        class="btn"
                        style="border: 1px solid rgb(206, 212, 218);"
                        @click="btnGo"
                    >
                        <span class="-ap icon-chevron-thin-up"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="box-form">
            <div class="legend-title">
                Danh sách vật tư của thuê bao cùng đôi cáp
            </div>
            <div class="info-row">
                <div class="key w140">Danh sách thuê bao</div>
                <div class="value">
                    <div class="select-custom">
                        <ejs-dropdownlist
                            class="form-control"
                            locale="vi"
                            v-model="gParams.cboDSThueBao"
                            :dataSource="cboDSThueBao"
                            :fields="{value:'THUEBAO_ID', text: 'MA_TB'}"
                            :allowFiltering="true"
                            @change="cboDSThueBaoChanged"
                        ></ejs-dropdownlist>
                    </div>
                </div>
            </div>
            <div class="table-content">
                <DataGrid
                    v-bind:columns="[
                    { fieldName: field='TEN_VT_NEW', headerText: 'Thiết bị' , textAlign: 'center', allowFiltering: true, width: 130,allowEditing:false,},                        
                    { fieldName: field='SERIAL',  headerText: 'Seri' , textAlign: 'center', allowFiltering: true,width: 130,allowEditing:false,},                        
                    { fieldName: field='MA_TBI', headerText: 'Mã T.Bị' , textAlign: 'center', allowFiltering: true,width: 130,allowEditing:true,},                        
                    { fieldName: field='SOLUONG', headerText: 'Số lượng' , textAlign: 'center', allowFiltering: true,width: 130, allowEditing:false,},                        
                    { fieldName: field='KIEU_TBI', headerText: 'Kiểu tbị' , textAlign: 'center', allowFiltering: true,width: 130, allowEditing:false,},                        
                    { fieldName: field='TINHTRANG_TBI', headerText: 'Tình trạng' , textAlign: 'left', allowFiltering: true,width: 130, allowEditing:false,},                                                                              
                    { fieldName: field='TENTRANGBI', headerText: 'Trang bị' , textAlign: 'left', allowFiltering: true,width: 130, allowEditing:false,},                                                                              
                    { fieldName: field='NGAY_SD', headerText: 'Ngày cấp' , textAlign: 'left', allowFiltering: true,width: 130, allowEditing:false,},                                                                              
                    ]"
                    ref="gridVatTuCDC"
                    :dataSource="dtVatTuCDC"
                    :showFilter="true"
                    :enablePagingServer="false"
                    :showColumnCheckbox="true"
                    :editSettings=" { allowEditing: true , mode:'Batch'}"
                    :allowPaging="true"
                    @selectedRowChanged="onDtVatTuCDCRowChanged"
                    @cellSaved=""
                >
                </DataGrid>
            </div>
        </div>
    </div>
</div>
