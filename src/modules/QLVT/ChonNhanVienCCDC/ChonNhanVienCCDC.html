<!-- <b-modal
    id="popup-chonnhanvienccdc"
    size="xl"
    hide-footer
    hide-header
    hide-header-close
    body-class="modal-body p-0"
> -->
<ejs-dialog
  :enableResize='true'
  :allowDragging='true'
  :visible='false'
  ref="popup_chonnhanvienccdc"
  :animationSettings='animationSettings'
  showCloseIcon=true width='80%'
  :target='target'
  :close="Close"
  >
  <!-- :open='ShowDialog' -->
        <div class="modal-content popup-box frmChonNV_CCDC">
            <div class="popup-header">
                <div class="title font-weight-bold"><span class="icon one-appstore"></span> Lựa chọn CCDC với nhân viên</div>
                <div class="close -ap icon-close" data-dismiss="modal" @click="Close">
                </div>
            </div>
            <div class="list-actions-top">
                <ul class="list">
                    <li>
                        <a>
                            <span class="icon one-file-attach"></span> Lấy TT
                        </a>
                    </li>
                    <li>
                        <a @click="tsbtnXacNhan_Click">
                            <span class="icon nc-icon-glyph ui-1_check-circle-08"></span> Xác nhận
                        </a>
                    </li>
                    <li>
                        <a @click="tsbtnGhiLai_Click">
                            <span class="icon one-save"></span> Ghi lại
                        </a>
                    </li>
                    <li>
                        <a>
                            <span class="icon  one-circle-question"></span> Trợ giúp
                        </a>
                    </li>
                </ul>
            </div>
            <div class="popup-body">
                <div class="box-form">
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="legend-title">Thông tin đơn vị nhân viên</div>
                            <div class="info-row">
                                <div class="key w80">Đơn vị</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <!-- <select name="" id="" class="form-control">
                                            <option value=""></option>
                                        </select> -->
                                        <!-- <ejs-dropdownlist
                                            class="form-control"
                                            locale='vi' 
                                            v-model="p_donvi_id"
                                            :dataSource='cboDenDonVi' 
                                            :allowFiltering='true' 
                                            :fields="{value:'DONVI_ID', text: 'TEN_DV'}"
                                            :itemTemplate='iTemplate'
                                            :filtering='onFiltering'
                                            @change="cboDenDonVi_EditValueChanged"
                                            >
                                        </ejs-dropdownlist> -->
                                        <ComboboxGrid ref="cap-goc" v-bind:columns="[
                                        
                                        {fieldName: 'MA_DV', headerText: 'Mã đơn vị', allowFiltering: true, width: '80'},
                                        {fieldName: 'TEN_DV', headerText: 'Tên đơn vị', allowFiltering: true},
                                        {fieldName: 'TEN_DV_CHA', headerText: 'Tên đơn vị cha', allowFiltering: true},
                                        ]" v-bind:dataSource="cboDenDonVi" textField="TEN_DV" valueField="DONVI_ID"
                                                @selectedChanged="cboDenDonVi_EditValueChanged">
                                        </ComboboxGrid>
                                    </div>
                                </div>
                            </div>
                            <div class="table-content">
                                <DataGrid
                                    v-bind:columns="[
                                    {fieldName: 'tenNv', headerText: 'Tên nhân viên', textAlign: 'Left', allowFiltering: true},
                                    ]"
                                    v-bind:dataSource="grcDanhSach"
                                    ref="TableDanhSach"
                                    :showColumnCheckbox='true'
                                    :showFilter="true"
                                    :allowPaging="true"
                                    :enablePagingServer='false'
                                    :enabledSelectFirstRow="false"
                                    >
                                </DataGrid>
                                <!-- <ejs-grid ref="TableDanhSach"
                                    class="table-result table-gachle"
                                    locale="vi"
                                    :dataSource="grcDanhSach"
                                    :allowPaging='false'
                                    :allowSorting='true'
                                    :allowFiltering='true'
                                    :filterSettings='filterOptions'
                                    :allowResizing='true'
                                    :allowSelection='true'
                                    :gridLines="'Both'"
                                    rowHeight=32
                                    :enableHover='true'
                                    >
                                    <e-columns>
                                        <e-column field='STT' headerText='' width=20 textAlign='Center' :template='cRowSelected' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column type='checkbox' :allowFiltering='false' :allowSorting='false' textAlign='Center' width='60'></e-column>
                                        <e-column field='tenNv' headerTextAlign='Left' headerText='Tên nhân viên' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                    </e-columns>
                                </ejs-grid> -->
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="legend-title">Danh sách vật tư</div>
                            <div class="info-row">
                                <div class="key w80 nowrap padr10">
                                    <div class="list-checks red fw6">
                                        <div class="item">
                                            <div class="check-action">
                                                <input type="radio" v-model="p_radio_pb" checked="" class="check" checked value="1">
                                                <span class="name">Phân bổ 1 tháng</span>
                                            </div>
                                        </div>
                                        <div class="item">
                                            <div class="check-action">
                                                <input type="radio" v-model="p_radio_pb" class="check" value="2">
                                                <span class="name">Phân bổ đều</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="key w80 nowrap">Ngày chứng từ </div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <!-- <input type="text" class="form-control">
                                        <span class="icon one-calendar"></span> -->
                                        <ejs-datepicker 
                                        locale="vi"
                                        class="form-control"
                                        v-model="p_ngay_ct"
                                        :format="'dd/MM/yyyy hh:mm:ss'">
                                        </ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div class="table-content">
                                <DataGrid
                                    v-bind:columns="[
                                    { allowEditing: false ,fieldName: 'MA_VT',isPrimaryKey: true, headerText: 'Mã vật tư', textAlign: 'Left', allowFiltering: true, },
                                    { allowEditing: false ,fieldName: 'TEN_VT', headerText: 'Tên vật tư', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false ,fieldName: 'SOLUONG', headerText: 'Số lượng', textAlign: 'Right', allowFiltering: true,},
                                    { allowEditing: true ,fieldName: 'SL_XUAT', headerText: 'SL Xuất()', textAlign: 'Right', allowFiltering: true,},
                                    
                                    { allowEditing: false ,fieldName: 'DVI_TINH', headerText: 'ĐVT', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false ,fieldName: 'DONGIA', headerText: 'Đơn giá', textAlign: 'Right',format: 'N3', type: 'number', allowFiltering: true,},
                                    { allowEditing: true ,fieldName: 'TIEN', headerText: 'Thành Tiền', textAlign: 'Right',format: 'N3', type: 'number', allowFiltering: true,},

                                    { allowEditing: true ,fieldName: 'SOTHANG_PB', headerText: 'Số tháng PB', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: false ,fieldName: 'LOAI_TBI', headerText: 'Loại thiết bị', textAlign: 'Left', allowFiltering: true,},
                                    { allowEditing: true ,fieldName: 'HAN_BH', headerText: 'Hạn BH', textAlign: 'Left', allowFiltering: true,},
                                    ]"
                                    v-bind:dataSource="grcVatTu"
                                    ref="grvVatTu"
                                    :showColumnCheckbox='true'
                                    :showFilter="true"
                                    :editSettings="{ allowEditing: true , mode:'Batch'}"
                                    :allowPaging="true"
                                    :enablePagingServer='false'
                                    @cellSaved='edit_TableVatTu'
                                    :enabledSelectFirstRow="false"
                                    >
                                </DataGrid>
                                <!-- <ejs-grid ref="TableVatTu"
                                    class="table-result table-gachle"
                                    locale="vi"
                                    :dataSource="grcVatTu"
                                    :allowPaging='true'
                                    :allowSorting='true'
                                    :allowFiltering='true'
                                    :filterSettings='filterOptions'
                                    :allowResizing='true'
                                    :allowSelection='true'
                                    :gridLines="'Both'"
                                    rowHeight=32
                                    :enableHover='true'
                                    :editSettings="{ allowEditing: true,mode:'Batch'}"
                                    :pageSettings='pageSettings'
                                    @cellSaved='edit_TableVatTu'
                                    >
                                    <e-columns>
                                        <e-column field='STT' :allowEditing="false" headerText='' width=20 textAlign='Center' :template='cRowSelected' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column type='checkbox' :allowEditing="false" :allowFiltering='false' textAlign='Center' :allowSorting='false' width='60'></e-column>
                                        <e-column isPrimaryKey='true'  field='MA_VT' :allowEditing="false" headerTextAlign='Center' headerText='Mã vật tư' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='TEN_VT' :allowEditing="false" headerTextAlign='Center' headerText='Tên vật tư' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='SOLUONG' :allowEditing="false" headerTextAlign='Center' headerText='Số lượng' textAlign='Right' type='number' :format="format"   :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='SL_XUAT' :allowEditing="true" headerTextAlign='Center' headerText='SL Xuất()' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='DVI_TINH' :allowEditing="false" headerTextAlign='Center' headerText='ĐVT' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='DONGIA' :allowEditing="false" headerTextAlign='Center' headerText='Đơn giá' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='TIEN' :allowEditing="false" headerTextAlign='Center' headerText='Thành Tiền' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                    </e-columns>
                                </ejs-grid> -->
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-form">
                    <div class="legend-title padb5">
                        <div class="pull-left">Danh sách CCDC</div>
                        <div class="pull-right">
                            <button class="btn btn-second padt4 padb4" @click="btnXoaHetVT_Click">
                                <span class="-ap icon-close"></span> Xóa hết
                            </button>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-12" :class="Visible.splitContainer2.Panel2Collapsed ? 'col-sm-12' : 'col-sm-6'">
                            <div class="title-bg-main padt3 padb3">
                                <span class="title pull-left mart5">
                                    Danh sách công cụ dụng cụ
                                </span>
                                <div class="pull-right">
                                    <b-form-file id="fileUpload" v-model="arrayImportFile.filexcel" ref="fileUpload" @change="this.onChange" accept=".xls, .xlsx" class="-ap icon-more_horiz hidden" plain></b-form-file>
                                    <button class="btn btn-second button-not-bg padt2 padb2" @click="btnNhapExcel_Click">
                                        <span class="one-xlsx f24 inline vcenter"></span> Nhập từ excel
                                    </button>
                                    <button class="btn btn-second button-not-bg padt2 padb2" @click="txtExcelTbiMau_Click">
                                        <span class="one-excel f24 inline vcenter"></span> File excel mẫu
                                    </button>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="table-content">
                                <DataGrid
                                    v-bind:columns="grcCCDC_Columns"
                                    v-bind:dataSource="grcCCDC"
                                    ref="grvCCDC"
                                    :showColumnCheckbox='false'
                                    :showFilter="true"
                                    :editSettings="{ allowEditing: true , mode:'Batch'}"
                                    :allowPaging="true"
                                    :enablePagingServer='false'
                                    @cellSaved='edit_TableCCDC'
                                    @recordClick='grvCCDC_FocusedRowChanged'
                                    :enabledSelectFirstRow="false"
                                    >
                                </DataGrid>

                                <!-- <ejs-grid ref="TableCCDC"
                                    class="table-result table-gachle"
                                    locale="vi"
                                    :dataSource="ds_capphat"
                                    :allowPaging='true'
                                    :allowSorting='true'
                                    :allowFiltering='true'
                                    :filterSettings='filterOptions'
                                    :allowResizing='true'
                                    :allowSelection='true'
                                    :gridLines="'Both'"
                                    rowHeight=32
                                    :enableHover='true'
                                    :pageSettings='pageSettings'
                                    :editSettings="{ allowEditing: true,mode:'Batch'}"
                                    @cellSaved='edit_TableCCDC'
                                    >
                                    <e-columns>
                                        <e-column :allowEditing='false' field='STT' headerText='' width=20 textAlign='Center' :template='cRowSelected' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='btnXoaVT' headerTextAlign='Center' headerText='Xóa' textAlign='Center' :filterBarTemplate='templateOptions' :template="XoaVTTemplate"  width=70></e-column>
                                        <e-column :isPrimaryKey='true' :allowEditing='false' field='MA_VT' headerTextAlign='Center' headerText='Mã vật tư' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='TEN_VT' headerTextAlign='Center' headerText='Tên vật tư' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='DONVI_NHAN' headerTextAlign='Center' headerText='Đến đơn vị' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='NHANVIEN_NHAN' headerTextAlign='Center' headerText='Đến nhân viên' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='DVI_TINH' headerTextAlign='Center' headerText='ĐVT' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='true' field='SERIAL' headerTextAlign='Center' headerText='SERIAL' textAlign='Left'   :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='true' field='MA_TBI' headerTextAlign='Center' headerText='Tài sản cố định' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='DONGIA' headerTextAlign='Center' headerText='Đơn giá' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='true' field='SOTHANG_PB' editType='numericedit' headerTextAlign='Center' headerText='Phân bổ(tháng)' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='TIEN_PB' headerTextAlign='Center' headerText='Tiền phân bổ' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='true' field='THANG_BD' headerTextAlign='Center' headerText='Từ tháng' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='SOLUONG' headerTextAlign='Center' headerText='Số lượng' textAlign='Right' type='number' :format="format" :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='THANG_KT' headerTextAlign='Center' headerText='Đến tháng' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='LOAI_VT' headerTextAlign='Center' headerText='Loại vật tư' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='true' field='GHICHU' headerTextAlign='Center' headerText='Vị trí đặt' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='false' field='LOAI_TBI' headerTextAlign='Center' headerText='Loại Tbị' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column :allowEditing='true' :edit='TINHTRANGTBI_Params' editType='dropdownedit' field='TINHTRANGTBI_ID' headerTextAlign='Center' headerText='Tình trạng' textAlign='Left' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='btnGoSeri' headerTextAlign='Center' headerText='Xóa Sr' textAlign='Center' :filterBarTemplate='templateOptions' :template="GoSeriTemplate"  width=100></e-column>
                                    </e-columns>
                                </ejs-grid> -->
                                
                            </div>
                        </div>
                        <div class="col-sm-6 col-12" v-if="!Visible.splitContainer2.Panel2Collapsed">
                            <div class="title-bg-main">
                                <span class="title pull-left mart5">
                                    Danh sách serial
                                </span>
                            </div>
                            <div class="table-content">
                                <DataGrid
                                    v-bind:columns="grvDS_SERIAL_Columns"
                                    v-bind:dataSource="GridDS_SERIAL"
                                    ref="grvDS_SERIAL"
                                    :showColumnCheckbox='false'
                                    :showFilter="true"
                                    :allowPaging="true"
                                    :enablePagingServer='false'
                                    >
                                </DataGrid>
                                <!-- <ejs-grid ref="TableSerial"
                                    class="table-result table-gachle"
                                    locale="vi"
                                    :dataSource="GridDS_SERIAL"
                                    :allowPaging='true'
                                    :allowSorting='true'
                                    :allowFiltering='true'
                                    :filterSettings='filterOptions'
                                    :allowResizing='true'
                                    :allowSelection='true'
                                    :gridLines="'Both'"
                                    rowHeight=32
                                    :enableHover='true'
                                    >
                                    <e-columns>
                                        <e-column field='STT' headerText='' width=20 textAlign='Center' :template='cRowSelected' :filterBarTemplate='templateOptions'></e-column>
                                        <e-column field='btnGanSeri' headerTextAlign='Center' headerText='Chọn' textAlign='Center' :filterBarTemplate='templateOptions' :template="GanSeriTemplate"></e-column>
                                        <e-column field='SERIAL' headerTextAlign='Center' headerText='Serial' textAlign='Left'  :filterBarTemplate='templateOptions'></e-column>
                                    </e-columns>
                                </ejs-grid> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</ejs-dialog>
<!-- </b-modal> -->

