<b-modal class="modal" v-model="isShow" size="lg" @shown="onModalShown" hide-header hide-footer no-close-on-esc no-close-on-backdrop>
    <div class="modal-dialog" style="width: 100%; max-width: 1220px;">
    
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon one-notepad"></span>Thông tin chi tiết thuê bao hiện tại trên hệ thống ĐHSX</div>
                <div class="close -ap icon-close" data-dismiss="modal" @click="closeModalTTThueBao">
                </div>
            </div>
          <div style="width: 100%; height: 900px; overflow-y: scroll;">
            <div class="popup-body">
                <div class="box-form">
                    <div class="info-row">
                        <div class="key w90">Account</div>
                        <div class="value">
                            <input type="text" class="form-control highlight" v-model="matb">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Số ảo</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.ma_lt">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã đôi cáp</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.madoicap">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Tốc độ</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.tocdo">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Mức cước</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.muccuoc">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Thiết bị</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.thietbi">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã TN</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.matb_tn">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Trang bị</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.trangbi">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Thông tin TC</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.thongtin_tc">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Tên đối tác</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.doitac">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Cước Đối tác</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.cuoc_doitac">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Chủ quản</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.tenchuquan">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Chủ quản LĐ</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.chuquan_ld">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Loại TB MyTV</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.loaimytv">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Phân loại DV</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.phanloai_dv">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">IPv4 WAN</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.ipv4_wan">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">IPv6 LAN</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.ipv6_lan">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">Password</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.password">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-12">
                            <div class="info-row">
                                <div class="key w90">USERNAME</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model="db_con.username">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">MAC_ADDR</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="db_con.diachi_mac">
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Ghi chú</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model="db_con.ghichu">
                        </div>
                    </div>

                </div>
                <div class="box-form">
                    <div class="legend-title" >
                        <span v-if="isShowThueBaoDonVi" class="icon fa fa-angle-up" @click="showGrid(1)">                           
                        </span>
                        <span v-if="!isShowThueBaoDonVi" class="icon fa fa-angle-down" @click="showGrid(1)">                           
                        </span>

                        Danh sách thuê bao đơn vị
                    </div>
                    <div class="table-content" v-show="isShowThueBaoDonVi">
                        <DataGrid :dataSource="dsThueBaoDonVi"
                                    :columns="[
                                            {fieldName: 'DONVI_ID', headerText: 'ID Đơn vị', allowFiltering: true, allowSorting:false,width:50 },
                                            {fieldName: 'TEN_LOAIDV', headerText: 'Loại đơn vị', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'TEN_DV', headerText: 'Tên đơn vị', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'MA_DV', headerText: 'Mã ĐV', allowFiltering: true, allowSorting:false, width:100 },                                                   
                                            {fieldName: 'KIEU_DV', headerText: 'Kiểu ĐV', allowFiltering: true, allowSorting:false}
                                            ]"
                                    :showFilter="false"                                                                                                                                                                       
                                    >
                        </DataGrid> 
                    </div>                   
                </div>
                
                <div class="box-form">
                    <div class="legend-title">
                        <span v-if="isShowThueBaoNhanVien" class="icon fa fa-angle-up" @click="showGrid(2)">                           
                        </span>
                        <span v-if="!isShowThueBaoNhanVien" class="icon fa fa-angle-down" @click="showGrid(2)">                           
                        </span>
                        Danh sách Nhân viên khu vực theo thuê bao
                    </div>
                    <div class="table-content" v-show="isShowThueBaoNhanVien">
                        <DataGrid :dataSource="dsNhanVienKhuVuc"
                                    :columns="[
                                            {fieldName: 'MA_KV', headerText: 'Mã khu vực', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'TEN_KV', headerText: 'Tên khu vực', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'MA_NV', headerText: 'Mã NV', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'MA_ND', headerText: 'Mã ND', allowFiltering: true, allowSorting:false},                                                   
                                            {fieldName: 'TEN_NV', headerText: 'Tên NV', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'CHUCDANH', headerText: 'Chức vụ', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'TEN_DV', headerText: 'Đơn vị', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'SO_DT', headerText: 'Số ĐT', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'THIETBI', headerText: 'Thiết bị', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'NHIEMVU', headerText: 'Nhiệm vụ', allowFiltering: true, allowSorting:false}
                                            ]"
                                    :showFilter="false"                                                                                                                                                                       
                                    >
                        </DataGrid> 
                    </div>
                </div>
                <div class="box-form">
                    <div class="legend-title">
                        <span v-if="isShowGoiDADV" class="icon fa fa-angle-up" @click="showGrid(3)">                           
                        </span>
                        <span v-if="!isShowGoiDADV" class="icon fa fa-angle-down" @click="showGrid(3)">                           
                        </span>
                        Biến động gói đa DV
                    </div>
                    <div class="table-content" v-show="isShowGoiDADV">
                        <DataGrid :dataSource="dsThueBaoGoiDADV"
                                    :columns="[
                                            {fieldName: 'TEN_GOI', headerText: 'Tên gói', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'TIEN', headerText: 'Tiền', allowFiltering: true, allowSorting:false,width:50 },
                                            {fieldName: 'VAT', headerText: 'Vat', allowFiltering: true, allowSorting:false,width:50 },
                                            {fieldName: 'MOTA', headerText: 'Mô tả', allowFiltering: true, allowSorting:false},                                                   
                                            {fieldName: 'NGAY_DK', headerText: 'Ngày ĐK', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'NGAY_KT', headerText: 'Ngày KT', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'THANG_BD', headerText: 'Tháng BD', allowFiltering: true, allowSorting:false},
                                            {fieldName: 'THANG_KT', headerText: 'Tháng KT', allowFiltering: true, allowSorting:false}
                                            ]"
                                    :showFilter="false"                                                                                                                                                                       
                                    >
                        </DataGrid> 
                    </div>
                </div>
                <div class="box-form">
                    <div class="legend-title">
                        <span v-if="isShowThueBaoCungDoiCap" class="icon fa fa-angle-up" @click="showGrid(4)">                           
                        </span>
                        <span v-if="!isShowThueBaoCungDoiCap" class="icon fa fa-angle-down" @click="showGrid(4)">                           
                        </span>
                        Thuê bao cùng đôi cáp
                    </div>
                    <div class="table-content" v-show="isShowThueBaoCungDoiCap">
                        <DataGrid :dataSource="dsThueBaoCungCap"
                                :columns="[
                                        {fieldName: 'MA_TB', headerText: 'Mã TB', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'TEN_DVVT', headerText: 'Dịch vụ', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'LOAIHINH_TB', headerText: 'Loại hình', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'MATB_TN', headerText: 'Mã TN', allowFiltering: true, allowSorting:false},                                                   
                                        {fieldName: 'DSLAM_VISA', headerText: 'Dslam Visa', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'MADOICAP', headerText: 'Mã đôi cáp', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'SLOT', headerText: 'Slot', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'PORT', headerText: 'Port', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'RACK', headerText: 'Rack', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'SHELF', headerText: 'Shelf', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'DSLAM_TINH', headerText: 'Dslam Tỉnh', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'VCI', headerText: 'VCI/Cvlan', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'VPI', headerText: 'VPI/Svlan', allowFiltering: true, allowSorting:false},                                                                                                                                                                                                        
                                        {fieldName: 'PORT_MDF', headerText: 'Port MDF', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'PORT', headerText: 'Port OLT', allowFiltering: true, allowSorting:false},
                                        {fieldName: 'TEN_CARD', headerText: 'Tên card', allowFiltering: true, allowSorting:false}
                                        ]"
                                :showFilter="false"                                                                                                                                                                       
                                >
                        </DataGrid>                         
                    </div>                 
                </div>
                <div class="box-form">
                    <div class="legend-title">
                        <span v-if="isShowThueBaoThongSo" class="icon fa fa-angle-up" @click="showGrid(5)">                           
                        </span>
                        <span v-if="!isShowThueBaoThongSo" class="icon fa fa-angle-down" @click="showGrid(5)">                           
                        </span>                        Lịch sử thay đổi thông số kỹ thuật
                    </div>
                    <div class="table-content" v-show="isShowThueBaoThongSo">
                        <DataGrid :dataSource="dsLichSuThayDoi"
                        :columns="[
                                {fieldName: 'TEN_NV', headerText: 'Nhân viên', allowFiltering: true, allowSorting:false},
                                {fieldName: 'TEN_DV', headerText: 'Đơn vị', allowFiltering: true, allowSorting:false},
                                {fieldName: 'NGAY_DK', headerText: 'Ngày Đăng ký', allowFiltering: true, allowSorting:false},
                                {fieldName: 'NGAY_HT', headerText: 'Ngày Hoàn thiện', allowFiltering: true, allowSorting:false},                                                   
                                {fieldName: 'GHICHU', headerText: 'Ghi chú', allowFiltering: true, allowSorting:false},
                                {fieldName: 'SLOT_CU', headerText: 'Slot cũ', allowFiltering: true, allowSorting:false},
                                {fieldName: 'SLOT_MOI', headerText: 'Slot mới', allowFiltering: true, allowSorting:false},
                                {fieldName: 'PORT_CU', headerText: 'Port cũ', allowFiltering: true, allowSorting:false},
                                {fieldName: 'PORT_MOI', headerText: 'Port mới', allowFiltering: true, allowSorting:false},
                                {fieldName: 'VCI_CU', headerText: 'Vci cũ', allowFiltering: true, allowSorting:false},
                                {fieldName: 'VCI_MOI', headerText: 'Vci mới', allowFiltering: true, allowSorting:false},
                                {fieldName: 'VPI_CU', headerText: 'Vpi cũ', allowFiltering: true, allowSorting:false},
                                {fieldName: 'VPI_MOI', headerText: 'Vpi mới', allowFiltering: true, allowSorting:false},                                                                                                                                                                                                        
                                {fieldName: 'TENBRAS', headerText: 'Bras cũ', allowFiltering: true, allowSorting:false}
                                ]"
                        :showFilter="false"                                                                                                                                                                       
                        >
                </DataGrid>                         

                    </div>                    
                </div>
                
            </div>
        </div>
        </div>
    </div>
  
</b-modal>
  
  