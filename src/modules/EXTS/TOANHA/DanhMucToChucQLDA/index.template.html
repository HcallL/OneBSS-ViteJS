<div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="javascript: void(0)" @click="onLayTT" title="Hiển thị danh sách">
                    <span class="icon one-file-attach"></span>Lấy TT
                </a>
            </li>
            <li>
                <a href="javascript: void(0)" @click="onNhapMoi" title="Nhập mới" :class="{'disabled': !btn_Enabled.nhapMoi}">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>            
            <li>
                <a href="javascript: void(0)" @click="onGhiLai" title="Ghi lại" :class="{'disabled': !btn_Enabled.ghiLai}">
                    <span class="icon one-save"></span>Ghi lại
                </a>
            </li>            
            <li>
                <a href="javascript: void(0)" @click="onHuy" title="Hủy" :class="{'disabled': !btn_Enabled.huy}">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Hủy
                </a>
            </li>            
            <li>
                <a href="javascript: void(0)" @click="onXoa" title="Xóa" :class="{'disabled': !btn_Enabled.xoa}">
                    <span class="icon one-trash"></span>Xóa
                </a>
            </li>
            <li>
                <a href="javascript: void(0)" @click="onXuatExcel" title="Xuất Excel">
                    <span class="icon one-xlsx"></span>Xuất Excel
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin tổ chức quản lý dự án</div>
            <!-- <div class="box-form"> -->
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key w90">Phân loại</div>
                            <div class="value">
                                <div class="select-custom">
                                    <app-combobox
                                        :columns="[
                                            { fieldName: 'ten_loai_cdt', headerText: '' },
                                            { fieldName: 'ghichu', headerText: '' }
                                        ]"
                                        @selectedChanged="phanLoaiSelected" 
                                        :dataSource="cbo_PhanLoai.items"
                                        :allowPaging="false" 
                                        :enablePagingServer="false"
                                        :gridPanelDataHeight="'200px'"
                                        textField="ten_loai_cdt"
                                        valueField="loai_cdt_id"
                                        ref="phanLoaiCbo"
                                    >
                                    </app-combobox>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Mã TCQLDA</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model="txt_MaTCQLDA" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Tên TCQLDA <span class="red">(*)</span></div>
                                    <div class="value">
                                        <input type="text" class="form-control font-weight-bold text" v-model="txt_TenTCQLDA" ref="tenChuDtu" :class="{'is-invalid': $v.txt_TenTCQLDA.$error }">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Số điện thoại</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model="txt_SoDT" ref="soDT" :class="{'is-invalid': $v.txt_SoDT.$error }">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Người đại diện</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model="txt_NguoiLH" ref="nguoiLH" :class="{'is-invalid': $v.txt_NguoiLH.$error }">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Chức vụ</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model="txt_ChucVu">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8 col-12">
                                <div class="row">
                                    <div class="col-sm-6 col-12">
                                        <div class="info-row">
                                            <div class="key w100">Email</div>
                                            <div class="value">
                                                <input type="text" class="form-control" v-model="txt_Email" ref="email" :class="{'is-invalid': $v.txt_Email.$error }">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-12">
                                        <!-- <div v-if="phanVungID == 28" class="info-row">
                                            <div class="key w100">Mã số thuế <span class="red">(*)</span></div>
                                            <div class="value">
                                                <input type="text" class="form-control" v-model="txt_MST" ref="mst" :class="{'is-invalid': $v.txt_MST.$error }">
                                            </div>
                                        </div> -->
                                        <div class="info-row">
                                            <div class="key w90">Mã số thuế</div>
                                            <div class="value">
                                                <input type="text" class="form-control" v-model="txt_MST">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-12">
                                <div class="info-row">
                                    <div class="key w90">Số tài khoản</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model="txt_SoTaiKhoan" ref="soTK" :class="{'is-invalid': $v.txt_SoTaiKhoan.$error }">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngân hàng</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <app-combobox
                                                :columns="[
                                                    { fieldName: 'ma_nh', headerText: '', width: 50 },
                                                    { fieldName: 'ten_nh', headerText: '' }
                                                ]"
                                                @selectedChanged="nganHangSelected" 
                                                :dataSource="cbo_NganHang.items"
                                                :allowPaging="false" 
                                                :enablePagingServer="false"
                                                :gridPanelDataHeight="'200px'"
                                                textField="ten_nh"
                                                valueField="nganhang_id"
                                                ref="nganHangCbo"
                                            >
                                            </app-combobox>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="info-row">
                            <div class="key">Địa chỉ <span class="red">(*)</span></div>
                            <div class="value">
                                <div class="input-more-button -right">
                                    <input type="text" class="form-control" v-model="txt_DiaChi" ref="diaChi" :class="{'is-invalid': $v.txt_DiaChi.$error }" :readOnly="txt_DiaChi_ReadOnly">
                                    <button class="btn" @click="onDiaChi">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <ModalChonDiaChi modalId="popupDiaChiCDT" :data="dataSend" :isStrictMode="true" @xacnhan="onDiaChiCDT" ref="diaChiModal"/>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key">Tình trạng</div>
                            <div class="value">
                                <div class="select-custom">
                                    <app-combobox
                                        :columns="[
                                            { fieldName: 'tinhtrang', headerText: '' }
                                        ]"
                                        @selectedChanged="tinhTrangSelected" 
                                        :dataSource="cbo_TinhTrang.items"
                                        :allowPaging="false" 
                                        :enablePagingServer="false"
                                        :gridPanelDataHeight="'200px'"
                                        textField="tinhtrang"
                                        valueField="tinhtrang_id"
                                        ref="tinhTrangCbo"
                                    >
                                    </app-combobox>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key">Ghi chú</div>
                            <div class="value">
                                <textarea name="" class="form-control" style="height: 140px;" v-model="txt_GhiChu" ref="ghiChu" :class="{'is-invalid': $v.txt_GhiChu.$error }"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            <!-- </div> -->
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách tổ chức quản lý dự án</div>
            <div class="table-content">
                <DataGrid v-bind:columns="[
                        {fieldName: 'ten_loai_cdt', headerText: 'Phân loại', allowFiltering: true, allowSorting: false, width: 100},
                        {fieldName: 'ma_chudtu', headerText: 'Mã TCQLDA', allowFiltering: true, allowSorting: false, width: 90, cssClass: 'text-blue'},
                        {fieldName: 'ten_chudtu', headerText: 'Tên TCQLDA', allowFiltering: true, allowSorting: false, width: 150, cssClass: 'text-bold'},
                        {fieldName: 'chucvu', headerText: 'Chức vụ', allowFiltering: true, allowSorting: false, width: 100},
                        {fieldName: 'email', headerText: 'Email', allowFiltering: true, allowSorting: false, width: 100},
                        {fieldName: 'mst', headerText: 'Mã số thuế', allowFiltering: true, allowSorting: false, width: 100},
                        {fieldName: 'nguoi_lh', headerText: 'Người đại diện', allowFiltering: true, allowSorting: false, width: 110},
                        {fieldName: 'so_dt', headerText: 'Số điện thoại', allowFiltering: true, allowSorting: false, width: 90, cssClass: 'text-red'},
                        {fieldName: 'taikhoan', headerText: 'Số tài khoản', allowFiltering: true, allowSorting: false, width: 90, cssClass: 'text-blue'},
                        {fieldName: 'ten_nh', headerText: 'Ngân hàng', allowFiltering: true, allowSorting: false, width: 150},
                        {fieldName: 'diachi', headerText: 'Địa chỉ', allowFiltering: true, allowSorting: false, width: 150},
                        {fieldName: 'tinhtrangda', headerText: 'Tình trạng dự án', allowFiltering: true, allowSorting: false, width: 100},
                        {fieldName: 'ghichu', headerText: 'Ghi chú', allowFiltering: true, allowSorting: false, width: 130},
                        {fieldName: 'nguoi_cn', headerText: 'Người CN', allowFiltering: true, allowSorting: false, width: 80, cssClass: 'text-left'},
                        {fieldName: 'ngay_cn1', headerText: 'Ngày CN', allowFiltering: true, allowSorting: false, width: 80}
                    ]"
                    v-bind:dataSource="grid_TCQLDA.items"
                    :showFilter="true"
                    :allowPaging="true"
                    ref="toChucQLDAGrid"
                    :enablePagingServer="false"
                    :allowExcelExport="true"
                    @rowSelected="onToChucQLDASelected"
                >
                </DataGrid>
            </div>
        </div>
    </div>
</div>