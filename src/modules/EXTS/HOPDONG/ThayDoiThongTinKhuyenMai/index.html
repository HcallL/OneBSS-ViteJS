<div>
    <div class="list-actions-top">
        <ul class="list">

            <li :class="{'disable-btn': !tsbtnNhapMoi.Enable}" @click="tsbtnNhapMoi_Click" v-show="tsbtnNhapMoi.Visible" title="Nhập mới">
                <a href="javascript:void(0)">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>
            <li :class="{'disable-btn': !tsbtnGhiLai.Enable}" v-show="tsbtnGhiLai.Visible" title="Ghi lại">
                <a @click="ghiLai">
                    <span class="icon one-save"></span>Ghi lại
                </a>
            </li>

            <li :class="{'disable-btn': !tsbtnHuyBo.Enable}" @click="tsbtnHuyBo_Click" v-show="tsbtnHuyBo.Visible" title="Hủy">
                <a href="javascript:void(0)">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Huỷ
                </a>
            </li>
            <li :class="{'disable-btn': !tsbtnXoa.Enable}" v-show="tsbtnXoa.Visible" title="Xóa HĐ">
                <a href="javascript:void(0)" @click="onClickBtnXoaHopDong">
                    <span class="icon one-trash"></span>Xoá HĐ
                </a>
            </li>
            <li :class="{'disable-btn': !tsbtnInPhieuYC.Enable}" title="Phiếu YC">
                <a href="javascript:void(0)" @click="tsbtnInhopdong_Click">
                    <span class="icon nc-icon-glyph files_single-content-02"></span>Phiếu YC
                </a>
            </li>
            <li :class="{'disable-btn': !tsbtnThanhToan.Enable}" v-show="tsbtnThanhToan.Visible" title="Thanh toán">
                <a href="javascript:void(0)" @click="tsbtnThanhToan_Click">
                    <span class="icon one-file-check"></span>Thanh Toán
                </a>
            </li>
          <li :class="{'disable-btn': !tsbtnCapNhatDB.Enable}" v-show="tsbtnCapNhatDB.Visible" title="Hoàn thiện">
                <a @click="onClickBtnHoanThien">
                    <span class="icon one-file-check"></span>Hoàn thiện
                </a>
            </li>
            <li v-show="tsbtnThongTinLH.Visible" title="Liên hệ">
                <a href="javascript:void(0)" @click="tsbtnThongTinLH_Click" >
                    <span class="icon nc-icon-glyph business_contacts"></span>Liên hệ
                </a>
            </li>
            <li v-show="tsbtnEmail.Visible" title="Email">
                <a href="javascript:void(0)" @click="tsbtnEmail_Click">
                    <span class="icon one-email"></span>Email
                </a>
            </li>
            <li v-show="tsbtnUser.Visible" title="User">
                <a href="javascript:void(0)" @click="tsbtnUser_Click">
                    <span class="icon nc-icon-glyph users_single-01"></span>User
                </a>
            </li>
            <li v-show="tsbtnUpImg.Visible" title="Upload ảnh">
                <a href="javascript:void(0)" @click="uploadAnh">
                    <span class="icon one-upload"></span>Upload ảnh
                </a>
            </li>
            <li v-show="tsbtnToaNha.Visible" title="Tòa nhà">
                <a href="javascript:void(0)" @click="tsbtnToaNha_Click">
                    <span class="icon one-building"></span>Tòa nhà
                </a>
            </li>
            <li title="In phục lục">
                <a href="javascript:void(0)" @click="toolStripButton1_Click">
                    <span class="dropdown-icon one-print"></span> In phụ lục
                </a>
            </li>
            <li :class="{'disable-btn': !tsbtnGiaoPhieu.Enable}" title="Giao phiếu">
                <a href="javascript:void(0)" @click="tsbtnGiaoPhieu_Click">
                    <span class="dropdown-icon one-file-arrow-right1"></span> Giao phiếu
                </a>
            </li>

            <li title="YC thay đổi" v-if="activeQuyTrinhXacMinhCapNhatTTLH">
                <a href="javascript:void(0)" @click="tsbtnYcThayDoi_Click" :class="!hasHDKH ? 'disabled' : ''">
                    <span class="dropdown-icon one-file-arrow-right1"></span> YC thay đổi
                </a>
            </li>

        </ul>
        <!-- <div class="more dropdown">
            <a href="javascript:void(0);" data-toggle="dropdown">
                <span class="icon -ap  icon-dots-three-vertical"></span>
            </a>
            <div class="dropdown-menu">
                <a href="#">
                    <span class="dropdown-icon one-print"></span> In phục lục
                </a>
              <li :class="{'disable-btn': !tsbtnGiaoPhieu.Enable}">
                <a href="javascript:void(0)">
                  <span class="dropdown-icon one-file-arrow-right1"></span> Giao phiếu
                </a>
              </li>
            </div>
        </div> -->
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin phiếu yêu cầu</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã giao dịch</div>
                                <div class="value">
                                    <div class="input-more-button">
                                        <button class="btn" @click="btnLayMaGD_Click" title="Tìm kiếm mã giao dịch">
                                            <span class="-ap icon-more_horiz"></span>
                                        </button>
                                        <input type="text" ref="txt_magiaodich" class="form-control highlight font-weight-bold"
                                               v-model.trim="txt_magiaodich.Value"
                                               @keyup.enter="txtMaGD_KeyPress"
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày yêu cầu</div>
                                <div class="value">
                                    <div class="input-icon-right">
<!--                                        <input type="date" class="form-control" v-model="dtp_ngayYc.Value" :disabled="!dtp_ngayYc.Enable">-->
<!--                                        <span class="icon one-calendar"></span>-->
                                      <ejs-datepicker class="form-control"
                                                      :placeholder="waterMark"
                                                      :value="dateVal"
                                                      :format="dateFormat"
                                                      v-model="dtp_ngayYc.Value"
                                                      :disabled="!dtp_ngayYc.Enable"
                                      ></ejs-datepicker>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã hợp đồng</div>
                                <div class="value">
                                    <input type="text" class="form-control font-weight-bold" v-model.trim="txt_mahopdong.Value" readonly :disabled="!txt_mahopdong.Enable">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày lập HĐ</div>
                                <div class="value">
                                    <div class="input-icon-right">
<!--                                        <input type="date" class="form-control" v-model="dtp_ngaylapHd.Value" :disabled="dtp_ngaylapHd.Enable">-->
<!--                                        <span class="icon one-calendar"></span>-->
                                      <ejs-datepicker class="form-control"
                                                      :placeholder="waterMark"
                                                      :value="dateVal"
                                                      :format="dateFormat"
                                                      v-model="dtp_ngaylapHd.Value"
                                                      :disabled="!dtp_ngaylapHd.Enable"
                                      ></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-sm-4 col-12">
                    <div class="info-row">
                        <div class="key w100">Dịch vụ</div>
                        <div class="value">
                            <div class="select-custom">
                                <!-- <select name="" id="" class="form-control">
                                    <option value=""></option>
                                </select> -->
                                <SelectExt
                                    v-model.trim="cbo_dichvu_id.Value"
                                    :settings="{dropdownParent: $refs['cboDichVuVT']}"
                                    :dataSource="dsDichVuVT"
                                    dataTextField="ten_dvvt"
                                    dataValueField="dichvuvt_id"/>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">Kiểu yêu cầu</div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt
                                    v-model.trim="cbo_kieuld_id.Value"
                                    :settings="{dropdownParent: $refs['cboKieuYCLD']}"
                                    :dataSource="dsKieuYCLD"
                                    dataTextField="ten_kieuld"
                                    dataValueField="kieuld_id"/>
                            </div>
                        </div>
                    </div>
                </div>
              <div class="col-sm-2 col-12" v-show="dtp_ngayHT.Visible" >
                <div class="row">
                <div class="col-sm-2 col-12" style="padding-right: 10px" >
                  <div class="check-action" >
                    <input type="checkbox" class="check" v-model="dtp_ngayHT.Enable" >
                    <span class="name"></span>
                  </div>
                </div>
                <div class="col-sm-3 col-12" >Ngày HT</div>

                <div class="col-sm-7 col-12">
                  <input type="date" class="form-control" v-model="dtp_ngayHT.Value"  :disabled="!dtp_ngayHT.Enable">
                </div>
                </div>
              </div>
            </div>
        </div>
        <div class="grid-stack-box">
            <div class="box-col box-form col-sm-6 col-12" id="boxLeft">
              <div class="legend-title mart10">Thông tin thuê bao</div>

              <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w90">Số máy/Acc</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" @click="bntLayMaKh_Click" title="Tìm kiếm số máy/account">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" ref="txt_maTB" class="form-control highlight font-weight-bold" v-model.trim="txt_maTB.Value" @keyup.enter="timKiem" :disabled="!txt_maTB.Enable">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w90">Ngày sử dụng</div>
                            <div class="value">
                                <div class="input-icon-right">
                                    <input type="text" class="form-control" v-model.trim="txt_ngaysudung.Value" v-mask="'99/99/9999'" :disabled="!txt_ngaysudung.Enable">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w90">Tên thuê bao</div>
                            <div class="value">
                                <input ref="txt_tenthuebao" type="text" class="form-control font-weight-bold" v-model.trim="txt_tenthuebao.Value" :disabled="!txt_tenthuebao.Enable">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w90">Ngày sinh</div>
                            <div class="value">
                                <div class="input-icon-right">
                                    <input ref="txt_ngaysnTB" type="text" class="form-control" v-model.trim="txt_ngaysnTB.Value" v-mask="'99/99/9999'" :disabled="!txt_ngaysnTB.Enable">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w90">Địa chỉ TB</div>
                    <div class="value">
                        <div class="input-more-button">
                            <button class="btn" @click="btnDiaChiTB_Click" :disabled="!isEnableBtnDiaChiTB" title="Tìm kiếm địa chỉ thuê bao">
                                <span class="-ap icon-more_horiz"></span>
                            </button>
                            <input type="text" class="form-control font-weight-bold" ref="txt_diachiTB" v-model.trim="txt_diachiTB.Value" readonly :disabled="!txt_diachiTB.Enable">
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w90">Địa chỉ LĐ <span class="red">*</span></div>
                    <div class="value">
                      <div class="input-more-button">
                        <button class="btn" @click="btnDiaChiLD_Click" :disabled="!isEnableBtnDiaChiLD" v-if="isVisibleBtnDiaChiLD" title="Tìm kiếm địa chỉ lắp đặt">
                          <span class="-ap icon-more_horiz"></span>
                        </button>
                        <input type="text" class="form-control font-weight-bold" ref="txt_diachiLD" v-model="txt_diachiLD.Value" readonly :disabled="!txt_diachiLD.Enable">
                      </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w90">Đơn vị TC</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_donviTC_id.Value"
                                    :settings="{dropdownParent: $refs['cboDonViTC']}"
                                    :disabled="!cbo_donviTC_id.Enable"
                                    :dataSource="dsDonViTC"
                                    dataTextField="ten_dv"
                                    dataValueField="donvi_id"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w90">Chủ quản</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_chuquan_id.Value"
                                    :settings="{dropdownParent: $refs['cboChuQuan']}"
                                    :disabled="!cbo_chuquan_id.Enable"
                                    :dataSource="dsChuQuan"
                                    dataTextField="ten_tat"
                                    dataValueField="chuquan_id"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w90">Đối tượng</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_doituong_id.Value"
                                    :settings="{dropdownParent: $refs['cboDoiTuongTB']}"
                                    :disabled="!cbo_doituong_id.Enable"
                                    :dataSource="dsDoiTuongTB"
                                    dataTextField="ten_dt"
                                    dataValueField="doituong_id" @change="cbo_doituong_id_change" />
                                </div>
                            </div>
                        </div>
                    </div>
                  <div class="col-sm-7 col-12" v-if="cboDTVinaPhone.Visible">
                        <div class="info-row">
                            <div class="key w90">Đối tượng Vinaphone</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cboDTVinaPhone.Value"
                                    :settings="{dropdownParent: $refs['cboDTVinaPhone']}"
                                    :disabled="!cboDTVinaPhone.Enable"
                                    :dataSource="dsDTVinaPhone"
                                    dataTextField="ten_dt_neo"
                                    dataValueField="doituong_id_neo"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w90">Chủ quản LĐ</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_chuquanLD_id.Value"
                                    :settings="{dropdownParent: $refs['cboChuQuanLD']}"
                                    :disabled="!cbo_chuquanLD_id.Enable"
                                    :dataSource="dsChuQuanLD"
                                    dataTextField="ten_tat"
                                    dataValueField="chuquan_id"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">
                        <div class="info-row">
                            <div class="key w90">Trạng thái TB</div>
                            <div class="value">
                                <input type="text" class="form-control font-italic text-danger" v-model.trim="txt_trangthaiTB.Value" :disabled="txt_trangthaiTB.Enable">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w90">Mức cước TB</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_mucuoc_id.Value"
                                    :settings="{dropdownParent: $refs['cboMucCuocTB']}"
                                    :disabled="!cbo_mucuoc_id.Enable"
                                    :dataSource="dsMucCuocTB"
                                    dataTextField="tenmuccuoc"
                                    dataValueField="mucuoctb_id"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7 col-12">

                    </div>
                    <div class="col-sm-5 col-12">
                        <div class="info-row">
                            <div class="key w90">
                                <div class="check-action">
                                    <input v-model="chkTKChinh.Value" type="checkbox" class="check" :disabled="!chkTKChinh.Enable">
                                    <span class="name">TK chính</span>
                                </div>
                            </div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_tkchinh_id.Value"
                                    :settings="{dropdownParent: $refs['cboTkChinh']}"
                                    :disabled="!cbo_tkchinh_id.Enable"
                                    :dataSource="dsTkChinh"
                                    dataTextField="ma_tb"
                                    dataValueField="thuebao_id"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="legend-title mart10">Dịch vụ khác</div>
                <div class="info-row">
                    <div class="key w90">
                    </div>
                    <div class="value">
                        <div class="input-more-button">
                            <button class="btn" @click="btnEditDVK" :disabled="!isEnableBtnEditDVK" title="Đăng ký dịch vụ khác">
                                <span class="-ap icon-more_horiz"></span>
                            </button>

                          <div class="tab-content box-form">
                            <component v-for="(item, index) in dvkhaclist" :key="index"   v-bind:is="item" />
                          </div>
                        </div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="key w90">
                        Ghi chú
                    </div>
                    <div class="value">
                        <textarea name=""  maxlength="250" v-model.trim="txt_ghiChuTB.Value" class="form-control" style="height: 50px;resize: none;"></textarea>
                    </div>
                </div>
            </div>
            <div class="box-col col-sm-6 col-12" id="boxRight" style="padding-right: 0px;">
                <div class="nav tabs tab-over">
                    <a href="#tab1" data-toggle="tab" id="tabThanhToan" class="minw0 padl7 padr7 active">
                        Thanh toán (F2)
                    </a>
                    <a href="#tab2" data-toggle="tab" id="tabKhachHang" class="minw0 padl7 padr7">
                        Khách hàng
                    </a>
                    <a href="#tab3" data-toggle="tab" id="tabKhuyenMai"  class="minw0 padl7 padr7">
                        Khuyến mãi
                    </a>
                    <a href="#tab4" data-toggle="tab" id="tabThueBao" class="minw0 padl7 padr7">
                        Thuê bao
                    </a>
                    <a href="#tab5" data-toggle="tab" id="tabDichVuCNTT" class="minw0 padl7 padr7">
                        Dịch vụ CNTT/GTGT
                    </a>
                    <a href="#tab6" data-toggle="tab" id="tabKhoanMucTT" class="minw0 padl7 padr7">
                        Khoản mục TT
                    </a>
                </div>
                <div class="tab-content" style="min-height: 478px;">
                    <div id="tab1" class="tab-pane active">
                        <div class="info-row">
                            <div class="key w100">Mã thanh toán</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model.trim="txt_maTT.Value" :disabled="!txt_maTT.Enable">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Mã đại diện</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_maDD.Value"
                                    :settings="{dropdownParent: $refs['cbo_maDD']}"
                                    :dataSource="dsMaDaiDien"
                                    dataTextField="ma_tb"
                                    dataValueField="ma_tb"
                                    :disabled="!cbo_maDD.Enable"/>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Tên thanh toán</div>
                            <div class="value">
                                <input type="text" class="form-control" v-model.trim="txt_tenTT.Value" :disabled="!txt_tenTT.Enable">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ TT <span class="red">*</span></div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" @click="btnDiaChiTT" :disabled="!isEnableBtnDiaChiTT" title="Tìm kiếm địa chỉ thanh toán">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" class="form-control" v-model.trim="txt_diachiTT.Value" :disabled="!txt_diachiTT.Enable">
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ CT <span class="red">*</span></div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" @click="btnDiaChiCT" :disabled="!isEnableBtnDiaChiCT" title="Tìm kiếm địa chỉ chứng từ">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" class="form-control" v-model.trim="txt_diachiCT.Value" :disabled="!txt_diachiCT.Enable">
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Địa chỉ BC</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" @click="btnDiaChiBC" :disabled="!isEnableBtnDiaChiBC" title="Tìm kiếm địa chỉ chứng từ">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text" class="form-control" v-model.trim="txt_diachiBC.Value" :disabled="!txt_diachiBC.Enable">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Đơn vị QL</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <SelectExt
                                            v-model.trim="cbo_donviQL_id.Value"
                                            :settings="{dropdownParent: $refs['cbo_donviQL_id']}"
                                            :dataSource="dsDonViQL"
                                            dataTextField="ten_dv"
                                            dataValueField="donvi_id"
                                            :disabled="!cbo_donviQL_id.Enable"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Mã in ghép</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnTaoMIG_Click" :disabled="!isEnableBtnTaoMIG" title="Tìm kiếm mã in ghép">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input type="text" class="form-control" v-model.trim="txt_maIG.Value" :disabled="!txt_maIG.Enable">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Hình thức TT <span class="red">*</span></div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <!-- <SelectExt
                                            v-model.trim="cbo_HTTT.Value"
                                            :settings="{dropdownParent: $refs['cbo_HTTT']}"
                                            :dataSource="dsHinhThuc"
                                            dataTextField="hinhthuc_tt"
                                            dataValueField="httt_id"
                                            :disabled="!cbo_HTTT.Enable"/> -->
                                            <SelectExt
                                            @change="changeHTTT"
                                            :value="cbo_HTTT.Value"
                                            :settings="{dropdownParent: $refs['cbo_HTTT']}"
                                            :dataSource="dsHinhThuc"
                                            dataTextField="hinhthuc_tt"
                                            dataValueField="httt_id"
                                            :disabled="!cbo_HTTT.Enable"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Mã NVTC <span class="red">*</span></div>
                                    <div class="value w100">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnMaNVTC_Click" :disabled="!isEnableBtnMaNVTC" title="Tìm kiếm mã nhân viên thu cước">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input type="text" class="form-control highlight" v-model="txt_maNVTC.Value" readonly>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <input type="text" class="form-control highlight" v-model.trim="txt_maTuyen.Value" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Tài khoản</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model.trim="txt_stk_TT.Value" :disabled="!txt_stk_TT.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Mã NVQL</div>

                                    <div class="value">
                                        <input type="text" class="form-control highlight" v-model.trim="txt_nhanVienQL.Value" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã số thuế</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model.trim="txt_mst_TT.Value" :disabled="!txt_mst_TT.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Chủ TK</div>

                                    <div class="value">
                                        <input type="text" class="form-control" v-model.trim="txt_chu_TK.Value" :disabled="!txt_chu_TK.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngân hàng</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnNSNN_Click" :disabled="!isEnableBtnNSNN" title="Tìm kiếm ngân hàng">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <div class="select-custom">
                                                <SelectExt
                                                v-model.trim="cbo_nganhang.Value"
                                                :settings="{dropdownParent: $refs['cbo_HTTT']}"
                                                :dataSource="dsNganHang"
                                                dataTextField="ten_nh"
                                                dataValueField="nganhang_id"
                                                :disabled="!cbo_nganhang.Enable"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Số ĐT</div>

                                    <div class="value">
                                        <input type="text" class="form-control" v-model.trim="txt_soDT_TT.Value" :disabled="!txt_soDT_TT.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ghi chú</div>
                                    <div class="value">
                                        <input type="text" class="form-control" v-model.trim="txt_ghiChuTT.Value" maxlength="500" :disabled="!txt_ghiChuTT.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Email</div>

                                    <div class="value">
                                        <input type="text" class="form-control" v-model.trim="txt_emailTT.Value" :disabled="!txt_emailTT.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="tab2" class="tab-pane">

                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã khách hàng</div>
                                    <div class="value">
                                        <input v-model="txt_maKH.Value" ref="txt_maKH" type="text" class="form-control highlight" readonly :disabled="!txt_maKH.Enable" style="font-weight: bold;">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Loại KH</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                          <button class="btn" @click="btnLoaiKH_Click" title="Tìm kiếm loại khách hàng">
                                            <span class="-ap icon-more_horiz"></span>
                                          </button>
                                          <div class="select-custom">
                                            <ComboboxGrid class="popup-expand-custom" ref="cboGridLoaiKH" v-bind:columns="[
                                                {fieldName: 'kieu_kh', headerText: 'Kiểu KH', allowFiltering: true, isGroupedColumn:true},
                                                {fieldName: 'ten_nhom', headerText: 'Nhóm LKH', allowFiltering: true, isGroupedColumn:true},
                                                {fieldName: 'ma_loaikh', width:'70px', headerText: 'Mã loại KH', allowFiltering: true},
                                                {fieldName: 'ten_loaikh', headerText: 'Tên loại KH', allowFiltering: true}
                                                ]"
                                                          v-bind:dataSource="dsLoaiKH"
                                                          v-model.trim="cbo_loaiKH.Value"
                                                          :enabled="cbo_loaiKH.Enable"
                                                          textField="ten_loaikh"
                                                          valueField="loaikh_id">
                                            </ComboboxGrid>
<!--                                            <SelectExt v-model.trim="cbo_loaiKH.Value"-->
<!--                                                       :disabled="!cbo_loaiKH.Enable"-->
<!--                                                       :dataSource="dsLoaiKH"-->
<!--                                                       dataTextField="ten_loaikh"-->
<!--                                                       dataValueField="loaikh_id"/>-->
                                          </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Tên KH</div>
                                    <div class="value">
                                        <input v-model="txt_tenKH.Value" ref="txt_tenKH" type="text" class="form-control" :disabled="!txt_tenKH.Enable || this.activeQuyTrinhXacMinhCapNhatTTLH" style="font-weight: bold;">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">PL KH</div>

                                    <div class="value">
                                        <input v-model="txt_phanloaiKH.Value" type="text" class="form-control" readonly :disabled="!txt_phanloaiKH.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Địa chỉ KH</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnDiaChiKH_Click" :disabled="!isEnableBtnDiaChiKH" title="Tìm kiếm địa chỉ khách hàng">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input v-model="txt_diachiKH.Value" ref="txt_diachiKH" type="text" class="form-control " readonly :disabled="!txt_diachiKH.Enable" style="font-weight: bold;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Ngày sinh <span class="red">*</span></div>

                                    <div class="value">
                                        <input v-model="txt_ngaysn.Value" ref="txt_ngaysn" type="text" class="form-control" v-mask="'99/99/9999'" :disabled="!txt_ngaysn.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngành nghề</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnNganhNghe_Click" :disabled="!isEnableBtnNganhNghe" title="Tìm kiếm ngành nghề">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <div class="select-custom">
                                              <SelectExt v-model.trim="cbo_nganhngheloc.Value"
                                                         :disabled="!cbo_nganhngheloc.Enable"
                                                         :dataSource="dsNganhNghe"
                                                         @change="cboNganhNgheLoc_EditValueChanged"
                                                         dataTextField="tennganhnghe"
                                                         dataValueField="nganhnghe_id"/>
<!--                                                <select name="" id="" class="form-control">-->
<!--                                                    <option value=""></option>-->
<!--                                                </select>-->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Điện thoại <span class="red">*</span></div>

                                    <div class="value">
                                        <input v-model.trim="txt_telKH.Value" ref="txt_telKH" type="text" class="form-control" :disabled="!txt_telKH.Enable || this.activeQuyTrinhXacMinhCapNhatTTLH">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Fax</div>
                                    <div class="value">
                                        <input ref="txt_faxKH" v-model="txt_faxKH.Value" type="text" class="form-control" :disabled="!txt_faxKH.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Email</div>

                                    <div class="value">
                                        <input ref="txt_emailKH" v-model="txt_emailKH.Value" type="text" class="form-control" :disabled="!txt_emailKH.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Loại giấy tờ <span class="red">*</span></div>
                                    <div class="value">
<!--                                        <div class="input-more-button">-->
<!--                                            <button class="btn">-->
<!--                                                <span class="-ap icon-more_horiz"></span>-->
<!--                                            </button>-->
                                            <div class="select-custom">
                                              <SelectExt v-model.trim="cbo_giaytoKH.Value"
                                                         :disabled="!cbo_giaytoKH.Enable"
                                                         :dataSource="dsGiayToKH"
                                                         dataTextField="loai_gt"
                                                         dataValueField="loaigt_id"
                                                         style="font-weight: bold;"
                                              />
<!--                                                <select name="" id="" class="form-control">-->
<!--                                                    <option value=""></option>-->
<!--                                                </select>-->
                                            </div>
<!--                                        </div>-->
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Số giấy tờ <span class="red">*</span></div>

                                    <div class="value">
                                        <input v-model="txt_soGT.Value" ref="txt_soGT" type="text" class="form-control" :disabled="!txt_soGT.Enable || this.activeQuyTrinhXacMinhCapNhatTTLH">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngày cấp <span class="red">*</span></div>
                                    <div class="value">
                                        <input v-model="txt_ngaycap.Value" ref="txt_ngaycap" type="text" class="form-control"  v-mask="'99/99/9999'" :readonly="txt_ngaycap.Readonly" :disabled="!txt_ngaycap.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Nơi cấp</div>

                                    <div class="value">
                                        <input ref="txt_noicap" v-model="txt_noicap.Value" type="text" class="form-control" :disabled="!txt_noicap.Enable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Ngày hết hạn</div>
                                    <div class="value">
                                        <input ref="txt_ngayhethan" v-model="txt_ngayhethan.Value" type="text" class="form-control"  v-mask="'99/99/9999'" :readonly="txt_ngayhethan.Readonly" :disabled="!txt_ngayhethan.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Giới tính</div>

                                    <div class="value">
                                        <div class="list-checks mart7">
                                            <div class="item">
                                                <div class="check-action">
                                                    <input v-model="txt_gioitinh.Value" type="radio" class="check" value="-1" :disabled="!txt_gioitinh.Enable">
                                                    <span class="name">Không</span>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="check-action">
                                                    <input v-model="txt_gioitinh.Value" type="radio" class="check" value="0" :disabled="!txt_gioitinh.Enable">
                                                    <span class="name">Nam</span>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="check-action">
                                                    <input v-model="txt_gioitinh.Value" type="radio" class="check" value="1" :disabled="!txt_gioitinh.Enable">
                                                    <span class="name">Nữ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Người đại diện</div>
                                    <div class="value">
                                        <input ref="txt_nguoiDD" v-model="txt_nguoiDD.Value" type="text" class="form-control" :disabled="!txt_nguoiDD.Enable" style="font-weight: bold;">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Chức vụ</div>

                                    <div class="value">
                                        <input v-model="txt_chucdanhDD.Value" type="text" class="form-control" :disabled="!txt_chucdanhDD.Enable" style="font-style: italic;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Địa chỉ NĐD</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="btnDiaChiNDD_Click" :disabled="!isEnableBtnDiaChiNDD" title="Tìm kiếm địa chỉ người đại diện">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input v-model="txt_diachiNDD.Value" ref="txt_diachiNDD" type="text" class="form-control " readonly :disabled="!txt_diachiNDD.Enable">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Ngày sinh</div>

                                    <div class="value">
                                        <input ref="txtNgaySN_NDD" type="text" v-model="txtNgaySN_NDD.Value" class="form-control format-date" v-mask="'99/99/9999'">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Quốc tịch</div>
                                    <div class="value">
                                        <div class="select-custom">
                                          <SelectExt v-model.trim="cbo_quoctich.Value"
                                                     :disabled="!cbo_quoctich.Enable"
                                                     :dataSource="dsQuocTich"
                                                     dataTextField="tenquoctich"
                                                     dataValueField="quoctich_id"/>
<!--                                            <select name="" id="" class="form-control">-->
<!--                                                <option value=""></option>-->
<!--                                            </select>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90">Dân tộc</div>

                                    <div class="value">
                                        <div class="select-custom">
                                          <SelectExt v-model.trim="cbo_dantoc.Value"
                                                     :disabled="!cbo_dantoc.Enable"
                                                     :dataSource="dsDanToc"
                                                     dataTextField="tendantoc"
                                                     dataValueField="dantoc_id"/>
<!--                                            <select name="" id="" class="form-control">-->
<!--                                                <option value=""></option>-->
<!--                                            </select>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key w100">Mã số thuế</div>
                                    <div class="value">
                                        <input v-model="txt_mstKH.Value" type="text" class="form-control" :disabled="!txt_mstKH.Enable" style="font-weight: bold;">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key w90"></div>

                                    <div class="value">
                                        <button class="btn btn-second fullw" @click="btnTTKhac_Click">
                                            Thông tin khác
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div id="tab3" class="tab-pane">

                        <div class="info-row">
                            <div class="key w100">Kiểu yêu cầu</div>
                            <div class="value">
                                <div class="select-custom">
                                    <SelectExt
                                    v-model.trim="cbo_kieukm_id.Value"
                                    :settings="{dropdownParent: $refs['cboKieuYCKM']}"
                                    :dataSource="dsKieuYCKM"
                                    dataTextField="ten"
                                    dataValueField="id"
                                    :disabled="!cbo_kieukm_id.Enable"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key w100">Khuyến mại</div>
                            <div class="value">
                                <div class="input-more-button">
                                    <button class="btn" :disabled="!isEnableBtnChonKhuyenMai" @click="btnChon_KhuyenMai_Click" title="Chọn khuyến mại">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <div class="select-custom">
                                        <SelectExt
                                        v-model.trim="cbo_khuyenmai_id.Value"
                                        :settings="{dropdownParent: $refs['cboKieuYCKM']}"
                                        :dataSource="dsKhuyenMai"
                                        dataTextField="ten_km"
                                        dataValueField="khuyenmai_id"
                                        :disabled="!cbo_khuyenmai_id.Enable"
                                        />
                                    </div>
                                </div>

                            </div>
                            <div class="value w30 nowrap">
                                    <button class="btn btn-second" @click="chiTiet" :disabled="!isEnableBtnChiTietKM">
                                        <span class="one-eye f16 inline vcenter"></span> Chi tiết
                                    </button>
                                </div>
                        </div>
                        <div class="row">
                            <div :class="[txt_TienTB.Visible ? 'col-sm-3' : 'col-sm-4', 'col-12']" style="box-sizing: content-box;">
                                <div class="info-row">
                                    <div class="key w100">{{thoiGianKM_text}} BĐKM</div>
                                    <div class="value w20 padt7">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chk_ThangBDKM.Value" :disabled="!chk_ThangBDKM.Enable">
                                            <span class="name"></span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <!-- <div class="select-custom">
                                            <select name="" id="" class="form-control">
                                                <option value=""></option>
                                            </select>
                                        </div> -->
                                        <!-- <input type="date" class="form-control" v-model="dtp_ThangBD.Value" :disabled="!dtp_ThangBD.Enable"> -->
                                        <ejs-datepicker v-if="is_tinhcuoc_ngay" class="form-control" v-model="dtp_ThangBD.Ngay" :enabled="dtp_ThangBD.Enable" :format="dateFormat" :max="maxDate"></ejs-datepicker>
                                        <ejs-datepicker v-else class="form-control" v-model="dtp_ThangBD.Value" :enabled="dtp_ThangBD.Enable" :format="monthFormat" :max="maxDate"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div :class="[txt_TienTB.Visible ? 'col-sm-3' : 'col-sm-4', 'col-12']">
                                <div class="info-row">
                                    <div class="key w100">{{thoiGianKM_text}} KTKM</div>
                                    <div class="value">
                                        <!-- <div class="select-custom">
                                            <select name="" id="" class="form-control" v-model="dtp_ThangKT.Value">
                                                <option value=""></option>
                                            </select>
                                        </div> -->
                                        <!-- <input type="date" class="form-control" v-model="dtp_ThangKT.Value" :disabled="!dtp_ThangKT.Enable"> -->
                                        <ejs-datepicker v-if="is_tinhcuoc_ngay" class="form-control" v-model="dtp_ThangKT.Ngay" :enabled="dtp_ThangKT.Enable" :format="dateFormat" :max="maxDate"></ejs-datepicker>
                                        <ejs-datepicker v-else class="form-control" v-model="dtp_ThangKT.Value" :enabled="dtp_ThangKT.Enable" :format="monthFormat" :max="maxDate"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div :class="[txt_TienTB.Visible ? 'col-sm-2' : 'col-sm-3', 'col-12']">
                                <div class="info-row">
                                    <div class="key w60">Tỷ lệ TB</div>
                                    <div class="value">
                                        <input type="number" class="form-control" v-model="txt_TyleTB.Value" :disabled="!txt_TyleTB.Enable">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 col-12" v-if="txt_TienTB.Visible">
                                <div class="info-row">
                                    <div class="key w60">Tiền TB</div>
                                    <div class="value">
                                        <input type="number" class="form-control" v-model="txt_TienTB.Value" :disabled="!txt_TienTB.Enable">

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 col-12" v-if="txt_CuocTB.Visible">
                                <div class="info-row">
                                    <div class="key w60">Cước TB</div>
                                    <div class="value">
                                        <input type="number" class="form-control" v-model="txt_CuocTB.Value" :disabled="!txt_CuocTB.Enable">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div :class="[txt_TienSD.Visible ? 'col-sm-3' : 'col-sm-4', 'col-12']" style="box-sizing: content-box;">
                                <div class="info-row">
                                    <div class="key w100">{{thoiGianKM_text}} BĐĐC</div>
                                    <div class="value w20 padt7">
                                        <div class="check-action">
                                            <input type="checkbox" class="check" v-model="chk_ThangBDDC.Value" :disabled="!chk_ThangBDDC.Enable">
                                            <span class="name"></span>
                                        </div>
                                    </div>
                                    <div class="value">
                                        <!-- <div class="select-custom">
                                            <select name="" id="" class="form-control">
                                                <option value=""></option>
                                            </select>
                                        </div> -->
                                        <!-- <input type="date" class="form-control" v-model="dtp_ThangBDDC.Value" :disabled="!dtp_ThangBDDC.Enable"> -->
                                        <ejs-datepicker v-if="is_tinhcuoc_ngay" class="form-control" v-model="dtp_ThangBDDC.Ngay" :enabled="dtp_ThangBDDC.Enable" :format="dateFormat" :max="maxDate"></ejs-datepicker>
                                        <ejs-datepicker v-else class="form-control" v-model="dtp_ThangBDDC.Value" :enabled="dtp_ThangBDDC.Enable" :format="monthFormat" :max="maxDate"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div :class="[txt_TienSD.Visible ? 'col-sm-3' : 'col-sm-4', 'col-12']">
                                <div class="info-row">
                                    <div class="key w100">{{thoiGianKM_text}} KTĐC</div>
                                    <div class="value">
                                        <!-- <div class="select-custom">
                                            <select name="" id="" class="form-control" v-model="dtp_ThangKTDC.Value">
                                                <option value=""></option>
                                            </select>
                                        </div> -->
                                        <!-- <input type="date" class="form-control" v-model="dtp_ThangKTDC.Value" :disabled="!dtp_ThangKTDC.Enable"> -->
                                        <ejs-datepicker v-if="is_tinhcuoc_ngay" class="form-control" v-model="dtp_ThangKTDC.Ngay" :enabled="dtp_ThangKTDC.Enable" :format="dateFormat" :max="maxDate"></ejs-datepicker>
                                        <ejs-datepicker v-else class="form-control" v-model="dtp_ThangKTDC.Value" :enabled="dtp_ThangKTDC.Enable" :format="monthFormat" :max="maxDate"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div :class="[txt_TienSD.Visible ? 'col-sm-2' : 'col-sm-3', 'col-12']">
                                <div class="info-row">
                                    <div class="key w60">Tỷ lệ SD</div>
                                    <div class="value">
                                        <input type="number" class="form-control" v-model="txt_TyleSD.Value" :disabled="!txt_TyleSD.Enable">

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 col-12" v-if="txt_TienSD.Visible">
                                <div class="info-row">
                                    <div class="key w60">Tiền SD</div>
                                    <div class="value">
                                        <input type="number" class="form-control" v-model="txt_TienSD.Value" :disabled="!txt_TienSD.Enable">

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 col-12" v-if="txt_CuocSD.Visible">
                                <div class="info-row">
                                    <div class="key w60">Cước SD</div>
                                    <div class="value">
                                        <input type="number" class="form-control" v-model="txt_CuocSD.Value" :disabled="!txt_CuocSD.Enable">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="box-move-select-table">
                                <div class="box-col">
                                    <div class="legend-title mart20">Khuyến mại đang tham gia</div>
                                    <div class="table-content">
                                        <DataGrid ref="gridCTKM" v-bind:columns="[
                                                {fieldName: 'ten_chitietkm', headerText: 'Tên CTKM', allowFiltering: true, allowSorting: true},
                                                {fieldName: 'thang_bd', headerText: 'Tháng BĐKM', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'ngay_bd', headerText: 'Ngày BĐKM', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_kt', headerText: 'Tháng KTKM', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'ngay_kt', headerText: 'Ngày KTKM', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_bddc', headerText: 'Tháng BĐĐC', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'ngay_bddc', headerText: 'Ngày BĐĐC', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_ktdc', headerText: 'Tháng KTĐC', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'ngay_ktdc', headerText: 'Ngày KTĐC', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_thoaitra', headerText: 'Tháng thoái', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'thang_huy', headerText: 'Tháng hủy', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'tyle_tb', headerText: 'Tỷ lệ TB', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'tyle_sd', headerText: 'Tỷ lệ SD', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'tien_tb', headerText: 'Tiền TB', allowFiltering: true, allowSorting: true, width: '100px'},
                                                {fieldName: 'tien_sd', headerText: 'Tiền SD', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'cuoc_sd', headerText: 'Giảm cước SD', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'cuoc_tb', headerText: 'Giảm cước TB', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'ngay_bd', headerText: 'Ngày BĐ', allowFiltering: true, allowSorting: false, width: '100px'},
                                                {fieldName: 'ngay_huy', headerText: 'Ngày Hủy', allowFiltering: true, allowSorting: false, width: '100px'}
                                            ]" panelDataHeight="200px"
                                            v-bind:dataSource="dsCTKM" :showFilter="true" @selectedRowChanged="gridCTKM_rowSelected" >
                                        </DataGrid>
                                    </div>
                                </div>
                                <div class="actions">
                                    <button class="btn" @click="btnPhai_Click" :disabled="!isEnableBtnPhai">
                                        <span class="-ap icon-chevron-thin-right"></span>
                                    </button>
                                    <button class="btn" @click="btnTrai_Click" :disabled="!isEnableBtnTrai">
                                        <span class="-ap icon-chevron-thin-left"></span>
                                    </button>
                                </div>
                                <div class="box-col">
                                    <div class="legend-title mart20">Khuyến mại thay đổi</div>
                                    <div class="table-content">
                                        <DataGrid ref="gridCTKMTD"
                                        :editSettings='{allowEditing: true, mode: "Batch"}'
                                        @cellSaved="onCellSavedCTKMTD"
                                        v-bind:columns="[
                                                {fieldName: 'chitietkm_id', headerText: '', visible: false, textAlign: 'center', allowEditing: false, isPrimaryKey: true},
                                                {fieldName: 'ten_yc', headerText: 'Kiểu YC', allowFiltering: true, allowSorting: true, allowEditing: false},
                                                {fieldName: 'ten_ctkm', headerText: 'Tên CTKM', allowFiltering: true, allowSorting: false, allowEditing: false},
                                                {fieldName: 'thang_bd', headerText: 'Tháng BĐKM', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'ngay_bd', headerText: 'Ngày BĐKM', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_kt', headerText: 'Tháng KTKM', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'ngay_kt', headerText: 'Ngày KTKM', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_bddc', headerText: 'Tháng BĐĐC', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'ngay_bddc', headerText: 'Ngày BĐĐC', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'thang_ktdc', headerText: 'Tháng KTĐC', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'ngay_ktdc', headerText: 'Ngày KTĐC', allowFiltering: true, allowSorting: false, visible: is_tinhcuoc_ngay, width: '100px'},
                                                {fieldName: 'tyle_tb', headerText: 'Tỷ lệ TB', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'tyle_sd', headerText: 'Tỷ lệ SD', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'tien_tb', headerText: 'Tiền TB', allowFiltering: true, allowSorting: true, allowEditing: false, width: '100px'},
                                                {fieldName: 'tien_sd', headerText: 'Tiền SD', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'cuoc_tb', headerText: 'Giảm cước SD', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'cuoc_sd', headerText: 'Giảm cước TB', allowFiltering: true, allowSorting: false, allowEditing: false, width: '100px'},
                                                {fieldName: 'ngay_huy', headerText: 'Ngày Hủy', allowFiltering: true, allowSorting: false, allowEditing: true, width: '100px'}
                                            ]" panelDataHeight="200px"
                                            v-bind:dataSource="dsCTKMThayDoi" :showFilter="true" @rowSelected="gridCTKMTD_rowSelected" >
                                        </DataGrid>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="col-sm-6 col-12">


                            </div> -->
                            <!-- <div class="col-sm-6 col-12">

                            </div> -->
                        </div>
                    </div>
                    <div id="tab4" class="tab-pane">
                      <div class="info-row">
                        <div class="key w80">Khu vực</div>
                        <div class="value">
                          <div class="input-more-button">
                            <button class="btn" @click="btnMaNVKD_Click" :disabled="!btnMaNVKD.Enable" title="Tìm kiếm khu vực">
                              <span class="-ap icon-more_horiz"></span>
                            </button>
                            <input ref="txt_khuvuc" v-model="txt_khuvuc.Value" type="text" class="form-control " readonly>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div id="tab5" class="tab-pane">
                      <div class="tab-content box-form">
                        <component v-for="(item, index) in items" :key="index" :ref="item.key"   v-bind:is="item" />
                      </div>
                    </div>
                    <div id="tab6" class="tab-pane">

                        <div class="info-row">
                            <div class="key w80">Khoản mục</div>
                            <div class="value">
                                <div class="select-custom">
                                    <treeselect
                                            v-model="cboKMTT"
                                            :options="treeSelectOptions"
                                            :multiple="true"
                                            placeholder="Chọn khoản mục thanh toán"
                                            />
                                </div>
                            </div>
                            <div class="value w30 nowrap">
                                <button class="btn btn-second" @click="btnThemKMTT">Thêm KMTT</button>
                            </div>
                        </div>
                        <div class="table-content" style="height:350px;">

                        <DataGrid ref="gridKMTT" @actionComplete="grid_ActionComplete" v-bind:columns="[
                                                                                {fieldName: 'tentat_kmtt', headerText: 'Khoản mục', allowFiltering: true, allowSorting: true},
                                                                                {fieldName: 'tien', headerText: 'Tiền', allowFiltering: true, allowSorting: false, allowEditing: true, editType: 'numericedit',type:'number',format:'N'},
                                                                                {fieldName: 'vat', headerText: 'VAT', allowFiltering: true, allowSorting: false, allowEditing: false, type:'number',format:'N'},
                                                                                {fieldName: 'tongtien', headerText: 'Tổng tiền', allowFiltering: true, allowSorting: false, allowEditing: false,type:'number',format: 'N'}
                                                                            ]" v-bind:dataSource="grcDanhSach" :allowSorting='true'
                            :allowFiltering='true' :editSettings="{ allowEditing: true, mode: 'Normal'}" :gridLines='1' :showFilter="true"
                            dataKeyField="hdtb_id">
                        </DataGrid>
                        </div>
                        <b-col md="12" sm="12">
                            <b-row>

                              <b-col md="4">
                                <div class="info-row">
                                  <div class="key w400" style="text-align: right;">Tiền</div>
                                  <div class="value">
                                    <input type="text" id="txtTienKM" v-model="txtTienKM" class="form-control" disabled style="color: blue; text-align: right;">
                                  </div>
                                </div>
                              </b-col>

                              <b-col md="4">
                                <div class="info-row">
                                  <div class="key w400" style="text-align: right;">Vat</div>
                                  <div class="value">
                                    <input type="text" id="txtVatKM" v-model="txtVatKM" class="form-control" disabled style="color: cadetblue; text-align: right;">
                                  </div>
                                </div>
                              </b-col>

                              <b-col md="4">
                                <div class="info-row">
                                  <div class="key w400" style="text-align: right;">Tổng tiền</div>
                                  <div class="value">
                                    <input type="text" id="txtTongTienKM" v-model="txtTongTienKM" class="form-control" disabled style="color: red; text-align: right;">
                                  </div>
                                </div>
                              </b-col>

                            </b-row>
                          </b-col>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách phiếu yêu cầu</div>
            <div class="table-content">
                <DataGrid ref="gridDsHDTB" v-bind:columns="[
                        {fieldName: 'ma_tb', headerText: 'Số máy/Acc', allowFiltering: true, allowSorting: true},
                        {fieldName: 'ten_tb', headerText: 'Tên thuê bao', allowFiltering: true, allowSorting: false},
                        {fieldName: 'diachi_tb', headerText: 'Địa chỉ thuê bao', allowFiltering: true, allowSorting: false},
                        {fieldName: 'diachi_ld', headerText: 'Địa chỉ lắp đặt', allowFiltering: true, allowSorting: false}
                    ]"
                    v-bind:dataSource="dsHDTB" :showFilter="true" dataKeyField="hdtb_id">
                </DataGrid>
            </div>

        </div>
    </div>
    <ModalCTKM ref="popupCTKM" idModal="popupTCTTTB" :tocdo_id="tocdo_id" :muccuoc_id="muccuoc_id" :dsKM_HDTB="dsKM_HDTB" :loaitb_id="loaitb_id" @chapNhan="chapNhan"></ModalCTKM>
    <ModalUploadAnh ref="popupUploadAnh" idModal="popupUploadAnh" :maTB="txt_maTB.Value"></ModalUploadAnh>
    <b-modal ref="ref-modal-xacnhan-xoa" centered title="Thông báo" size="sm">
        <span>Bạn thật sự muốn xóa hợp đồng không?</span>
        <template #modal-footer="{ cancel }">
             <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
             <b-button variant="primary" style="color: white" @click="okXoaHopDong">Đồng ý</b-button>
        </template>
   </b-modal>
    <ServiceOther ref="ServiceOther" idModal="ServiceOther" :dulieu="dulieuservice" ></ServiceOther>
    <ModalChonDiaChi modalId="popupDiaChi" :data="this.diachi" :showThongTinThem="showThongTinThem" :isStrictMode="isStrictMode" @xacnhan="getDiaChiTuFormDiaChi"/>
    <LoaiKH id="popupLoaiKH" :objLoaiKH="this.objLoaiKH" @getLoaiKHID="setLoaiKHID"></LoaiKH>
    <ChiTietNganhNghe id="popupChiTietNganhNghe" :objChiTietNganhNghe="objChiTietNganhNghe" @objTNC="getTNC"></ChiTietNganhNghe>
    <ThongTinKHBoSung id="popupThongTinKHBoSung" :objTTKHBoSung="objTTKHBoSung" @dsHDKH_SUB="getHDKH_SUB"></ThongTinKHBoSung>
    <PopupTimKiemNhanVienThuCuoc :input="diachiLD" @response-data="getNVTCProcess($event)" id="dlgTimKiemNVTC"></PopupTimKiemNhanVienThuCuoc>
    <b-modal id="popupComponents" size="xl" @shown="showModalComponent"
        hide-footer
             style="width:inherit"
        :title="popupComponentTitle"
        scrollable
        body-class="modal-body p-0 thaydoittkm">
        <component id="componentId" :is="popupComponent" ref="popupComponent" :dulieu="popupComponentData" v-bind="popupComponentAttr" :isPopup="true" @form-close="popupClosed" @acceptChangeCTV="popupClosed" @acceptChangeNGT="popupClosed"></component> <!--v-dynamic-events="popupComponentEvents"-->
    </b-modal>
    <ModalNganHang modalId="modal-nganhangnn" :data="nganHang" @chapNhan="btnChapNhanNganHang"></ModalNganHang>
    <SearchContractModal ref="modalSearchContract" @accept="acceptSearchContract" :loai_hd_id="LOAIHOPDONG.THAY_TT_KHAC" :trangthai_hd="1" :dichvu_id="0"/>
    <!-- <ejs-dialog :enableResize='true' :visible="false" ref="thongtinlienhe" :header='"Thông tin liên hệ"'
                showCloseIcon=true target=".main-wrapper" width='60%' height="800">
        <ThongTinLienHe :hdkh_id="hdkh_id" :khachhang_id="khachhang_id"/>
    </ejs-dialog> -->
    <!-- <ejs-dialog :enableResize='true' :visible="false" ref="thongtinemail" :header='"Thông tin Email"'
                showCloseIcon=true target=".main-wrapper" width='60%' height="800">
        <ThongTinEmail :hdkh_id="hdkh_id" :khachhang_id="khachhang_id" />
    </ejs-dialog> -->
    <ToaNha
        ref="dlgGanThueBaoVaoToaNha"
        :Ma_GD="txt_maKH.Value"
    />
    <!-- <ejs-dialog :enableResize='true' :visible="false" ref="GiaoPhieu"
                :header='"Giao phiếu điều hành thi công"' showCloseIcon=true target=".main-wrapper" width='60%'
                height="800">
      <GiaoPhieu ref="formgiaophieu"></GiaoPhieu>
    </ejs-dialog> -->
    <b-modal id="modal-Giaophieu" ref="modalGiaophieu" title="Giao phiếu điều hành thi công" centered
        hide-footer size="xl" modal-class="bss-modal"  @shown="modalGiaoPhieu_Show">
        <template #default="{ ok }">
        <GiaoPhieu ref="formGiaophieu" :isPopup="true"></GiaoPhieu>
        </template>
    </b-modal>
    <b-modal
        ref="dialogPayment"
        size="xl"
        body-class="modal-body p-0 modal-ThanhToan-ThayDoiThongTin"
        hide-footer
    >
        <ThanhToan :magiaodich="txt_magiaodich.Value" />
    </b-modal>
    <b-modal id="gankhuvuc"
             hide-footer
             hide-header
             hide-header-close
             body-class="modal-body p-0"
             size="xl">
      <Gankhuvuc @form-close="closeFormGanKhuVuc" @chapnhan="chapnhan_gankhuvuc" :dulieu="objGanKhuVuc" />
    </b-modal>
    <frmDSTBCungMa ref="frmDSTBCungMa"></frmDSTBCungMa>
    <ChonDonVi ref="popupChonDonVi" id="popupChonDonVi"></ChonDonVi>
    <InHoSo ref="popupInHoSo" :params="popupInHoSo_Param"/>
  <PopupThongTinUser ref="ThongTinUser" id="ThongTinUser"
                     :vkhachhang_id="khachhang_id"
                     :vhdkh_id="hdkh_id"
                     :ten_kh="txt_tenKH.Value"
                     :ma_kh="txt_maKH.Value">
  </PopupThongTinUser>
    <b-modal id="popupSearchAccount" size="xl"
             hide-footer
             hide-header
             hide-header-close
             body-class="modal-body p-0">
      <div class="popup-body">
        <SearchAccount :isPopup="true" @form-close="closeSearchAccount"></SearchAccount>
      </div>
    </b-modal>

    <b-modal id="popupChangeCustomerInfor" size="xl" dialog-class="modal-thaydoi-ttkh" title="Thay đổi thông tin khách hàng"
             hide-footer
             body-class="modal-body p-0">
      <div class="popup-body popup-thaydoi-ttkh">
        <ChangeCustomerInfor :isPopup="true" :dulieu="ChangeCustomerInfor_data" @form-close="closeChangeCustomerInfor"></ChangeCustomerInfor>
      </div>
    </b-modal>
</div>
