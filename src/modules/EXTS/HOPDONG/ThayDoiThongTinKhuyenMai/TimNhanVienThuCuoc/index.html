<b-modal
  :id="id"
  size="xl"
  no-close-on-backdrop
  body-class="modal-body p-0"
  hide-footer
  hide-header
  hide-header-close
  @shown="onShownModal"
  @hidden="onHiddenModal">
  <div class="modal-content popup-box form-nvtc">
    <div class="popup-header">
      <div class="title">
        <span class="icon one-notepad"></span> Tìm kiếm thông tin nhân viên thu cước
      </div>
      <div
        class="close -ap icon-close"
        data-dismiss="modal"
        @click="$bvModal.hide(id)">
      </div>
    </div>
    <div class="list-actions-top">
      <ul class="list">
        <li @click="tsbtnCapNhan_Click">
          <a href="javascript:void(0)" ><span class="icon -ap icon-ion-ios-checkmark"></span> Chấp nhận</a>
        </li>
        <li @click="tsbtnTimKiem_Click">
          <a href="javascript:void(0)" ><span class="icon one-search"></span> Tìm kiếm</a>
        </li>
      </ul>
    </div>
    <div class="popup-body">
      <div class="row">
        <div class="col-md-6 col-12">
          <div class="box-form">
            <div class="legend-title mart0">Thông tin địa danh</div>
            <div class="row">
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right block">
                      <div class="check-action">
                        <input type="checkbox" class="check"
                               v-model="cboQuan.Checked"
                               @change="chkQuan_CheckedChanged">
                        <span class="name">Quận</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
<!--                    <ejs-dropdownlist :change="onQuanChange" :enabled="chk_quan" :filtering='onFilteringQuan'-->
<!--                                      :allowFiltering="true" :dataSource='params.p_quan_options'-->
<!--                                      :fields="configs.fieldsQuan" v-model="params.p_quan"-->
<!--                                      :placeholder="'Chọn quận'"></ejs-dropdownlist>-->
                    <div class="select-custom" ref="cboQuan">
                      <SelectExt
                        v-model="cboQuan.Value"
                        :settings="{dropdownParent: $refs['cboQuan']}"
                        :dataSource="cboQuan.DataSource"
                        :disabled="!cboQuan.Enabled"
                        @change="cboQuan_SelectedIndexChanged"
                        dataTextField="TEN_QUAN"
                        dataValueField="QUAN_ID"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right block">
                      <div class="check-action">
                        <input type="checkbox" class="check"
                               v-model="cboPhuong.Checked"
                               :disabled="!chkPhuongEnable"
                               @change="chkPhuong_CheckedChanged">
                        <span class="name">Phường</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
<!--                    <div class="select-custom">-->
<!--                      <ejs-dropdownlist :change="onPhuongChange" :enabled="chk_phuong" :filtering='onFilteringPhuong'-->
<!--                                        :allowFiltering="true" :dataSource='params.p_phuong_options'-->
<!--                                        :fields="configs.fieldsPhuong" v-model="params.p_phuong"-->
<!--                                        :placeholder="'Chọn phường'"></ejs-dropdownlist>-->
<!--                    </div>-->
                    <div class="select-custom" ref="cboPhuong">
                      <SelectExt
                        v-model="cboPhuong.Value"
                        :settings="{dropdownParent: $refs['cboPhuong']}"
                        :dataSource="cboPhuong.DataSource"
                        :disabled="!cboPhuong.Enabled"
                        @change="cboPhuong_SelectedIndexChanged"
                        dataTextField="TEN_PHUONG"
                        dataValueField="PHUONG_ID"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right block">
                      <div class="check-action">
                        <input type="checkbox"
                               v-model="cboPho.Checked"
                               :disabled="!chkPhoEnable"
                               @change="chkPho_CheckedChanged"
                               class="check">
                        <span class="name">Phố</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
                    <div class="select-custom" ref="cboPho">
                      <SelectExt
                        v-model="cboPho.Value"
                        :settings="{dropdownParent: $refs['cboPho']}"
                        :dataSource="cboPho.DataSource"
                        :disabled="!cboPho.Enabled"
                        @change="cboPho_SelectedIndexChanged"
                        dataTextField="TEN_PHO"
                        dataValueField="PHO_ID"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right block">
                      <div class="check-action">
                        <input type="checkbox" class="check"
                               v-model="cboNgo.Checked"
                               :disabled="!chkNgoEnable"
                               @change="chkNgo_CheckedChanged">
                        <span class="name">Ấp</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
                    <div class="select-custom" ref="cboNgo">
                      <SelectExt
                        v-model="cboNgo.Value"
                        :settings="{dropdownParent: $refs['cboNgo']}"
                        :dataSource="cboNgo.DataSource"
                        :disabled="!cboNgo.Enabled"
                        @change="cboNgo_SelectedIndexChanged"
                        dataTextField="TEN_PHO"
                        dataValueField="PHO_ID"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right block">
                      <div class="check-action">
                        <input type="checkbox" class="check" :disabled="!chkKhuEnable" v-model="cboKhu.Checked" @change="chkKhu_CheckedChanged">
                        <span class="name">Khu</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
                    <div class="select-custom" ref="cboKhu">
                      <SelectExt
                        v-model="cboKhu.Value"
                        :settings="{dropdownParent: $refs['cboKhu']}"
                        :dataSource="cboKhu.DataSource"
                        :disabled="!cboKhu.Enabled"
                        @change="cboKhu_SelectedIndexChanged"
                        dataTextField="TEN_PHO"
                        dataValueField="PHO_ID"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right block">
                      <div class="check-action">
                        <input type="checkbox" class="check"
                               v-model="cboDacDiem.Checked"
                               @change="chkDacDiem_CheckedChanged"
                               :disabled="!chkDacDiemEnable">
                        <span class="name">Đặc điểm</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
                    <div class="select-custom" ref="cboDacDiem">
                      <SelectExt
                        v-model="cboDacDiem.Value"
                        :settings="{dropdownParent: $refs['cboDacDiem']}"
                        :dataSource="cboDacDiem.DataSource"
                        :disabled="!cboDacDiem.Enabled"
                        @change="cboDacDiem_SelectedValueChanged"
                        dataTextField="DACDIEM"
                        dataValueField="DACDIEM_ID"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="box-form">
            <div class="legend-title mart0">
              <div class="pull-left">
                Thông tin nhân viên thu cước
              </div>

              <div class="clearfix"></div>
            </div>
            <div class="info-row">
              <div class="key w80 nowrap">
                Đơn vị QL
              </div>
              <div class="value">
<!--                <div class="select-custom">-->
<!--                  <ejs-dropdownlist :showClearButton="true" :filtering='onFilteringDonViQL' :allowFiltering="true"-->
<!--                                    :dataSource='params.p_donviql_options' :fields="configs.fieldsDVQL"-->
<!--                                    v-model="params.p_donviql" :placeholder="'Chọn đơn vị quản lý'"></ejs-dropdownlist>-->
<!--                </div>-->
                <div class="select-custom" ref="cboDonVi">
                  <SelectExt
                    v-model="cboDonviQL.Value"
                    :dataSource="cboDonviQL.DataSource"
                    :disabled="!cboDonviQL.Enabled"
                    @change="cboDonviQL_SelectionChangeCommitted"
                    dataTextField="TEN_DV"
                    dataValueField="DONVI_ID"/>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    Mã NVTC
                  </div>
                  <div class="value">
                    <input v-model="txtMaNVTC" type="text" class="form-control">
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    Điện thoại
                  </div>
                  <div class="value">
                    <input v-model="txtSoDT" type="text" class="form-control">
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    Tên NVTC
                  </div>
                  <div class="value">
                    <input v-model="txtTenNVTC" type="text" class="form-control">
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-12">
                <div class="info-row">
                  <div class="key w80 nowrap">
                    <div class="check-right">
<!--                      <b-form-checkbox-->
<!--                        v-model="params.p_chk_httt"-->
<!--                        class="check"-->
<!--                        value='1'-->
<!--                        unchecked-value='0'-->
<!--                      >-->
<!--                        <span class="name">HTTT</span>-->
<!--                      </b-form-checkbox>-->
                      <div class="check-action" :class="{'disabled':cboHTTT.Disabled}">
                        <input type="checkbox"
                               v-model="cboHTTT.Checked"
                               @change="chkHTTT_CheckedChanged"
                               class="check">
                        <span class="name">HTTT</span>
                      </div>
                    </div>
                  </div>
                  <div class="value">
<!--                    <ejs-dropdownlist :enabled="chk_httt" :dataSource='params.p_httt_options'-->
<!--                                      :fields="configs.fieldsHTTT" v-model="params.p_httt"-->
<!--                                      :placeholder="'Chọn HTTT'"></ejs-dropdownlist>-->
                    <div class="select-custom" ref="cboHTTT">
                      <SelectExt
                        v-model="cboHTTT.Value"
                        :settings="{dropdownParent: $refs['cboHTTT']}"
                        :dataSource="cboHTTT.DataSource"
                        :disabled="!cboHTTT.Enabled"
                        @change="cboHTTT_SelectedValueChanged"
                        dataTextField="hinhthuc_tt"
                        dataValueField="httt_id"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="box-form">
        <div class="legend-title mart0">
          <div class="pull-left title">
            Danh sách nhân viên thu cước
          </div>
          <div class="pull-right">
            <div class="normal">
<!--              <b-form-checkbox-->
<!--                v-model="params.p_chk_locno"-->
<!--                class="check"-->
<!--                value='1'-->
<!--                unchecked-value='0'-->
<!--                :disabled="!configs.f_enable_chk_locno"-->
<!--              >-->
<!--                <span class="name">Lọc theo nhân viên thu nợ</span>-->
<!--              </b-form-checkbox>-->
              <div class="check-action">
                <input type="checkbox" class="check"
                       v-model="chkLocNVThuNo.Checked"
                       :disabled="!chkLocNVThuNo.Enabled"
                       @change="chkNVThuNo_CheckedChanged">
                <span class="name">Lọc theo nhân viên thu nợ</span>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="table-content">
          <DataGrid
            v-bind:columns="[
                {fieldName: 'ma_tuyenthu', headerText: 'Mã tuyến', allowFiltering: true},
                {fieldName: 'tentuyen', headerText: 'Tên tuyến', allowFiltering: true},
                {fieldName: 'mathe', headerText: 'Mã thẻ', allowFiltering: true},
                {fieldName: 'manv_tc', headerText: 'Mã nhân viên', allowFiltering: true},
                {fieldName: 'tennv_tc', headerText: 'Tên nhân viên', allowFiltering: true},
                {fieldName: 'so_dt', headerText: 'Điện thoại', allowFiltering: true},
                {fieldName: 'donvi_id', headerText: 'Mã đơn vị', allowFiltering: true},
                {fieldName: 'ten_dv', headerText: 'Tên đơn vị', allowFiltering: true},
                {fieldName: 'tuyenthu_id', headerText: 'ID tuyến', allowFiltering: true}
                ]"
            ref="dsNhanVien"
            v-bind:dataSource="ds"
            @selectedRowChanged="dsNV_selectedRowChanged"
            panelDataHeight="300px"
            :enablePagingServer="false"
            :showFilter="true"
            :allowPaging="true"
          >
          </DataGrid>
          <!--            :totalRecords="pageinfo.totalElement"-->
          <!--            :pageSize="pageinfo.maxSize"-->
          <!--            :pageIndex="pageinfo.page"-->
          <!--            height="100%"-->
          <!--            ref=gridDSNVThuCuoc-->
          <!--            @selectedRowChanged="RowNhanVienChanged"-->
          <!--            @pageChanged="NVThuCuocPageChangeHandler"-->
        </div>
      </div>
    </div>
  </div>
</b-modal>
