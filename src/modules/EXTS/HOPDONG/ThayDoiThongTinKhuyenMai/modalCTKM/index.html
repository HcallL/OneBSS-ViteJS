<b-modal class="modal" :id="idModal" size="xl" hide-header hide-footer @show="showModal">
    <div class="modal-dialog" style="width: 100%; max-width:1220px; margin: 0px">
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon -ap icon-apps text-main"></span>{{ title }}</div>
                <div class="close -ap icon-close" data-dismiss="modal" @click="$bvModal.hide(idModal)">
                </div>
            </div>
            <div class="list-actions-top">
                <ul class="list">

                    <li>
                        <a href="javascript:void(0)" @click="chapNhan">
                            <span class="icon nc-icon-glyph ui-1_check-circle-08"></span>Chấp nhận (F5)
                        </a>
                    </li>

                </ul>
            </div>
            <div class="popup-body">

                <!-- <div class="box-form"> -->
                    <div class="box-form">
                        <div class="legend-title">{{ tableDetail }}</div>
                        <div class="table-content">
                            <DataGrid ref="gridDsChiTietKM"
                            :editSettings='{allowEditing: true, mode: "Normal"}'
                            :enabledSelectFirstRow="false"
                            v-bind:columns="[
                                    {fieldName: 'chitietkm_id', headerText: 'Đăng ký', allowFiltering: true, allowSorting: true, visible: false, textAlign: 'center', allowEditing: false, isPrimaryKey: true},
                                    {fieldName: 'dangky', headerText: 'Đăng ký', allowFiltering: true, allowSorting: true, template: template, textAlign: 'center', width: '80px'},
                                    {fieldName: 'ten_ctkm', headerText: 'Chi tiết khuyến mại', allowFiltering: true, allowSorting: true, allowEditing: false},
                                    {fieldName: 'datcoc_csd', headerText: 'Tiền trả trước', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '160px'},
                                    {fieldName: 'tyle_sd', headerText: 'Tỷ lệ SD', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '140px'},
                                    {fieldName: 'tyle_tb', headerText: 'Tỷ lệ TB', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '140px'},
                                    {fieldName: 'tien_sd', headerText: 'Tiền SD', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '160px'},
                                    {fieldName: 'tien_tb', headerText: 'Tiền TB', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '160px'},
                                    {fieldName: 'cuoc_sd', headerText: 'Giảm cước SD', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '160px'},
                                    {fieldName: 'cuoc_tb', headerText: 'Giảm cước TB', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '160px'},
                                    {fieldName: 'tyle_kmld', headerText: 'Tỷ lệ KMLĐ', type: 'number', editType: 'numericedit', allowFiltering: true, allowSorting: false, allowEditing: true, width: '140px'},
                                    {fieldName: 'ngay_bd', headerText: 'Ngày BĐ', editType: 'datepickeredit', format: { type: 'date', format: 'dd/MM/yyyy' }, allowFiltering: true, allowSorting: false, allowEditing: true, visible: is_tinhcuoc_ngay, width: '140px'},
                                    {fieldName: 'ngay_kt', headerText: 'Ngày KT', editType: 'datepickeredit', format: { type: 'date', format: 'dd/MM/yyyy' }, allowFiltering: true, allowSorting: false, allowEditing: true, visible: is_tinhcuoc_ngay, width: '140px'},
                                    {fieldName: 'ngay_bddc', headerText: 'Ngày BĐĐC', editType: 'datepickeredit', format: { type: 'date', format: 'dd/MM/yyyy' }, allowFiltering: true, allowSorting: false, allowEditing: true, visible: is_tinhcuoc_ngay, width: '140px'},
                                    {fieldName: 'ngay_ktdc', headerText: 'Ngày KTĐC', editType: 'datepickeredit', format: { type: 'date', format: 'dd/MM/yyyy' }, allowFiltering: true, allowSorting: false, allowEditing: true, visible: is_tinhcuoc_ngay, width: '140px'},
                                    {fieldName: 'thang_bddc', headerText: 'Tháng BĐĐC', allowFiltering: true, allowSorting: false, allowEditing: true, width: '120px'},
                                    {fieldName: 'thang_bdkm', headerText: 'Tháng BĐKM', allowFiltering: true, allowSorting: false, allowEditing: true, width: '120px'},
                                    {fieldName: 'thang_bdtg', headerText: 'Tháng BĐTG', allowFiltering: true, allowSorting: false, allowEditing: true, width: '120px'},
                                    {fieldName: 'nhom_km', headerText: 'Nhóm KM', allowFiltering: true, allowSorting: false, allowEditing: false, width: '120px'},
                                    {fieldName: 'tyle_vat', headerText: 'Tỷ lệ VAT', allowFiltering: true, allowSorting: false, allowEditing: false, width: '120px'}
                                ]"
                                @actionComplete="actionComplete" 
                                v-bind:dataSource="dsChiTietKM" :showFilter="true"  @selectedItemsChanged="gridChiTietKM_rowSelected">
                            </DataGrid>
                        </div>
                    </div>
                    <div class="legend-title mart20">{{ content }}</div>
                    <div class="info-row">

                        <div class="value">
                            <textarea name="" class="form-control" style="height: 100px;resize: none;" v-model="txtDoiTuongKM"></textarea>
                        </div>
                    </div>
                <!-- </div> -->
            </div>

        </div>
    </div>
</b-modal>
