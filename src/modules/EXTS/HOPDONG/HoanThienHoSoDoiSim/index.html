<div>
    <div class="list-actions-top">
        <ul class="list">
            <li>
                <a href="javascript:void(0)"  @click="LayThongTin()">
                    <span class="icon one-file-attach"></span> Lấy TT (F5)
                </a>
            </li>
            <li>
                <a href="javascript:void(0)"  :class="{'disable-btn': isDisableCapNhat}"  @click="CapNhatThongTin()">
                    <span class="icon one-reload"></span>Cập nhật
                </a>
            </li>
            <li>
                <a href="javascript:void(0)"  @click="KICH_HOAT()" :class="{'disable-btn': isDisableKichHoat}">
                    <span class="icon one-file-arrow-up"></span> Kích hoạt
                </a>
            </li>
            <li>
                <a href="javascript:void(0)" @click="IN_QRCODE()" :class="{'disable-btn': isDisableInQRCode}">
                    <span class="icon one-print"></span> In QRcode
                </a>
            </li>
            <li>
                <a href="javascript:void(0)" @click="HOAN_CONG()" :class="{'disable-btn': isDisableHoanCong}">
                    <span class="icon one-hoancong"></span> Hoàn công
                </a>
            </li>
           
        </ul>
        <div class="more">
            <a href="#">
                <span class="icon -ap  icon-dots-three-vertical"></span>
            </a>
        </div>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="legend-title">Thông tin phiếu yêu cầu</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Mã GD</div>
                                <div class="input-more-button">
                                    <button class="btn">
                                        <span class="-ap icon-more_horiz"></span>
                                    </button>
                                    <input type="text"  v-model='dataSelected.ma_gd' class="form-control highlight" @keypress="magd_keypress">
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Mã HĐ</div>
                                <div class="value">
                                    <input type="text" class="form-control" v-model='dataSelected.ma_hd'>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Ngày yêu cầu</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <ejs-datepicker class="form-control bg-none bor0 fw6 text h24" :disabled='isDisable' 
                                        :value="date.dateVal" :format="date.dateFormat" v-model="dataSelected.ngay_yc"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="key w90">Ngày lập HĐ</div>
                                <div class="value">
                                    <div class="input-icon-right">
                                        <ejs-datepicker class="form-control bg-none bor0 fw6 text h24" :disabled='isDisable' 
                                        :value="date.dateVal" :format="date.dateFormat" v-model="dataSelected.ngay_lap_hd"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Dịch vụ VT</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt v-model="dataSelected.dichvu_id" :dataSource="dsDVVT"
                                         dataTextField="ten_dvvt"
                                         dataValueField="dichvuvt_id"
                                         @change ='dichVu_onChange' />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Loại hình TB</div>
                                <div class="value">
                                    <div class="select-custom">
                                        <SelectExt v-model="dataSelected.loaihinh_id" 
                                        :disabled='isDisable'
                                        :dataSource="dsLoaiHinh"
                                         dataTextField="loaihinh_tb"
                                        dataValueField="loaitb_id"
                                        @change="cbbLoaiHinh_Change"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Kiểu yêu cầu</div>
                        <div class="value">
                            <div class="select-custom">
                                <SelectExt v-model="dataSelected.kieuld_id" :dataSource="dsKieuLD"
                                 dataTextField="ten_kieuld"
                                dataValueField="kieuld_id"
                                @change="cbbKieuLD_Change"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="legend-title mart20">Thông tin thuê bao</div>
                    <div class="info-row">
                        <div class="key w90">Số máy</div>
                        <div class="value">
                            
                            <div class="input-more-button">
                                <button class="btn">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <input type="text" v-model='dataSelected.ma_tbao' class="form-control highlight" @keypress="matb_keypress">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Số sim mới</div>
                                <div class="value">
                            
                                    <input type="text" class="form-control" v-model='dataSelected.sim_moi'>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Số sim cũ</div>
                                <div class="value">
                            
                                    <input type="text" class="form-control" v-model='dataSelected.sim_cu'>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Tên TB</div>
                        <div class="value">
                    
                            <input type="text" class="form-control" v-model='dataSelected.ten_tbao'> 
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Địa chỉ TB</div>
                        <div class="value">
                    
                            <input type="text" class="form-control" v-model='dataSelected.diachi_tbao'>
                        </div>
                    </div>
                    <div class="legend-title mart20">Chi tiết tiền khoản mục</div>
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Tiền</div>
                                <div class="value">                   
                                    <input type="text" class="form-control tright" value="0" v-model='dataSelected.tien'>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w90">Vat</div>
                                <div class="value">
                    
                                    <input type="text" class="form-control tright" value="0" v-model='dataSelected.vat'>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="legend-title mart20">Thông tin khách hàng</div>
                    <div class="info-row">
                        <div class="key w90">Mã KH</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model='dataSelected.ma_kh'>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Tên KH</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model='dataSelected.ten_kh'>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Địa chỉ KH</div>
                        <div class="value">
                            <input type="text" class="form-control" v-model='dataSelected.diachi_kh'>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Ghi chú</div>
                        <div class="value">
                            <textarea name="" class="form-control" style="height: 130px;resize: none;" v-model='dataSelected.ghichu'></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách phiếu yêu cầu</div>

            <div class="table-content">
                <DataGrid ref="grid-thuebao" v-bind:columns="[
            {fieldName: 'ma_gd', headerText: 'Mã giao dịch', allowFiltering: true},
            {fieldName: 'ma_tb', headerText: 'Số máy', allowFiltering: true,customAttributes:{class:'font-weight-bold'}},
            {fieldName: 'ten_kieuld', headerText: 'Kiểu lắp đặt', allowFiltering: true},
            {fieldName: 'simcard', headerText: 'Số sim mới', allowFiltering: true,customAttributes:{class:'text-danger'}},
            {fieldName: 'simcu', headerText: 'Số sim cũ', allowFiltering: true,customAttributes:{class:'text-primary'}},
            {fieldName: 'ten_tb', headerText: 'Tên thuê bao', allowFiltering: true},
            {fieldName: 'diachi_kh', headerText: 'Địa chỉ thuê bao', allowFiltering: true},
            {fieldName: 'ngay_yc', headerText: 'Ngày yêu cầu', allowFiltering: true},
             ]"
              v-bind:dataSource="dsThueBao" 
              :showFilter="true"
              @selectedRowChanged="gridthuebao_selectedRowChanged"
              @pageChanged='gridthuebao_PageChanged'
              :allowPaging="true" 
              :totalRecords='dsThueBao.length'
              :enablePagingServer='false'></DataGrid>    
              
            </div>

        </div>
    </div>
    <QRcode modalId="popupTCTTTB" ref ='qr_code' />
</div>