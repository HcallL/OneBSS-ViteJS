<div class="frm-thaydoi-datcoc">
    <div class="list-actions-top">
        <ul class="list">
            <li :class="{'disable-btn': !btnNhapMoi.enabled}" @click="onClickBtnNhapMoi">
                <a href="javascript:void(0)">
                    <span class="icon one-file-plus"></span>Nhập mới
                </a>
            </li>
            <li :class="{'disable-btn': !btnGhiLai.enabled}" @click="onClickBtnGhiLai">
                <a href="javascript:void(0)">
                    <span class="icon one-save"></span>Ghi lại
                </a>
            </li>
            <li :class="{'disable-btn': !btnHuyBo.enabled}" @click="onClickBtnHuy">
                <a href="javascript:void(0)">
                    <span class="icon nc-icon-glyph ui-1_circle-remove"></span>Hủy
                </a>
            </li>
            <li :class="{'disable-btn': !btnXoa.enabled}" @click="onClickBtnXoa">
                <a href="javascript:void(0)">
                    <span class="icon one-trash"></span>Xóa
                </a>
            </li>
            <li :class="{'disable-btn': !btnThanhToan.enabled}" @click="onClickBtnThanhToan">
                <a href="javascript:void(0)">
                    <span class="icon nc-icon-glyph shopping_credit-card"></span>Thanh toán
                </a>
            </li>
            <li :class="{'disable-btn': !btnCapNhatDB.enabled}" @click="onClickBtnHoanThien">
                <a href="javascript:void(0)">
                    <span class="icon one-file-check"></span>Hoàn thiện
                </a>
            </li>
            <li>
                <a href="javascript:void(0)" @click="onClickBtnEmail">
                    <span class="icon one-email"></span>Email
                </a>
            </li>
            <li>
                <a href="javascript:void(0)" @click="onClickBtnLienHe">
                    <span class="icon nc-icon-glyph business_contacts"></span>Liên hệ
                </a>
            </li>
        </ul>
    </div>
    <div class="page-content">
        <div class="box-form">
            <div class="row">
                <div class="col-sm-8 col-12">

                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row">
                        <div class="key w20 nowrap fw6">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkCtv" @change="onChangeCheckCtv($event)">
                                <span class="name">Cộng tác viên</span>
                            </div>
                        </div>
                        <div class="value">
                            <bss-error-marker :has-error="error.ctvId">
                                <input type="text" class="form-control" v-model="tenCtv">
                            </bss-error-marker>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-12">
                    <div class="info-row">
                        <div class="key w20 nowrap fw6">
                            <div class="check-action">
                                <input type="checkbox" class="check" v-model="chkNguoiGt" @change="onChangeCheckNguoiGt($event)">
                                <span class="name">Người giới thiệu</span>
                            </div>
                        </div>
                        <div class="value">
                            <bss-error-marker :has-error="error.nguoiGtId">
                                <input type="text" class="form-control" v-model="tenNguoiGt">
                            </bss-error-marker>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid-stack-box">
            <Split :gutterSize="2">
                <SplitArea :size="50" style="padding-left: 0 !important;">
                    <div class="box-col box-form" id="boxLeft" style="height: 98%;">
                        <div class="legend-title">Thông tin thay đổi đặt cọc</div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key">Mã giao dịch</div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="onClickBtnLayMaGiaoDich">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <input type="text" class="form-control highlight" v-model.trim="maGiaoDich" v-on:keyup.enter="onEnterInputMaGiaoDich">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key">Ngày yêu cầu</div>
                                    <div class="value">
                                        <ejs-datepicker
                                            class="form-control bg-none bor0 fw6 text h24 tright"
                                            :style="{'padding-top': '7px'}"
                                            placeholder=""
                                            format="dd/MM/yyyy"
                                            :enabled="false"
                                            v-model="ngayYeuCau"></ejs-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key">Kiểu yêu cầu</div>
                                    <div class="value">
                                        <SelectExt
                                            v-model="kieuLdId"
                                            :dataSource="dsKieuLd"
                                            dataValueField="KIEULD_ID"
                                            dataTextField="TEN_KIEULD" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key">Mã khách hàng</div>
                                    <div class="value">
                                        <input type="text" class="form-control" readonly :value="maKhachHang">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key">Dịch vụ</div>
                                    <div class="value">
                                        <SelectExt
                                            v-model="dichVuId"
                                            :dataSource="dsDichVu"
                                            dataValueField="DICHVUVT_ID"
                                            dataTextField="TEN_DVVT" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key">Loại hình</div>
                                    <div class="value">
                                        <SelectExt
                                            v-model="loaiTbId"
                                            :dataSource="dsLoaiHinh"
                                            dataValueField="LOAITB_ID"
                                            dataTextField="LOAIHINH_TB" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key">Số máy/Acc <bss-required-marker /></div>
                                    <div class="value">
                                        <div class="input-more-button">
                                            <button class="btn" @click="onClickBtnTraCuuDanhBa">
                                                <span class="-ap icon-more_horiz"></span>
                                            </button>
                                            <bss-error-marker :has-error="error.maThueBao">
                                                <input ref="input-txt-somay" type="text" class="form-control highlight" v-model="maThueBao" v-on:keyup.enter="onEnterInputSoMay">
                                            </bss-error-marker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key">Tốc độ</div>
                                    <div class="value">
                                        <div class="select-custom">
                                            <input type="text" class="form-control" disabled :value="thuongHieu">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key">Tên khách hàng</div>
                            <div class="value">
                                <input type="text" class="form-control" readonly :value="tenKhachHangHienThi">
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key">Địa chỉ KH</div>
                            <div class="value">
                                <input type="text" class="form-control" readonly :value="diaChiKh">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-7 col-12">
                                <div class="info-row">
                                    <div class="key">Tháng thoái trả</div>
                                    <div class="value">
                                        <bss-error-marker :has-error="error.thangThoaiTra">
                                            <ejs-datepicker
                                                class="form-control bg-none bor0 fw6 text h24 tright"
                                                :style="{'padding-top': '7px'}"
                                                placeholder=""
                                                format="MM/yyyy"
                                                start="Year"
                                                depth="Year"
                                                :showClearButton="false"
                                                v-model="thangThoaiTra"
                                                :allowEdit="false"
                                                ></ejs-datepicker>
                                                <!-- :enabled="statusThangThoaiTra" -->
                                        </bss-error-marker>
                                    </div>

                                    <div class="key">Ngày thoái</div>
                                    <div class="value">
                                      <div class="input-icon-right">
                                      <ejs-datepicker
                                      v-model="dtpNgayThoai.value"
                                      :format="'dd/MM/yyyy'"
                                      :value="dtpNgayThoai.value"
                                      :showClearButton="false"
                                      :enabled="dtpNgayThoai.enabled"
                                      :min='minValNgayThoai'
                                      :max='maxValNgayThoai'
                                      :strictMode="strict"
                                      :allowEdit="false"
                                      class="form-control bg-none text tright"
                                      ></ejs-datepicker>
                                    </div>
                                  </div>
                                </div>
                            </div>
                            <div class="col-sm-5 col-12">
                                <div class="info-row">
                                    <div class="key">Tiền thoái trả <bss-required-marker /></div>
                                    <div class="value">
                                        <bss-error-marker :has-error="error.tienThoaiTra">
                                            <ejs-numerictextbox
                                                format="###,###.###"
                                                decimals="3"
                                                :validateDecimalOnType="true"
                                                :min="0"
                                                :showSpinButton="false"
                                                :enabled="!tsKhongSuaTienThoai"
                                                v-model="tienThoaiTra"></ejs-numerictextbox>
                                       </bss-error-marker>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="key">Ghi chú</div>
                            <div class="value">
                                <textarea class="form-control" style="height: 100px;resize: none;" v-model="ghiChu"></textarea>
                            </div>
                        </div>
                    </div>
                </SplitArea>
                <SplitArea :size="50" style="padding-right: 0 !important;">
                    <div class="box-col" id="boxRight" style="height: 98%;">
                        <div class="box-form">
                            <div class="legend-title">Danh sách đặt cọc/ trả trước thuê bao tham gia</div>
                            <div class="table-content">
                                <DataGrid
                                    class="table-result"
                                    v-bind:columns="[
                                        {fieldName: 'TEN', headerText: 'Tên KM/Công văn', allowFiltering: true, width: '130' },
                                        {fieldName: 'SOTHANG', headerText: 'Số tháng', allowFiltering: true, width: '130' },
                                        {fieldName: 'THANG_BD', headerText: 'Tháng BĐĐC', allowFiltering: true, width: '130' },
                                        {fieldName: 'THANG_KT', headerText: 'Tháng KTĐC', allowFiltering: true, width: '130' },
                                        {fieldName: 'THANG_KT_DC', headerText: 'Tháng thoái', allowFiltering: true, width: '130' },
                                        {fieldName: 'CUOC_DC_HT', headerText: 'Cước ĐC', textAlign: 'Right', allowFiltering: true, width: '130' },
                                        {fieldName: 'TIEN_TD_HT', headerText: 'Tiền TD', textAlign: 'Right', allowFiltering: true, width: '130' },
                                        {fieldName: 'TYLE_TB', headerText: 'Tỷ lệ TB', allowFiltering: true, width: '130' },
                                        {fieldName: 'TYLE_SD', headerText: 'Tỷ lệ SD', allowFiltering: true, width: '130' },
                                        {fieldName: 'TIEN_TB_HT', headerText: 'Tiền TB', textAlign: 'Right', allowFiltering: true, width: '130' },
                                        {fieldName: 'TIEN_SD_HT', headerText: 'Tiền SD', textAlign: 'Right', allowFiltering: true, width: '130' },
                                        {fieldName: 'TIEN_THOAI_HT', headerText: 'Tiền thoái', textAlign: 'Right', allowFiltering: true, width: '130' },
                                        {fieldName: 'TEN_NHOM', headerText: 'Nhóm ĐC', allowFiltering: true, width: '130' },
                                    ]"
                                    v-bind:dataSource="dsDatCoc"
                                    :showFilter="true"
                                    :allowPaging="true"
                                    :enablePagingServer="false"
                                    @selectedRowChanged="onSelectRowDatCoc"
                                    ref="dsDatCoc"></DataGrid>
                            </div>
                        </div>
                        <div class="box-form">
                            <div class="legend-title">Thông tin giảm cước</div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tháng BĐMG</div>
                                        <div class="value">
                                            <ejs-datepicker
                                                class="form-control bg-none bor0 fw6 text h24 tright"
                                                :style="{'padding-top': '7px'}"
                                                placeholder=""
                                                start="Year"
                                                depth="Year"
                                                format="MM/yyyy"
                                                v-model="thangMG"
                                                :showClearButton="false"
                                                :enabled="false"></ejs-datepicker>
                                                <!-- :enabled="thangMgEnabled" -->
                                        </div>
                                        <div class="key w90">Tháng KTMG</div>
                                        <div class="value">
                                        <div class="input-icon-right">
                                            <ejs-datepicker
                                            start="Year"
                                            depth="Year"
                                            v-model="dtpThangKTMG.value"
                                            format="MM/yyyy"
                                            :value="dtpThangKTMG.value"
                                            :showClearButton="false"
                                            :enabled="false"
                                        ></ejs-datepicker>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Số tháng MG</div>
                                        <div class="value">
                                            <input type="text" class="form-control tright" v-model="soThangMg" :disabled="!soThangMgEnabled">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                              <div class="col-sm-7 col-12">
                                  <div class="info-row">
                                      <div class="key w90">Ngày BĐMG</div>
                                      <div class="value">
                                        <div class="input-icon-right">
                                          <ejs-datepicker
                                          v-model="dtpNgayBD.value"
                                          :format="'dd/MM/yyyy'"
                                          :value="dtpNgayBD.value"
                                          :showClearButton="false"
                                          :enabled="false"
                                          :min='minValNgayBDMG'
                                          ></ejs-datepicker>
                                          <!-- :enabled="dtpNgayBD.enabled" -->
                                          <!-- :max='maxValNgayBDMG' -->
                                      </div>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-sm-5 col-12">
                                  <div class="info-row">
                                      <div class="key w90">Ngày KTMG</div>
                                      <div class="value">
                                        <div class="input-icon-right">
                                            <ejs-datepicker
                                            v-model="dtpNgayKT.value"
                                            :format="'dd/MM/yyyy'"
                                            :value="dtpNgayKT.value"
                                            :showClearButton="false"
                                            :enabled="dtpNgayKT.enabled"
                                            ></ejs-datepicker>
                                        </div>
                                    </div>
                                  </div>
                              </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tỷ lệ TB</div>
                                        <div class="value">
                                            <input type="text" class="form-control tright" v-model="tyLeTb" :disabled="!tyLeTbEnabled">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tỷ lệ SD</div>
                                        <div class="value">
                                            <input type="text" class="form-control tright" v-model="tyLeSd" :disabled="!tyLeSdEnabled">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-7 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tiền TB</div>
                                        <div class="value">
                                            <ejs-numerictextbox
                                                format="###,###.###"
                                                decimals="3"
                                                :validateDecimalOnType="true"
                                                :min="0"
                                                :showSpinButton="false"
                                                :enabled="tienTbEnabled"
                                                v-model="tienTb"></ejs-numerictextbox>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5 col-12">
                                    <div class="info-row">
                                        <div class="key w90">Tiền SD</div>
                                        <div class="value">
                                            <ejs-numerictextbox
                                                format="###,###.###"
                                                decimals="3"
                                                :validateDecimalOnType="true"
                                                :min="0"
                                                :showSpinButton="false"
                                                :enabled="tienSdEnabled"
                                                v-model="tienSd"></ejs-numerictextbox>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </SplitArea>
            </Split>
        </div>
        <div class="box-form">
            <div class="legend-title">Thông tin ưu đãi</div>
            <div class="row">
                <div class="col-sm-6 col-12">
                    <div class="info-row">
                        <div class="key w100">Nhóm đặt cọc</div>
                        <div class="value">
                            <SelectExt
                                v-model="nhomDatCocId"
                                :dataSource="dsNhomDatCoc"
                                dataValueField="NHOM_DATCOC_ID"
                                dataTextField="TEN_NHOM" />
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">Trả trước <bss-required-marker /></div>
                        <div class="value">
                            <div class="input-more-button">
                                <button class="btn" @click="onClickBtnChonKhuyenMai">
                                    <span class="-ap icon-more_horiz"></span>
                                </button>
                                <bss-error-marker :has-error="error.traTruocId">
                                    <SelectExt
                                        v-model="traTruocId"
                                        :dataSource="dsTraTruoc"
                                        dataValueField="KHUYENMAI_ID"
                                        dataTextField="TEN_KM" />
                                </bss-error-marker>
                            </div>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w100">Chi tiết <bss-required-marker /></div>
                        <div class="value">
                            <bss-error-marker :has-error="error.chiTietKhuyenMaiId">
                                <SelectExt
                                    v-model="chiTietKhuyenMaiId"
                                    :dataSource="dsChiTietKhuyenMai"
                                    dataValueField="CHITIETKM_ID"
                                    dataTextField="TEN_CTKM" />
                            </bss-error-marker>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12">
                    <div class="row">
                        <div class="col-sm-7 col-12">
                            <div class="info-row">
                                <div class="key w90">Tháng BĐĐC</div>
                                <div class="value">
                                    <ejs-datepicker
                                        class="form-control bg-none bor0 fw6 text h24 tright"
                                        :style="{'padding-top': '7px'}"
                                        placeholder=""
                                        start="Year"
                                        depth="Year"
                                        format="MM/yyyy"
                                        v-model="thangBD"
                                        :showClearButton="false"
                                        :enabled="thangBdEnabled"></ejs-datepicker>
                                </div>
                                <div class="key w90">Tháng KTĐC</div>
                                <div class="value">
                                    <ejs-datepicker
                                        class="form-control bg-none bor0 fw6 text h24 tright"
                                        :style="{'padding-top': '7px'}"
                                        placeholder=""
                                        format="MM/yyyy"
                                        v-model="dtpThangKT.value"
                                        :value="dtpThangKT.value"
                                        :showClearButton="false"
                                        :enabled="dtpThangKT.enabled"></ejs-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5 col-12">
                            <div class="info-row">
                                <div class="key w80">Số tháng</div>
                                <div class="value">
                                    <input type="text" class="form-control tright" v-model="soThang" :disabled="!soThangEnabled">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-7 col-12">
                          <div class="info-row">
                              <div class="key w90">Ngày BĐĐC</div>
                              <div class="value">
                                <div class="input-icon-right">
                                  <ejs-datepicker
                                  v-model="dtpNgayBDDC.value"
                                  :format="'dd/MM/yyyy'"
                                  :value="dtpNgayBDDC.value"
                                  :showClearButton="false"
                                  :enabled="dtpNgayBDDC.enabled"
                                  :min='minValNgayBDDC'
                                  :max='maxValNgayBDDC'
                                  :strictMode="strict"
                                  ></ejs-datepicker>
                              </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-5 col-12">
                          <div class="info-row">
                              <div class="key w80">Ngày KTĐC</div>
                              <div class="value">
                                <div class="input-icon-right">
                                    <ejs-datepicker
                                    v-model="dtpNgayKTDC.value"
                                    :format="'dd/MM/yyyy'"
                                    :value="dtpNgayKTDC.value"
                                    :showClearButton="false"
                                    :enabled="dtpNgayKTDC.enabled"
                                    ></ejs-datepicker>
                                </div>
                            </div>
                          </div>
                      </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Cước ĐC</div>
                        <div class="value">
                            <ejs-numerictextbox
                                format="###,###.###"
                                decimals="3"
                                :validateDecimalOnType="true"
                                :min="0"
                                :showSpinButton="false"
                                :enabled="cuocDcEnabled"
                                v-model="cuocDC"></ejs-numerictextbox>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="key w90">Tiền/tháng</div>
                        <div class="value">
                            <ejs-numerictextbox
                                format="###,###.###"
                                decimals="3"
                                :validateDecimalOnType="true"
                                :min="0"
                                :showSpinButton="false"
                                :enabled="tienTdEnabled"
                                v-model="tienTd"></ejs-numerictextbox>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-form">
            <div class="legend-title">Danh sách các thuê bao đăng ký thay đổi đặt cọc</div>
            <div class="table-content">
                <DataGrid
                    class="table-result"
                    v-bind:columns="[
                        {fieldName: 'MA_TB', headerText: 'Số máy/Acc', allowFiltering: true, width: '130' },
                        {fieldName: 'TEN_TB', headerText: 'Tên thuê bao', allowFiltering: true, width: '130' },
                        {fieldName: 'DIACHI_TB', headerText: 'Địa chỉ thuê bao', allowFiltering: true, width: '200' },
                        {fieldName: 'LOAIHINH_TB', headerText: 'Loại hình', allowFiltering: true, width: '130' },
                        {fieldName: 'THANG_THOAITRA_SHOW', headerText: 'Tháng thoái trả', allowFiltering: true, width: '130' },
                    ]"
                    v-bind:dataSource="dsHdtb"
                    :showFilter="true"
                    :allowPaging="true"
                    :enablePagingServer="false"
                    @selectedRowChanged="onSelectRowHdtb"></DataGrid>
            </div>
        </div>
    </div>
    <b-modal ref="ref-modal-xacnhan-xoa" centered title="Thông báo" size="sm">
        <span>Bạn thật sự muốn xóa hợp đồng?</span>
        <template #modal-footer="{ cancel }">
             <b-button variant="secondary" style="color: white" @click="cancel()">Hủy</b-button>
             <b-button variant="primary" style="color: white" @click="okXoaHopDong">Đồng ý</b-button>
        </template>
    </b-modal>
    <b-modal ref="popupSearchAccount" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0 frm-thaydoi-datcoc">
        <SearchAccount @form-close="acceptSearchAccount" :isPopup="true"/>
    </b-modal>
    <SearchContractModal ref="popupSearchContract" @accept="acceptSearchContract" :loai_hd_id="32" :trangthai_hd="1" />
    <b-modal ref="popupCongTacVien" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0 frm-thaydoi-datcoc">
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon one-notepad"></span> Chọn cộng tác viên</div>
            </div>
            <div class="popup-body" style="padding: 0;">
                <CongTacVien @PopUpCongTacVien_Thoat="xacNhanCongTacVien" @acceptChangeCTV="xacNhanCongTacVien" :isPopup="true"/>
            </div>
        </div>
    </b-modal>
    <b-modal ref="popupNguoiGioiThieu" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0 frm-thaydoi-datcoc">
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon one-notepad"></span> Chọn người giới thiệu</div>
            </div>
            <div class="popup-body" style="padding: 0;">
                <NguoiGioiThieu @PopUpNguoiGioiThieu_Thoat="xacNhanNguoiGioiThieu" @acceptChangeNGT="xacNhanNguoiGioiThieu" :isPopup="true"/>
            </div>
        </div>
    </b-modal>
    <b-modal ref="ref-chon-khuyen-mai" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0">
        <ChonKhuyenMai :dulieu="popupChonKhuyenMaiData" @form-close="onChonKhuyenMai"></ChonKhuyenMai>
    </b-modal>
    <b-modal id="frm-thaydoi-datcoc-modal-email" ref="ref-thongtin-email" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0">
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon one-notepad"></span> Thông tin Email</div>
                <div
                    class="close -ap icon-close"
                    data-dismiss="modal"
                    @click="$refs['ref-thongtin-email'].hide()">
                </div>
            </div>
            <div class="popup-body" style="padding: 0;">
                <ThongTinEmail :hdkh_id="hdkhId" :khachhang_id="khachHangId"></ThongTinEmail>
            </div>
        </div>
    </b-modal>
    <b-modal id="frm-thaydoi-datcoc-modal-lienhe" ref="ref-thongtin-lienhe" size="xl" hide-footer hide-header hide-header-close body-class="modal-body p-0">
        <div class="modal-content popup-box">
            <div class="popup-header">
                <div class="title"><span class="icon one-notepad"></span> Thông tin liên hệ</div>
                <div
                    class="close -ap icon-close"
                    data-dismiss="modal"
                    @click="$refs['ref-thongtin-lienhe'].hide()">
                </div>
            </div>
            <div class="popup-body" style="padding: 0;">
                <ThongTinLienHe :hdkh_id="hdkhId" :khachhang_id="khachHangId"></ThongTinLienHe>
            </div>
        </div>
    </b-modal>
    <!-- <FrmThanhToan ref="frmThanhToan"></FrmThanhToan> -->
    <ejs-dialog
        ref='thanhtoanDialog'
        header='THANH TOÁN HỢP ĐỒNG'
        target='#app .main-wrapper'
        width='100%'
        :enableResize='true'
        :visible='false'
        :position="{ X: 'center', Y: 'top' }"
        :showCloseIcon='true'
        :open="open_thanhToanPopUp"
        :close="close_thanhToanPopUp">
        <keep-alive>
            <div class="popupComponentPayment">
                <component :is="userComponentModule"  ref='thanhToanPopUp' :ispopup="true" :magiaodich='txtMaGDTT'  v-on="popupComponentEvts" />
            </div>
        </keep-alive>
    </ejs-dialog>
</div>
