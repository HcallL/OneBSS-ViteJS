<b-modal 
    ref="ref-modal" 
    size="xl" 
    no-close-on-backdrop
    hide-footer 
    hide-header 
    hide-header-close 
    body-class="modal-body p-0"
    @shown="onModalShown"
    @hidden="onModalHidden">
    <div class="modal-content popup-box chon-cong-soi-bi-suco">
        <div class="popup-header">
            <div class="title"><span class="icon one-notepad"></span> {{title}}</div>
            <div
                class="close -ap icon-close"
                data-dismiss="modal"
                @click="$refs['ref-modal'].hide()">
            </div>
        </div>
        <div class="list-actions-top">
            <ul class="list">
                <li v-show="allowSelect" @click="onClickBtnChon">
                    <a href="javascript:void(0)">
                        <span class="icon nc-icon-glyph ui-1_circle-add"></span>Chọn
                    </a>
                </li>
                <li @click="onClickBtnLamMoi">
                    <a href="javascript:void(0)">
                        <span class="icon one-reload"></span>Làm mới
                    </a>
                </li>
            </ul>
        </div>
        <div class="popup-body">
            <div class="row">
                <div class="col-sm-8 col-12">
                    <div class="box-form">
                        <div class="legend-title">
                            Cây thiết bị
                        </div>
                        <div v-show="allowSelect" class="value" ref="ref-select-timkiem">        
                            <SelectExt
                                :settings="{dropdownParent: $refs['ref-select-timkiem'], placeholder: 'Tìm kiếm'}"
                                v-model="idThietBiTimKiem" 
                                :dataSource="dsThietBi" 
                                dataValueField="THIETBI_ID"
                                dataTextField="TEN_TBI" />
                        </div>
                        <div class="tree-plus-ext" style="height: 370px; overflow: auto;">
                            <ejs-treeview 
                                ref="ref-treeview"
                                :fields='treeFields'
                                :showCheckBox='true'
                                :dataBound="onDataBound"
                                :nodeChecked="onNodeChecked"></ejs-treeview>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-12">
                    <div class="box-form">
                        <div class="legend-title">Danh sách cổng đã chọn</div>
                        <div class="list-tree-normal" style="overflow: auto;" :style="{height: allowSelect ? '412px' : '370px'}">
                            <a v-for="port in dsPort" href="javascript:void(0)" class="item">{{port}}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</b-modal>
